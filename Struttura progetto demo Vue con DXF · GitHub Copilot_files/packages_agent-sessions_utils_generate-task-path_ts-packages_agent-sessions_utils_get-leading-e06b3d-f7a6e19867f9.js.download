"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_agent-sessions_utils_generate-task-path_ts-packages_agent-sessions_utils_get-leading-e06b3d"],{4929:(e,t,n)=>{n.d(t,{V:()=>o});var r=n(74848),a=n(29731),i=n(34164);let s={metadata:"Metadata-module__metadata--ODMG0",secondary:"Metadata-module__secondary--1te4w",primary:"Metadata-module__primary--S8Orc",alignRight:"Metadata-module__alignRight--A1PHa"};function o({children:e,alignment:t,variant:n,...o}){return(0,r.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...o,className:(0,i.$)(s.metadata,"primary"===n?s.primary:s.secondary,"right"===t&&s.alignRight,o.className),children:e})}try{o.displayName||(o.displayName="ListItemMetadata")}catch{}},6224:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},6236:(e,t,n)=>{n.d(t,{E:()=>h});var r=n(74848),a=n(77430),i=n(96379),s=n(26607),o=n(27042),l=n(86877),c=n(5524),d=n(96540);let u={ownerDropdownOverlay:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",ownerListGroup:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",orgLabel:"SpacesOwnerDropdown-module__orgLabel--W_FiN",errorListItem:"SpacesOwnerDropdown-module__errorListItem--eq64y"};var m=n(29731);function h({onSelect:e,repoId:t}){let[n,h]=(0,d.useState)([]),[p,g]=(0,d.useState)(!1),[f,_]=(0,d.useState)(void 0),y=(0,d.useCallback)(t=>{_(t),e(t)},[e]),x=(0,d.useCallback)(()=>{h([]),g(!0)},[]);return(0,d.useEffect)(()=>{(async()=>{try{let e=t?`/github-copilot/chat/custom_copilots_owners?repo_id=${t}`:"/github-copilot/chat/custom_copilots_owners",n=await (0,i.lS)(e),r=await n.json(),a=r?.owners;if(!n.ok||!a)return void x();h(a),a[0]&&y(a[0])}catch{x()}})()},[x,y,t]),(0,r.jsx)("div",{className:"mt-2 mb-1",children:(0,r.jsxs)(l.A,{children:[(0,r.jsx)(l.A.Label,{required:!0,children:"Owner"}),(0,r.jsxs)(o.W,{children:[(()=>{let e=f?.name||"Choose an owner",t=f?(0,r.jsx)(a.r,{src:f.avatarUrl},f.avatarUrl):void 0;return(0,r.jsx)(o.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,r.jsx)(o.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:u.ownerDropdownOverlay,children:(0,r.jsx)(c.l,{children:(0,r.jsx)(c.l.Group,{className:u.ownerListGroup,children:(0,r.jsxs)(c.l,{selectionVariant:"single",children:[n&&n.map(e=>{let{name:t,avatarUrl:n,displayName:i}=e;return(0,r.jsxs)(c.l.Item,{selected:t===f?.name,onSelect:()=>y(e),children:[(0,r.jsx)(c.l.LeadingVisual,{children:(0,r.jsx)(a.r,{src:n})}),t,(0,r.jsx)(c.l.Description,{children:i})]},t)}),!n.length&&!p&&(0,r.jsx)(c.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),p&&(0,r.jsx)(c.l.Item,{disabled:!0,className:u.errorListItem,children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,r.jsx)(l.A.Caption,{children:f?"User"===f.type?(0,r.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink flex-items-center",children:[(0,r.jsx)(s.A,{className:"mr-1",children:"Private"}),(0,r.jsx)("span",{...(0,m.G)("owner-user-caption"),children:"Only you will be able to see this space."})]}):(0,r.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink",children:[(0,r.jsx)(s.A,{className:u.orgLabel,children:"Private"}),(0,r.jsx)("span",{...(0,m.G)("owner-org-caption"),children:"Only visible to you and organization admins. You can share it later."})]}):"Where we will store your space."})]})})}try{h.displayName||(h.displayName="SpacesOwnerDropdown")}catch{}},7730:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,s]=(0,a.useState)(!1);return n[0]!==e?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},10422:(e,t,n)=>{n.d(t,{gX:()=>nr,S4:()=>r_,OC:()=>v,cY:()=>ti,Uz:()=>rE});var r,a=n(74848),i=n(21728);function s(e){if(null==e)throw Error("Failed to load page data.")}var o=n(75202),l=n(38621),c=n(69726),d=n(34164),u=n(96540),m=n(17645),h=n(20622),p=n(53885),g=n(50129),f=n(65820),_=n(97665),y=n(97286);function x(){let e,t=(0,i.c)(2),{basePageDataUrl:n}=(0,g.Yu)(),r=`basePageDataURL:${n}`;return t[0]!==r?(e=[h.u.mergeBox,r],t[0]=r,t[1]=e):e=t[1],e}let S=(0,u.createContext)({mergeMethod:m.q$.MERGE,setMergeMethod:()=>{}});function v({children:e,defaultMergeMethod:t}){let[n,r]=(0,u.useState)(t),i=x(),s=(0,_.jE)();(0,u.useEffect)(()=>{s.invalidateQueries({queryKey:i})},[n]);let o=(0,u.useMemo)(()=>({mergeMethod:n,setMergeMethod:r}),[n]);return(0,a.jsx)(S.Provider,{value:o,children:e})}function E(){return(0,u.useContext)(S)}try{S.displayName||(S.displayName="MergeMethodContext")}catch{}try{v.displayName||(v.displayName="MergeMethodContextProvider")}catch{}function C(e){let t=e&&e.conditions.find(e=>m.nw.includes(e.type));if(t&&"conflicts"in t&&"isConflictResolvableInWeb"in t)return t}function w(e){return e?.conditions.filter(e=>m.iG.includes(e.type)&&"FAILED"===e.result)??[]}var b=n(35750),R=n(18150),N=n(85242),j=n(88243),I=n(16213),A=n(50467);let BaseSectionStatus=class BaseSectionStatus{get shouldRender(){return!1}get shouldConsiderStatus(){return this.shouldRender}get sectionStatus(){return"UNKNOWN"}get mergeBoxStatus(){return"UNKNOWN"}constructor(e,t,n){(0,A._)(this,"pullRequest",void 0),(0,A._)(this,"mergeRequirements",void 0),(0,A._)(this,"statusChecks",void 0),this.pullRequest=e,this.mergeRequirements=t,this.statusChecks=n}};let T=["MERGE_QUEUE","REQUIRED_STATUS_CHECKS"],k=["PULL_REQUEST_REPO_STATE","PULL_REQUEST_STATE"],M=["USER_CANNOT_PUSH"];var O=new WeakMap,L=new WeakMap,P=new WeakMap,D=new WeakMap;let BlockedSectionStatus=class BlockedSectionStatus extends BaseSectionStatus{get shouldRender(){return this.mergeRequirements?.state==="UNMERGEABLE"&&!this.pullRequest.isDraft&&0!==this.failingConditionsAndRules.length&&this.pullRequest.viewerCanUpdate}get sectionStatus(){return this.mergeRequirements?.state==="UNMERGEABLE"?"FAILED":"PASSED"}get mergeBoxStatus(){return this.sectionStatus}get failingConditionsAndRules(){return(0,b._)(this,O)||(0,N._)(this,O,[...(0,b._)(this,P),...(0,b._)(this,L),...(0,b._)(this,D)]),(0,b._)(this,O)}constructor(...e){super(...e),(0,R._)(this,L,{get:F,set:void 0}),(0,R._)(this,P,{get:U,set:void 0}),(0,R._)(this,D,{get:B,set:void 0}),(0,R._)(this,O,{writable:!0,value:void 0})}};function F(){return w(this.mergeRequirements).flatMap(e=>"ruleRollups"in e?e.ruleRollups:[]).filter(e=>e?.result==="FAILED"&&!T.includes(e.ruleType))}function U(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.jw.includes(e.type)&&"FAILED"===e.result)??[]).filter(e=>!k.includes(e.type))}function B(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.TW.includes(e.type)&&"FAILED"===e.result)??[]).flatMap(e=>"failedSubConditions"in e?e.failedSubConditions:[]).filter(e=>!M.includes(e.displayName))}let q={AwaitingReview:"AwaitingReview",ChangesRequested:"ChangesRequested",ChecksFailing:"ChecksFailing",ChecksPending:"ChecksPending",DraftReadyForReview:"DraftReadyForReview",DraftNotReadyForReview:"DraftNotReadyForReview",InMergeQueue:"InMergeQueue",MergeConflicts:"MergeConflicts",Mergeable:"Mergeable",NonactionableFailure:"NonactionableFailure",NonRequiredChecksUnsuccessful:"NonRequiredChecksUnsuccessful",UnableToMerge:"UnableToMerge",Unknown:"Unknown",Merged:"Merged",Closed:"Closed"};function $(e){return(e?.conditions.filter(e=>"FAILED"===e.result)??[]).map(e=>e.type)}function G(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":return!0;case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"SUCCESS":case"COMPLETED":case"NEUTRAL":case"REQUESTED":case"SKIPPED":case"_UNKNOWN_VALUE":return!1}}(e.state))}function W(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"_UNKNOWN_VALUE":case"CANCELLED":case"STALE":case"TIMED_OUT":return!0;case"SUCCESS":case"COMPLETED":case"EXPECTED":case"IN_PROGRESS":case"NEUTRAL":case"PENDING":case"QUEUED":case"REQUESTED":case"SKIPPED":case"WAITING":return!1}}(e.state))}function V(e){return void 0!==e&&e?.statusChecks.length!==0&&(!W(e)||!G(e))}function Q(e,t){return e?.state!=="UNMERGEABLE"&&!!t?.statusChecks.some(e=>!e.isRequired&&!function(e){switch(e){case"NEUTRAL":case"SUCCESS":case"SKIPPED":return!0;case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"COMPLETED":case"REQUESTED":case"_UNKNOWN_VALUE":return!1}}(e.state))||t?.statusRollup.combinedState==="PENDING_APPROVAL"}function H(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type),n=t?.ruleRollups?.find(e=>"PULL_REQUEST"===e.ruleType);if(!n||"FAILED"!==n.result)return[];let r=n.metadata;return r&&"failureReasons"in r&&r.failureReasons.map(e=>e.toUpperCase())||[]}function z(e){return $(e).includes("PULL_REQUEST_MERGE_CONFLICT_STATE")}let ChecksSectionStatus=class ChecksSectionStatus extends BaseSectionStatus{get shouldRender(){let e=this.statusChecks?.statusRollup;return(e?.summary.length??0)>0||e?.combinedState==="PENDING_APPROVAL"}get sectionStatus(){let e=C(this.mergeRequirements);return"DIRTY"===this.pullRequest.mergeStateStatus&&e?.result==="FAILED"?"PENDING_CONFLICTS":this.statusChecks?.statusRollup.combinedState??"UNKNOWN"}get mergeBoxStatus(){if("PENDING_APPROVAL"===this.sectionStatus)return"PENDING_USER_ACTION";let e=W(this.statusChecks),t=G(this.statusChecks),n=V(this.statusChecks),r=Q(this.mergeRequirements,this.statusChecks);return t||"PENDING"===this.sectionStatus||"PENDING_CONFLICTS"===this.sectionStatus?"PENDING":e?"FAILED":r?"NEUTRAL":n?"PASSED":"NEUTRAL"}};let ClosedOrMergedStateSectionStatus=class ClosedOrMergedStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"!==this.pullRequest.state}get sectionStatus(){return"OPEN"!==this.pullRequest.state?this.pullRequest.state:"UNKNOWN"}get mergeBoxStatus(){return"MERGED"===this.sectionStatus?"MERGED":"NEUTRAL"}};var K=new WeakMap,X=new WeakMap,Y=new WeakMap;let ConflictsSectionStatus=class ConflictsSectionStatus extends BaseSectionStatus{get shouldRender(){return("BLOCKED"!==this.pullRequest.mergeStateStatus||!!this.pullRequest.viewerCanUpdateBranch)&&!!this.conflictsCondition}get sectionStatus(){return this.conflictsCondition?(0,b._)(this,Y).call(this,this.pullRequest.advisoryWorkspace,this.pullRequest.mergeStateStatus,this.conflictsCondition,(0,b._)(this,X)):"PENDING"}get mergeBoxStatus(){switch(this.sectionStatus){case"NO_CONFLICTS":case"HAS_ADVISORY_WORKSPACE":return"PASSED";case"HAS_CONFLICTS":case"HAS_REBASE_CONFLICTS":case"OUT_OF_DATE":return"NEUTRAL";default:return"PENDING"}}get conflictsCondition(){return(0,b._)(this,K)||(0,N._)(this,K,C(this.mergeRequirements)),(0,b._)(this,K)}constructor(...e){super(...e),(0,R._)(this,X,{get:J,set:void 0}),(0,R._)(this,K,{writable:!0,value:void 0}),(0,R._)(this,Y,{writable:!0,value:(e,t,n,r)=>{if("BEHIND"===t)return"OUT_OF_DATE";if("UNKNOWN"===t)return"PENDING";if("FAILED"===n.result&&0===r.length)return"HAS_REBASE_CONFLICTS";if(!e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"NO_CONFLICTS";if(e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"HAS_ADVISORY_WORKSPACE";else if("DIRTY"===t&&"FAILED"===n.result)return"HAS_CONFLICTS";else if("BLOCKED"===t)return"OUT_OF_DATE";else return"PENDING"}})}};function J(){return this.conflictsCondition?.conflicts??[]}let DraftStateSectionStatus=class DraftStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"===this.pullRequest.state&&this.pullRequest.isDraft}get sectionStatus(){return"IS_DRAFT"}get mergeBoxStatus(){return"NEUTRAL"}};let MergeQueueSectionStatus=class MergeQueueSectionStatus extends BaseSectionStatus{get shouldRender(){return this.pullRequest.isInMergeQueue}get sectionStatus(){return"QUEUED"}get mergeBoxStatus(){return this.sectionStatus}};var Z=n(30459),ee=n(57352),et=n(55630),en=n(81960);let er={wrapper:"MergeBoxSectionHeader-module__wrapper--zMA1Y",wrapperCanExpand:"MergeBoxSectionHeader-module__wrapperCanExpand--AoekL",button:"MergeBoxSectionHeader-module__button--mkkJX",MergeBoxSectionHeading:"MergeBoxSectionHeader-module__MergeBoxSectionHeading--miHzz"},ea=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"":"rotate(180deg)";return s[0]!==c?(t={transition:"transform 0.15s ease-in-out",transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronUpIcon,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{ea.displayName||(ea.displayName="ExpandableSectionIcon")}catch{}let ei=e=>{let t,n,r,s,o,l,c,u,m,h,p=(0,i.c)(31),{title:g,subtitle:f,headerId:_,icon:y,expandableProps:x,children:S,rightSideContent:v}=e;if(x&&v)throw Error("MergeBoxSectionHeader: rightSideContent is not supported when expandableProps exist");p[0]!==x?(t=x||{},p[0]=x,p[1]=t):t=p[1];let{isExpanded:E,ariaLabel:C,onToggle:w}=t,b=x&&er.wrapperCanExpand,R=!x&&"flex-column flex-sm-row flex-items-center flex-sm-items-start flex-justify-between";return p[2]!==b||p[3]!==R?(n=(0,d.$)(er.wrapper,b,R),p[2]=b,p[3]=R,p[4]=n):n=p[4],p[5]!==y?(r=y&&(0,a.jsx)("div",{className:"mr-2 flex-shrink-0",children:y}),p[5]=y,p[6]=r):r=p[6],p[7]!==_||p[8]!==g?(s=(0,a.jsx)(en.A,{as:"h3",id:_,className:er.MergeBoxSectionHeading,children:g}),p[7]=_,p[8]=g,p[9]=s):s=p[9],p[10]!==f?(o=(0,a.jsx)("p",{className:"fgColor-muted mb-0 ",children:f}),p[10]=f,p[11]=o):o=p[11],p[12]!==S||p[13]!==s||p[14]!==o?(l=(0,a.jsxs)("div",{className:"flex-1",children:[s,o,S]}),p[12]=S,p[13]=s,p[14]=o,p[15]=l):l=p[15],p[16]!==v||p[17]!==l?(c=(0,a.jsxs)("div",{className:"d-flex flex-1 flex-column flex-sm-row gap-2",children:[l,v]}),p[16]=v,p[17]=l,p[18]=c):c=p[18],p[19]!==r||p[20]!==c?(u=(0,a.jsxs)("div",{className:"d-flex width-full",children:[r,c]}),p[19]=r,p[20]=c,p[21]=u):u=p[21],p[22]!==C||p[23]!==x||p[24]!==E||p[25]!==w?(m=x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{"aria-label":C,type:"button",className:er.button,onClick:w,"aria-expanded":E}),(0,a.jsx)("div",{className:"fgColor-muted pr-2 pt-2",children:(0,a.jsx)(ea,{isExpanded:!!E})})]}),p[22]=C,p[23]=x,p[24]=E,p[25]=w,p[26]=m):m=p[26],p[27]!==u||p[28]!==m||p[29]!==n?(h=(0,a.jsxs)("div",{className:n,children:[u,m]}),p[27]=u,p[28]=m,p[29]=n,p[30]=h):h=p[30],h};try{ei.displayName||(ei.displayName="MergeBoxSectionHeader")}catch{}let es={reviewAuthor:"ReviewerSection-module__reviewAuthor--ieHt5",reviewAuthorAnchor:"ReviewerSection-module__reviewAuthorAnchor--UMy9c",leadingVisual:"ReviewerSection-module__leadingVisual--_bMPf",reviewedIcon:"ReviewerSection-module__reviewedIcon--KucH5",reviewerGroupsContainer:"ReviewerSection-module__reviewerGroupsContainer--pZhlf",reviewText:"ReviewerSection-module__reviewText--JiCKY",reviewerActionBar:"ReviewerSection-module__reviewerActionBar--iT6ez",subtitleLink:"ReviewerSection-module__subtitleLink--J58lv"},eo={expandableContent:"MergeBoxExpandable-module__expandableContent--li_O1",expandableWrapper:"MergeBoxExpandable-module__expandableWrapper--Ejab0",isExpanded:"MergeBoxExpandable-module__isExpanded--PaOkp"},el=e=>{let t,n,r,s,o,l=(0,i.c)(13),{isExpanded:c,children:u}=e,m=void 0!==c&&c,h=m&&eo.isExpanded;l[0]!==h?(t=(0,d.$)(eo.expandableWrapper,h),l[0]=h,l[1]=t):t=l[1];let p=m?"visible":"hidden";l[2]!==p?(n={visibility:p},l[2]=p,l[3]=n):n=l[3];let g=m&&eo.isExpanded;l[4]!==g?(r=(0,d.$)(eo.expandableContent,g),l[4]=g,l[5]=r):r=l[5];let f=m&&u;return l[6]!==r||l[7]!==f?(s=(0,a.jsx)("div",{className:r,children:f}),l[6]=r,l[7]=f,l[8]=s):s=l[8],l[9]!==t||l[10]!==n||l[11]!==s?(o=(0,a.jsx)("div",{className:t,style:n,children:s}),l[9]=t,l[10]=n,l[11]=s,l[12]=o):o=l[12],o};try{el.displayName||(el.displayName="MergeBoxExpandable")}catch{}var ec=n(97174),ed=n(21373);let eu={groupHeadingButton:"ReviewGroupExpander-module__groupHeadingButton--S7IXP",expandableWrapper:"ReviewGroupExpander-module__expandableWrapper--Xlmef",expandableListView:"ReviewGroupExpander-module__expandableListView--hoVAr",isExpanded:"ReviewGroupExpander-module__isExpanded--SHz1f"};var em=n(40104);let eh=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"rotate(90deg)":"";return s[0]!==c?(t={transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronRightIcon,{size:12}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{eh.displayName||(eh.displayName="ExpandableGroupIcon")}catch{}let ep={[m.Qv.Approvals]:(0,a.jsx)(l.CheckIcon,{className:"fgColor-success",size:16}),[m.Qv.RequestedChanges]:(0,a.jsx)(l.FileDiffIcon,{className:"fgColor-danger",size:16}),[m.Qv.PendingReviewRequest]:(0,a.jsx)(l.PersonIcon,{size:16})};function eg(e){let t,n,r,s,o,l,c,m,h,p=(0,i.c)(32),{children:g,count:f,pullRequestId:_,reviewGroup:y}=e,{sendAnalyticsEvent:x}=(0,Z.s)(),[S,v]=(0,em.Fo)(`${_}:reviewersGroup:${y}Expanded`,!1),E=(0,u.useId)(),C=ep[y];if(p[0]!==f||p[1]!==y)t=f>1?y:y.substring(0,y.length-1),p[0]=f,p[1]=y,p[2]=t;else t=p[2];let w=`${f} ${t}`,b=S?`Collapse ${w} group`:`Expand ${w} group`;p[3]!==S?(n=()=>(0,a.jsx)(eh,{isExpanded:S}),p[3]=S,p[4]=n):n=p[4],p[5]!==S||p[6]!==y||p[7]!==x||p[8]!==v?(r=()=>{x(S?"reviewers_group.collapse":"reviewers_group.expand","MERGEBOX_REVIEWERS_GROUP_TOGGLE_BUTTON",{group:y}),v(!S)},p[5]=S,p[6]=y,p[7]=x,p[8]=v,p[9]=r):r=p[9],p[10]!==w?(s=(0,a.jsx)("span",{className:"ml-1",children:w}),p[10]=w,p[11]=s):s=p[11],p[12]!==E||p[13]!==S||p[14]!==C||p[15]!==b||p[16]!==n||p[17]!==r||p[18]!==s?(o=(0,a.jsxs)(ed.Q,{"aria-controls":E,"aria-expanded":S,"aria-label":b,className:eu.groupHeadingButton,variant:"invisible",size:"small",trailingVisual:n,onClick:r,children:[C," ",s]}),p[12]=E,p[13]=S,p[14]=C,p[15]=b,p[16]=n,p[17]=r,p[18]=s,p[19]=o):o=p[19];let R=S&&eu.isExpanded;p[20]!==R?(l=(0,d.$)(eu.expandableWrapper,R),p[20]=R,p[21]=l):l=p[21];let N=S&&g;return p[22]!==N?(c=(0,a.jsx)("div",{className:eu.expandableListView,children:N}),p[22]=N,p[23]=c):c=p[23],p[24]!==E||p[25]!==w||p[26]!==c||p[27]!==l?(m=(0,a.jsx)("div",{className:l,id:E,"aria-label":w,role:"group",children:c}),p[24]=E,p[25]=w,p[26]=c,p[27]=l,p[28]=m):m=p[28],p[29]!==m||p[30]!==o?(h=(0,a.jsxs)(a.Fragment,{children:[o,m]}),p[29]=m,p[30]=o,p[31]=h):h=p[31],h}try{eg.displayName||(eg.displayName="ReviewGroupExpander")}catch{}var ef=n(2970),e_=n(95378),ey=n(65964),ex=n(77430);let eS={listItem:"SectionListItem-module__listItem--cGdcZ"};var ev=n(5524),eE=n(72511),eC=n(86877),ew=n(4175),eb=n(15220),eR=n(94747),eN=n(48845),ej=n(9214),eI=n(10095);function eA({reviewer:e,reviewStatusText:t,hovercardUrl:n,reviewId:r,viewerCanDismissReviews:s,viewerCanReRequestReviews:o=!1}){let c=(0,u.useRef)(null),m=(0,u.useRef)(null),[g,f]=(0,u.useState)(!1),[y,S]=(0,u.useState)(null),[v,E]=(0,u.useState)(""),C=v.trim().length<1,[w,b]=(0,u.useState)(!1),R=[s?{key:"dismiss-review",render:()=>(0,a.jsx)(ev.l.Item,{onSelect:()=>{f(!0)},children:"Dismiss review"})}:null,o?{key:"re-request-review",render:()=>(0,a.jsx)(ev.l.Item,{onSelect:()=>I({reviewerLogin:e.login}),children:"Re-request review"})}:null].filter(e=>!!e),N=!!r&&R.length>0,j=async()=>{S(null),f(!1),b(!1),m.current?.focus()},{mutate:I}=function(e){let t,n,r,a,s,o=(0,i.c)(13);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l}=t,c=x(),d=(0,p.e)(h.u.reRequestReviewFromUser),u=(0,_.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eN.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},o[2]=d,o[3]=n):n=o[3],o[4]!==c||o[5]!==u?(r=()=>u.invalidateQueries({queryKey:c},{cancelRefetch:!1}),o[4]=c,o[5]=u,o[6]=r):r=o[6],o[7]!==l?(a=e=>{l?.(e)},o[7]=l,o[8]=a):a=o[8],o[9]!==n||o[10]!==r||o[11]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[9]=n,o[10]=r,o[11]=a,o[12]=s):s=o[12],(0,eR.n)(s)}({onError:()=>{}}),{mutate:A,isPending:T}=function(){let e,t,n,r=(0,i.c)(8),a=(0,p.e)(h.u.dismissReview),s=x(),o=(0,_.jE)();return r[0]!==a?(e=async e=>{let t=await (0,eN.q$)(a,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},r[0]=a,r[1]=e):e=r[1],r[2]!==s||r[3]!==o?(t=()=>o.invalidateQueries({queryKey:s},{cancelRefetch:!1}),r[2]=s,r[3]=o,r[4]=t):t=r[4],r[5]!==e||r[6]!==t?(n={mutationFn:e,onSuccess:t},r[5]=e,r[6]=t,r[7]=n):n=r[7],(0,eR.n)(n)}(),k=(0,u.useCallback)(()=>{T||(C&&b(!0),r&&!C&&A({reviewId:r,message:v},{onSuccess:()=>{j()},onError:e=>{S(e.message)}}))},[A,v,C,T,r]);if((0,u.useEffect)(()=>{function e(e){e.metaKey&&"Enter"===e.key&&g&&(e.preventDefault(),k())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[g,k]),!e)return null;let M=`${e.login} ${t.charAt(0).toLowerCase()+t.slice(1)}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.c,{className:eS.listItem,"aria-label":M,title:(0,a.jsx)(e_.ao,{href:e.url,value:e.login,containerClassName:"d-flex flex-items-center pt-0",headingClassName:es.reviewAuthor,anchorClassName:es.reviewAuthorAnchor,leadingBadge:(0,a.jsx)(ey.e,{className:(0,d.$)(es.leadingVisual,"mt-1"),children:(0,a.jsx)(ex.r,{alt:`${e.login}'s avatar image`,size:20,src:e.avatarUrl,"data-hovercard-url":n,className:"flex-shrink-0 ml-2"})}),children:(0,a.jsx)("span",{className:es.reviewText,children:t})}),secondaryActions:N?(0,a.jsx)(ej.L,{anchorRef:m,label:"review options",staticMenuActions:R,className:es.reviewerActionBar}):void 0}),g&&(0,a.jsxs)(eb.l,{title:"Dismiss review",onClose:j,role:"dialog",initialFocusRef:c,returnFocusRef:m,footerButtons:[{buttonType:"default",content:"Cancel",onClick:j},{buttonType:"danger",loading:T,loadingAnnouncement:"Dismissing review",content:"Dismiss review",onClick:k}],children:[y&&(0,a.jsxs)(eE.A,{className:"mb-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),y]}),(0,a.jsxs)(eC.A,{required:!0,className:"mb-2",children:[(0,a.jsx)(eC.A.Label,{children:(0,a.jsxs)("h4",{className:"f5",children:["Reason for dismissing ",e.login,"'s review"]})}),(0,a.jsx)(ew.Ay,{ref:c,onChange:e=>{b(!1),E(e.target.value)},value:v,className:"width-full height-full"}),C&&w&&(0,a.jsx)(eC.A.Validation,{variant:"error",children:"Please provide a reason for dismissing the review"}),(0,a.jsx)(eC.A.Caption,{children:"This reason will appear in the timeline so other users will know why the review was dismissed."})]})]})]})}try{eA.displayName||(eA.displayName="ReviewListItem")}catch{}var eT=n(25407);function ek(e){let t,n,r,s=(0,i.c)(13),{review:o,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}=e,{author:d}=o;if(!d)return null;let u=o.id,m=!o.authorCanPushToRepository;return s[0]!==o.onBehalfOf||s[1]!==o.state||s[2]!==m?(t=((e,t,n)=>{let r="";switch(e){case"APPROVED":r+="Approved these changes";break;case"CHANGES_REQUESTED":r+="Requested changes";break;case"COMMENTED":r+="Commented"}return n&&(r+=" with read-only permissions"),"APPROVED"===e&&t.length>0&&(r+=` for ${(e=>{if(0===e.length)return"";{if(1===e.length)return e[0];if(2===e.length)return e.join(" and ");let t=e.pop();return`${e.join(", ")}, and ${t}`}})(t)}`),r})(o.state,o.onBehalfOf,m),s[0]=o.onBehalfOf,s[1]=o.state,s[2]=m,s[3]=t):t=s[3],s[4]!==d.login?(n=(0,eT.dCN)({owner:d.login}),s[4]=d.login,s[5]=n):n=s[5],s[6]!==d||s[7]!==o.id||s[8]!==t||s[9]!==n||s[10]!==l||s[11]!==c?(r=(0,a.jsx)(eA,{reviewer:d,reviewId:u,reviewStatusText:t,hovercardUrl:n,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}),s[6]=d,s[7]=o.id,s[8]=t,s[9]=n,s[10]=l,s[11]=c,s[12]=r):r=s[12],r}try{ek.displayName||(ek.displayName="OpinionatedReviewRow")}catch{}function eM(e){let t,n,r,s=(0,i.c)(15),{opinionatedReviews:o,pullRequestId:l,reviewGroup:c,viewerCanDismissReviews:d,viewerCanReRequestReviews:u}=e;if(0===o.length)return null;let m=o.length,h=`list of ${c}`;if(s[0]!==o||s[1]!==d||s[2]!==u){let e;s[4]!==d||s[5]!==u?(e=e=>(0,a.jsx)(ek,{review:e,viewerCanDismissReviews:d,viewerCanReRequestReviews:u},`opinionated-review-from-${e?.author?.name}`),s[4]=d,s[5]=u,s[6]=e):e=s[6],t=o.map(e),s[0]=o,s[1]=d,s[2]=u,s[3]=t}else t=s[3];return s[7]!==h||s[8]!==t?(n=(0,a.jsx)(ec.u,{title:h,titleHeaderTag:"h3",children:t}),s[7]=h,s[8]=t,s[9]=n):n=s[9],s[10]!==o.length||s[11]!==l||s[12]!==c||s[13]!==n?(r=(0,a.jsx)(eg,{count:m,reviewGroup:c,pullRequestId:l,children:n}),s[10]=o.length,s[11]=l,s[12]=c,s[13]=n,s[14]=r):r=s[14],r}try{eM.displayName||(eM.displayName="OpinionatedReviewsGroup")}catch{}function eO(e){let t,n,r=(0,i.c)(9),{reviewRequest:s}=e,{reviewer:o}=s;if(!o)return null;if("TEAM"===o.type){let e;if(r[0]!==o.login||r[1]!==o.name){let t=o.login.split("/")[0]??"";e=(0,eT.Pmq)({owner:t,team:o.name}),r[0]=o.login,r[1]=o.name,r[2]=e}else e=r[2];t=e}else{let e;r[3]!==o.login?(e=(0,eT.dCN)({owner:o.login}),r[3]=o.login,r[4]=e):e=r[4],t=e}let l="was requested for review";return s.isCodeOwner&&(l="was requested for review as a codeowner"),r[5]!==t||r[6]!==o||r[7]!==l?(n=(0,a.jsx)(eA,{reviewer:o,reviewStatusText:l,hovercardUrl:t}),r[5]=t,r[6]=o,r[7]=l,r[8]=n):n=r[8],n}try{eO.displayName||(eO.displayName="RequestedReviewRow")}catch{}function eL(e){let t,n,r,s=(0,i.c)(10),{pendingRequestedReviews:o,pullRequestId:l,reviewGroup:c}=e;if(0===o.length)return null;let d=o.length,u=`list of ${c}`;return s[0]!==o?(t=o.map(eP),s[0]=o,s[1]=t):t=s[1],s[2]!==u||s[3]!==t?(n=(0,a.jsx)(ec.u,{title:u,titleHeaderTag:"h3",children:t}),s[2]=u,s[3]=t,s[4]=n):n=s[4],s[5]!==o.length||s[6]!==l||s[7]!==c||s[8]!==n?(r=(0,a.jsx)(eg,{count:d,reviewGroup:c,pullRequestId:l,children:n}),s[5]=o.length,s[6]=l,s[7]=c,s[8]=n,s[9]=r):r=s[9],r}function eP(e){return(0,a.jsx)(eO,{reviewRequest:e},`requested-review-from-${e?.reviewer?.name}`)}try{eL.displayName||(eL.displayName="PendingRequestedReviewsGroup")}catch{}let eD={APPROVED:"APPROVED",CHANGES_REQUESTED:"CHANGES_REQUESTED",REVIEW_REQUIRED:"REVIEW_REQUIRED",REVIEWED:"REVIEWED",REVIEW_REQUESTED:"REVIEW_REQUESTED"};function eF(e){let t,n,r,s,o,l,c,h,p,g,f,_,y,x,S,v,E,C,w,b,R,N,j,I,A,T,k,M=(0,i.c)(78),{consolidatedFailureReasons:O,helpUrl:L,latestOpinionatedReviews:P,numReviewsRequired:D,pendingRequestedReviews:F,pullRequestId:U,reviewsState:B,viewerCanDismissReviews:q,viewerCanReRequestReviews:$}=e;M[0]!==P||M[1]!==F?(t=[...P,...F],M[0]=P,M[1]=F,M[2]=t):t=M[2];let G=t.length>0,[W,V]=(0,u.useState)(G),{sendAnalyticsEvent:Q}=(0,Z.s)(),H=(0,u.useId)();M[3]!==P?(n=function(e){let t=[],n=[];for(let r of e)"APPROVED"===r.state&&t.push(r),"CHANGES_REQUESTED"===r.state&&n.push(r);return{approvedReviews:t,requestedChangesReviews:n}}(P),M[3]=P,M[4]=n):n=M[4];let{approvedReviews:z,requestedChangesReviews:K}=n,X=`${L}/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/requesting-a-pull-request-review`;M[5]!==X||M[6]!==O||M[7]!==P||M[8]!==D?(r=e=>{switch(e){case eD.REVIEW_REQUIRED:return`${((e,t)=>{if(t.includes("MORE_REVIEWS_REQUIRED"))if(1===e)return"At least 1 approving review is required";else if(0===e&&t.includes("LAST_PUSH_APPROVAL_REQUIRED"))return"An approval on the most recent push is required";else return`At least ${e} approving reviews are required`;return t.includes("CODE_OWNER_REVIEW_REQUIRED")?"Code owner review required":t.includes("SOC2_APPROVAL_PROCESS_REQUIRED")?"A review from a compliance team is required":""})(D,O)} by reviewers with write access.`;case eD.REVIEW_REQUESTED:return(0,a.jsxs)(a.Fragment,{children:["Review has been requested on this pull request. It is not required to merge."," ",(0,a.jsx)(ee.A,{inline:!0,href:X,className:(0,d.$)(es.subtitleLink,"position-relative"),children:"Learn more about requesting a pull request review."})]});default:return`${function(e){let t=e.filter(e=>e&&"CHANGES_REQUESTED"===e.state&&e.authorCanPushToRepository).length,n=e.filter(e=>e&&"APPROVED"===e.state&&e.authorCanPushToRepository).length;return 0===t&&0===n?"No applicable reviews submitted":[t>0?`${t} change${1===t?"":"s"} requested`:void 0,n>0?`${n} approving review${1===n?"":"s"}`:void 0].filter(Boolean).join(", ")}(P)} by reviewers with write access.`}},M[5]=X,M[6]=O,M[7]=P,M[8]=D,M[9]=r):r=M[9];let Y=r;M[10]!==Y?(s=Y(eD.APPROVED),M[10]=Y,M[11]=s):s=M[11],M[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eG,size:32}),M[12]=o):o=M[12],M[13]!==s?(l={heading:"Changes approved",subtitle:s,icon:o},M[13]=s,M[14]=l):l=M[14],M[15]!==Y?(c=Y(eD.CHANGES_REQUESTED),M[15]=Y,M[16]=c):c=M[16],M[17]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:e$,size:32}),M[17]=h):h=M[17],M[18]!==c?(p={heading:"Changes requested",subtitle:c,icon:h},M[18]=c,M[19]=p):p=M[19],M[20]!==Y?(g=Y(eD.REVIEW_REQUIRED),M[20]=Y,M[21]=g):g=M[21],M[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:eq,size:32}),M[22]=f):f=M[22],M[23]!==g?(_={heading:"Review required",subtitle:g,icon:f},M[23]=g,M[24]=_):_=M[24],M[25]!==Y?(y=Y(eD.REVIEWED),M[25]=Y,M[26]=y):y=M[26],M[27]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(et.A,{className:(0,d.$)(es.reviewedIcon,"fgColor-onEmphasis"),icon:eB,size:32}),M[27]=x):x=M[27],M[28]!==y?(S={heading:"Changes reviewed",subtitle:y,icon:x},M[28]=y,M[29]=S):S=M[29],M[30]!==Y?(v=Y(eD.REVIEW_REQUESTED),M[30]=Y,M[31]=v):v=M[31],M[32]===Symbol.for("react.memo_cache_sentinel")?(E=(0,a.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eU,size:32}),M[32]=E):E=M[32],M[33]!==v?(C={heading:"Review requested",subtitle:v,icon:E},M[33]=v,M[34]=C):C=M[34],M[35]!==_||M[36]!==S||M[37]!==C||M[38]!==l||M[39]!==p?(w={APPROVED:l,CHANGES_REQUESTED:p,REVIEW_REQUIRED:_,REVIEWED:S,REVIEW_REQUESTED:C},M[35]=_,M[36]=S,M[37]=C,M[38]=l,M[39]=p,M[40]=w):w=M[40];let J=w,en=J[B],er=J[B],ea=J[B];return M[41]!==J||M[42]!==W||M[43]!==B||M[44]!==Q||M[45]!==G?(b=G?{ariaLabel:J[B].heading,isExpanded:W,onToggle:()=>{Q(W?"reviewers_section.collapse":"reviewers_section.expand","MERGEBOX_REVIEWERS_SECTION_TOGGLE_BUTTON"),V(!W)}}:void 0,M[41]=J,M[42]=W,M[43]=B,M[44]=Q,M[45]=G,M[46]=b):b=M[46],M[47]!==H||M[48]!==en.heading||M[49]!==er.subtitle||M[50]!==ea.icon||M[51]!==b?(R=(0,a.jsx)(ei,{headerId:H,title:en.heading,subtitle:er.subtitle,icon:ea.icon,expandableProps:b}),M[47]=H,M[48]=en.heading,M[49]=er.subtitle,M[50]=ea.icon,M[51]=b,M[52]=R):R=M[52],M[53]!==z||M[54]!==U||M[55]!==q||M[56]!==$?(N=(0,a.jsx)(eM,{viewerCanDismissReviews:q,reviewGroup:m.Qv.Approvals,opinionatedReviews:z,pullRequestId:U,viewerCanReRequestReviews:$}),M[53]=z,M[54]=U,M[55]=q,M[56]=$,M[57]=N):N=M[57],M[58]!==U||M[59]!==K||M[60]!==q||M[61]!==$?(j=(0,a.jsx)(eM,{viewerCanDismissReviews:q,reviewGroup:m.Qv.RequestedChanges,opinionatedReviews:K,pullRequestId:U,viewerCanReRequestReviews:$}),M[58]=U,M[59]=K,M[60]=q,M[61]=$,M[62]=j):j=M[62],M[63]!==F||M[64]!==U||M[65]!==q?(I=(0,a.jsx)(eL,{reviewGroup:m.Qv.PendingReviewRequest,viewerCanDismissReviews:q,pendingRequestedReviews:F,pullRequestId:U}),M[63]=F,M[64]=U,M[65]=q,M[66]=I):I=M[66],M[67]!==N||M[68]!==j||M[69]!==I?(A=(0,a.jsxs)("div",{className:es.reviewerGroupsContainer,children:[N,j,I]}),M[67]=N,M[68]=j,M[69]=I,M[70]=A):A=M[70],M[71]!==W||M[72]!==A?(T=(0,a.jsx)(el,{isExpanded:W,children:A}),M[71]=W,M[72]=A,M[73]=T):T=M[73],M[74]!==H||M[75]!==R||M[76]!==T?(k=(0,a.jsxs)("section",{"aria-label":"Reviews","aria-describedby":H,className:"border-bottom color-border-subtle",children:[R,T]}),M[74]=H,M[75]=R,M[76]=T,M[77]=k):k=M[77],k}function eU(){return(0,a.jsx)(l.CheckIcon,{size:16})}function eB(){return(0,a.jsx)(l.CodeReviewIcon,{size:16})}function eq(){return(0,a.jsx)(l.XIcon,{size:16})}function e$(){return(0,a.jsx)(l.FileDiffIcon,{size:16})}function eG(){return(0,a.jsx)(l.CheckIcon,{size:16})}try{eF.displayName||(eF.displayName="ReviewerSection")}catch{}var eW=new WeakMap,eV=new WeakMap,eQ=new WeakMap,eH=new WeakMap,ez=new WeakMap,eK=new WeakMap;let ReviewerSectionStatus=class ReviewerSectionStatus extends BaseSectionStatus{get shouldRender(){return"DIRTY"!==this.pullRequest.mergeStateStatus&&"UNKNOWN"!==this.pullRequest.mergeStateStatus&&((0,b._)(this,ez).length>0||(0,b._)(this,eK).length>0||this.consolidatedFailureReasons.length>0)}get sectionStatus(){return e1(this.numReviewsRequired,(0,b._)(this,eH),(0,b._)(this,ez),this.consolidatedFailureReasons,(0,b._)(this,eK))}get mergeBoxStatus(){switch(this.sectionStatus){case eD.APPROVED:case eD.REVIEW_REQUESTED:case eD.REVIEWED:return"PASSED";case eD.CHANGES_REQUESTED:return"FAILED";case eD.REVIEW_REQUIRED:default:return"NEUTRAL"}}get numReviewsRequired(){let e=(0,b._)(this,eQ)?.flatMap(e=>e.requiredReviewers||[])||[];return e.length?Math.max(...e):0}get consolidatedFailureReasons(){if(!(0,b._)(this,eV)){let e=(0,b._)(this,eQ)?.flatMap(e=>e.failureReasons||[])||[];(0,N._)(this,eV,[...new Set(e)].filter(e0))}return(0,b._)(this,eV)}constructor(...e){super(...e),(0,R._)(this,eQ,{get:eX,set:void 0}),(0,R._)(this,eH,{get:eY,set:void 0}),(0,R._)(this,ez,{get:eJ,set:void 0}),(0,R._)(this,eK,{get:eZ,set:void 0}),(0,R._)(this,eW,{writable:!0,value:void 0}),(0,R._)(this,eV,{writable:!0,value:void 0})}};function eX(){return(0,b._)(this,eW)||(0,N._)(this,eW,function(e){let t=e&&e.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);return(t?.ruleRollups?.filter(e=>"PULL_REQUEST"===e.ruleType).map(e=>e.metadata)??[]).filter(e=>null!==e).filter(e=>"requiredReviewers"in e&&"requiresCodeowners"in e&&"failureReasons"in e).map(e=>{let t=e.failureReasons.map(e=>e.toUpperCase());return{requiredReviewers:e.requiredReviewers,requiresCodeowners:e.requiresCodeowners,failureReasons:t}})??[]}(this.mergeRequirements)),(0,b._)(this,eW)}function eY(){return((0,b._)(this,eQ)?.filter(e=>e.requiresCodeowners)||[]).length>0}function eJ(){return this.pullRequest.latestOpinionatedReviews}function eZ(){return this.pullRequest.pendingReviewRequests}let e0=e=>"CODE_OWNER_REVIEW_REQUIRED"===e||"SOC2_APPROVAL_PROCESS_REQUIRED"===e||"CHANGES_REQUESTED"===e||"MORE_REVIEWS_REQUIRED"===e||"LAST_PUSH_APPROVAL_REQUIRED"===e,e1=(e,t,n,r,a)=>0===r.length&&n.length>0&&(e>0||t)?eD.APPROVED:r.includes("CODE_OWNER_REVIEW_REQUIRED")||r.includes("SOC2_APPROVAL_PROCESS_REQUIRED")||r.includes("MORE_REVIEWS_REQUIRED")||r.includes("LAST_PUSH_APPROVAL_REQUIRED")?eD.REVIEW_REQUIRED:r.includes("CHANGES_REQUESTED")?eD.CHANGES_REQUESTED:0===e&&a.length>0&&0===n.length?eD.REVIEW_REQUESTED:eD.REVIEWED;var e2=new WeakMap,e3=new WeakMap,e5=new WeakMap,e4=new WeakMap,e6=new WeakSet;let MergeBoxStatusCalculator=class MergeBoxStatusCalculator{get overallStatus(){if("MERGED"===(0,b._)(this,e2).state)return"MERGED";if("CLOSED"===(0,b._)(this,e2).state)return"NEUTRAL";if((0,b._)(this,e2).isInMergeQueue)return"QUEUED";if((0,b._)(this,e2).isDraft)return"NEUTRAL";let e=Object.values(this.sections??[]).filter(e=>e.shouldConsiderStatus),t=e.some(e=>"FAILED"===e.mergeBoxStatus),n=e.every(e=>"PASSED"===e.mergeBoxStatus);return t&&(0,b._)(this,e2).viewerCanUpdate?"SOME_FAILED":n?"ALL_PASSED":"NEUTRAL"}get sections(){return(0,b._)(this,e4)}constructor(e,t,n){(0,I._)(this,e6),(0,R._)(this,e2,{writable:!0,value:void 0}),(0,R._)(this,e3,{writable:!0,value:void 0}),(0,R._)(this,e5,{writable:!0,value:void 0}),(0,R._)(this,e4,{writable:!0,value:void 0}),(0,N._)(this,e2,e),(0,N._)(this,e3,t),(0,N._)(this,e5,n),(0,N._)(this,e4,(0,j._)(this,e6,e7).call(this))}};function e7(){return{BlockedSection:new BlockedSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),ClosedOrMergedStateMergeBox:new ClosedOrMergedStateSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),ChecksSection:new ChecksSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),ConflictsSection:new ConflictsSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),DraftStateSection:new DraftStateSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),MergeQueueSection:new MergeQueueSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5)),ReviewerSection:new ReviewerSectionStatus((0,b._)(this,e2),(0,b._)(this,e3),(0,b._)(this,e5))}}var e8=n(70170),e9=n(40235),te=n(70263);function tt(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function tn(){return!document.hidden}function tr(){return!0}let ta=()=>(0,u.useSyncExternalStore)(tt,tn,tr);function ti({channels:e,refetchQuery:t}){let n=(0,u.useMemo)(()=>Object.values(e).filter(e=>null!==e),[e]),r=(0,te.A)(),[a,i]=(0,u.useState)(!1),s=ta(),o=(0,u.useMemo)(()=>(0,e8.n)(()=>{r()&&t()},2e3),[t,r]),l=(0,u.useMemo)(()=>e=>{s?window.setTimeout(()=>o(),e.wait||0):i(!0)},[s,o]);for(let e of((0,u.useEffect)(()=>{r()&&s&&a&&(i(!1),t())},[s,a,i,r,t]),n))(0,e9.x)(e,l)}var ts=n(65510);function to(e){let t,n=(0,i.c)(3),{pullRequestHeadSha:r}=e,{basePageDataUrl:a}=(0,g.Yu)(),s=`headSha:${r}`,o=`basePageDataURL:${a}`;return n[0]!==s||n[1]!==o?(t=[h.u.statusChecks,s,o],n[0]=s,n[1]=o,n[2]=t):t=n[2],t}function tl(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=to(t),c=(0,_.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,f.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,ts.U)(r)}var tc=n(42255),td=n(72579),tu=n(99906);let tm={branchName:"ClosedOrMergedStateMergeBox-module__branchName--YOSfM"};var th=n(4559);function tp(e){let t,n,r,s,o,c,m,g,f,y,S,v,E,C=(0,i.c)(60),{state:w,isCrossRepo:b,headRefName:R,headRepository:N,baseRepository:j,viewerCanDeleteHeadRef:I,viewerCanRestoreHeadRef:A,deprovisionableCodespaces:T}=e,[k,M]=(0,tc.A)(),O=(0,u.useRef)(null),[L,P]=(0,tc.A)(!1),D=T?T.count:0,F=A&&T&&D>0,U=D>1?"codespaces":"codespace";C[0]!==M?(t={onError:e=>{M(e)}},C[0]=M,C[1]=t):t=C[1];let{mutate:B,isPending:q}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.deleteHeadRef),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>{let e=new CustomEvent("head-ref-deleted");return document.dispatchEvent(e),d.invalidateQueries({queryKey:c},{cancelRefetch:!1})},s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);C[2]!==B||C[3]!==M?(n=()=>{M(void 0),B(void 0)},C[2]=B,C[3]=M,C[4]=n):n=C[4];let $=n;C[5]!==M||C[6]!==P?(r={onError:e=>{P(!1),M(e),O.current?.focus()}},C[5]=M,C[6]=P,C[7]=r):r=C[7];let{mutate:G,isPending:W}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.cleanupCodespaces),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(r);C[8]!==U||C[9]!==G||C[10]!==M||C[11]!==P?(s=()=>{M(void 0),G(void 0,{onSuccess:()=>{P(!1),setTimeout(()=>(0,th.i)(`Deleting ${U}.`),1e3)}})},C[8]=U,C[9]=G,C[10]=M,C[11]=P,C[12]=s):s=C[12];let V=s;C[13]!==M||C[14]!==P?(o=()=>{M(void 0),P(!0)},C[13]=M,C[14]=P,C[15]=o):o=C[15];let Q=o;C[16]!==R||C[17]!==N?(c=()=>N&&N.name?(0,eT.WJ9)({owner:N.ownerLogin,repo:N.name,branch:R}):"",C[16]=R,C[17]=N,C[18]=c):c=C[18];let H=c;C[19]!==F||C[20]!==w?(m=()=>F?"Branch successfully deleted":"MERGED"===w?"Pull request successfully merged and closed":"Closed with unmerged commits",C[19]=F,C[20]=w,C[21]=m):m=C[21];let z=m;C[22]!==q||C[23]!==$?(g=(0,a.jsx)(ed.Q,{loading:q,loadingAnnouncement:"Deleting branch",onClick:$,children:"Delete branch"}),C[22]=q,C[23]=$,C[24]=g):g=C[24];let K=g;C[25]!==U||C[26]!==Q?(f=(0,a.jsxs)(ed.Q,{ref:O,onClick:Q,children:["Delete ",U]}),C[25]=U,C[26]=Q,C[27]=f):f=C[27];let X=f;C[28]===Symbol.for("react.memo_cache_sentinel")?(y=(0,a.jsx)("span",{id:"js-pull-restorable",className:"d-none"}),C[28]=y):y=C[28];let Y=y,J=`${N?.url}/settings`;C[29]!==K||C[30]!==X||C[31]!==F||C[32]!==I?(S=()=>I?K:F?X:Y,C[29]=K,C[30]=X,C[31]=F,C[32]=I,C[33]=S):S=C[33];let Z=S;C[34]!==j?.name||C[35]!==j?.ownerLogin||C[36]!==D||C[37]!==U||C[38]!==T||C[39]!==H||C[40]!==R||C[41]!==b||C[42]!==J||C[43]!==F||C[44]!==w||C[45]!==I?(v=()=>{if("MERGED"===w)if(I)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the"," ",(0,a.jsx)(td.A,{className:(0,d.$)(tm.branchName,"d-inline wb-break-all"),href:H(),children:R})," ","branch can be safely deleted.",b&&(0,a.jsxs)(a.Fragment,{children:[" ","If you wish, you can also delete this fork of"," ",(0,a.jsx)("strong",{children:`${j?.ownerLogin}/${j?.name}`})," in the"," ",(0,a.jsx)(ee.A,{href:J,inline:!0,children:"settings"}),"."]})]});else if(F)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the ",D," ",U," for head branch can be safely deleted. You can also manage your codespaces in"," ",(0,a.jsx)(ee.A,{inline:!0,href:T.repositoryCodespacePath||"",children:"settings."})," "]});else return(0,a.jsx)(a.Fragment,{children:"You're all set \u2014 the branch has been merged."});return I?(0,a.jsxs)(a.Fragment,{children:["This pull request is closed, but the ",(0,a.jsx)(td.A,{href:H(),children:R})," ","branch has unmerged commits."]}):(0,a.jsx)(a.Fragment,{children:"This pull request is closed."})},C[34]=j?.name,C[35]=j?.ownerLogin,C[36]=D,C[37]=U,C[38]=T,C[39]=H,C[40]=R,C[41]=b,C[42]=J,C[43]=F,C[44]=w,C[45]=I,C[46]=v):v=C[46];let et=v;return C[47]!==D||C[48]!==U||C[49]!==W||C[50]!==q||C[51]!==k||C[52]!==Z||C[53]!==V||C[54]!==z||C[55]!==L||C[56]!==M||C[57]!==P||C[58]!==et?(E=(()=>{if(!k)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tu.A,{"aria-labelledby":"delete-codespaces-dialog-title",isOpen:L,returnFocusRef:O,onDismiss:()=>P(!1),children:[(0,a.jsx)(tu.A.Header,{id:"delete-codespaces-dialog-title",children:"Delete Codespace?"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("span",{children:["Are you sure you want to delete ",D," ",U," for the head branch?"]}),(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[(0,a.jsx)(ed.Q,{className:"mr-1",inactive:W,onClick:()=>{W||(P(!1),O.current?.focus())},children:"Cancel"}),(0,a.jsx)(ed.Q,{className:"mr-1",variant:"danger",loading:W,loadingAnnouncement:`Deleting ${U}.`,onClick:V,children:`Delete ${U}`})]})]})]}),(0,a.jsx)(ei,{title:z(),subtitle:et(),rightSideContent:Z()})]});{let e=404!==k.cause;return(0,a.jsx)(ei,{title:"Some codespaces could not be deleted."===k.message?`Couldn't delete ${U} `:"Couldn't update branch",subtitle:k.message,rightSideContent:e?(0,a.jsx)(ed.Q,{disabled:q,leadingVisual:l.SyncIcon,onClick:()=>M(void 0),children:"Try again"}):void 0})}})(),C[47]=D,C[48]=U,C[49]=W,C[50]=q,C[51]=k,C[52]=Z,C[53]=V,C[54]=z,C[55]=L,C[56]=M,C[57]=P,C[58]=et,C[59]=E):E=C[59],E}try{tp.displayName||(tp.displayName="ClosedOrMergedStateMergeBox")}catch{}var tg=n(87448);let tf={mergeabilityIcon:"MergeabilityIcon-module__mergeabilityIcon--CV3kc"};function t_(e){let t,n,r,s,o=(0,i.c)(9),{icon:l,ariaLabel:c,iconBackgroundColor:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)("d-flex flex-justify-center flex-items-center mr-2 rounded-2 height-2 width-2 position-absolute",tf.mergeabilityIcon),o[0]=t):t=o[0],o[1]!==u?(n={backgroundColor:u},o[1]=u,o[2]=n):n=o[2],o[3]!==c||o[4]!==l?(r=(0,a.jsx)(eI.A,{className:"fgColor-onEmphasis",icon:l,size:24,"aria-label":c}),o[3]=c,o[4]=l,o[5]=r):r=o[5],o[6]!==n||o[7]!==r?(s=(0,a.jsx)(tg.az,{className:t,sx:n,children:r}),o[6]=n,o[7]=r,o[8]=s):s=o[8],s}try{t_.displayName||(t_.displayName="MergeabilityIcon")}catch{}let ty={mergeboxLoading:"MergeBox-module__mergeboxLoading--OhnXd",mergePartialContainer:"MergeBox-module__mergePartialContainer--psYdf",mergeBoxAdjustBorders:"MergeBox-module__mergeBoxAdjustBorders--vMX1B"};var tx=n(26382);let tS={boundaryContainer:"MergeBoxErrorState-module__boundaryContainer--QgJ7i"};function tv(e){let t,n,r,s,o,c=(0,i.c)(7),{hideIcon:d}=e;return c[0]!==d?(t=!d&&(0,a.jsx)(t_,{icon:l.GitMergeIcon,ariaLabel:"Merge status cannot be loaded",iconBackgroundColor:"neutral.emphasis"}),c[0]=d,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(tx.E.Visual,{children:(0,a.jsx)(l.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),c[2]=n):n=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tx.E.Heading,{children:(0,a.jsx)("strong",{children:"Merge status cannot be loaded"})}),c[3]=r):r=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(tx.E,{border:!0,children:[n,r,(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsxs)(tx.E.Description,{children:["Try reloading the page, or if the problem persists"," ",(0,a.jsxs)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:[(0,a.jsx)("u",{children:"contact support"}),"."]})]})}),(0,a.jsx)(tx.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status "})]}),c[4]=s):s=c[4],c[5]!==t?(o=(0,a.jsxs)("div",{className:`position-relative ${tS.boundaryContainer}`,children:[t,s]}),c[5]=t,c[6]=o):o=c[6],o}try{tv.displayName||(tv.displayName="MergeBoxErrorState")}catch{}let tE={BlockedSectionMessage:"BlockedSection-module__BlockedSectionMessage--kuN11",CircleOcticon:"BlockedSection-module__CircleOcticon--XMh4s"};function tC(e){let t,n,r=(0,i.c)(4),{bgColor:s}=e;return r[0]!==s?(t=s?{backgroundColor:s}:void 0,r[0]=s,r[1]=t):t=r[1],r[2]!==t?(n=(0,a.jsx)(et.A,{icon:tw,size:32,style:t,className:tE.CircleOcticon}),r[2]=t,r[3]=n):n=r[3],n}function tw(){return(0,a.jsx)(l.AlertFillIcon,{size:16})}try{tC.displayName||(tC.displayName="AlertIcon")}catch{}var tb=n(73017);function tR(e){let t,n,r,s=(0,i.c)(5),{failingConditionsAndRules:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(tC,{bgColor:"var(--borderColor-danger-emphasis)"}),s[0]=t):t=s[0],s[1]!==o?(n=o.map(tN),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(r=(0,a.jsx)("section",{"aria-label":"Merging is blocked",className:"border-bottom borderColor-muted",children:(0,a.jsx)(ei,{title:"Merging is blocked",icon:t,children:(0,a.jsx)("ul",{className:"list-style-none",children:n})})}),s[3]=n,s[4]=r):r=s[4],r}function tN(e){return e&&"message"in e&&(0,a.jsxs)("li",{className:tE.BlockedSectionMessage,children:[(0,a.jsx)(tb.JR,{html:e.message||""})," ",(0,a.jsx)(tj,{ruleName:e.displayName})]},e.displayName)}function tj(e){let t=(0,i.c)(1),{ruleName:n}=e;if("UNVERIFIED_EMAIL"===n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:["You will be able to merge this pull request after you"," ",(0,a.jsx)(ee.A,{href:"/settings/emails",inline:!0,children:"verify your email address"}),"."]}),t[0]=e):e=t[0],e}return null}try{tR.displayName||(tR.displayName="BlockedSection")}catch{}try{tj.displayName||(tj.displayName="AdditionalMessaging")}catch{}let tI={ACTION_REQUIRED:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},CANCELLED:{icon:l.StopIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},COMPLETED:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},ERROR:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},EXPECTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},IN_PROGRESS:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},NEUTRAL:{icon:l.SquareFillIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},PENDING:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},QUEUED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},REQUESTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",backgroundColor:"none",isPending:!1,isSuccess:!1},SKIPPED:{icon:l.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STALE:{icon:l.MoonIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STARTUP_FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},SUCCESS:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},TIMED_OUT:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},WAITING:{icon:l.ClockIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},_UNKNOWN_VALUE:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1}},tA={FAILURE:"failing",NEUTRAL:"neutral",TIMED_OUT:"timed out",CANCELLED:"cancelled",STALE:"stale",PENDING:"pending",IN_PROGRESS:"in progress",REQUESTED:"requested",QUEUED:"queued",SKIPPED:"skipped",EXPECTED:"expected",SUCCESS:"successful",ALL:"all"};Object.keys(tI);let tT=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function tk(e,t){return tT.compare(e.displayName,t.displayName)}function tM(e,t,n,r){if(r?.statusChecksGrouping==="ungrouped")return{ALL:e};let a={};for(let e of Object.keys(t))a[e]=[];return e.reduce((e,r)=>{let a=n(r),i=Object.keys(t).find(e=>t[e].includes(a));if(i){let t=e[i];t&&t.push(r)}return e},a)}function tO(e,t,n){if(n?.statusChecksGrouping==="ungrouped")return{ALL:e.reduce((e,t)=>e+t.count,0)};let r=tM(e,t,e=>e.state,n);return Object.fromEntries(Object.keys(r).map(e=>{let t;return[e,(t=r[e],t?.reduce((e,t)=>e+t.count,0)??0)]}))}function tL(e){let t={};for(let n of e)t[n.state]=n.count;return{statusCheckCounts:JSON.stringify(t)}}var tP=n(72931);let tD={PASSED:"success",PENDING:"pending",PENDING_APPROVAL:"pending",PENDING_FAILED:"failure",PENDING_CONFLICTS:"pending",SOME_FAILED:"failure",FAILED:"failure"};function tF(){(0,tP.gd)()}function tU(){return(0,tP.iD)("merge-queue"),tB}function tB(){(0,tP.gd)()}var tq=n(27042),t$=n(26108);let tG={status_checks_grouping_preference:["grouped_by_status","ungrouped"]},tW={checksGroupHeadingButton:"ExpandedChecks-module__checksGroupHeadingButton--PCfYf",checksContainer:"ExpandedChecks-module__checksContainer--ZfNYB",containPaint:"ExpandedChecks-module__containPaint--TRfkR",expandableWrapper:"ExpandedChecks-module__expandableWrapper--aGEIv",expandableListView:"ExpandedChecks-module__expandableListView--QDJPW",isExpanded:"ExpandedChecks-module__isExpanded--pq8Vj",groupHeader:"ExpandedChecks-module__groupHeader--jZHKD",totalChecksCountText:"ExpandedChecks-module__totalChecksCountText--buDCm",checkSettingsButton:"ExpandedChecks-module__checkSettingsButton--MONZT"},tV={ErrorFlash:"ChecksGroup-module__ErrorFlash--WJCJc",ErrorOcticon:"ChecksGroup-module__ErrorOcticon--JPT2T"};function tQ(e){let t,n,r,s,o,c,m=(0,i.c)(30),{children:g,count:f,groupStatus:y,isToggleVisible:S,analyticsMetadata:v,showSettingsIcon:E,setUserPreferences:C,pullRequestId:w,userPreferences:b}=e;m[0]!==f||m[1]!==b?.statusChecksGrouping?(t=function(e){return b?.statusChecksGrouping==="ungrouped"?f>1?`${f} checks`:`${f} check`:`${f} ${e} check${f>1?"s":""}`},m[0]=f,m[1]=b?.statusChecksGrouping,m[2]=t):t=m[2];let R=t,[N,j]=(0,em.Fo)(`${w}:checksGroup:${y}Expanded`,!0),{sendAnalyticsEvent:I}=(0,Z.s)(),A=tA[y],T=(0,u.useId)(),k=N||!S,M=R(A),O=!S||N,[L,P]=(0,tc.A)(null);m[3]!==P?(n={onError:e=>{P(e.message)}},m[3]=P,m[4]=n):n=m[4];let{mutate:D}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.updateMergeBoxUserPreference),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async e=>{if(!e.preferenceName||!e.preference)throw Error("Preference name and value must be provided.");if(!(e.preferenceName in tG))throw Error("Invalid preference name.");if(!tG[e.preferenceName].includes(e.preference))throw Error("Invalid preference value.");let t=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t);return(0,eN.R)(t,n),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(n);return m[5]!==v||m[6]!==T||m[7]!==y||m[8]!==M||m[9]!==N||m[10]!==I||m[11]!==j||m[12]!==C||m[13]!==S||m[14]!==E||m[15]!==D||m[16]!==b?(r=S&&(0,a.jsxs)("div",{className:tW.groupHeader,children:[b?.statusChecksGrouping==="ungrouped"?(0,a.jsxs)("span",{className:(0,d.$)(tW.totalChecksCountText,"pl-2 text-semibold f6"),children:[" ",M," "]}):(0,a.jsx)(ed.Q,{"aria-controls":T,"aria-expanded":N,"aria-label":N?`Collapse ${M} group`:`Expand ${M} group`,className:tW.checksGroupHeadingButton,variant:"invisible",size:"small",trailingVisual:()=>(0,a.jsx)(eh,{isExpanded:N}),onClick:()=>{I(N?"checks_group.collapse":"checks_group.expand","MERGEBOX_CHECKS_GROUP_TOGGLE_BUTTON",{...v,group:y}),j(!N)},children:M}),E&&C&&(0,a.jsxs)(tq.W,{children:[(0,a.jsx)(tq.W.Anchor,{children:(0,a.jsx)(t$.K,{icon:l.GearIcon,variant:"invisible","aria-label":"Checks settings",className:tW.checkSettingsButton})}),(0,a.jsx)(tq.W.Overlay,{width:"auto",children:(0,a.jsxs)(ev.l,{selectionVariant:"single",children:[(0,a.jsx)(ev.l.Item,{onSelect:()=>{b?.statusChecksGrouping!=="grouped_by_status"&&(D({preferenceName:"status_checks_grouping_preference",preference:"grouped_by_status"}),C({...b,statusChecksGrouping:"grouped_by_status"}))},selected:b?.statusChecksGrouping==="grouped_by_status",children:"Group by status"}),(0,a.jsx)(ev.l.Item,{onSelect:()=>{b?.statusChecksGrouping!=="ungrouped"&&(D({preferenceName:"status_checks_grouping_preference",preference:"ungrouped"}),C({...b,statusChecksGrouping:"ungrouped"}))},selected:b?.statusChecksGrouping==="ungrouped",children:"No grouping"})]})})]})]}),m[5]=v,m[6]=T,m[7]=y,m[8]=M,m[9]=N,m[10]=I,m[11]=j,m[12]=C,m[13]=S,m[14]=E,m[15]=D,m[16]=b,m[17]=r):r=m[17],m[18]!==L?(s=L&&(0,a.jsxs)(eE.A,{variant:"danger",className:tV.ErrorFlash,children:[(0,a.jsx)(eI.A,{icon:l.StopIcon,className:tV.ErrorOcticon}),L]}),m[18]=L,m[19]=s):s=m[19],m[20]!==g||m[21]!==T||m[22]!==A||m[23]!==O||m[24]!==k?(o=O&&(0,a.jsx)("div",{className:(0,d.$)(tW.expandableWrapper,k&&tW.isExpanded),id:T,"aria-label":`${A} checks`,role:"group",children:(0,a.jsx)("div",{className:tW.expandableListView,children:(0,a.jsx)(ec.u,{title:`${A} checks`,titleHeaderTag:"h3",strictFocusZone:!1,children:g})})}),m[20]=g,m[21]=T,m[22]=A,m[23]=O,m[24]=k,m[25]=o):o=m[25],m[26]!==r||m[27]!==s||m[28]!==o?(c=(0,a.jsxs)("div",{children:[r,s,o]}),m[26]=r,m[27]=s,m[28]=o,m[29]=c):c=m[29],c}try{tQ.displayName||(tQ.displayName="ChecksGroup")}catch{}var tH=n(62935),tz=n(26607),tK=n(10436),tX=n(84098),tY=n(51880),tJ=n(4929);let tZ={spinnerWrapper:"StatusCheckRow-module__spinnerWrapper--AjdFv",spinnerInner:"StatusCheckRow-module__spinnerInner--KITho",staticSpinner:"StatusCheckRow-module__staticSpinner--zUcDB",checksSpinnerWrapper:"StatusCheckRow-module__checksSpinnerWrapper--HgboO",title:"StatusCheckRow-module__title--KooFt",titleHeader:"StatusCheckRow-module__titleHeader--Qx8JS",titleDescription:"StatusCheckRow-module__titleDescription--sgUXB",leadingVisual:"StatusCheckRow-module__leadingVisual--JETy5",requiredLabel:"StatusCheckRow-module__requiredLabel--cYbp_"};var t0=n(39619),t1=n(51213),t2=n(34665);let t3={statusCheckActionBar:"StatusCheckRowActionBar-module__statusCheckActionBar--Ipu3V"};var t5=n(68637),t4=n(69599),t6=n(79064),t7=n(53419);let t8="copilot-explain-error-action";function t9(e){let t,n,r,s=(0,i.c)(7),{failureContext:o,targetUrl:c,displayName:d}=e;s[0]!==d||s[1]!==o||s[2]!==c?(t=()=>{if((0,t4.G7)("copilot_chat_action_logs_redirect")){(0,t7.BI)("copilot.open_copilot_chat",{source:`element ${t8}`});let e=c?(0,t2.a)(c,!0,d):null,t=(0,t5.oo)(void 0,!0);t6.Jt.setEntrypointMessage(t,e?[e]:[]),window.location.href="/copilot";return}(0,t0.qR)({id:t8,intent:t1.wh.actionsAgent,content:(0,t5.oo)(o.jobId),references:[]})},s[0]=d,s[1]=o,s[2]=c,s[3]=t):t=s[3];let u=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(ev.l.LeadingVisual,{children:(0,a.jsx)(l.CopilotIcon,{})}),s[4]=n):n=s[4],s[5]!==u?(r=(0,a.jsxs)(ev.l.Item,{onSelect:u,children:["Explain error",n]}),s[5]=u,s[6]=r):r=s[6],r}function ne(e){let t,n,r,s=(0,i.c)(6),{targetUrl:o}=e,{sendAnalyticsEvent:c}=(0,Z.s)();s[0]!==c?(t=()=>{c("status_check_row_action_bar.view_details_click","VIEW_DETAILS_MENU_ITEM")},s[0]=c,s[1]=t):t=s[1];let d=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(ev.l.LeadingVisual,{children:(0,a.jsx)(l.ArrowRightIcon,{})}),s[2]=n):n=s[2],s[3]!==d||s[4]!==o?(r=(0,a.jsxs)(ev.l.LinkItem,{href:o,onClick:d,children:["View details",n]}),s[3]=d,s[4]=o,s[5]=r):r=s[5],r}function nt(e){let t,n=(0,i.c)(8),{copilotCheckRunFailureContext:r,targetUrl:s,displayName:o}=e;if(n[0]!==r||n[1]!==o||n[2]!==s){let e=[];if(null!=r){let t,i=()=>(0,a.jsx)(t9,{failureContext:r,targetUrl:s,displayName:o});n[4]!==i?(t={key:"copilot-explain-error",render:i},n[4]=i,n[5]=t):t=n[5],e.push(t)}if(s){let t;n[6]!==s?(t={key:"view-details",render:()=>(0,a.jsx)(ne,{targetUrl:s})},n[6]=s,n[7]=t):t=n[7],e.push(t)}t=(0,a.jsx)(ej.L,{label:"actions",staticMenuActions:e,className:t3.statusCheckActionBar}),n[0]=r,n[1]=o,n[2]=s,n[3]=t}else t=n[3];return t}try{t9.displayName||(t9.displayName="CopilotExplainErrorMenuItem")}catch{}try{ne.displayName||(ne.displayName="ViewDetailsMenuItem")}catch{}try{nt.displayName||(nt.displayName="StatusCheckRowActionBar")}catch{}function nn(e){let t,n,r=(0,i.c)(5),{iconColor:s,icon:o}=e;return r[0]!==s?(t={color:s},r[0]=s,r[1]=t):t=r[1],r[2]!==o||r[3]!==t?(n=(0,a.jsx)(tK.m4,{icon:o,sx:t}),r[2]=o,r[3]=t,r[4]=n):n=r[4],n}function nr(e){let t,n,r,s=(0,i.c)(5),{animated:o}=e,d=void 0===o||o;return s[0]!==d?(t=d?(0,a.jsx)(c.A,{size:"small"}):(0,a.jsx)(l.CircleIcon,{size:"small",className:tZ.staticSpinner}),s[0]=d,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{className:tZ.spinnerWrapper,children:(0,a.jsx)("div",{className:tZ.spinnerInner})}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsxs)("div",{className:tZ.checksSpinnerWrapper,children:[t,n]}),s[3]=t,s[4]=r):r=s[4],r}let na=(0,u.memo)(function(e){let t,n,r,s,o,l,c,m,h,p,g,f,_,y,x,S,v,E=(0,i.c)(51),{additionalContext:C,avatarUrl:w,avatarBackgroundColor:b,copilotCheckRunFailureContext:R,description:N,displayName:j,state:I,stateChangedAt:A,targetUrl:T,isRequired:k,reserveSpaceForRequiredBadge:M,reserveSpaceForActionBar:O,shouldAnimate:L}=e,P=void 0===L||L,D=tI[I];E[0]!==C?(t=C?C.charAt(0).toLowerCase()+C.slice(1):"",E[0]=C,E[1]=t):t=E[1];let F=`${j} ${t}`,U=M&&!O,[B,q]=(0,u.useState)(!1),$=(0,u.useRef)(null),G=(0,u.useRef)(null);E[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{let e=new ResizeObserver(()=>{if($.current&&G.current){let e=G.current.offsetWidth;q($.current.offsetWidth+31>e)}});return G.current&&e.observe(G.current),()=>{e.disconnect()}},E[2]=n):n=E[2],E[3]!==j?(r=[j],E[3]=j,E[4]=r):r=E[4],(0,u.useEffect)(n,r),E[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("div",{}),E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,d.$)(eS.listItem),E[6]=o):o=E[6],E[7]!==R||E[8]!==j||E[9]!==O||E[10]!==T?(l=O?(0,a.jsx)(nt,{copilotCheckRunFailureContext:R,targetUrl:T,displayName:j}):(0,a.jsx)(a.Fragment,{}),E[7]=R,E[8]=j,E[9]=O,E[10]=T,E[11]=l):l=E[11],E[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,d.$)(tZ.leadingVisual,"mt-2"),E[12]=c):c=E[12],E[13]!==P||E[14]!==I||E[15]!==D?(m="IN_PROGRESS"===I?(0,a.jsx)(nr,{animated:P}):(0,a.jsx)(nn,{icon:D.icon,iconColor:D.iconColor}),E[13]=P,E[14]=I,E[15]=D,E[16]=m):m=E[16],E[17]!==b||E[18]!==w||E[19]!==j?(h=w?(0,a.jsx)(ex.r,{alt:j,size:20,square:!0,src:w,className:"flex-shrink-0 ml-2 mr-2",style:b?{backgroundColor:b}:void 0}):(0,a.jsx)(tX.N,{size:20,square:!0,className:"flex-shrink-0 ml-2 mr-2"}),E[17]=b,E[18]=w,E[19]=j,E[20]=h):h=E[20],E[21]!==h||E[22]!==m?(p=(0,a.jsx)(tY.B,{children:(0,a.jsxs)(ey.e,{className:c,children:[m,h]})}),E[21]=h,E[22]=m,E[23]=p):p=E[23];let W=j??"",V=T??void 0,Q=B?`${j} ${C} ${N}`:void 0;E[24]!==Q?(g={title:Q},E[24]=Q,E[25]=g):g=E[25];let H=("IN_PROGRESS"===I||"QUEUED"===I)&&"text-italic";E[26]!==H?(f=(0,d.$)(tZ.titleDescription,H),E[26]=H,E[27]=f):f=E[27],E[28]!==C||E[29]!==I||E[30]!==A?(_=function({state:e,stateChangedAt:t,additionalContext:n}){switch(e){case"IN_PROGRESS":return(0,a.jsxs)("span",{children:["Started ",(0,a.jsx)(tH.A,{datetime:t})]});case"SKIPPED":return(0,a.jsxs)("span",{children:["Skipped ",(0,a.jsx)(tH.A,{datetime:t})]});case"QUEUED":return(0,a.jsx)("span",{children:"Queued"});default:return(0,a.jsx)("span",{children:n})}}({state:I,stateChangedAt:A,additionalContext:C}),E[28]=C,E[29]=I,E[30]=A,E[31]=_):_=E[31];let z=N&&`\u{2014} ${N}`;return E[32]!==f||E[33]!==_||E[34]!==z?(y=(0,a.jsxs)("span",{className:f,children:[_," ",z]}),E[32]=f,E[33]=_,E[34]=z,E[35]=y):y=E[35],E[36]!==W||E[37]!==V||E[38]!==g||E[39]!==y?(x=(0,a.jsx)(e_.ao,{containerClassName:tZ.title,headingClassName:tZ.titleHeader,value:W,href:V,linkProps:g,headingRef:$,headerContainerRef:G,children:y}),E[36]=W,E[37]=V,E[38]=g,E[39]=y,E[40]=x):x=E[40],E[41]!==k||E[42]!==U||E[43]!==M?(S=M?(0,a.jsx)(tJ.V,{children:k&&(0,a.jsx)("div",{className:(0,d.$)(tZ.requiredLabel,"flex-shrink-0 fgColor-default",U&&"pr-3"),children:(0,a.jsx)(tz.A,{children:"Required"})})}):(0,a.jsx)("div",{className:"px-5"}),E[41]=k,E[42]=U,E[43]=M,E[44]=S):S=E[44],E[45]!==F||E[46]!==p||E[47]!==x||E[48]!==S||E[49]!==l?(v=(0,a.jsxs)(ef.c,{title:s,"aria-label":F,className:o,secondaryActions:l,children:[p,x,S]}),E[45]=F,E[46]=p,E[47]=x,E[48]=S,E[49]=l,E[50]=v):v=E[50],v});try{nn.displayName||(nn.displayName="StatusIcon")}catch{}try{nr.displayName||(nr.displayName="CheckSpinner")}catch{}try{na.displayName||(na.displayName="StatusCheckRow")}catch{}let ni={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["ACTION_REQUIRED","EXPECTED","PENDING","QUEUED","REQUESTED","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],SKIPPED:["SKIPPED"],NEUTRAL:["NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]};function ns({pullRequestId:e,statusChecks:t,statusRollupSummary:n,mergeBoxUserPreferences:r}){let[i,s]=(0,u.useState)(r||null),o=(0,u.useMemo)(()=>t.sort(tk),[t]),l=tO(n,ni,i),c=tM(o,ni,e=>e.state,i),m=t.some(e=>e.isRequired),h=t.some(e=>e.copilotCheckRunFailureContext||!!e.targetUrl),p=Object.entries(l).reduce((e,[,t])=>t>0?e+1:e,0),g=t.length>0&&t.every(e=>e.state===t[0]?.state),f=p>1||i?.statusChecksGrouping==="ungrouped"&&!g;return(0,a.jsx)("div",{className:(0,d.$)(tW.checksContainer,tW.containPaint),children:Object.entries(l).filter(([,e])=>e>0).map(([t,r],o)=>{let l=r<50;return(0,a.jsx)(tQ,{count:r,groupStatus:t,isToggleVisible:f,pullRequestId:e,analyticsMetadata:tL(n),setUserPreferences:s,userPreferences:i,showSettingsIcon:i&&0===o,children:c[t]?.map(e=>e?(0,a.jsx)(na,{...e,shouldAnimate:l,reserveSpaceForActionBar:h,reserveSpaceForRequiredBadge:m},`${e.displayName}-${e.state}-${e.targetUrl}-${e.stateChangedAt}`):null)},t)})})}try{ns.displayName||(ns.displayName="ExpandedChecksList")}catch{}let no={iconWrapper:"StatusCheckStatesIcon-module__iconWrapper--LPiWu",icon:"StatusCheckStatesIcon-module__icon--trJdb","icon-animate":"StatusCheckStatesIcon-module__icon-animate--U9a0b"},nl={PASSING:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32}),FAILING:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.XIcon,{size:16}),className:"bgColor-danger-emphasis fgColor-onEmphasis",size:32})},nc={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["_UNKNOWN_VALUE","EXPECTED","QUEUED","PENDING","WAITING","REQUESTED","ACTION_REQUIRED","IN_PROGRESS"],SKIPPED:["SKIPPED","NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]},nd={length:1e3,delay:0},nu={FAILURE:"var(--fgColor-danger)",SUCCESS:"var(--fgColor-success)",PENDING:"var(--fgColor-attention)",SKIPPED:"var(--fgColor-neutral)"},nm=2*Math.PI*44,nh={gapPercent:5,strokeWidth:12,size:32,circleSize:100,circumference:nm,percentToDegree:3.6,percentToPx:nm/100};function np({statusRollupSummary:e}){let[t,n]=(0,u.useState)(!1),r=(0,u.useRef)(void 0),i=(0,u.useMemo)(()=>(function(e){let t,n=tO(e,nc),r=[{name:"SUCCESS",count:n.SUCCESS??0},{name:"SKIPPED",count:n.SKIPPED??0},{name:"PENDING",count:n.PENDING??0},{name:"FAILURE",count:n.FAILURE??0}].flatMap(e=>e?[e]:[]).filter(e=>!!e.count&&e.count>0),a=r.reduce((e,t)=>e+t.count,0),i=[],s=r.length??0,o=r.filter(({count:e})=>e/a*100<6).map(e=>e.name),l=(t=0,3===o.length?t=15/(s-3):2===o.length?t=10/(s-2):1===o.length&&(t=5/(s-1)),t);return r.map((e,t)=>{var n,r;let c;if(n=e.name,!Object.keys(nc).includes(n))return null;let d=e.count;if(!d)return null;let u=(r=e.name,c=d/a*100,(s>1&&(c-=nh.gapPercent),o.includes(r))?c+5:c-l),m={name:e.name,percentage:u,dashArray:`${Math.max(u*nh.percentToPx,0)} ${nh.circumference}`,transform:function(e,t,n,r){let a=0;((0!==n||n!==r-1)&&r>1||2===r)&&(a=2.5);let i=((e,t)=>{if(0===e)return e;let n=0;for(let e=0;e<t.length;e++){let r=t[e];r&&(n+=r+nh.gapPercent)}return n})(e,t);return`rotate(${-90+(i+a)*nh.percentToDegree}deg)`}(u,i,t,s),stroke:nu[e.name]};return i.push(u),m}).flatMap(e=>e?[e]:[])})(e),[e]),s=1===e.length&&e[0]?.state==="SUCCESS",o=1===e.length&&e[0]?.state==="FAILURE",l=!s&&!o||t;return(0,u.useMemo)(()=>{void 0!==r.current&&e.length>0&&n(!0),r.current=e},[e]),(0,a.jsxs)("div",{className:no.iconWrapper,children:[s&&(0,a.jsx)("div",{className:(0,d.$)(no.icon,t&&no["icon-animate"]),children:nl.PASSING}),o&&(0,a.jsx)("div",{className:(0,d.$)(no.icon,t&&no["icon-animate"]),children:nl.FAILING}),l&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${nh.circleSize} ${nh.circleSize}`,shapeRendering:"crispEdges",width:nh.size,height:nh.size,style:{userSelect:"none",zoom:"reset"},fill:"none","aria-hidden":"true",children:i.map(e=>(0,a.jsx)("circle",{cx:nh.circleSize/2,cy:nh.circleSize/2,r:44,style:{strokeLinecap:"round",strokeLinejoin:"round",strokeDashoffset:0,strokeWidth:nh.strokeWidth,transition:`all ${nd.length}ms ease ${nd.delay}ms`,transformOrigin:"50% 50%",shapeRendering:"geometricPrecision",strokeDasharray:e.dashArray,transform:e.transform,stroke:e.stroke}},e.name))})]})}try{np.displayName||(np.displayName="StatusCheckStatesIcon")}catch{}let ng={FAILURE:["ERROR","FAILURE","STARTUP_FAILURE"],TIMED_OUT:["TIMED_OUT"],CANCELLED:["CANCELLED"],SUCCESS:["SUCCESS"],STALE:["STALE"],PENDING:["ACTION_REQUIRED","PENDING","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],QUEUED:["QUEUED"],NEUTRAL:["NEUTRAL"],SKIPPED:["SKIPPED"],EXPECTED:["EXPECTED"],REQUESTED:["REQUESTED"]};function nf(e){let t,n,r,s,o,c,d,u,m=(0,i.c)(27),{checkSectionAriaId:g,pendingWorkflowApprovalRollup:f,statusRollup:y,statusChecks:x,pullRequestHeadSha:S,pullRequestId:v,focusPrimaryMergeButton:E,mergeBoxUserPreferences:C}=e;m[0]!==S?(t={pullRequestHeadSha:S},m[0]=S,m[1]=t):t=m[1];let{isPending:w,mutate:b}=function(e){let t,n,r,a,s=(0,i.c)(10),{pullRequestHeadSha:o}=e,l=(0,p.e)(h.u.runActionRequiredWorkflows);s[0]!==o?(t={pullRequestHeadSha:o},s[0]=o,s[1]=t):t=s[1];let c=to(t),d=(0,_.jE)();return s[2]!==l?(n=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==c?(r=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[4]=d,s[5]=c,s[6]=r):r=s[6],s[7]!==n||s[8]!==r?(a={mutationFn:n,onSuccess:r},s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eR.n)(a)}(t),R=()=>{I(null),b(void 0,{onSuccess:()=>{setTimeout(n_,1e3),E()},onError:e=>I(e.message)})},[N,j]=(0,tc.A)(null),I=j,{workflowsRequiringApprovalCount:A,hasExpiredWorkflowRuns:T,approvalRequiredMessage:k,helpLink:M,viewerCanApproveWorkflowRuns:O}=f,L=`${A} workflow${1===A?"":"s"} awaiting approval`;m[2]!==k||m[3]!==T||m[4]!==M?(n=T?"Unable to re-run one or more workflows because they were created over a month ago.":(0,a.jsxs)(a.Fragment,{children:[k," ",(0,a.jsx)(ee.A,{inline:!0,href:M,children:"Learn more about approving workflows."})]}),m[2]=k,m[3]=T,m[4]=M,m[5]=n):n=m[5];let P=n;return m[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tC,{bgColor:"var(--bgColor-attention-emphasis)"}),m[6]=r):r=m[6],m[7]!==R||m[8]!==w||m[9]!==O?(s=O?(0,a.jsx)(ed.Q,{loading:w,loadingAnnouncement:"Re-running workflows",onClick:R,children:"Approve workflows to run"}):void 0,m[7]=R,m[8]=w,m[9]=O,m[10]=s):s=m[10],m[11]!==g||m[12]!==P||m[13]!==s||m[14]!==L?(o=(0,a.jsx)(ei,{headerId:g,title:L,subtitle:P,icon:r,rightSideContent:s}),m[11]=g,m[12]=P,m[13]=s,m[14]=L,m[15]=o):o=m[15],m[16]!==N?(c=N&&(0,a.jsxs)(eE.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),N]}),m[16]=N,m[17]=c):c=m[17],m[18]!==C||m[19]!==v||m[20]!==x||m[21]!==y.summary?(d=y.summary.length>0&&(0,a.jsx)(el,{isExpanded:!0,children:(0,a.jsx)(ns,{pullRequestId:v,statusChecks:x,statusRollupSummary:y.summary,mergeBoxUserPreferences:C})}),m[18]=C,m[19]=v,m[20]=x,m[21]=y.summary,m[22]=d):d=m[22],m[23]!==o||m[24]!==c||m[25]!==d?(u=(0,a.jsxs)(a.Fragment,{children:[o,c,d]}),m[23]=o,m[24]=c,m[25]=d,m[26]=u):u=m[26],u}function n_(){return(0,th.i)("Successfully approved and re-requested workflows.")}let ny={PASSED:"All checks have passed",PENDING:"Some checks haven't completed yet",PENDING_APPROVAL:"Some checks are waiting for approval",PENDING_FAILED:"Some checks were not successful",SOME_FAILED:"Some checks were not successful",FAILED:"All checks have failed",PENDING_CONFLICTS:"Checks awaiting conflict resolution",UNKNOWN:"Checks status is unknown"};function nx(e){let t,n,r,s,o,l=(0,i.c)(18),{pullRequestId:c,pullRequestHeadSha:d,focusPrimaryMergeButton:m,sectionStatus:h,shouldRender:p,mergeBoxUserPreferences:g}=e;l[0]!==d?(t={pullRequestHeadSha:d},l[0]=d,l[1]=t):t=l[1];let{data:f}=tl(t),{aliveChannels:_,statusRollup:y,statusChecks:x}=f,S="PASSED"===y.combinedState,[v,E]=(0,em.Fo)(`${c}:checksExpanded`,!S),{sendAnalyticsEvent:C}=(0,Z.s)(),w=(0,u.useId)();!function(e,t){let n,r,a,s,o=(0,i.c)(10);o[0]!==t?(n={pullRequestHeadSha:t},o[0]=t,o[1]=n):n=o[1];let{refetch:l}=tl(n),c=(0,te.A)(),d=ta()?2e3:1e4;o[2]!==c||o[3]!==l?(r=()=>{c()&&l()},o[2]=c,o[3]=l,o[4]=r):r=o[4],o[5]!==r||o[6]!==d?(a=(0,e8.n)(r,d),o[5]=r,o[6]=d,o[7]=a):a=o[7];let u=a;o[8]!==u?(s=e=>{window.setTimeout(u,e.wait||0)},o[8]=u,o[9]=s):s=o[9];let m=s;(0,e9.x)(e,m)}(_.commitHeadShaChannel,d);let b=(0,i.c)(4);b[0]!==y.combinedState||b[1]!==y.summary.length?(s=()=>{if(0===y.summary.length)(0,tP.gd)();else{let e=tD[y.combinedState];(0,tP.iD)(e)}return tF},o=[y.combinedState,y.summary.length],b[0]=y.combinedState,b[1]=y.summary.length,b[2]=s,b[3]=o):(s=b[2],o=b[3]),(0,u.useEffect)(s,o);let R=y.pendingWorkflowApprovalRollup;return p?(l[2]!==w||l[3]!==v||l[4]!==m||l[5]!==g||l[6]!==d||l[7]!==c||l[8]!==h||l[9]!==C||l[10]!==E||l[11]!==x||l[12]!==y||l[13]!==R?(n="PENDING_APPROVAL"===y.combinedState&&R?(0,a.jsx)(nf,{checkSectionAriaId:w,pendingWorkflowApprovalRollup:R,statusRollup:y,statusChecks:x,pullRequestHeadSha:d,pullRequestId:c,focusPrimaryMergeButton:m,mergeBoxUserPreferences:g}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei,{headerId:w,title:ny[h],subtitle:function(e){if(0===e.length)return"No checks available.";let t=tO(e,ng),n=Object.keys(t).reduce((e,n)=>{let r=t[n];return r?e+r:e},0),r=Object.keys(tA).map(e=>{let n=t[e]??0,r=tA[e];return n>0?`${n} ${r}`:void 0}).filter(Boolean).join(", ");return`${r} ${n>1?"checks":"check"}`}(y.summary),icon:(0,a.jsx)(np,{statusRollupSummary:y.summary}),expandableProps:{ariaLabel:v?"Collapse checks":"Expand checks",isExpanded:v,onToggle:()=>{C(v?"checks_section.collapse":"checks_section.expand","MERGEBOX_CHECKS_SECTION_TOGGLE_BUTTON",tL(y.summary)),E(!v)}}}),(0,a.jsx)(el,{isExpanded:v,children:(0,a.jsx)(ns,{statusChecks:x,statusRollupSummary:y.summary,pullRequestId:c,mergeBoxUserPreferences:g})})]}),l[2]=w,l[3]=v,l[4]=m,l[5]=g,l[6]=d,l[7]=c,l[8]=h,l[9]=C,l[10]=E,l[11]=x,l[12]=y,l[13]=R,l[14]=n):n=l[14],l[15]!==w||l[16]!==n?(r=(0,a.jsx)("section",{"aria-label":"Checks","aria-describedby":w,className:"border-bottom color-border-subtle",children:n}),l[15]=w,l[16]=n,l[17]=r):r=l[17],r):null}try{nf.displayName||(nf.displayName="PendingApprovalChecksSection")}catch{}try{nx.displayName||(nx.displayName="ChecksSection")}catch{}function nS(){let e,t,n,r,s=(0,i.c)(6),{basePageDataUrl:o}=(0,g.Yu)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ee.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),s[0]=e):e=s[0];let c=`${o}/checks`;return s[1]!==c?(t=(0,a.jsxs)(a.Fragment,{children:["Try again or if the problem persists"," ",e," ","or"," ",(0,a.jsx)(ee.A,{href:c,inline:!0,children:"view the Checks tab."})]}),s[1]=c,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.AlertIcon,{className:"mx-1",size:24}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsx)("section",{"aria-label":"Checks",className:"border-bottom borderColor-muted",children:(0,a.jsx)(ei,{title:"Checks cannot be loaded right now",subtitle:t,icon:n})}),s[4]=t,s[5]=r):r=s[5],r}try{nS.displayName||(nS.displayName="ChecksSectionFetchFailure")}catch{}var nv=n(11196),nE=n(73077);let nC={selectable:"ConflictsSection-module__selectable--BT2Oj",ConflictsSectionLoadingSpinner:"ConflictsSection-module__ConflictsSectionLoadingSpinner--tkJ8X",ConflictsSectionStatusSpinner:"ConflictsSection-module__ConflictsSectionStatusSpinner--qtsen"},nw={SpinnerContainer:"CenteredLoadingSpinner-module__SpinnerContainer--Kwt8t"};function nb(e){let t,n,r,s=(0,i.c)(5),{className:o}=e;return s[0]!==o?(t=(0,d.$)(nw.SpinnerContainer,o),s[0]=o,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(c.A,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{className:t,children:n}),s[3]=t,s[4]=r):r=s[4],r}try{nb.displayName||(nb.displayName="CenteredLoadingSpinner")}catch{}var nR=n(73189),nN=n(73783);function nj(e){let t,n,r,s,o,c,d=(0,i.c)(29),{className:m,children:h,actionList:p,inactive:g,inactiveTooltipText:f,inactiveTooltipDirection:_,loading:y,loadingAnnouncement:x,secondaryButtonActive:S,secondaryButtonAriaLabel:v,onPrimaryButtonClick:E,shouldFocusPrimaryButton:C,onFocusPrimaryButton:w,isPrimary:b,hideSecondaryButton:R}=e,N=void 0===_?"ne":_,j=void 0!==R&&R,I=(0,u.useRef)(null);d[0]!==w||d[1]!==C?(t=()=>{C&&(I.current?.focus(),w?.())},n=[C,w],d[0]=w,d[1]=C,d[2]=t,d[3]=n):(t=d[2],n=d[3]),(0,u.useEffect)(t,n);let A=void 0!==b&&b?"primary":"default",[T,k]=(0,u.useState)(!1),M=g&&!S;d[4]!==g||d[5]!==y?(r=void 0!==y?{}:{inactive:g,"aria-disabled":g},d[4]=g,d[5]=y,d[6]=r):r=d[6];let O=r,L=g?nR.l:E;d[7]!==A||d[8]!==h||d[9]!==O||d[10]!==y||d[11]!==x||d[12]!==L?(s=(0,a.jsx)(ed.Q,{className:"flex-1",variant:A,ref:I,loading:y,loadingAnnouncement:x,onClick:L,...O,children:h}),d[7]=A,d[8]=h,d[9]=O,d[10]=y,d[11]=x,d[12]=L,d[13]=s):s=d[13],d[14]!==p||d[15]!==A||d[16]!==j||d[17]!==T||d[18]!==v||d[19]!==M?(o=!j&&(0,a.jsxs)(tg.Wy,{open:T,onOpenChange:M?nR.l:e=>k(e),children:[(0,a.jsx)(tg.Wy.Anchor,{children:(0,a.jsx)(t$.K,{className:"flex-0",variant:A,"aria-label":v,"aria-disabled":M,inactive:M,icon:l.TriangleDownIcon})}),(0,a.jsx)(tg.Wy.Overlay,{align:"end",sx:{width:"320px"},children:p})]}),d[14]=p,d[15]=A,d[16]=j,d[17]=T,d[18]=v,d[19]=M,d[20]=o):o=d[20],d[21]!==m||d[22]!==s||d[23]!==o?(c=(0,a.jsxs)(nN.A,{className:m,children:[s,o]}),d[21]=m,d[22]=s,d[23]=o,d[24]=c):c=d[24];let P=c;if(g&&f){let e;return d[25]!==P||d[26]!==N||d[27]!==f?(e=(0,a.jsx)(nv.m,{text:f,direction:N,children:P}),d[25]=P,d[26]=N,d[27]=f,d[28]=e):e=d[28],e}return P}try{nj.displayName||(nj.displayName="ButtonWithDropdown")}catch{}var nI=n(30923);function nA(e){let t,n,r=(0,i.c)(8),{description:s,onSelect:o,selected:l,text:c,inactiveText:d}=e;return r[0]!==s?(t=(0,a.jsx)(ev.l.Description,{variant:"block",children:s}),r[0]=s,r[1]=t):t=r[1],r[2]!==d||r[3]!==o||r[4]!==l||r[5]!==t||r[6]!==c?(n=(0,a.jsxs)(ev.l.Item,{selected:l,onSelect:o,inactiveText:d,children:[c,t]}),r[2]=d,r[3]=o,r[4]=l,r[5]=t,r[6]=c,r[7]=n):n=r[7],n}function nT(e){let t,n=(0,i.c)(5),{conflictsWebEditorPath:r,conflictsState:s,webEditorConflictResolution:o}=e;if("HAS_CONFLICTS"!==s||!o)return null;if(!o.viewerCanResolve){let e,t,r=o.viewerCannotResolve?.message||"";return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ed.Q,{inactive:!0,children:"Resolve conflicts"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,a.jsx)(nv.m,{direction:"nw",text:r,children:e}),n[1]=r,n[2]=t):t=n[2],t}return n[3]!==r?(t=(0,a.jsx)(nE.z,{href:r,children:"Resolve conflicts"}),n[3]=r,n[4]=t):t=n[4],t}function nk(e){let t=(0,i.c)(3),{conflictsWebEditorPath:n,webEditorConflictResolution:r}=e;switch(r?.viewerCannotResolve?.reason){case"INSUFFICIENT_ACCESS":return null;case"TOO_COMPLEX":case"HEAD_BRANCH_PROTECTED":case"ADMIN_DISABLED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"Use the command line to resolve conflicts before continuing."}),t[0]=e):e=t[0],e}default:{let e;return t[1]!==n?(e=(0,a.jsxs)("span",{children:["Use the"," ",(0,a.jsx)(ee.A,{inline:!0,href:n,children:"web editor"})," ","or the command line to resolve conflicts before continuing."]}),t[1]=n,t[2]=e):e=t[2],e}}}function nM(e){let t,n=(0,i.c)(3),{advisoryWorkspacePath:r,advisoryWorkspaceId:s}=e,o=r||"";return n[0]!==s||n[1]!==o?(t=(0,a.jsxs)("span",{children:["Merging must be performed from the"," ",(0,a.jsx)(ee.A,{inline:!0,href:o,children:s})," ","advisory."]}),n[0]=s,n[1]=o,n[2]=t):t=n[2],t}let nO={NO_CONFLICTS:{heading:"No conflicts with base branch",subtitle:()=>"Merging can be performed automatically.",icon:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})},PENDING:{heading:"Checking for the ability to merge automatically...",subtitle:()=>"Hang in there while we check the branch's status.",icon:(0,a.jsx)(nb,{className:nC.ConflictsSectionLoadingSpinner})},OUT_OF_DATE:{heading:"This branch is out-of-date with the base branch",subtitle:({baseRefName:e,viewerLogin:t})=>`Merge the latest changes from ${e} into this branch. This merge commit will be associated with ${t}.`,icon:(0,a.jsx)(tC,{})},HAS_CONFLICTS:{heading:"This branch has conflicts that must be resolved",subtitle:({conflictsWebEditorPath:e,conflictsCondition:t})=>(0,a.jsx)(nk,{conflictsWebEditorPath:e,webEditorConflictResolution:t?.webEditorConflictResolution}),icon:(0,a.jsx)(tC,{})},HAS_REBASE_CONFLICTS:{heading:"This branch cannot be rebased due to conflicts",subtitle:()=>"",icon:(0,a.jsx)(tC,{})},HAS_ADVISORY_WORKSPACE:{heading:"No conflicts with base branch",subtitle:({advisoryWorkspaceId:e,advisoryWorkspacePath:t})=>(0,a.jsx)(nM,{advisoryWorkspaceId:e,advisoryWorkspacePath:t}),icon:(0,a.jsx)(et.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})}};function nL(e){let t,n,r,s,o,d,m,g,f,y,S,v,E,C,w,b,R,N,j,I,A,T,k,M,O,L=(0,i.c)(92),{baseRefName:P,headRefOid:D,resourcePath:F,viewerCanUpdateBranch:U,viewerUpdateMethods:B,viewerLogin:q,conflictsCondition:$,conflictsState:G,canUserPushToBase:W,advisoryWorkspace:V}=e;L[0]!==B?(t=B?.find(n$)?.name||"MERGE",L[0]=B,L[1]=t):t=L[1];let Q=t,[H,z]=(0,u.useState)(Q),[K,X]=(0,tc.A)(!1),[Y,J]=(0,tc.A)(null),{sendAnalyticsEvent:ee}=(0,Z.s)(),et=(0,u.useId)(),en=x(),er=(0,_.jE)();L[2]!==en||L[3]!==er||L[4]!==X?(n=async()=>{await er.refetchQueries({queryKey:en},{cancelRefetch:!1}),X(!1)},L[2]=en,L[3]=er,L[4]=X,L[5]=n):n=L[5];let ea=n;L[6]!==J||L[7]!==X?(r=e=>{X(!1),J(e.message)},L[6]=J,L[7]=X,L[8]=r):r=L[8];let es=r;L[9]!==es||L[10]!==ea?(s={onSuccess:ea,onError:es},L[9]=es,L[10]=ea,L[11]=s):s=L[11];let{mutate:eo}=function(e){let t,n,r,a,s=(0,i.c)(10),{onSuccess:o,onError:l}=e,c=(0,p.e)(h.u.updatePullRequestBranch);return s[0]!==c?(t=async e=>{let{updateMethod:t,expectedHeadOid:n}=e;return(0,eN.q$)(c,{method:"POST",headers:{Accept:"application/json"},body:{updateMethod:t,expectedHeadOid:n}})},s[0]=c,s[1]=t):t=s[1],s[2]!==o?(n=async e=>{let t=await (0,eN.hp)(e);e.ok||(0,eN.R)(e,t);let n=await (await (0,nI.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message);o()},s[2]=o,s[3]=n):n=s[3],s[4]!==l?(r=e=>{l(e)},s[4]=l,s[5]=r):r=s[5],s[6]!==t||s[7]!==n||s[8]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[6]=t,s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eR.n)(a)}(s);L[12]!==D||L[13]!==K||L[14]!==H||L[15]!==ee||L[16]!==J||L[17]!==X||L[18]!==eo?(o=()=>{K||(X(!0),J(null),eo({updateMethod:H,expectedHeadOid:D}),ee("conflicts_section.update_branch","MERGEBOX_CONFLICTS_SECTION_UPDATE_BRANCH_BUTTON"))},L[12]=D,L[13]=K,L[14]=H,L[15]=ee,L[16]=J,L[17]=X,L[18]=eo,L[19]=o):o=L[19];let el=o,ec=`${F}/conflicts`;L[20]!==$.conflicts?(d=$.conflicts??[],L[20]=$.conflicts,L[21]=d):d=L[21];let ed=d;L[22]!==H?(m=function(){return"MERGE"===H?"Update branch":"Rebase branch"},L[22]=H,L[23]=m):m=L[23];let eu=m;L[24]!==H?(g=function(){return"MERGE"===H?"Updating branch":"Rebasing branch"},L[24]=H,L[25]=g):g=L[25];let em=g,eh=("OUT_OF_DATE"===G||"NO_CONFLICTS"===G||"PENDING"===G)&&U,ep="HAS_CONFLICTS"===G&&($.webEditorConflictResolution?.viewerCanResolve||$.webEditorConflictResolution?.viewerCannotResolve?.reason!=="INSUFFICIENT_ACCESS"),eg=V?.advisoryWorkspaceId,ef=V?.advisoryWorkspacePath;L[26]!==B?(f=B?.filter(nq),L[26]=B,L[27]=f):f=L[27];let e_=f;L[28]!==B?(y=B?.find(nB),L[28]=B,L[29]=y):y=L[29];let ey=y;L[30]!==B?(S=B?.find(nU),L[30]=B,L[31]=S):S=L[31];let ex=S;L[32]!==B?(v=B?.find(nF),L[32]=B,L[33]=v):v=L[33];let eS=v;L[34]!==B?(E=B?.find(nD)?.failureReason,L[34]=B,L[35]=E):E=L[35];let eC=E;L[36]!==Q||L[37]!==eC||L[38]!==eS||L[39]!==H||L[40]!==ee||L[41]!==ey||L[42]!==ex||L[43]!==B?(C=function(){return B?(0,a.jsxs)(ev.l,{selectionVariant:"single",showDividers:!0,children:[ey&&(0,a.jsx)(nA,{description:"The merge commit will be associated with your account.",selected:"MERGE"===Q,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("MERGE")}}),ex&&(0,a.jsx)(nA,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===Q,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}}),eS&&(0,a.jsx)(nA,{inactiveText:eC||"This branch cannot be rebased at this time.",selected:"REBASE"===Q,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}})]}):(0,a.jsxs)(ev.l,{selectionVariant:"single",showDividers:!0,children:[(0,a.jsx)(nA,{description:"The merge commit will be associated with your account.",selected:"MERGE"===H,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("MERGE")}}),(0,a.jsx)(nA,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===H,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),z("REBASE")}})]})},L[36]=Q,L[37]=eC,L[38]=eS,L[39]=H,L[40]=ee,L[41]=ey,L[42]=ex,L[43]=B,L[44]=C):C=L[44];let ew=C,eb=nO[G],ej=nO[G];return L[45]!==K?(w=K&&(0,a.jsx)(c.A,{size:"small",className:nC.ConflictsSectionStatusSpinner}),L[45]=K,L[46]=w):w=L[46],L[47]!==ej.heading||L[48]!==w?(b=(0,a.jsxs)(a.Fragment,{children:[ej.heading,w]}),L[47]=ej.heading,L[48]=w,L[49]=b):b=L[49],L[50]!==eg||L[51]!==ef||L[52]!==P||L[53]!==W||L[54]!==$||L[55]!==G||L[56]!==ec||L[57]!==q?(R=W?nO[G].subtitle({baseRefName:P,viewerLogin:q,conflictsWebEditorPath:ec,conflictsCondition:$,advisoryWorkspaceId:eg,advisoryWorkspacePath:ef}):"Changes can be cleanly merged.",L[50]=eg,L[51]=ef,L[52]=P,L[53]=W,L[54]=$,L[55]=G,L[56]=ec,L[57]=q,L[58]=R):R=L[58],L[59]!==el||L[60]!==K||L[61]!==eh||L[62]!==e_?.length||L[63]!==em||L[64]!==eu||L[65]!==ew?(N=eh&&(0,a.jsx)(nj,{hideSecondaryButton:e_?.length===1,loading:K,loadingAnnouncement:em(),secondaryButtonAriaLabel:"Update branch options",actionList:ew(),onPrimaryButtonClick:el,children:eu()}),L[59]=el,L[60]=K,L[61]=eh,L[62]=e_?.length,L[63]=em,L[64]=eu,L[65]=ew,L[66]=N):N=L[66],L[67]!==$.webEditorConflictResolution||L[68]!==G||L[69]!==ec?(j=(0,a.jsx)(nT,{conflictsWebEditorPath:ec,conflictsState:G,webEditorConflictResolution:$.webEditorConflictResolution}),L[67]=$.webEditorConflictResolution,L[68]=G,L[69]=ec,L[70]=j):j=L[70],L[71]!==N||L[72]!==j?(I=(0,a.jsxs)(a.Fragment,{children:[N,j]}),L[71]=N,L[72]=j,L[73]=I):I=L[73],L[74]!==ed||L[75]!==ep?(A=ep&&(0,a.jsx)("div",{className:"ml-n3",children:(0,a.jsx)(ev.l,{className:"py-0 overflow-hidden",children:ed.map(nP)})}),L[74]=ed,L[75]=ep,L[76]=A):A=L[76],L[77]!==et||L[78]!==eb.icon||L[79]!==b||L[80]!==R||L[81]!==I||L[82]!==A?(T=(0,a.jsx)(ei,{headerId:et,icon:eb.icon,title:b,subtitle:R,rightSideContent:I,children:A}),L[77]=et,L[78]=eb.icon,L[79]=b,L[80]=R,L[81]=I,L[82]=A,L[83]=T):T=L[83],L[84]!==Y?(k=Y&&(0,a.jsxs)(eE.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),Y]}),L[84]=Y,L[85]=k):k=L[85],L[86]!==T||L[87]!==k?(M=(0,a.jsxs)("div",{className:"d-flex flex-column width-full overflow-hidden",children:[T,k]}),L[86]=T,L[87]=k,L[88]=M):M=L[88],L[89]!==et||L[90]!==M?(O=(0,a.jsx)("section",{"aria-label":"Conflicts",className:"border-bottom borderColor-muted","aria-describedby":et,children:M}),L[89]=et,L[90]=M,L[91]=O):O=L[91],O}function nP(e){return(0,a.jsxs)(ev.l.Item,{children:[(0,a.jsx)(ev.l.LeadingVisual,{className:"fgColor-muted",children:(0,a.jsx)(l.FileIcon,{})}),(0,a.jsx)("span",{className:`input-monospace f6 ${nC.selectable}`,children:e})]},e)}function nD(e){return"REBASE"===e.name}function nF(e){return"REBASE"===e.name&&"UNAVAILABLE"===e.allowableStatus}function nU(e){return"REBASE"===e.name&&"ALLOWED"===e.allowableStatus}function nB(e){return"MERGE"===e.name&&"ALLOWED"===e.allowableStatus}function nq(e){return"ALLOWED"===e.allowableStatus||"UNAVAILABLE"===e.allowableStatus}function n$(e){return!0===e.isDefault}try{nA.displayName||(nA.displayName="UpdateBranchOption")}catch{}try{nT.displayName||(nT.displayName="ResolveConflictsButton")}catch{}try{nk.displayName||(nk.displayName="ConflictResolutionSubtitle")}catch{}try{nM.displayName||(nM.displayName="AdvisoryWorkspaceSubtitle")}catch{}try{nL.displayName||(nL.displayName="ConflictsSection")}catch{}let nG={DraftStateCircleIcon:"DraftStateSection-module__DraftStateCircleIcon--APxWt",DraftStateFlashMessage:"DraftStateSection-module__DraftStateFlashMessage--XlMkr",DraftStateIcon:"DraftStateSection-module__DraftStateIcon--_Co24"};function nW(e){let t,n,r,s,o,c,d,m,g=(0,i.c)(24),{viewerCanUpdate:f,helpUrl:y}=e,[S,v]=(0,tc.A)(null);g[0]!==v?(t={onError:e=>{v(e.message)}},g[0]=v,g[1]=t):t=g[1];let{mutate:E,isPending:C}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.markReadyForReview),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t),{sendAnalyticsEvent:w}=(0,Z.s)(),b=(0,u.useId)();g[2]!==C||g[3]!==E||g[4]!==w?(n=function(){C||(E(),w("draft_state_section.mark_ready_for_review","MERGEBOX_DRAFT_STATE_SECTION_MARK_READY_FOR_REVIEW_BUTTON"))},g[2]=C,g[3]=E,g[4]=w,g[5]=n):n=g[5];let R=n,N=`${y}/get-started/learning-about-github/access-permissions-on-github`;return g[6]!==N||g[7]!==f?(r=f?"Draft pull requests cannot be merged.":(0,a.jsxs)("span",{children:["Only those with ",(0,a.jsx)("a",{href:N,children:"write access"})," to this repository can mark a draft pull request as ready for review."]}),g[6]=N,g[7]=f,g[8]=r):r=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(et.A,{size:32,icon:nV,className:nG.DraftStateCircleIcon}),g[9]=s):s=g[9],g[10]!==R||g[11]!==C||g[12]!==f?(o=f?(0,a.jsx)(ed.Q,{onClick:R,loading:C,loadingAnnouncement:"Marking ready for review",children:"Ready for review"}):void 0,g[10]=R,g[11]=C,g[12]=f,g[13]=o):o=g[13],g[14]!==S?(c=S&&(0,a.jsxs)(eE.A,{variant:"danger",className:nG.DraftStateFlashMessage,children:[(0,a.jsx)(eI.A,{icon:l.StopIcon,className:nG.DraftStateIcon}),S]}),g[14]=S,g[15]=c):c=g[15],g[16]!==b||g[17]!==r||g[18]!==o||g[19]!==c?(d=(0,a.jsx)(ei,{headerId:b,title:"This pull request is still a work in progress",subtitle:r,icon:s,rightSideContent:o,children:c}),g[16]=b,g[17]=r,g[18]=o,g[19]=c,g[20]=d):d=g[20],g[21]!==b||g[22]!==d?(m=(0,a.jsx)("section",{"aria-label":"Draft state","aria-describedby":b,className:"border-bottom color-border-subtle",children:d}),g[21]=b,g[22]=d,g[23]=m):m=g[23],m}function nV(){return(0,a.jsx)(l.GitPullRequestDraftIcon,{size:16})}try{nW.displayName||(nW.displayName="DraftStateSection")}catch{}let nQ={MergeQueueSectionText:"MergeQueueSection-module__MergeQueueSectionText--rEy7Y"};function nH(e){let t,n,r,s,o,c,d,m,g,f,y,S,v,E,C,w,b,R,N=(0,i.c)(52),{mergeQueue:j,mergeQueueEntry:I,viewerCanAddAndRemoveFromMergeQueue:A,focusPrimaryMergeButton:T}=e,k=I?.position,M=j?.url,O=(0,u.useRef)(null),[L,P]=(0,tc.A)(!1),[D,F]=(0,tc.A)(null),U=(0,i.c)(1);U[0]===Symbol.for("react.memo_cache_sentinel")?(R=[],U[0]=R):R=U[0],(0,u.useEffect)(tU,R);let{sendAnalyticsEvent:B}=(0,Z.s)();N[0]!==F||N[1]!==P?(t={onError:e=>{P(!1),F(e.message),O.current?.focus(),setTimeout(nK,1e3)}},N[0]=F,N[1]=P,N[2]=t):t=N[2];let{mutate:q,isPending:$}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.dequeuePullRequest),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);N[3]!==T||N[4]!==$||N[5]!==q||N[6]!==B||N[7]!==F||N[8]!==P?(n=()=>{$||(F(null),B("merge_queue_section.dequeue_pull_request","MERGEBOX_MERGE_QUEUE_SECTION_REMOVE_FROM_QUEUE_BUTTON"),q(void 0,{onSuccess:()=>{P(!1),setTimeout(nz,1e3),T()}}))},N[3]=T,N[4]=$,N[5]=q,N[6]=B,N[7]=F,N[8]=P,N[9]=n):n=N[9];let G=n;N[10]!==F||N[11]!==P?(r=()=>{F(null),P(!0)},N[10]=F,N[11]=P,N[12]=r):r=N[12];let W=r;N[13]!==P?(s=()=>P(!1),N[13]=P,N[14]=s):s=N[14],N[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(tu.A.Header,{id:"remove-from-queue-dialog-title",children:"Remove from the queue?"}),N[15]=o):o=N[15],N[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("span",{children:"Removing this pull request from the queue could impact other pull requests in the queue. Are you sure?"}),N[16]=c):c=N[16],N[17]!==$||N[18]!==P?(d=()=>{$||(P(!1),O.current?.focus())},N[17]=$,N[18]=P,N[19]=d):d=N[19],N[20]!==$||N[21]!==d?(m=(0,a.jsx)(ed.Q,{className:"mr-1",inactive:$,onClick:d,children:"Cancel"}),N[20]=$,N[21]=d,N[22]=m):m=N[22],N[23]!==G||N[24]!==$?(g=(0,a.jsx)(ed.Q,{variant:"danger",loading:$,loadingAnnouncement:"Removing from the queue",onClick:G,children:"Remove from the queue"}),N[23]=G,N[24]=$,N[25]=g):g=N[25],N[26]!==m||N[27]!==g?(f=(0,a.jsxs)("div",{className:"p-3",children:[c,(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[m,g]})]}),N[26]=m,N[27]=g,N[28]=f):f=N[28],N[29]!==L||N[30]!==f||N[31]!==s?(y=(0,a.jsxs)(tu.A,{"aria-labelledby":"remove-from-queue-dialog-title",isOpen:L,returnFocusRef:O,onDismiss:s,children:[o,f]}),N[29]=L,N[30]=f,N[31]=s,N[32]=y):y=N[32],N[33]!==D?(S=D&&(0,a.jsxs)(eE.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),D]}),N[33]=D,N[34]=S):S=N[34],N[35]!==W||N[36]!==I?.isLocked||N[37]!==A?(v=A&&!I?.isLocked&&(0,a.jsx)(ed.Q,{ref:O,onClick:W,children:"Remove from queue"}),N[35]=W,N[36]=I?.isLocked,N[37]=A,N[38]=v):v=N[38],N[39]!==v?(E=(0,a.jsx)(a.Fragment,{children:v}),N[39]=v,N[40]=E):E=N[40];let V=I?.isLocked;return N[41]!==k||N[42]!==M||N[43]!==V?(C=(0,a.jsx)(nX,{position:k,resourcePath:M,entryIsLocked:V}),N[41]=k,N[42]=M,N[43]=V,N[44]=C):C=N[44],N[45]!==E||N[46]!==C?(w=(0,a.jsx)(ei,{title:"Queued to merge...",rightSideContent:E,children:C}),N[45]=E,N[46]=C,N[47]=w):w=N[47],N[48]!==y||N[49]!==S||N[50]!==w?(b=(0,a.jsxs)(a.Fragment,{children:[y,S,w]}),N[48]=y,N[49]=S,N[50]=w,N[51]=b):b=N[51],b}function nz(){return(0,th.i)("The pull request was successfully removed from the queue.")}function nK(){return(0,th.i)("Failed to remove pull request from the merge queue")}function nX(e){let t,n,r,s,o=(0,i.c)(8),{position:l,resourcePath:c,entryIsLocked:d}=e;if(!l||!c){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{}),o[0]=e):e=o[0],e}let u=l-1;return t=d?"This pull request is locked for deployment by the":0===u?"This pull request is next up in the":1===u?`There is ${u} pull request ahead of this one in the`:`There are ${u} pull requests ahead of this one in the`,o[1]!==t?(n=(0,a.jsx)("span",{className:nQ.MergeQueueSectionText,children:t}),o[1]=t,o[2]=n):n=o[2],o[3]!==c?(r=(0,a.jsx)(ee.A,{inline:!0,href:c,children:"merge queue"}),o[3]=c,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(s=(0,a.jsxs)(a.Fragment,{children:[n," ",r,"."]}),o[5]=n,o[6]=r,o[7]=s):s=o[7],s}try{nH.displayName||(nH.displayName="MergeQueueSection")}catch{}try{nX.displayName||(nX.displayName="MergeQueuePositionText")}catch{}function nY({mergeMethod:e,confirming:t,isBypassMerge:n=!1,inProgress:r=!1,isAutoMergeAllowed:a=!1}){if(r)return a?"Confirming...":"Merging...";let i=t?"Confirm auto-merge":"Enable auto-merge",s=t?"Confirm bypass rules and merge":"Bypass rules and merge";switch(e){case m.q$.MERGE:if(a)return i;if(n)return s;if(t)return"Confirm merge";else return"Merge pull request";case m.q$.SQUASH:if(a)return`${i} (squash)`;if(n)return`${s} (squash)`;if(t)return"Confirm squash and merge";else return"Squash and merge";case m.q$.REBASE:if(a)return`${i} (rebase)`;if(n)return`${s} (rebase)`;if(t)return"Confirm rebase and merge";else return"Rebase and merge"}}function nJ({mergeMethod:e,confirming:t,inProgress:n}){if(n)return"Adding to merge queue...";switch(e){case m.lD.GROUP:return t?"Confirm merge when ready":"Merge when ready";case m.lD.SOLO:return t?"Confirm queue and force solo merge":"Queue and force solo merge"}}var nZ=n(97949),n0=n(99511),n1=n(96296);let MergeError=class MergeError extends Error{constructor(e,t=[],n){super(e),(0,A._)(this,"ruleErrors",void 0),this.name="MergeError",this.ruleErrors=t,this.cause=n}};function n2(e){let t,n,r,a,s,o=(0,i.c)(14);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l,onSuccess:c}=t,d=(0,p.e)(h.u.enableAutoMerge),u=x(),m=(0,_.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eN.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eN.R)(t,n,r),n},o[2]=d,o[3]=n):n=o[3],o[4]!==u||o[5]!==c||o[6]!==m?(r=()=>(c?.(),m.refetchQueries({queryKey:u},{cancelRefetch:!1})),o[4]=u,o[5]=c,o[6]=m,o[7]=r):r=o[7],o[8]!==l?(a=e=>{l?.(e)},o[8]=l,o[9]=a):a=o[9],o[10]!==n||o[11]!==r||o[12]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[10]=n,o[11]=r,o[12]=a,o[13]=s):s=o[13],(0,eR.n)(s)}var n3=n(65025);function n5(e){let t,n=(0,i.c)(3),{children:r,className:s}=e,o=`d-flex flex-items-start flex-sm-items-center flex-column flex-sm-row gap-2 ${s}`;return n[0]!==r||n[1]!==o?(t=(0,a.jsx)("div",{className:o,children:r}),n[0]=r,n[1]=o,n[2]=t):t=n[2],t}n5.Slot=function({children:e}){var t;let n=u.Children.only(e);return u.isValidElement(n)&&(n=(t=n).type===nj||t.type===ed.Q?(0,u.cloneElement)(t,{className:`flex-self-stretch flex-shrink-0 ${t.props.className}`}):t),n};try{n5.displayName||(n5.displayName="MergeSectionActions")}catch{}try{(r=MergeSectionsActionsSlot).displayName||(r.displayName="MergeSectionsActionsSlot")}catch{}let n4={ConfirmMergeContainer:"ConfirmMerge-module__ConfirmMergeContainer--svghz",ConfirmMergeText:"ConfirmMerge-module__ConfirmMergeText--Lq1XQ"};function n6(e){let t,n,r,s=(0,i.c)(5),{errorMessage:o}=e;return(s[0]!==o?(t=()=>{o&&o.length>0&&(0,th.i)(o)},n=[o],s[0]=o,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,u.useEffect)(t,n),o)?(s[3]!==o?(r=(0,a.jsx)(nZ.l,{className:"mt-3","aria-label":"Merge error warning banner",variant:"warning",title:"Merge error",hideTitle:!0,description:o}),s[3]=o,s[4]=r):r=s[4],r):null}function n7(e){let t,n,r,s,o,l,c,d,g,f,y,S,v,E,C,w,b,R,N=(0,i.c)(67),{defaultCommitAuthorEmail:j,commitMessageBody:I,commitMessageHeadline:A,defaultBranchName:T,handleConfirmingMergeInfo:k,isBypassMerge:M,onCancel:O,selectedMergeMethod:L,isAutoMergeAllowed:P,possibleCommitAuthorEmails:D}=e,F=void 0!==P&&P,U=(0,u.useRef)(null),B=(0,u.useRef)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{U.current?.focus(),B.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},n=[],N[0]=t,N[1]=n):(t=N[0],n=N[1]),(0,u.useEffect)(t,n);let[q,$]=(0,u.useState)(A||""),[G,W]=(0,u.useState)(I||""),{sendAnalyticsEvent:V}=(0,Z.s)(),[Q,H]=(0,tc.A)("");N[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],N[2]=r):r=N[2];let[z,K]=(0,tc.A)(r),X=D.length>0,Y=L===m.q$.REBASE?"":j||"",[J,ee]=(0,u.useState)(Y);N[3]!==H||N[4]!==K?(s={onError:e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))}},N[3]=H,N[4]=K,N[5]=s):s=N[5];let{mutate:et,isPending:en}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.merge),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async e=>{let t=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eN.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eN.R)(t,n,r),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(s);N[6]!==H||N[7]!==K?(o=e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))},N[6]=H,N[7]=K,N[8]=o):o=N[8],N[9]!==k?(l=()=>{k(!1)},N[9]=k,N[10]=l):l=N[10],N[11]!==o||N[12]!==l?(c={onError:o,onSuccess:l},N[11]=o,N[12]=l,N[13]=c):c=N[13];let{mutate:er,isPending:ea}=n2(c),ei=en||ea;N[14]!==J||N[15]!==G||N[16]!==q||N[17]!==er||N[18]!==F||N[19]!==M||N[20]!==ei||N[21]!==et||N[22]!==L||N[23]!==V||N[24]!==X||N[25]!==H?(d=()=>{ei||(H(""),F?(er({...X?{authorEmail:J}:{},commitMessage:G,commitTitle:q,mergeMethod:L}),V("direct_merge_section.confirm_auto_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON")):(et({...X?{authorEmail:J}:{},bypassBranchProtections:M,commitMessage:G,commitTitle:q,mergeMethod:L}),V("direct_merge_section.confirm_direct_merge","MERGEBOX_DIRECT_MERGE_CONFIRMATION_BUTTON")))},N[14]=J,N[15]=G,N[16]=q,N[17]=er,N[18]=F,N[19]=M,N[20]=ei,N[21]=et,N[22]=L,N[23]=V,N[24]=X,N[25]=H,N[26]=d):d=N[26];let es=d;N[27]!==z?(g=z.length>0&&(0,a.jsx)(n3.r,{prefix:"",helpUrl:"",errorMessageNotUsingPrefix:"Repository rule violations found",hideRuleErrorsTitle:!0,ruleErrors:z}),N[27]=z,N[28]=g):g=N[28],N[29]!==X||N[30]!==G||N[31]!==q||N[32]!==Y||N[33]!==es||N[34]!==D||N[35]!==L?(f=L!==m.q$.REBASE&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eC.A,{children:[(0,a.jsx)(eC.A.Label,{children:"Commit message"}),(0,a.jsx)(n0.A,{ref:U,block:!0,defaultValue:q,onChange:e=>$(e.currentTarget.value)})]}),(0,a.jsxs)(eC.A,{className:"mt-3 width-full",children:[(0,a.jsx)(eC.A.Label,{children:"Extended description"}),(0,a.jsx)(ew.Ay,{block:!0,placeholder:"Add an optional extended description\u2026",defaultValue:G,onChange:e=>W(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),es())}})]}),X?(0,a.jsx)("div",{className:n4.ConfirmMergeContainer,children:(0,a.jsxs)(eC.A,{children:[(0,a.jsx)(eC.A.Label,{children:"Commit email"}),(0,a.jsx)(n1.A,{defaultValue:Y,onChange:e=>ee(e.target.value),"aria-label":"Select commit author email",children:D.map(n8)})]})}):(0,a.jsx)("div",{className:n4.ConfirmMergeContainer,children:(0,a.jsxs)("span",{className:n4.ConfirmMergeText,children:["This commit will be authored by ",Y,"."]})})]}),N[29]=X,N[30]=G,N[31]=q,N[32]=Y,N[33]=es,N[34]=D,N[35]=L,N[36]=f):f=N[36],N[37]!==T||N[38]!==L?(y=L===m.q$.REBASE&&(0,a.jsxs)("span",{className:n4.ConfirmMergeText,children:["This will rebase your changes and merge them into ",T,"."]}),N[37]=T,N[38]=L,N[39]=y):y=N[39],N[40]!==F||N[41]!==M||N[42]!==L?(S=nY({mergeMethod:L,confirming:!0,isBypassMerge:M,inProgress:!0,isAutoMergeAllowed:F}),N[40]=F,N[41]=M,N[42]=L,N[43]=S):S=N[43];let eo=M?"danger":F?"default":"primary";return N[44]!==F||N[45]!==M||N[46]!==L?(v=nY({mergeMethod:L,confirming:!0,isBypassMerge:M,inProgress:!1,isAutoMergeAllowed:F}),N[44]=F,N[45]=M,N[46]=L,N[47]=v):v=N[47],N[48]!==es||N[49]!==ei||N[50]!==S||N[51]!==eo||N[52]!==v?(E=(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(ed.Q,{ref:B,loading:ei,loadingAnnouncement:S,variant:eo,onClick:es,children:v})}),N[48]=es,N[49]=ei,N[50]=S,N[51]=eo,N[52]=v,N[53]=E):E=N[53],N[54]!==O?(C=(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(ed.Q,{onClick:O,children:"Cancel"})}),N[54]=O,N[55]=C):C=N[55],N[56]!==E||N[57]!==C?(w=(0,a.jsxs)(n5,{className:"mt-3",children:[E,C]}),N[56]=E,N[57]=C,N[58]=w):w=N[58],N[59]!==Q?(b=(0,a.jsx)(n6,{errorMessage:Q}),N[59]=Q,N[60]=b):b=N[60],N[61]!==g||N[62]!==f||N[63]!==y||N[64]!==w||N[65]!==b?(R=(0,a.jsxs)("div",{children:[g,f,y,w,b]}),N[61]=g,N[62]=f,N[63]=y,N[64]=w,N[65]=b,N[66]=R):R=N[66],R}function n8(e){return(0,a.jsx)(n1.A.Option,{value:e,children:e},e)}try{n6.displayName||(n6.displayName="MergeErrorMessage")}catch{}try{n7.displayName||(n7.displayName="ConfirmMerge")}catch{}function n9(e){let t,n,r=(0,i.c)(7),{onSelect:s,primaryText:o,secondaryText:l,selected:c}=e;return r[0]!==l?(t=(0,a.jsx)(ev.l.Description,{variant:"block",children:l}),r[0]=l,r[1]=t):t=r[1],r[2]!==s||r[3]!==o||r[4]!==c||r[5]!==t?(n=(0,a.jsxs)(ev.l.Item,{selected:c,onSelect:s,children:[o,t]}),r[2]=s,r[3]=o,r[4]=c,r[5]=t,r[6]=n):n=r[6],n}try{n9.displayName||(n9.displayName="MergeDropdownOption")}catch{}let re=(0,u.lazy)(()=>n.e("packages_mergebox_components_sections_merge-section_command-line-instructions_CommandLineInst-cc1118").then(n.bind(n,44712)));function rt(e){let t,n,r,o,l,c,d,h,p,g,f,_,y,x,S,v,C,w,b,R=(0,i.c)(82),{baseRefName:N,canUserPushToBase:j,defaultCommitAuthorEmail:I,commitMessageBody:A,commitMessageHeadline:T,conflictsCondition:k,handleConfirmingMergeInfo:M,headRepository:O,helpUrl:L,isAdminBypassToggleChecked:P,isAdminBypassToggleVisible:D,isAutoMergeAllowed:F,isConfirmingMergeInfo:U,isCrossRepo:B,mergeable:$,numberOfCommits:G,mergeBoxRollupStatus:W,setShouldFocusPrimaryMergeButton:V,shouldFocusPrimaryMergeButton:Q,status:H,viewerMergeActions:z,possibleCommitAuthorEmails:K}=e,X=void 0!==F&&F,{mergeMethod:Y,setMergeMethod:J}=E(),{sendAnalyticsEvent:et}=(0,Z.s)(),[en,er]=(0,tc.A)(!1),ea=(0,u.useRef)(null);if(!k)return null;if(R[0]!==z){let e=z.find(rn);s(e),n=(t=function({mergeMethods:e}){return e.reduce((e,t)=>((t?.allowableStatus==="ALLOWED"||t?.allowableStatus==="ALLOWED_WITH_BYPASS")&&e.push(t.name),e),[])}({mergeMethods:e.mergeMethods})).includes(m.q$.MERGE),r=t.includes(m.q$.SQUASH),o=t.includes(m.q$.REBASE),R[0]=z,R[1]=t,R[2]=n,R[3]=r,R[4]=o}else t=R[1],n=R[2],r=R[3],o=R[4];let ei=o,es=D&&P,eo=H===q.ChecksPending?"pending":"failing",el=`Merging is blocked due to ${eo} merge requirements`;R[5]!==M||R[6]!==X||R[7]!==et?(l=()=>{M(!0),et(X?"direct_merge_section.auto_merge_click":"direct_merge_section.direct_merge_click",X?"MERGEBOX_AUTO_MERGE_SECTION_MERGE_BUTTON":"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_BUTTON")},R[5]=M,R[6]=X,R[7]=et,R[8]=l):l=R[8];let ec=l;R[9]!==M||R[10]!==X||R[11]!==et||R[12]!==V?(c=()=>{M(!1),V(!0),et(X?"direct_merge_section.cancel_auto_merge":"direct_merge_section.cancel_direct_merge",X?"MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON":"MERGEBOX_DIRECT_MERGE_CANCEL_CONFIRMATION_BUTTON")},R[9]=M,R[10]=X,R[11]=et,R[12]=V,R[13]=c):c=R[13];let ed=c;R[14]!==et||R[15]!==er?(d=()=>{er(!0),et("direct_merge_section.view_command_line_instructions","MERGEBOX_DIRECT_MERGE_SECTION_VIEW_COMMAND_LINE_INSTRUCTIONS_BUTTON")},R[14]=et,R[15]=er,R[16]=d):d=R[16];let eu=d;R[17]!==et||R[18]!==J?(h=(e,t)=>{J(e),et(t,"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_METHOD_MENU_ITEM")},R[17]=et,R[18]=J,R[19]=h):h=R[19];let em=h;if(U){let e,t=I||"",n=A||"",r=T||"";return R[20]!==N||R[21]!==ed||R[22]!==M||R[23]!==P||R[24]!==X||R[25]!==Y||R[26]!==K||R[27]!==t||R[28]!==n||R[29]!==r?(e=(0,a.jsx)(n7,{defaultCommitAuthorEmail:t,commitMessageBody:n,commitMessageHeadline:r,defaultBranchName:N,handleConfirmingMergeInfo:M,isBypassMerge:P,selectedMergeMethod:Y,onCancel:ed,isAutoMergeAllowed:X,possibleCommitAuthorEmails:K}),R[20]=N,R[21]=ed,R[22]=M,R[23]=P,R[24]=X,R[25]=Y,R[26]=K,R[27]=t,R[28]=n,R[29]=r,R[30]=e):e=R[30],e}R[31]!==N||R[32]!==k||R[33]!==O||R[34]!==en||R[35]!==B||R[36]!==er?(p=en&&ea&&(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(re,{baseRefName:N,conflictsCondition:k,headRepository:O,isCrossRepo:B,returnFocusRef:ea,onClose:()=>er(!1)})}),R[31]=N,R[32]=k,R[33]=O,R[34]=en,R[35]=B,R[36]=er,R[37]=p):p=R[37];let eh=1===t.length,ep=!X&&!$&&!es,eg=$&&"ALL_PASSED"===W;return R[38]!==n||R[39]!==Y||R[40]!==em?(g=n&&(0,a.jsx)(n9,{primaryText:"Create a merge commit",secondaryText:"All commits from this branch will be added to the base branch via a merge commit.",selected:Y===m.q$.MERGE,onSelect:()=>em(m.q$.MERGE,"direct_merge_section.select_create_a_merge_commit")}),R[38]=n,R[39]=Y,R[40]=em,R[41]=g):g=R[41],R[42]!==r||R[43]!==Y||R[44]!==G||R[45]!==em?(f=r&&(0,a.jsx)(n9,{primaryText:"Squash and merge",secondaryText:1===G?"The 1 commit from this branch will be added to the base branch.":`The ${G} commits from this branch will be combined into one commit in the base branch.`,selected:Y===m.q$.SQUASH,onSelect:()=>em(m.q$.SQUASH,"direct_merge_section.select_squash_and_merge")}),R[42]=r,R[43]=Y,R[44]=G,R[45]=em,R[46]=f):f=R[46],R[47]!==ei||R[48]!==Y||R[49]!==G||R[50]!==em?(_=ei&&(0,a.jsx)(n9,{primaryText:"Rebase and merge",secondaryText:`The ${G} commit${1!==G?"s":""} from this branch will be rebased and added to the base branch.`,selected:Y===m.q$.REBASE,onSelect:()=>em(m.q$.REBASE,"direct_merge_section.select_rebase_and_merge")}),R[47]=ei,R[48]=Y,R[49]=G,R[50]=em,R[51]=_):_=R[51],R[52]!==g||R[53]!==f||R[54]!==_?(y=(0,a.jsxs)(ev.l,{selectionVariant:"single",showDividers:!0,children:[g,f,_]}),R[52]=g,R[53]=f,R[54]=_,R[55]=y):y=R[55],R[56]!==V?(x=()=>V(!1),R[56]=V,R[57]=x):x=R[57],R[58]!==X||R[59]!==es||R[60]!==Y?(S=nY({mergeMethod:Y,confirming:!1,isBypassMerge:es,isAutoMergeAllowed:X}),R[58]=X,R[59]=es,R[60]=Y,R[61]=S):S=R[61],R[62]!==ec||R[63]!==el||R[64]!==Q||R[65]!==eg||R[66]!==y||R[67]!==x||R[68]!==S||R[69]!==eh||R[70]!==ep?(v=(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(nj,{hideSecondaryButton:eh,inactive:ep,inactiveTooltipText:el,inactiveTooltipDirection:"se",isPrimary:eg,secondaryButtonActive:!0,secondaryButtonAriaLabel:"Select merge method",shouldFocusPrimaryButton:Q,actionList:y,onFocusPrimaryButton:x,onPrimaryButtonClick:ec,children:S})}),R[62]=ec,R[63]=el,R[64]=Q,R[65]=eg,R[66]=y,R[67]=x,R[68]=S,R[69]=eh,R[70]=ep,R[71]=v):v=R[71],R[72]!==j||R[73]!==eu||R[74]!==L?(C=(0,a.jsx)(n5.Slot,{children:(0,a.jsx)("span",{className:"f6 fgColor-muted",children:j?(0,a.jsxs)(a.Fragment,{children:["You can also merge this with the command line."," ",(0,a.jsx)(ee.A,{as:"button",ref:ea,inline:!0,onClick:eu,children:"View command line instructions."})]}):(0,a.jsxs)(a.Fragment,{children:["Only those with"," ",(0,a.jsx)(ee.A,{href:`${L}/en/get-started/learning-about-github/access-permissions-on-github`,inline:!0,children:"write access"})," ","to this repository can merge pull requests."]})})}),R[72]=j,R[73]=eu,R[74]=L,R[75]=C):C=R[75],R[76]!==v||R[77]!==C?(w=(0,a.jsxs)(n5,{children:[v,C]}),R[76]=v,R[77]=C,R[78]=w):w=R[78],R[79]!==w||R[80]!==p?(b=(0,a.jsxs)(a.Fragment,{children:[p,w]}),R[79]=w,R[80]=p,R[81]=b):b=R[81],b}function rn(e){return e.name===m.tw.DIRECT_MERGE}try{re.displayName||(re.displayName="CommandLineInstructionsDialog")}catch{}try{rt.displayName||(rt.displayName="DirectMergeActionsSection")}catch{}var rr=n(46720);function ra(e){let t,n,r,s=(0,i.c)(6),{checked:o,onToggleChecked:l}=e;return s[0]!==o||s[1]!==l?(t=(0,a.jsx)(rr.A,{onChange:l,checked:o}),s[0]=o,s[1]=l,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eC.A.Label,{children:(0,a.jsx)("span",{className:"fgColor-danger",children:" Merge without waiting for requirements to be met (bypass rules) "})}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsxs)(eC.A,{children:[t,n]}),s[4]=t,s[5]=r):r=s[5],r}try{ra.displayName||(ra.displayName="BypassMergeRequirementsToggle")}catch{}function ri(e,t,n){return"MERGEABLE_IF_STATUSES_PASS"===e&&"BEHIND"!==n&&t!==q.ChecksPending&&t!==q.ChecksFailing&&t!==q.UnableToMerge||"MERGEABLE"===e}function rs(e){let t,n,r,s,o,c,d,h,p,g,f=(0,i.c)(44),{autoMergeRequest:_,baseRefName:y,handleConfirmingMergeInfo:x,isDraft:S,isInMergeQueue:v,mergeQueue:E,mergeRequirementsState:C,mergeStateStatus:w,mergeBoxRollupStatus:b,status:R,viewerCanAddAndRemoveFromMergeQueue:N,viewerCanAddToMergeQueueSolo:j,shouldFocusPrimaryMergeButton:I,setShouldFocusPrimaryMergeButton:A}=e,T=E?.url,[k,M]=(0,u.useState)(m.lD.GROUP),[O,L]=(0,u.useState)(!1),[P,D]=(0,tc.A)(),{sendAnalyticsEvent:F}=(0,Z.s)();f[0]!==D?(t={onError:e=>{D(e.message)}},f[0]=D,f[1]=t):t=f[1];let{mutate:U,isPending:B}=n2(t);f[2]!==x||f[3]!==F?(n=()=>{L(!0),x(!0),F("auto_merge_section.merge_click","MERGEBOX_AUTO_MERGE_BUTTON")},f[2]=x,f[3]=F,f[4]=n):n=f[4];let q=n;f[5]!==U||f[6]!==x||f[7]!==B||f[8]!==k||f[9]!==F||f[10]!==D?(r=()=>{B||(D(void 0),U({mergeMethod:k===m.lD.SOLO?"SOLO":"GROUP"}),x(!1),F("auto_merge_section.confirm_direct_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON"))},f[5]=U,f[6]=x,f[7]=B,f[8]=k,f[9]=F,f[10]=D,f[11]=r):r=f[11];let $=r;f[12]!==F?(s=(e,t)=>{M(e),F(t,"MERGEBOX_MERGE_QUEUE_SECTION_MERGE_METHOD_MENU_ITEM")},f[12]=F,f[13]=s):s=f[13];let G=s;f[14]!==C||f[15]!==w||f[16]!==R?(o=ri(C,R,w),f[14]=C,f[15]=w,f[16]=R,f[17]=o):o=f[17];let W=o,V=!N||"UNKNOWN"===w||S||v||!!_,Q=(0,u.useRef)(null);return f[18]!==O?(c=()=>{O&&Q?.current&&Q?.current.focus()},d=[O],f[18]=O,f[19]=c,f[20]=d):(c=f[19],d=f[20]),(0,u.useEffect)(c,d),f[21]!==P?(h=P&&(0,a.jsxs)(eE.A,{className:"mb-3",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),P]}),f[21]=P,f[22]=h):h=f[22],f[23]!==$||f[24]!==y||f[25]!==q||f[26]!==x||f[27]!==W||f[28]!==B||f[29]!==b||f[30]!==T||f[31]!==C||f[32]!==V||f[33]!==k||f[34]!==F||f[35]!==A||f[36]!==I||f[37]!==O||f[38]!==G||f[39]!==j?(p=O?(0,a.jsxs)(n5,{children:[(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(ed.Q,{ref:Q,variant:"primary",loading:B,loadingAnnouncement:nJ({mergeMethod:k,confirming:!0,inProgress:!0}),onClick:$,children:nJ({mergeMethod:k,confirming:!0,inProgress:!1})})}),(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(ed.Q,{onClick:()=>{x(!1),L(!1),F("auto_merge_section.cancel_auto_merge","MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON")},children:"Cancel"})})]}):(0,a.jsxs)(n5,{children:[(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(nj,{inactive:V,inactiveTooltipText:"UNKNOWN"===C?"Checking for the ability to merge automatically":"Merging is blocked due to failing merge requirements",inactiveTooltipDirection:"se",hideSecondaryButton:!j,secondaryButtonAriaLabel:"Select merge queue method",isPrimary:W&&"ALL_PASSED"===b,shouldFocusPrimaryButton:I,onFocusPrimaryButton:()=>A(!1),actionList:(0,a.jsx)(ev.l,{selectionVariant:"single",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n9,{primaryText:"Queue and merge in a group",secondaryText:`This pull request will be automatically grouped with other pull requests and merged into ${y}.`,selected:k===m.lD.GROUP,onSelect:()=>G(m.lD.GROUP,"merqe_queue_section.select_queue_and_merge_in_a_group")}),(0,a.jsx)(n9,{primaryText:"Queue and force solo merge",secondaryText:`This pull request will be merged into ${y} by itself.`,selected:k===m.lD.SOLO,onSelect:()=>G(m.lD.SOLO,"merqe_queue_section.select_queue_and_force_solo_merge")})]})}),onPrimaryButtonClick:q,children:nJ({mergeMethod:k,confirming:!1,inProgress:B})})}),(0,a.jsx)(n5.Slot,{children:(0,a.jsxs)("span",{className:"f6 fgColor-muted pl-2",children:["This repository uses the"," ",(0,a.jsx)(ee.A,{href:T,inline:!0,children:"merge queue"})," ","for all merges into the ",y," branch."]})})]}),f[23]=$,f[24]=y,f[25]=q,f[26]=x,f[27]=W,f[28]=B,f[29]=b,f[30]=T,f[31]=C,f[32]=V,f[33]=k,f[34]=F,f[35]=A,f[36]=I,f[37]=O,f[38]=G,f[39]=j,f[40]=p):p=f[40],f[41]!==h||f[42]!==p?(g=(0,a.jsxs)(a.Fragment,{children:[h,p]}),f[41]=h,f[42]=p,f[43]=g):g=f[43],g}function ro(e){let t,n,r,s,o,c,d,u,m,g,f=(0,i.c)(27),{autoMergeRequest:y,viewerCanDisableAutoMerge:S,isMergeQueueEnabled:v,handleConfirmingMergeInfo:E}=e,{sendAnalyticsEvent:C}=(0,Z.s)(),[w,b]=(0,tc.A)();f[0]!==b?(t={onError:e=>{b(e.message)}},f[0]=b,f[1]=t):t=f[1];let{mutate:R,isPending:N}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.disableAutoMerge),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.refetchQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);f[2]!==R||f[3]!==E||f[4]!==N||f[5]!==C||f[6]!==b?(n=()=>{N||(b(void 0),E(!1),R(),C("auto_merge_section.disable_auto_merge","MERGEBOX_AUTO_MERGE_DISABLE_BUTTON"))},f[2]=R,f[3]=E,f[4]=N,f[5]=C,f[6]=b,f[7]=n):n=f[7];let j=n;f[8]!==y?.mergeMethod?(r=y?.mergeMethod.toLowerCase()??"merge",f[8]=y?.mergeMethod,f[9]=r):r=f[9];let I=r,A=v?"be added to the merge queue":`${I} automatically`;f[10]!==w?(s=w&&(0,a.jsxs)(eE.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eI.A,{className:"mr-2",icon:l.StopIcon}),w]}),f[10]=w,f[11]=s):s=f[11];let T=!S;return f[12]!==j||f[13]!==N||f[14]!==T?(o=(0,a.jsx)(n5.Slot,{children:(0,a.jsx)(ed.Q,{disabled:T,onClick:j,loading:N,loadingAnnouncement:"Disabling auto-merge",children:"Disable auto-merge"})}),f[12]=j,f[13]=N,f[14]=T,f[15]=o):o=f[15],f[16]!==A?(c=(0,a.jsx)("span",{className:"text-semibold",children:A}),f[16]=A,f[17]=c):c=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(ee.A,{inline:!0,href:"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request",children:"Learn more about automatically merging a pull request."}),f[18]=d):d=f[18],f[19]!==c?(u=(0,a.jsx)(n5.Slot,{children:(0,a.jsxs)("div",{className:"flex-1",children:["This pull request will ",c," when all requirements are met."," ",d]})}),f[19]=c,f[20]=u):u=f[20],f[21]!==o||f[22]!==u?(m=(0,a.jsxs)(n5,{children:[o,u]}),f[21]=o,f[22]=u,f[23]=m):m=f[23],f[24]!==m||f[25]!==s?(g=(0,a.jsxs)(a.Fragment,{children:[s,m]}),f[24]=m,f[25]=s,f[26]=g):g=f[26],g}function rl(e){let t,n,r,s,o=(0,i.c)(50),{advisoryWorkspace:l,autoMergeRequest:c,handleConfirmingMergeInfo:m,id:h,isConfirmingMergeInfo:p,isInMergeQueue:g,mergeQueue:f,mergeStateStatus:_,viewerCanAddAndRemoveFromMergeQueue:y,viewerCanAddToMergeQueueSolo:x,viewerCanDisableAutoMerge:S,viewerCanEnableAutoMerge:v,viewerCanAdminBypassMergeRequirements:E,...C}=e,[w,b]=(0,u.useState)(!1),R=C.viewerMergeActions,N=R.find(rd),j=R.find(rc),I=ri(C.mergeRequirementsState,C.status,_),A=N?.allowableStatus==="ALLOWED",T=j?.allowableStatus==="ALLOWED",k=!!c,M=E&&!k&&(!!A||!I),O=v&&!I;if(l)return null;if(k){let e;o[0]!==c||o[1]!==m||o[2]!==A||o[3]!==S?(e=(0,a.jsx)(ro,{autoMergeRequest:c,isMergeQueueEnabled:A,viewerCanDisableAutoMerge:S,handleConfirmingMergeInfo:m}),o[0]=c,o[1]=m,o[2]=A,o[3]=S,o[4]=e):e=o[4],t=e}else if(A||T)if(A&&M&&w){let e;o[9]!==m||o[10]!==p||o[11]!==I||o[12]!==C||o[13]!==M?(e=(0,a.jsx)(rt,{mergeable:I,handleConfirmingMergeInfo:m,isAdminBypassToggleVisible:M,isAdminBypassToggleChecked:!0,isConfirmingMergeInfo:p,...C}),o[9]=m,o[10]=p,o[11]=I,o[12]=C,o[13]=M,o[14]=e):e=o[14],t=e}else if(A){let e;o[15]!==c||o[16]!==m||o[17]!==h||o[18]!==g||o[19]!==f||o[20]!==_||o[21]!==C||o[22]!==y||o[23]!==x?(e=(0,a.jsx)(rs,{autoMergeRequest:c,pullRequestId:h,handleConfirmingMergeInfo:m,isInMergeQueue:g,mergeQueue:f,mergeStateStatus:_,viewerCanAddAndRemoveFromMergeQueue:y,viewerCanAddToMergeQueueSolo:x,...C}),o[15]=c,o[16]=m,o[17]=h,o[18]=g,o[19]=f,o[20]=_,o[21]=C,o[22]=y,o[23]=x,o[24]=e):e=o[24],t=e}else if(v&&!w){let e;o[25]!==m||o[26]!==p||o[27]!==I||o[28]!==C||o[29]!==M||o[30]!==O?(e=(0,a.jsx)(rt,{handleConfirmingMergeInfo:m,mergeable:I,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:M,isAutoMergeAllowed:O,isConfirmingMergeInfo:p,...C}),o[25]=m,o[26]=p,o[27]=I,o[28]=C,o[29]=M,o[30]=O,o[31]=e):e=o[31],t=e}else{let e;o[32]!==m||o[33]!==w||o[34]!==p||o[35]!==I||o[36]!==C||o[37]!==M?(e=(0,a.jsx)(rt,{handleConfirmingMergeInfo:m,isAdminBypassToggleChecked:w,isAdminBypassToggleVisible:M,isConfirmingMergeInfo:p,mergeable:I,...C}),o[32]=m,o[33]=w,o[34]=p,o[35]=I,o[36]=C,o[37]=M,o[38]=e):e=o[38],t=e}else{let e;o[5]!==m||o[6]!==p||o[7]!==C?(e=(0,a.jsx)(rt,{mergeable:!1,handleConfirmingMergeInfo:m,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:!1,isConfirmingMergeInfo:p,...C}),o[5]=m,o[6]=p,o[7]=C,o[8]=e):e=o[8],t=e}let L=p?"rounded-2":"rounded-bottom-2";return o[39]!==L?(n=(0,d.$)("p-3 bgColor-muted borderColor-muted",L),o[39]=L,o[40]=n):n=o[40],o[41]!==w||o[42]!==p||o[43]!==b||o[44]!==M?(r=M&&!p&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(ra,{checked:w,onToggleChecked:()=>b(!w)})}),o[41]=w,o[42]=p,o[43]=b,o[44]=M,o[45]=r):r=o[45],o[46]!==t||o[47]!==n||o[48]!==r?(s=(0,a.jsxs)("div",{className:n,children:[r,t]}),o[46]=t,o[47]=n,o[48]=r,o[49]=s):s=o[49],s}function rc(e){return e.name===m.tw.DIRECT_MERGE}function rd(e){let{name:t}=e;return t===m.tw.MERGE_QUEUE}try{rs.displayName||(rs.displayName="AddToMergeQueueSection")}catch{}try{ro.displayName||(ro.displayName="DisableAutoMerge")}catch{}try{rl.displayName||(rl.displayName="MergeSection")}catch{}var ru=n(46251);function rm(){let e,t,n,r,s,o,c,d,m,g,f,y,S,v,E=(0,i.c)(29),[C,w]=(0,u.useState)("closed"),[b,R]=(0,u.useState)(null),N=(0,u.useRef)(null),j=(0,u.useRef)(null),{sendAnalyticsEvent:I}=(0,Z.s)();E[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{w("open"),R(null)},E[0]=e):e=E[0];let A=e;E[1]===Symbol.for("react.memo_cache_sentinel")?(t={onError:e=>{R(e.message),setTimeout(rp,1e3)}},E[1]=t):t=E[1];let{mutate:T,isPending:k}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.convertToDraft),c=x(),d=(0,_.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eN.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eN.hp)(e);return(0,eN.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eR.n)(a)}(t);E[2]!==T||E[3]!==k||E[4]!==I?(n=async()=>{k||(R(null),T(void 0,{onSuccess:()=>{w("closed"),setTimeout(rh,1e3),I("convert_to_draft_section.convert_to_draft","MERGEBOX_CONVERT_TO_DRAFT_SECTION_CONVERT_TO_DRAFT_BUTTON")}}))},E[2]=T,E[3]=k,E[4]=I,E[5]=n):n=E[5];let M=n;E[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsxs)(ru.B,{direction:"horizontal",align:"baseline",className:"py-2 px-1 text-small flex-justify-end",gap:"none",children:[(0,a.jsx)("span",{className:"fgColor-muted pr-1",children:"Still in progress?"}),(0,a.jsx)(ed.Q,{variant:"link",className:"Link--muted Link--inTextBlock text-normal",onClick:A,ref:N,children:"Convert to draft"})]}),E[6]=r):r=E[6];let O="open"===C;return E[7]===Symbol.for("react.memo_cache_sentinel")?(s=()=>w("closed"),o=(0,a.jsx)(tu.A.Header,{id:"convert-to-draft-dialog-title",children:"Convert this pull request to draft?"}),E[7]=s,E[8]=o):(s=E[7],o=E[8]),E[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(eE.A,{variant:"warning",children:"People who are already subscribed will not be unsubscribed."}),E[9]=c):c=E[9],E[10]!==b?(d=b&&(0,a.jsxs)(eE.A,{className:"my-2",variant:"danger",children:[(0,a.jsx)(l.StopIcon,{className:"mr-2"}),b]}),E[10]=b,E[11]=d):d=E[11],E[12]!==k?(m=()=>{k||(w("closed"),N.current?.focus())},E[12]=k,E[13]=m):m=E[13],E[14]!==k||E[15]!==m?(g=(0,a.jsx)(ed.Q,{className:"mr-1",disabled:k,variant:"invisible",onClick:m,children:"Cancel"}),E[14]=k,E[15]=m,E[16]=g):g=E[16],E[17]!==M||E[18]!==k?(f=(0,a.jsx)(ed.Q,{loading:k,loadingAnnouncement:"Converting to draft",onClick:M,ref:j,children:"Convert to draft"}),E[17]=M,E[18]=k,E[19]=f):f=E[19],E[20]!==g||E[21]!==f?(y=(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[g,f]}),E[20]=g,E[21]=f,E[22]=y):y=E[22],E[23]!==y||E[24]!==d?(S=(0,a.jsxs)("div",{className:"p-3",children:[c,d,y]}),E[23]=y,E[24]=d,E[25]=S):S=E[25],E[26]!==S||E[27]!==O?(v=(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsxs)(tu.A,{"aria-labelledby":"convert-to-draft-dialog-title",isOpen:O,returnFocusRef:N,initialFocusRef:j,onDismiss:s,children:[o,S]})]}),E[26]=S,E[27]=O,E[28]=v):v=E[28],v}function rh(){return(0,th.i)("The pull request was successfully converted to draft.")}function rp(){return(0,th.i)("Failed to convert the pull request to draft")}try{rm.displayName||(rm.displayName="ConvertToDraftSection")}catch{}var rg=n(91747);function rf(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:ty.mergeboxLoading,children:(0,a.jsx)(c.A,{})}),t[0]=e):e=t[0],e}let r_=(0,u.memo)(function(e){let t,n,r,s,l,c=(0,i.c)(11);c[0]!==e?({hideIcon:n,...t}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let d=void 0!==n&&n;return c[3]!==d?(r=(0,a.jsx)(tv,{hideIcon:d}),c[3]=d,c[4]=r):r=c[4],c[5]!==d||c[6]!==t?(s=(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(ry,{hideIcon:d,...t})}),c[5]=d,c[6]=t,c[7]=s):s=c[7],c[8]!==r||c[9]!==s?(l=(0,a.jsx)(o.t,{critical:!0,fallback:r,children:s}),c[8]=r,c[9]=s,c[10]=l):l=c[10],l});function ry(e){let t,n,r,s,o,l,c,d,m,g,S=(0,i.c)(20);S[0]!==e?({viewerLogin:r,channels:t,...n}=e,S[0]=e,S[1]=t,S[2]=n,S[3]=r):(t=S[1],n=S[2],r=S[3]);let{mergeMethod:v}=E();S[4]!==v?(s={mergeMethod:v,bypassRequirements:!1},S[4]=v,S[5]=s):s=S[5];let{data:C,refetch:w,isLoading:b,error:R}=function(e){let t,n,r=(0,i.c)(7),{mergeMethod:a,bypassRequirements:s}=e,o=new URLSearchParams;o.append("merge_method",a),o.append("bypass_requirements",(void 0!==s&&s).toString());let l=`${(0,p.e)(h.u.mergeBox)}?${o.toString()}`,c=x(),d=(0,_.jE)();return r[0]!==l||r[1]!==d||r[2]!==c?(t=async()=>(0,f.H)(l,c,d),r[0]=l,r[1]=d,r[2]=c,r[3]=t):t=r[3],r[4]!==c||r[5]!==t?(n={queryKey:c,queryFn:t,staleTime:1/0},r[4]=c,r[5]=t,r[6]=n):n=r[6],(0,y.I)(n)}(s);e:{if(C?.pullRequest.mergeBoxAliveChannels){o=C?.pullRequest.mergeBoxAliveChannels;break e}o=t}let N=o;S[6]!==w?(l=()=>{(0,u.startTransition)(()=>{w({cancelRefetch:!1})})},S[6]=w,S[7]=l):l=S[7];let j=l;if(S[8]!==N||S[9]!==j?(c={refetchQuery:j,channels:N},S[8]=N,S[9]=j,S[10]=c):c=S[10],ti(c),b){let e;return S[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(rf,{}),S[11]=e):e=S[11],e}if(R)throw R;if(!C)return null;S[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(rf,{}),m=(0,a.jsx)("h2",{className:"sr-only",children:"Merge info"}),S[12]=d,S[13]=m):(d=S[12],m=S[13]);let I=C.pullRequest.numberOfCommits||0;return S[14]!==C.mergeRequirements||S[15]!==C.pullRequest||S[16]!==n||S[17]!==I||S[18]!==r?(g=(0,a.jsxs)(u.Suspense,{fallback:d,children:[m,(0,a.jsx)(rx,{mergeRequirements:C.mergeRequirements,numberOfCommits:I,pullRequest:C.pullRequest,viewerLogin:r,...n})]}),S[14]=C.mergeRequirements,S[15]=C.pullRequest,S[16]=n,S[17]=I,S[18]=r,S[19]=g):g=S[19],g}function rx(e){let t,n,r,c,m,g,x,S,v,E,b,R,N,j,I,A,T,k,M,O,L,P,D,F=(0,i.c)(95),{helpUrl:U,hideIcon:B,mergeRequirements:K,numberOfCommits:X,pullRequest:Y,viewerLogin:J}=e;s(Y.viewerMergeActions.find(rv));let[Z,ee]=(0,u.useState)(!1),et=!Z,en=(0,rg.u)("merge_box_convert_to_draft_section"),[er,ea]=(0,u.useState)(!1),{isInMergeQueue:ei,state:es,viewerCanDeleteHeadRef:eo,viewerCanRestoreHeadRef:el}=Y,ec=en&&Y.viewerCanConvertToDraft&&!ei,ed=void 0!==B&&B||("CLOSED"===es||"MERGED"===es)&&!eo&&!el;F[0]!==Y.headRefOid?(t={pullRequestHeadSha:Y.headRefOid},F[0]=Y.headRefOid,F[1]=t):t=F[1];let eu=function(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=to(t),c=(0,_.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,f.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,throwOnError:!1,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,y.I)(r)}(t).data;if(F[2]!==K||F[3]!==Y||F[4]!==et||F[5]!==eu){b=function({pullRequest:e,mergeRequirements:t,statusChecksData:n}){if("MERGED"===e.state)return q.Merged;if("CLOSED"===e.state)return q.Closed;if(function(e){let t=$(e);return t.includes("PULL_REQUEST_REPO_STATE")||t.includes("PULL_REQUEST_USER_STATE")}(t))return q.NonactionableFailure;if(e.isInMergeQueue)return q.InMergeQueue;if(e.isDraft&&!W(n))return q.DraftReadyForReview;if(e.isDraft)return q.DraftNotReadyForReview;if(W(n))return q.ChecksFailing;if(G(n))return q.ChecksPending;if(Q(t,n))return q.NonRequiredChecksUnsuccessful;if(t?.state==="MERGEABLE"||t?.state==="MERGEABLE_IF_STATUSES_PASS"&&V(n))return q.Mergeable;if((function(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);if(!t)return[];let n=t?.ruleRollups?.filter(e=>"FAILED"===e.result);return n?n.map(e=>e.ruleType):[]})(t).includes("PULL_REQUEST")&&!H(t).includes("CHANGES_REQUESTED"))return q.AwaitingReview;if(H(t).includes("CHANGES_REQUESTED"))return q.ChangesRequested;else if(t?.state==="UNKNOWN"&&!z(t))return q.Unknown;else if(z(t))return q.MergeConflicts;else return q.UnableToMerge}({pullRequest:Y,mergeRequirements:K,statusChecksData:eu});let e=new MergeBoxStatusCalculator(Y,K,eu);x=e.overallStatus,n=e.sections.BlockedSection,r=e.sections.ChecksSection,c=e.sections.ClosedOrMergedStateMergeBox,m=e.sections.ConflictsSection,g=e.sections.DraftStateSection,S=e.sections.MergeQueueSection,E=e.sections.ReviewerSection,v=function(e){switch(e){case q.Mergeable:return{icon:l.CheckCircleFillIcon,iconColor:"success.emphasis",title:"Merge pull request"};case q.DraftReadyForReview:case q.DraftNotReadyForReview:return{icon:l.GitPullRequestDraftIcon,iconColor:"var(--fgColor-draft)",title:"Draft"};case q.InMergeQueue:return{icon:l.GitMergeQueueIcon,iconColor:"var(--fgColor-attention)",title:"Queued"};case q.ChecksPending:return{icon:l.DotFillIcon,iconColor:"var(--fgColor-muted)",title:"Checks pending"};case q.ChecksFailing:return{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger)",title:"Checks failing"};case q.NonRequiredChecksUnsuccessful:return{icon:l.DotFillIcon,iconColor:"var(--fgColor-muted)",title:"Non-required checks unsuccessful"};case q.AwaitingReview:return{icon:l.DotFillIcon,iconColor:"var(--fgColor-danger)",title:"Awaiting reviews"};case q.ChangesRequested:return{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger)",title:"Changes requested"};case q.MergeConflicts:return{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger)",title:"Merge conflicts"};case q.Unknown:return{icon:l.DotFillIcon,iconColor:"var(--fgColor-muted)",title:"Unknown"};case q.Merged:return{icon:l.GitMergeIcon,iconColor:"var(--fgColor-done)",title:"Merged"};case q.Closed:return{icon:l.GitPullRequestClosedIcon,iconColor:"var(--fgColor-muted)",title:"Closed"};default:return{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger)",title:"Unable to merge"}}}(b),R=function(e,t){let n;switch(e){case"ALL_PASSED":n={iconColor:"success.emphasis",borderColor:"borderColor-success-emphasis"};break;case"MERGED":n={iconColor:"done.emphasis",borderColor:"borderColor-done-emphasis"};break;case"QUEUED":n={iconColor:"attention.emphasis",borderColor:"borderColor-attention-emphasis"};break;default:n={iconColor:"neutral.emphasis",borderColor:"borderColor-default"}}return t&&(n.borderColor="borderColor-default"),n}(x,!et),F[2]=K,F[3]=Y,F[4]=et,F[5]=eu,F[6]=n,F[7]=r,F[8]=c,F[9]=m,F[10]=g,F[11]=x,F[12]=S,F[13]=v,F[14]=E,F[15]=b,F[16]=R}else n=F[6],r=F[7],c=F[8],m=F[9],g=F[10],x=F[11],S=F[12],v=F[13],E=F[14],b=F[15],R=F[16];let em=R;F[17]!==K?.conditions?(N=K?.conditions.find(rS),F[17]=K?.conditions,F[18]=N):N=F[18];let eh=N,ep=eh?.result==="PASSED";F[19]!==K?(j=function(e){let t=w(e);if(t.length<1)return!1;let n=t[0]?.ruleRollups.find(e=>"AUTHORIZATION"===e.ruleType);return n?.result==="FAILED"}(K),F[19]=K,F[20]=j):j=F[20];let eg=j;F[21]!==K?(I=C(K),F[21]=K,F[22]=I):I=F[22];let ef=I,e_=ei?l.GitMergeQueueIcon:l.GitMergeIcon;F[23]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{ea(!0)},F[23]=A):A=F[23];let ey=A,ex=!ep||eg,eS=Y.mergeBoxUserPreferences;F[24]===Symbol.for("react.memo_cache_sentinel")?(T=(0,d.$)(ty.mergePartialContainer,"position-relative partial-pull-merging-analytics-js"),F[24]=T):T=F[24],F[25]!==e_||F[26]!==em.iconColor||F[27]!==v||F[28]!==ed?(k=!ed&&(0,a.jsx)("div",{className:"d-none d-lg-block","data-testid":"mergeability-icon-wrapper",children:(0,a.jsx)(t_,{icon:e_,ariaLabel:v.title,iconBackgroundColor:em.iconColor})}),F[25]=e_,F[26]=em.iconColor,F[27]=v,F[28]=ed,F[29]=k):k=F[29];let ev=ex?ty.mergeBoxAdjustBorders:"",eE=`border rounded-2 ${em.borderColor}`;return F[30]!==ev||F[31]!==eE?(M=(0,d.$)(ev,eE),F[30]=ev,F[31]=eE,F[32]=M):M=F[32],F[33]!==n||F[34]!==ep||F[35]!==r||F[36]!==c.shouldRender||F[37]!==ef||F[38]!==m||F[39]!==g||F[40]!==U||F[41]!==Z||F[42]!==x||F[43]!==eS||F[44]!==S||F[45]!==K||F[46]!==X||F[47]!==Y.advisoryWorkspace||F[48]!==Y.autoMergeRequest||F[49]!==Y.baseRefName||F[50]!==Y.baseRepository||F[51]!==Y.deprovisionableCodespaces||F[52]!==Y.headRefName||F[53]!==Y.headRefOid||F[54]!==Y.headRepository||F[55]!==Y.id||F[56]!==Y.isCrossRepo||F[57]!==Y.isDraft||F[58]!==Y.isInMergeQueue||F[59]!==Y.latestOpinionatedReviews||F[60]!==Y.mergeQueue||F[61]!==Y.mergeQueueEntry||F[62]!==Y.mergeStateStatus||F[63]!==Y.pendingReviewRequests||F[64]!==Y.resourcePath||F[65]!==Y.state||F[66]!==Y.viewerCanAddAndRemoveFromMergeQueue||F[67]!==Y.viewerCanAddToMergeQueueSolo||F[68]!==Y.viewerCanAdminBypassMergeRequirements||F[69]!==Y.viewerCanDeleteHeadRef||F[70]!==Y.viewerCanDisableAutoMerge||F[71]!==Y.viewerCanDismissReviews||F[72]!==Y.viewerCanEnableAutoMerge||F[73]!==Y.viewerCanReRequestReviews||F[74]!==Y.viewerCanRestoreHeadRef||F[75]!==Y.viewerCanUpdate||F[76]!==Y.viewerCanUpdateBranch||F[77]!==Y.viewerMergeActions||F[78]!==Y.viewerUpdateMethods||F[79]!==E||F[80]!==er||F[81]!==ex||F[82]!==et||F[83]!==b||F[84]!==J?(O=c.shouldRender||!K?(0,a.jsx)(tp,{isCrossRepo:Y.isCrossRepo,state:Y.state,headRefName:Y.headRefName,headRepository:Y.headRepository,baseRepository:Y.baseRepository,viewerCanDeleteHeadRef:Y.viewerCanDeleteHeadRef,viewerCanRestoreHeadRef:Y.viewerCanRestoreHeadRef,deprovisionableCodespaces:Y.deprovisionableCodespaces}):S.shouldRender?(0,a.jsx)(nH,{viewerCanAddAndRemoveFromMergeQueue:Y.viewerCanAddAndRemoveFromMergeQueue,mergeQueueEntry:Y.mergeQueueEntry,mergeQueue:Y.mergeQueue,focusPrimaryMergeButton:ey}):(0,a.jsxs)(a.Fragment,{children:[et&&(0,a.jsxs)(a.Fragment,{children:[E.shouldRender&&(0,a.jsx)(eF,{consolidatedFailureReasons:E.consolidatedFailureReasons,helpUrl:U,latestOpinionatedReviews:Y.latestOpinionatedReviews,numReviewsRequired:E.numReviewsRequired,pendingRequestedReviews:Y.pendingReviewRequests,pullRequestId:Y.id,reviewsState:E.sectionStatus,viewerCanDismissReviews:Y.viewerCanDismissReviews,viewerCanReRequestReviews:Y.viewerCanReRequestReviews}),(0,a.jsx)(o.t,{fallback:(0,a.jsx)(nS,{}),children:(0,a.jsx)(nx,{pullRequestId:Y.id,pullRequestHeadSha:Y.headRefOid,focusPrimaryMergeButton:ey,sectionStatus:r.sectionStatus,shouldRender:r.shouldRender,mergeBoxUserPreferences:eS})}),m.shouldRender&&m.conflictsCondition&&(0,a.jsx)(nL,{advisoryWorkspace:Y.advisoryWorkspace,baseRefName:Y.baseRefName,headRefOid:Y.headRefOid,conflictsCondition:m.conflictsCondition,conflictsState:m.sectionStatus,mergeStateStatus:Y.mergeStateStatus,resourcePath:Y.resourcePath,canUserPushToBase:ep,viewerCanUpdateBranch:Y.viewerCanUpdateBranch,viewerLogin:J,viewerUpdateMethods:Y.viewerUpdateMethods}),n.shouldRender&&(0,a.jsx)(tR,{failingConditionsAndRules:n.failingConditionsAndRules}),g.shouldRender&&(0,a.jsx)(nW,{viewerCanUpdate:Y.viewerCanUpdate,helpUrl:U})]}),ex?null:(0,a.jsx)(rl,{advisoryWorkspace:Y.advisoryWorkspace,autoMergeRequest:Y.autoMergeRequest,baseRefName:Y.baseRefName,numberOfCommits:X,conflictsCondition:ef,headRepository:Y.headRepository,helpUrl:U,id:Y.id,isConfirmingMergeInfo:Z,isCrossRepo:Y.isCrossRepo,isDraft:Y.isDraft,isInMergeQueue:Y.isInMergeQueue,mergeQueue:Y.mergeQueue,canUserPushToBase:ep,defaultCommitAuthorEmail:K.defaultCommitAuthorEmail,commitMessageBody:K.commitMessageBody,commitMessageHeadline:K.commitMessageHeadline,mergeRequirementsState:K.state,mergeStateStatus:Y.mergeStateStatus,mergeBoxRollupStatus:x,viewerCanAddAndRemoveFromMergeQueue:Y.viewerCanAddAndRemoveFromMergeQueue,viewerCanAdminBypassMergeRequirements:Y.viewerCanAdminBypassMergeRequirements,viewerCanAddToMergeQueueSolo:Y.viewerCanAddToMergeQueueSolo,viewerCanDisableAutoMerge:Y.viewerCanDisableAutoMerge,viewerMergeActions:Y.viewerMergeActions,viewerCanEnableAutoMerge:Y.viewerCanEnableAutoMerge,shouldFocusPrimaryMergeButton:er,setShouldFocusPrimaryMergeButton:ea,status:b,possibleCommitAuthorEmails:K.possibleCommitAuthorEmails,handleConfirmingMergeInfo:ee})]}),F[33]=n,F[34]=ep,F[35]=r,F[36]=c.shouldRender,F[37]=ef,F[38]=m,F[39]=g,F[40]=U,F[41]=Z,F[42]=x,F[43]=eS,F[44]=S,F[45]=K,F[46]=X,F[47]=Y.advisoryWorkspace,F[48]=Y.autoMergeRequest,F[49]=Y.baseRefName,F[50]=Y.baseRepository,F[51]=Y.deprovisionableCodespaces,F[52]=Y.headRefName,F[53]=Y.headRefOid,F[54]=Y.headRepository,F[55]=Y.id,F[56]=Y.isCrossRepo,F[57]=Y.isDraft,F[58]=Y.isInMergeQueue,F[59]=Y.latestOpinionatedReviews,F[60]=Y.mergeQueue,F[61]=Y.mergeQueueEntry,F[62]=Y.mergeStateStatus,F[63]=Y.pendingReviewRequests,F[64]=Y.resourcePath,F[65]=Y.state,F[66]=Y.viewerCanAddAndRemoveFromMergeQueue,F[67]=Y.viewerCanAddToMergeQueueSolo,F[68]=Y.viewerCanAdminBypassMergeRequirements,F[69]=Y.viewerCanDeleteHeadRef,F[70]=Y.viewerCanDisableAutoMerge,F[71]=Y.viewerCanDismissReviews,F[72]=Y.viewerCanEnableAutoMerge,F[73]=Y.viewerCanReRequestReviews,F[74]=Y.viewerCanRestoreHeadRef,F[75]=Y.viewerCanUpdate,F[76]=Y.viewerCanUpdateBranch,F[77]=Y.viewerMergeActions,F[78]=Y.viewerUpdateMethods,F[79]=E,F[80]=er,F[81]=ex,F[82]=et,F[83]=b,F[84]=J,F[85]=O):O=F[85],F[86]!==M||F[87]!==O?(L=(0,a.jsx)("div",{className:M,children:O}),F[86]=M,F[87]=O,F[88]=L):L=F[88],F[89]!==ec?(P=ec&&(0,a.jsx)(rm,{}),F[89]=ec,F[90]=P):P=F[90],F[91]!==L||F[92]!==P||F[93]!==k?(D=(0,a.jsxs)("div",{className:T,children:[k,L,P]}),F[91]=L,F[92]=P,F[93]=k,F[94]=D):D=F[94],D}function rS(e){return"PULL_REQUEST_USER_STATE"===e.type}function rv(e){return e.name===m.tw.DIRECT_MERGE}try{rf.displayName||(rf.displayName="MergeBoxLoading")}catch{}try{r_.displayName||(r_.displayName="MergeBoxWithSuspense")}catch{}try{ry.displayName||(ry.displayName="MergeBoxWrapper")}catch{}try{rx.displayName||(rx.displayName="MergeBox")}catch{}function rE(e){return Object.values(m.q$).includes(e)}},14521:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(79802),i=n(96540),s=n(2635),o=n(23657),l=n(72303);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),r=(0,a.O)(t);return(0,o.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,o.iI)()||c}},16378:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>s});var r=n(47970),a=n(99054);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return a.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,n)=>{n.d(t,{C:()=>s});var r=n(25536),a=n(14521),i=n(96540);function s(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:s}=(0,r.O)(),o=!!s||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{o||n({id:e.id,owner:e.owner})},[n,o]),d=(0,i.useCallback)(()=>{o||n(void 0)},[n,o]);return{activeCopilotSpaceId:l,readOnly:o,handleSpaceSelect:c,clearSpaceSelection:d}}},17645:(e,t,n)=>{n.d(t,{Qv:()=>s,TW:()=>l,iG:()=>o,jw:()=>d,lD:()=>i,nw:()=>c,q$:()=>a,tw:()=>r});let r={DIRECT_MERGE:"DIRECT_MERGE",AUTO_MERGE:"AUTO_MERGE",MERGE_QUEUE:"MERGE_QUEUE"},a={MERGE:"MERGE",SQUASH:"SQUASH",REBASE:"REBASE"},i={GROUP:"GROUP",SOLO:"SOLO"},s={Approvals:"approvals",RequestedChanges:"requested changes",PendingReviewRequest:"pending reviews"},o=["PULL_REQUEST_RULES"],l=["PULL_REQUEST_USER_STATE"],c=["PULL_REQUEST_MERGE_CONFLICT_STATE"],d=["PULL_REQUEST_STATE","PULL_REQUEST_MERGE_METHOD","PULL_REQUEST_REPO_STATE","UNKNOWN"]},17925:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(35247),a=n(67475);function i(e,t){if(!r.W.chatInputCommands)return null;let n=(0,a.o)(t);if(0===n.length)return null;let i=RegExp(`^\\/(${n.join("|")})(?:\\s|$)`,"i"),s=e.match(i);return s&&s[1]?s[1].toLowerCase():null}},20330:(e,t,n)=>{n.d(t,{U:()=>l});var r=n(99054),a=n(17925),i=n(25641),s=n(35247),o=n(79216);let l=function({references:e,agents:t,plugins:n}){this.parser=function(l){let c=l.split(/(\s+)/),d=[];for(let[l,u]of c.entries()){if(s.W.chatInputCommands&&0===l){let e=(0,a.V)(u,n);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===l&&r.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let h=o.Q.parse(u),p=h&&e?.find(e=>o.Q.refersTo(h,e));if(h){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:p&&(0,i.Vb)(p),referenceMention:h}});continue}let g=d.at(-1);g?.type==="text"?g.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},20622:(e,t,n)=>{n.d(t,{u:()=>r});let r={baseComparisonInfo:"base_comparison_info",changeGroups:"change_groups",codeButton:"code_button",codeowners:"codeowners",commits:"commits",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_entry_lines",richDiff:"rich_diff",abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",convertToDraft:"convert_to_draft",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",dismissReview:"dismiss_review",enableAutoMerge:"enable_auto_merge",generateChangeGroups:"generate_change_groups",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitCopilotGroupsFeedback:"submit_copilot_groups_feedback",submitReview:"submit_review",submitSuggestedChanges:"apply_suggestions",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateShowChangeGroupsPreference:"update_show_change_groups_preference",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference",updateWhitespacePreference:"update_whitespace_preference",hideComment:"hide_comment",unhideComment:"unhide_comment",addSuggestionToBatch:"add_suggestion_to_batch",removeSuggestionFromBatch:"remove_suggestion_from_batch",discardSuggestionBatch:"discard_suggestion_batch"}},26408:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(16654),a=n(82490),i=n(96540),s=n(18312),o=n(2635),l=n(33592),c=n(23657);function d(e,t,n,m,h=!1){let[p,g]=(0,i.useState)(),f=(0,i.useCallback)(()=>g(void 0),[]),{topRepositoriesCache:_,currentRepository:y}=(0,o.Pk)(),x=(0,l.b)(),[S,v]=(0,i.useState)([]),[E,C]=(0,i.useState)(!_&&"initial"),w=(0,i.useRef)(void 0),b=(0,s.useRelayEnvironment)(),R=m&&""!==m.trim();if(p&&!_&&!e&&!R){let e=u(p||[]),{ownerLogin:t,name:n}=y??{};y&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:y.id,isInOrganization:"Organization"===y.ownerType,name:y.name,nwo:`${y.ownerLogin}/${y.name}`,ownerLogin:y.ownerLogin,ownerAvatarUrl:`/${y.ownerLogin}.png?s=40`}),setTimeout(()=>x.setTopRepositoryTopics(e),10),C(!1),g(void 0)}let N=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(b,{first:n,owner:R?m:void 0});g(e)}catch{}finally{C(!1)}},[R,m,b,g,n]);return((0,i.useEffect)(()=>{t&&!R&&N()},[N,R,t,m]),(0,i.useEffect)(()=>{let t=async e=>{C(!0);let{repositories:t}=await (0,r.vO)(b,{query:R?(0,c.rl)(m,e,h):(0,a.J)(e,{includeForks:h}),onStart:e=>{w.current?.unsubscribe(),w.current=e}});v(t.length?u(t):[]),C(!1)};e||R?t(e):_&&v(_)},[e,R,m,b,_,h]),(0,i.useEffect)(()=>{x.setTopRepositoryTopics(void 0)},[x,m]),!_||e||R)?{repositories:S,loading:E,resetTopRepoResults:f}:{repositories:_,loading:!1,resetTopRepoResults:f}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},27844:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(74848),a=n(21728),i=n(77430),s=n(5524);function o(e){let t,n,o,l,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:g,nwo:f,ownerAvatarUrl:_}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==g||c[4]!==_?(n=(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:_,square:g,size:16})}),c[3]=g,c[4]=_,c[5]=n):n=c[5],c[6]!==h?(o=h&&(0,r.jsx)(s.l.TrailingVisual,{children:h}),c[6]=h,c[7]=o):o=c[7],c[8]!==f||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==o?(l=(0,r.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[n,f,o]},f),c[8]=f,c[9]=m,c[10]=t,c[11]=n,c[12]=o,c[13]=l):l=c[13],l}try{o.displayName||(o.displayName="RepositoryListItem")}catch{}},30923:(e,t,n)=>{n.d(t,{Ee:()=>l,b4:()=>c,Ts:()=>o});var r=n(50467);let a=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,r._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};var i=n(69759),s=n(51987);async function o(e,t,n){let r=new Request(t,n);(0,s.tV)(r.headers);let o=await self.fetch(r);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return!function(e,t,n=!1){let r=t.headers.get("content-type")||"";if(!n&&!r.startsWith("text/html"))throw new a(`expected response with text/html, but was ${r}`,t);if(n&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new a(`expected response with text/html or application/json, but was ${r}`,t);let i=t.headers.get("x-html-safe");if(i){if(!e.includes(i))throw new a("response X-HTML-Safe nonce did not match",t)}else throw new a("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),o),(0,i.B)(e,await o.text())}function l(e,t,n=1e3,r=[200],a=[202]){return async function n(i){let o=new Request(e,t);(0,s.tV)(o.headers);let l=await self.fetch(o);if(a.includes(l.status))return await new Promise(e=>setTimeout(e,i)),n(1.5*i);if(r.includes(l.status))return l;if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);throw Error(`Unexpected ${l.status} response status from poll endpoint`)}(n)}async function c(e,t,n){let{wait:r=500,acceptedStatusCodes:a=[200],max:i=3,attempt:o=0}=n||{},l=async()=>new Promise((n,l)=>{setTimeout(async()=>{try{let r=new Request(e,t);(0,s.tV)(r.headers);let l=await self.fetch(r);if(a.includes(l.status)||o+1===i)return n(l);n("retry")}catch(e){l(e)}},r*o)}),d=await l();return"retry"!==d?d:c(e,t,{wait:r,acceptedStatusCodes:a,max:i,attempt:o+1})}},31971:(e,t,n)=>{n.d(t,{M:()=>r});function r(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},33544:(e,t,n)=>{n.d(t,{x:()=>g});var r=n(74848),a=n(38621),i=n(57352),s=n(27042),o=n(5524),l=n(87448),c=n(88934),d=n(96540),u=n(11083),m=n(62227),h=n(34164),p=n(69599);function g({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:s=3,redirectURI:o,useFullWidthStyle:g,forceWrap:y,sx:x}){let S=(0,c.zy)(),v=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{(0,p.G7)("record_sso_banner_metrics")&&!v.current&&n&&n.length>0&&((0,u.i)({incrementKey:(0,p.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),v.current=!0)},[n]),!n||0===n.length)return null;let E=Math.max(0,n.length-s),C=1===n.length||E>0?(0,r.jsx)("b",{children:n.slice(0,s).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(l.az,{sx:x,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:m.A.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(l.Hx,{sx:{borderRadius:2*!g,borderWidth:g?"1px 0":1},className:m.A.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{className:m.A.ShieldLockIcon}),(0,r.jsx)(i.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${_({location:S,redirectURI:o})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:m.A.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:m.A.Octicon}),(0,r.jsxs)("div",{className:(0,h.$)(m.A.Box_2,y&&m.A.ForceWrap),children:[(0,r.jsxs)("p",{className:m.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===E&&"the ",s>0&&(0,r.jsxs)(r.Fragment,{children:[C," "]}),E>0&&(0,r.jsxs)(r.Fragment,{children:[s>0&&"and ",E," other"," "]}),n.length>1&&1!==E?"organizations":"organization","."]}),(0,r.jsx)("p",{className:m.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(f,{portalContainerName:t,protectedOrgs:n,redirectURI:o})})]})]})})})})})}function f({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,c.zy)();return(0,r.jsxs)(s.W,{children:[(0,r.jsx)(s.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(s.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(o.l,{children:t.map(e=>(0,r.jsx)(o.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${_({location:a,redirectURI:n})}`},children:e},`org-${e}`))})})]})}function _({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{g.displayName||(g.displayName="SingleSignOnBanner")}catch{}try{f.displayName||(f.displayName="SingleSignOnButton")}catch{}},34665:(e,t,n)=>{n.d(t,{a:()=>r});function r(e,t,n){try{let r=new URL(e,window.location.origin).pathname.split("/").filter(Boolean);if(r.length<7||"actions"!==r[2]||"runs"!==r[3]||"job"!==r[5])return null;let a=r[0],i=r[1],s=r[4],o=r[6];if(!a||!i||!o||!s)return null;return{type:"job",id:parseInt(o,10),repoName:i,repoOwner:a,workflow:{id:parseInt(s,10)},jobName:n||null,jobFailed:t}}catch{return null}}},35673:(e,t,n)=>{n.d(t,{UJ:()=>_,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>h,zc:()=>p,Cb:()=>g,hl:()=>f});var r=n(74848),a=n(21728),i=n(56149),s=n(27042),o=n(96540);let l={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--Otmle",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--D7AeL"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",h=()=>{let e,t,n,s=(0,a.c)(3),c=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(c.current,u)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:c,className:l.chatPortalContainer}),s[2]=n):n=s[2],n},p=()=>{let e,t,n,s=(0,a.c)(3),d=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(d.current,c)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:d,className:l.menuPortalContainer}),s[2]=n):n=s[2],n},g=()=>{let e,t,n,s=(0,a.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},f=()=>{let e,t,n,s=(0,a.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,m)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},_=e=>{let t,n,i,l,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[h,p]=(0,o.useState)(y);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>p(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,o.useEffect)(l,d),!h)return null;let g=i||c;return m[6]!==t||m[7]!==n||m[8]!==g?(u=(0,r.jsx)(s.W.Overlay,{...n,portalContainerName:g,children:t}),m[6]=t,m[7]=n,m[8]=g,m[9]=u):u=m[9],u};try{h.displayName||(h.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{g.displayName||(g.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{_.displayName||(_.displayName="ActionMenuOverlay")}catch{}function y(){return"undefined"!=typeof document}},39176:(e,t,n)=>{n.d(t,{k:()=>r});function r(e){return function e(t,n){let r=t[n];return r?r.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,r={},a=new Set(n);for(let e of(r[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!a.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}(e),"")}},39345:(e,t,n)=>{n.d(t,{T:()=>g});var r=n(74848),a=n(21728);let i={content:"NewAgentTaskForm-module__content--VKy1a",header:"NewAgentTaskForm-module__header--ov_IU",skeleton:"NewAgentTaskForm-module__skeleton--AzvZ1"};var s=n(76186),o=n(2635),l=n(30721),c=n(18312),d=n(66565),u=n(78314),m=n(55899),h=n(63461);let p=(0,l.E7)();function g(e){let t,n,l,g,f,_=(0,a.c)(19),{createTask:y,currentRepo:x,currentReference:S,onCreate:v,showHeader:E,hideRepoSelector:C,eventType:w,isInPortal:b}=e,R=void 0===E||E,N=(0,h.G)(),j=(0,u.t)(),I=x||j;_[0]!==y||_[1]!==w||_[2]!==v?(t=async(e,t,n,r,a)=>{let i=e.trim();""!==i&&t&&(y({id:(0,m.u)(),nwo:t.nameWithOwner,problemStatement:i,baseRef:n||t.defaultBranch,reference:a,eventType:w,eventContent:i,customAgent:r}),v?.())},_[0]=y,_[1]=w,_[2]=v,_[3]=t):t=_[3];let A=t;_[4]!==R?(n=R&&(0,r.jsx)("div",{className:i.header,children:(0,r.jsx)("h2",{className:"f5",children:"New agent task"})}),_[4]=R,_[5]=n):n=_[5];let T=`${i.content} ${R?"":"pt-3"}`;return _[6]!==N||_[7]!==S||_[8]!==A||_[9]!==C||_[10]!==I||_[11]!==b?(l=N?(0,r.jsx)(c.RelayEnvironmentProvider,{environment:p,children:(0,r.jsx)(o.Mj,{workerPath:N.findFileWorkerPath,threadId:null,refs:N.refs||[],mode:"immersive",ssoOrganizations:N.ssoOrganizations||[],copilotChatPayload:N,children:(0,r.jsx)(s.Q,{handleUserSubmit:A,initialRepo:I,initialReference:S,hideRepoSelector:C,isInPortal:b})})}):(0,r.jsx)(d.f,{className:i.skeleton}),_[6]=N,_[7]=S,_[8]=A,_[9]=C,_[10]=I,_[11]=b,_[12]=l):l=_[12],_[13]!==T||_[14]!==l?(g=(0,r.jsx)("div",{className:T,children:l}),_[13]=T,_[14]=l,_[15]=g):g=_[15],_[16]!==n||_[17]!==g?(f=(0,r.jsxs)(r.Fragment,{children:[n,g]}),_[16]=n,_[17]=g,_[18]=f):f=_[18],f}try{g.displayName||(g.displayName="NewAgentTaskForm")}catch{}},39619:(e,t,n)=>{n.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>o,fD:()=>l,qR:()=>a});var r=n(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,r._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,r._)(this,"reference",void 0),(0,r._)(this,"openPanel",void 0),(0,r._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,r._)(this,"context",void 0),this.context=e}};function a(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function o(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function l(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},40235:(e,t,n)=>{n.d(t,{x:()=>h});var r,a=n(96540),i=n(70263),s=n(11418),o=n(73056),l=n(74848),c=n(10204);let d=(0,a.createContext)(null),u=null;function m(e,t){let n=c.KK.parse(e);if(!n)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new c.m0),u.add({topic:n,subscriber:t}),{unsubscribe:()=>{u?.delete({topic:n,subscriber:t})}}}try{d.displayName||(d.displayName="AliveTestContext")}catch{}try{(r=function({children:e,initialMessages:t}){return(0,a.useEffect)(()=>{let e=[];if(t)for(let[n,r]of t){let t=window.setTimeout(()=>{var e=n,t=r;if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let n of Array.from(u.subscribers(e)))n(t)},0);e.push(t)}return()=>{for(let t of(u=null,e))window.clearTimeout(t)}}),(0,l.jsx)(d.Provider,{value:m,children:e})}).displayName||(r.displayName="AliveTestProvider")}catch{}function h(e,t){let n=(0,i.A)(),r=(0,a.useContext)(d);(0,a.useEffect)(()=>{let a=()=>{},i=!1;return async function(){if(e){if("function"==typeof r){let n=await r(e,t);n&&(a=n.unsubscribe);return}try{let r=await (0,s.H)();if(i)return;let l=(0,o.$)(r,e,t);l?.unsubscribe&&(n()?a=l.unsubscribe:l.unsubscribe())}catch(e){console.error(e)}}}(),()=>{i=!0,a()}},[e,t,n,r])}},44334:(e,t,n)=>{n.d(t,{T:()=>s});var r=n(96540),a=n(10422),i=n(38621);function s(e,t,n){if(t)return{icon:i.GitMergeQueueIcon,color:"var(--fgColor-attention)","data-testid":"icon-git-merge-queue"};if("queued"===n)return{icon:i.ClockIcon,color:"var(--fgColor-attention)","data-testid":"icon-clock"};if("open"===e){if("waiting_for_user"===n||"completed"===n)return{icon:i.CheckCircleFillIcon,color:"var(--fgColor-success)","data-testid":"icon-check-circle-fill"};if("failed"===n||"timed_out"===n)return{icon:i.StopIcon,color:"var(--fgColor-danger)","data-testid":"icon-stop"};if("in_progress"===n)return{icon:()=>(0,r.createElement)(a.gX,{animated:!0}),color:"attention.fg","data-testid":"icon-spinning-circle"};if("idle"===n)return{icon:i.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-dot"};if("cancelled"===n)return{icon:i.SkipIcon,color:"var(--fgColor-muted)","data-testid":"icon-skip"}}return"merged"===e?{icon:i.GitMergeIcon,color:"var(--fgColor-done)","data-testid":"icon-git-merge"}:"closed"===e?{icon:i.GitPullRequestClosedIcon,color:"var(--fgColor-danger)","data-testid":"icon-skip"}:{icon:i.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-idle"}}},44956:(e,t,n)=>{n.d(t,{m:()=>s});var r=n(74848),a=n(21373);let i={footerContainer:"SpaceDialogFooter-module__footerContainer--J2LGP"};function s({onSave:e,onCancel:t,saveButtonText:n,isLoading:s=!1,loadingAnnouncement:o="",disabled:l=!1}){return(0,r.jsxs)("div",{className:i.footerContainer,children:[(0,r.jsx)(a.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,r.jsx)(a.Q,{variant:"primary",loading:s,loadingAnnouncement:o,onClick:e,disabled:l,children:n})]})}try{s.displayName||(s.displayName="SpaceDialogFooter")}catch{}},47865:(e,t,n)=>{n.d(t,{Z:()=>d,c:()=>CreateJobError});var r=n(50467),a=n(21728),i=n(97665),s=n(94747),o=n(51120),l=n(55899),c=n(93654);let CreateJobError=class CreateJobError extends Error{constructor(e){let t,n;switch(e&&"object"==typeof e&&"status"in e&&"number"==typeof e.status&&(t=e.status),t){case 0:n="Network error. Please check your connection and try again.";break;case 400:n="We couldn't start the task with the information provided. Please verify your input and try again.";break;case 401:n="You don't have permission to create a pull request in this repository.";break;case 402:n="You've run out of Copilot premium quota for automated changes.";break;case 403:n="The Coding Agent isn't available for this repository or organization.";break;case 404:n="We couldn't find the repository or resource needed to create the pull request. If this is a new repository, make sure it has at least one commit.";break;case 409:n="A pull request already exists for these branches.";break;case 422:n="A repository rule blocked automatic branch or PR creation.";break;default:n="An unexpected error occurred. Please try again."}super(n,{cause:e}),(0,r._)(this,"status",void 0),this.name="CreateJobError",this.status=t}};function d(e){let t,n,r,o,d,m,h,p=(0,a.c)(18),{onError:g}=e,f=(0,i.jE)();p[0]===Symbol.for("react.memo_cache_sentinel")?(t=["createTask"],p[0]=t):t=p[0],p[1]!==f?(n=async e=>{await f.cancelQueries({queryKey:c.ZL});let t=f.getQueryData(c.ZL)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a,customAgent:i}){return{resource_type:"pull",resource_id:-1,resource_global_id:"",session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:a,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,custom_agent:i}}(e);return f.setQueryData(c.ZL,[n,...t]),{previousTasks:t}},p[1]=f,p[2]=n):n=p[2],p[3]!==g||p[4]!==f?(r=(e,t)=>{let n=(f.getQueryData(c.ZL)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);f.setQueryData(c.ZL,n),g?.(e,t)},p[3]=g,p[4]=f,p[5]=r):r=p[5],p[6]!==f?(o=()=>{f.invalidateQueries({queryKey:c.ZL})},p[6]=f,p[7]=o):o=p[7],p[8]!==n||p[9]!==r||p[10]!==o?(d={mutationKey:t,onMutate:n,mutationFn:u,onError:r,onSuccess:o},p[8]=n,p[9]=r,p[10]=o,p[11]=d):d=p[11];let _=(0,s.n)(d);p[12]!==_?(m=(e,t)=>{let n=t??(0,l.u)();_.mutate({...e,clientGeneratedId:n})},p[12]=_,p[13]=m):m=p[13];let y=m;return p[14]!==y||p[15]!==_.error||p[16]!==_.isPending?(h={createTask:y,isCreating:_.isPending,createError:_.error},p[14]=y,p[15]=_.error,p[16]=_.isPending,p[17]=h):h=p[17],h}async function u(e){if(!(await m({...e,title:e.title??e.problemStatement})).ok)throw Error(`Failed to create task: ${e.clientGeneratedId}`);return e.clientGeneratedId}async function m({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:r,eventType:a,eventContent:i,title:s,reference:l,customAgent:c}){let d=`/agents/swe/jobs/${t}`,u=l?`On ${l}, `:"";try{return await (0,o.I)({path:d,method:"POST",body:{problem_statement:u+n,pull_request:{...r&&{base_ref:`refs/heads/${r}`},...s&&{title:s}},event_identifiers:[e],event_type:a,event_content:i,custom_agent:c}})}catch(e){if(e instanceof o.Y)throw new CreateJobError(e);throw e}}},50129:(e,t,n)=>{n.d(t,{Kg:()=>o,Yu:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=(0,i.createContext)(null);function o(e){let t,n,i=(0,a.c)(5),{children:o,basePageDataUrl:l}=e;i[0]!==l?(t={basePageDataUrl:l},i[0]=l,i[1]=t):t=i[1];let c=t;return i[2]!==o||i[3]!==c?(n=(0,r.jsx)(s.Provider,{value:c,children:o}),i[2]=o,i[3]=c,i[4]=n):n=i[4],n}function l(){let e=(0,i.useContext)(s);if(!e)throw Error("usePageDataContext must be used within a PageDataContextProvider");return e}try{s.displayName||(s.displayName="PageDataContext")}catch{}try{o.displayName||(o.displayName="PageDataContextProvider")}catch{}},51563:(e,t,n)=>{n.d(t,{$:()=>d});var r=n(33592),a=n(23657),i=n(72011),s=n(97665),o=n(94747),l=n(96379),c=n(31971);let d=e=>{let t=(0,r.b)(),n=(0,s.jE)(),{mutateAsync:d,...u}=(0,o.n)({onSuccess:async()=>{n.invalidateQueries({queryKey:i.O6}),e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async n=>{let r=e?(0,a.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:n.visibility,base_role:n.baseRole}},s=await (0,l.lS)(r,{method:e?"PUT":"POST",body:i}),o=await s.json();if(!s.ok)throw o.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:o}),o}});return{upsertCopilotSpace:d,...u}}},51880:(e,t,n)=>{n.d(t,{B:()=>l});var r=n(74848),a=n(29731),i=n(34164),s=n(24347);let o={container:"LeadingContent-module__container--cui6v",isSelectable:"LeadingContent-module__isSelectable--EzWvg"},l=({style:e,className:t,children:n})=>{let{isSelectable:l}=(0,s.v)();return(0,r.jsx)("div",{className:(0,i.$)(o.container,l&&o.isSelectable,t),...(0,a.G)("list-view-item-leading-content"),style:e,children:n})};try{l.displayName||(l.displayName="ListItemLeadingContent")}catch{}},53885:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(37285),a=n(50129);function i(e,t){let{basePageDataUrl:n}=(0,a.Yu)(),i=`${n}/page_data/${e}`;return t&&(i+=`?${t}`),(0,r.RD)(i)}},54114:(e,t,n)=>{n.d(t,{Rw:()=>I});var r=n(74848),a=n(6665),i=n(19189),s=n(25556),o=n(34535),l=n(96459),c=n(38621),d=n(40480),u=n(46720),m=n(69726),h=n(87448),p=n(10095),g=n(96540),f=n(96379),_=n(52870);function y(e,t,n){let r=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,o=`${e}/${s}`;if(n&&n.some(e=>e.path===o))continue;let l={items:[],data:{contentType:o===a?"file":"directory",name:s,path:o,isClientOnly:!0}};r.push(l)}return r}let x={checkbox:"FileTreePicker-module__checkbox--uY6AK",itemContainer:"FileTreePicker-module__itemContainer--ShYuv",Box:"FileTreePicker-module__Box--RKQKr",Box_1:"FileTreePicker-module__Box_1--usRNW",Octicon:"FileTreePicker-module__Octicon--rINlU",Box_2:"FileTreePicker-module__Box_2--yFodr"};var S=n(53419);function v(e,t){let n=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":n.clear(),n.add(t.path),(0,S.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:n.size});break;case"SELECT_FILE":n.add(t.path),(0,S.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,S.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,S.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,S.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function E({isActive:e,file:t,onItemSelected:n,getItemUrl:i,selectedItemRef:l,navigate:m,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:f,navigateOnClick:_,isSelected:y,singleSelect:S}){let{sendRepoClickEvent:v}=(0,a.T)(),E=g.useRef(null),C=(0,o.Z)({focusRowRef:E,mouseRowRef:E}),w="submodule"===t.data.contentType,b=p?.(t.data);(0,g.useEffect)(()=>{e&&E.current&&requestAnimationFrame(()=>{E.current?.scrollIntoView({block:"center"})})},[e]);let R=g.useCallback(e=>{w?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),v("FILES_TREE.ITEM",{item_path:t.data.path}),_&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,w,m,_,n,v]);return h?.(),(0,r.jsxs)(d.G.Item,{ref:E,onSelect:R,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:f?f(t.data):w?(0,r.jsx)(c.FileSubmoduleIcon,{}):(0,r.jsx)(c.FileIcon,{})}),(0,r.jsxs)("div",{className:x.itemContainer,children:[!S&&(0,r.jsx)(u.A,{className:x.checkbox,checked:y||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,r.jsx)("span",{ref:l,style:{color:w?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,r.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),C&&(0,r.jsx)(s.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:E,"aria-label":t.data.name,open:!0,direction:"ne"}),!!b?.screenReaderText&&(0,r.jsx)("span",{className:"sr-only",children:b.screenReaderText}),!!b?.trailingVisual&&(0,r.jsx)(d.G.TrailingVisual,{children:b.trailingVisual})]})}let C=g.memo(E),w=g.memo(u.A);function b({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:i,leadingPath:l,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:h,navigate:p,onRenderRow:S,getFileTrailingVisual:v,getFileIcon:E,navigateOnClick:C,selectedChildren:b,expandedPath:R,singleSelect:N}){let[I,T]=(0,g.useState)(i),{sendRepoClickEvent:k}=(0,a.T)(),M=g.useRef(null),O=g.useRef(null),L=(0,o.Z)({focusRowRef:O,mouseRowRef:M}),P=g.useMemo(()=>b?.filter(e=>e.startsWith(`${t.data.path}/`)),[b,t.data.path]),D=g.useMemo(()=>b?.includes(t.data.path)??!1,[b,t.data.path]),F=t.items.length>1e3,U=g.useMemo(()=>(function(e,t,n){if(n?.selectedSelf&&n?.isLarge)return"all";if(!t||0===t.length)return"none";let r=`${e.data.path}/`,a=e.items.length,i=t.filter(e=>e.startsWith(r)&&!e.slice(r.length).includes("/")).length;return 0===i?"none":i>=a?"all":"partial"})(t,P,{selectedSelf:D,isLarge:F}),[t,P,D,F]),[B,q,$,G,W,V,Q]=function(e,t,n){let[r,a]=g.useState(e.items),[i,s]=g.useState(e.data.totalCount||0),[o,l]=g.useState(!1),[c,d]=g.useState(!1),{safeSetTimeout:u}=(0,_.A)();g.useEffect(()=>{a(e.items)},[e.items]),g.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=g.useCallback(()=>{d(!1)},[]),h=g.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),u(()=>{a(n),void 0!==t&&s(t)},1)},[r,u]);return[g.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let n=y(e.data.path,r);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?h(n,n.length):(a(n),s(n.length))}}else{let o=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,f.lS)(`${o}?noancestors=1`);try{if(u.ok){let n=await u.json(),o=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let a=n.name.slice(0,n.name.lastIndexOf("/")),i=a.indexOf("/")>-1,s={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:a,hasSimplifiedPath:i},o={items:[t],data:s};return(r.set(s.path,o),i)?e(o,{...s},r):o}(t,e,i):t});if(r){let t=e.data.path,a=y(t,r,n.payload.tree.items);for(let e of(o.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=n.payload.tree.totalCount,o.length>100?h(o,n.payload.tree.totalCount):(a(o),s(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,h]),h,r,o,c,m,i]}(t,()=>{},m),H=l?`${l}/`:"",z=Q-$.length;(0,g.useEffect)(()=>{n&&M.current&&requestAnimationFrame(()=>{M.current?.scrollIntoView({block:"center"})})},[n]);let K=g.useCallback(e=>{!e||I||G||W||!(t.items.length>100)||q(),e!==I&&T(e)},[I,G,W,t.items.length,q]),X=g.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&C?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(N?K(!I):(c?.(t.data,t),k("FILES_TREE.ITEM",{item_path:t.data.path}),C&&p(u?.(t.data)||"")),e.stopPropagation())},[t,u,I,p,C,c,K,k,N]);g.useEffect(()=>{i&&!I&&K?.(!0)},[i]),g.useEffect(()=>{0===t.items.length&&I?K?.(!1):!I&&t.autoExpand&&K?.(!0)},[t.items.length]);let Y=g.useCallback(e=>{h&&n&&h(e),M.current=e},[h,n]);if(1===t.items.length){let a=t.items[0];if(a&&"directory"===a.data.contentType)return(0,r.jsx)(j,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:H+t.data.name,inheritsActive:n,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:C,navigateOnClick:C,getFileTrailingVisual:v,getFileIcon:E,selectedChildren:P,expandedPath:R,singleSelect:N})}return S?.(),(0,r.jsxs)(d.G.Item,{ref:O,expanded:I,onExpandedChange:K,current:n,onSelect:X,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(d.G.DirectoryIcon,{})}),(0,r.jsxs)("div",{className:x.itemContainer,children:[!N&&(0,r.jsx)(w,{className:x.checkbox,checked:"all"===U,indeterminate:"partial"===U,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===U?"true":void 0}),(0,r.jsxs)("span",{ref:Y,children:[H&&(0,r.jsx)("span",{children:H}),(0,r.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),L&&(0,r.jsx)(s.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:O,"aria-label":`${H}${t.data.name}`,open:!0,direction:"ne"}),(0,r.jsx)(d.G.SubTree,{state:G?"loading":W?"error":"done",children:W?(0,r.jsx)(d.G.ErrorDialog,{onRetry:B,onDismiss:V,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{clientOnlyFilePaths:e,directoryItems:$,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:C,navigateOnClick:C,getFileTrailingVisual:v,getFileIcon:E,selectedChildren:P,expandedPath:R,singleSelect:N}),z>0&&(0,r.jsx)(A,{message:`${z} entries not shown`})]})})]})}let R=g.memo(b,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function N({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:a,onItemSelected:s,selectedItemRef:o,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:h,navigateOnClick:p,selectedChildren:f,expandedPath:_,singleSelect:y}){let x=(0,i.Z)(),S=(0,l.Z)(),v=g.useRef(S),E=g.useRef(s);g.useEffect(()=>{E.current=s,v.current=S},[s,S]);let w=g.useCallback((e,t)=>{E.current?.(e,t)},[]),b=g.useMemo(()=>t.map(t=>{let i=_===t.data.path,s=f?.includes(t.data.path),l=i||_.startsWith(`${t.data.path}/`),g=f?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,r.jsx)(R,{clientOnlyFilePaths:e,isActive:a||i,isAncestorOfActive:l,onItemSelected:w,leadingPath:n,directory:t,getItemUrl:d,getFetchUrl:x.getItemUrl,selectedItemRef:l?o:void 0,navigate:S,onRenderRow:c,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:s,selectedChildren:g,expandedPath:_,singleSelect:y},t.data.name):(0,r.jsx)(C,{onItemSelected:w,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?o:void 0,navigate:S,navigateOnClick:p,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:s,singleSelect:y},t.data.name)}),[t,_,f,w,d,o,S,p,c,u,m,y,e,a,n,x.getItemUrl,h]);return(0,r.jsx)(r.Fragment,{children:b})}let j=g.memo(N);function I(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:a,loading:i,onRenderRow:s,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,onSelectionChange:p}=e,[f,_]=(0,g.useReducer)(v,new Set),y=e.selectedItems||f,S=(0,g.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of S(n))t.add(e);return Array.from(t)},[]),E=(0,g.useCallback)((t,n)=>{var r;let a=(r=!!e.singleSelect,r?{type:"SINGLE_SELECT_FILE",path:t}:n?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});p?p(v(y,a)):_(a)},[p,e.singleSelect,y]),C=(0,g.useCallback)((t,n)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,n=y.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};p?p(v(y,n)):_(n);return}let r=S(t),a=n?{type:"DESELECT_DIRECTORY",paths:r}:{type:"SELECT_DIRECTORY",paths:r};p?p(v(y,a)):_(a)},[S,p,y,e.allowFolderReferences]),w=(0,g.useCallback)((t,n)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&n.items.length>1e3)return void C(n,y.has(t.path));let r=S(n).every(e=>y.has(e));C(n,r)}else E(t.path,y.has(t.path))},[S,C,E,y,e.allowFolderReferences]),b=(0,g.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(h.az,{onMouseDown:b,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:x.Box,children:i?(0,r.jsxs)("div",{className:x.Box_1,children:[(0,r.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,r.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(d.G,{"aria-label":"Files",children:[a&&(0,r.jsx)(A,{message:"Some files could not be loaded."}),(0,r.jsx)(j,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:w,selectedChildren:y?Array.from(y):[],selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function A({message:e}){return(0,r.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,r.jsx)(d.G.LeadingVisual,{children:(0,r.jsx)(p.A,{icon:c.AlertFillIcon,className:x.Octicon})}),(0,r.jsx)("div",{className:x.Box_2,children:e||"Couldn't load."})]})}try{E.displayName||(E.displayName="WrappedFileTreeRow")}catch{}try{C.displayName||(C.displayName="FileTreeRow")}catch{}try{w.displayName||(w.displayName="MemoizedCheckbox")}catch{}try{b.displayName||(b.displayName="WrappedDirectoryTreeRow")}catch{}try{R.displayName||(R.displayName="DirectoryTreeRow")}catch{}try{N.displayName||(N.displayName="WrappedDirectoryContents")}catch{}try{j.displayName||(j.displayName="DirectoryContents")}catch{}try{I.displayName||(I.displayName="FileTreePicker")}catch{}try{A.displayName||(A.displayName="ErrorTreeRow")}catch{}},55630:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(74848),a=n(21728);function i(e){let t,n,i,s,o,l,c,d,u,m,h,p,g=(0,a.c)(26);if(g[0]!==e){let{size:r,as:a,icon:d,bg:u,"aria-label":m,style:h,className:p,...f}=e;c=r,t=d,i=u,n=m,l=h,s=p,o=f,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=s,g[5]=o,g[6]=l,g[7]=c}else t=g[1],n=g[2],i=g[3],s=g[4],o=g[5],l=g[6],c=g[7];let f=void 0===c?32:c;return g[8]!==i||g[9]!==f?(d={backgroundColor:i,overflow:"hidden",borderWidth:0,borderRadius:"50%",borderStyle:"solid",borderColor:"var(--borderColor-default)",width:f,height:f},g[8]=i,g[9]=f,g[10]=d):d=g[10],g[11]!==f||g[12]!==l?(u={display:"flex",width:f,height:f,alignItems:"center",justifyContent:"center",...l},g[11]=f,g[12]=l,g[13]=u):u=g[13],g[14]!==t||g[15]!==n||g[16]!==f?(m=(0,r.jsx)(t,{size:f,"aria-label":n}),g[14]=t,g[15]=n,g[16]=f,g[17]=m):m=g[17],g[18]!==s||g[19]!==o||g[20]!==u||g[21]!==m?(h=(0,r.jsx)("div",{style:u,className:s,...o,children:m}),g[18]=s,g[19]=o,g[20]=u,g[21]=m,g[22]=h):h=g[22],g[23]!==d||g[24]!==h?(p=(0,r.jsx)("div",{style:d,children:h}),g[23]=d,g[24]=h,g[25]=p):p=g[25],p}let s=i;try{i.displayName||(i.displayName="CircleOcticon")}catch{}},55899:(e,t,n)=>{n.d(t,{u:()=>r});function r(){return crypto.randomUUID()}},56708:(e,t,n)=>{n.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},57448:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>f,Tz:()=>x,W5:()=>u,cx:()=>p,r_:()=>y,vn:()=>_,xG:()=>m});var r=n(51987),a=n(97665),i=n(40458),s=n(94747),o=n(97286),l=n(96379),c=n(96540),d=n(79064);n(2635),n(33592);let u={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},m={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},h=[m.NotFound,m.Unauthorized,m.ServiceUnavailable,m.QuotaExhausted,m.Forbidden,m.RequestFailed],p=256,g=400;function f(e){var t,n;let r=(0,a.jE)(),o=(0,c.useCallback)(()=>Promise.all(e.map(e=>r.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),[r,e]),l=(0,i.E)({queries:e.map(e=>({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>S(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}))}),{mutate:d}=(0,s.n)({mutationKey:["repos-indexing-state"],mutationFn:()=>v(e),onSuccess:o}),p={requestStatus:0===(n=(t=l.map(e=>e.data)).map(e=>e.requestStatus)).length?m.Unknown:n.some(e=>h.includes(e))?m.IndexingError:n.every(e=>e===m.CanIndex)?m.CanIndex:(n.every(e=>e===m.Unknown),m.Unknown),code:C(t.map(e=>e.code)),docs:C(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens};return w(()=>void o(),1e4*(p.code===u.Indexing&&p.requestStatus!==m.IndexingError)),[p,()=>d()]}function _(e){let t=(0,a.jE)(),n=(0,c.useCallback)(()=>Promise.resolve(t.invalidateQueries({queryKey:["repo-indexing-state",e]})),[t,e]),r=(0,o.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>S(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}),{mutate:i}=(0,s.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>v([e]),onSuccess:n}),l=r.data;return w(()=>void n(),1e4*(l.code===u.Indexing&&l.requestStatus!==m.IndexingError)),[l,()=>i()]}function y(e){let t=(0,o.I)({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>E(e),staleTime:1/0});return!t.isError&&!!t.data?.canChat}function x(){let e=d.Jt.getPanelHeight(),t=d.Jt.getPanelWidth(),n=(0,c.useRef)(null),r=(0,c.useRef)(e),a=(0,c.useRef)(e),i=(0,c.useRef)(null),s=(0,c.useRef)(t),o=(0,c.useRef)(t),[l,u]=(0,c.useState)(e),[m,h]=(0,c.useState)(t),f=(0,c.useRef)(0);(0,c.useEffect)(()=>{f.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let _=e=>Math.min(Math.max(e,p),window.innerHeight-f.current),y=e=>Math.min(Math.max(e,g),window.innerWidth-2*f.current),x=(0,c.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=_(r.current+t);u(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=y(s.current+t);h(n),o.current=n}},[]),S=(0,c.useCallback)(()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",S),null!==n.current&&(d.Jt.setPanelHeight(a.current),n.current=null),null!==i.current&&(d.Jt.setPanelWidth(o.current),i.current=null)},[x]),v=(0,c.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=l),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",x),window.addEventListener("mouseup",S))},[l,m,x,S]),E=(0,c.useCallback)(e=>{if("ArrowUp"===e.key){let t=_(l+4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=_(l-4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=y(m-4);h(t),d.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=y(m+4);h(t),d.Jt.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:v,onResizerKeyDown:E}}async function S(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,r.kt)()}});if(!t.ok)return{requestStatus:m.RequestFailed,code:u.Unknown,docs:u.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function v(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,l.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function E(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,r.kt)()}});return t.ok?await t.json():{canChat:!1}}function C(e){return e.every(e=>e===u.Indexed)?u.Indexed:e.every(e=>e===u.Unindexed)?u.Unindexed:e.some(e=>e===u.Indexing)?u.Indexing:e.some(e=>e===u.Unindexed)?u.PartiallyIndexed:u.Unknown}function w(e,t){let n=(0,c.useRef)(void 0),r=(0,c.useRef)(e);return(0,c.useEffect)(()=>{r.current=e},[e]),(0,c.useEffect)(()=>{if(t>0)return n.current=window.setInterval(()=>r.current(),t),()=>window.clearInterval(n.current)},[t]),n}},60905:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(50467),a=n(53419),i=n(25641),s=n(35247),o=n(76166),l=n(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return s.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),r=new l.N(n,e,t);return{id:n,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,r=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=s.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(l=await this.manager.createThread({customCopilotId:n,preventThreadSelection:r})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=s.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,o.d)("file_limit_reached"),[]}let p=[],g=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,o.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,o.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,o.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,i.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===g.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),g.push({file:n,placeholder:r,reference:e})}return await Promise.all(g.map(async({file:e,placeholder:n,reference:r})=>{try{l&&await r.attachment.prefetch(),this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(n,r),(0,a.BI)("dotcom_chat.vision.image_added",{uploadType:t}),p.push(r)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,o.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,o.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),r&&n&&l&&this.manager.setPendingThreadId(l.id,n),p}constructor(e,t){(0,r._)(this,"state",void 0),(0,r._)(this,"manager",void 0),this.state=e,this.manager=t}}},61180:(e,t,n)=>{n.d(t,{T:()=>s});var r=n(21728),a=n(96540),i=n(79064);function s(){let e,t,n=(0,r.c)(3),[s,l]=(0,a.useState)(o);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{l(e),e&&i.Jt.setLastUsedRepository(e)},n[0]=e):e=n[0];let c=e;return n[1]!==s?(t=[s,c],n[1]=s,n[2]=t):t=n[2],t}function o(){return i.Jt.getLastUsedRepository()}},62189:(e,t,n)=>{n.d(t,{U:()=>r});let r=(e,t)=>{let n=`/copilot/tasks/pull/${encodeURIComponent(e)}`;return t&&(n+=`?session_id=${encodeURIComponent(t)}`),n}},62227:(e,t,n)=>{n.d(t,{A:()=>r});let r={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},63461:(e,t,n)=>{n.d(t,{G:()=>o,r:()=>s});var r=n(31993),a=n(97286),i=n(96379);let s=(0,r.j)({queryKey:["copilot-chat-payload"],queryFn:async()=>{let e=await (0,i.lS)("/github-copilot/chat");if(!e.ok)throw Error(`Failed to fetch chat provider: ${e.statusText}`);return await e.json()}});function o(){let{data:e=null}=(0,a.I)(s);return e}},64846:(e,t,n)=>{n.d(t,{Q:()=>i});var r=n(82075),a=n(96540);function i(e){let t=(0,r.D)("localStorage");return{value:(0,a.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},65025:(e,t,n)=>{n.d(t,{r:()=>u});var r=n(74848),a=n(38621),i=n(72511),s=n(57352),o=n(10095),l=n(20263);let c={Flash:"FlashError-module__Flash--fKR6V",SafeHTMLText:"FlashError-module__SafeHTMLText--J8lL9",Link:"FlashError-module__Link--doNrG",ruleViolationsTitle:"FlashError-module__ruleViolationsTitle--rHHNU",ruleViolationRow:"FlashError-module__ruleViolationRow--ekTTM",Octicon:"FlashError-module__Octicon--U4ZWa",ruleViolationText:"FlashError-module__ruleViolationText--Oe758"};var d=n(34164);function u({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:n,hideRuleErrorsTitle:u,ruleErrors:m,helpUrl:h,flashRef:p}){let g=(m?.length||0)>0;return t||n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{id:"flash",variant:"danger",className:(0,d.$)("d-flex flex-items-center flex-justify-between",c.Flash),tabIndex:-1,ref:p,children:t?(0,r.jsxs)("div",{children:[e," ",(0,r.jsx)(l.BC,{className:c.SafeHTMLText,html:t}),g&&h&&(0,r.jsx)(s.A,{href:`${h}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,className:c.Link,children:"Learn more about rulesets."})]}):n&&(0,r.jsx)("div",{children:n})}),g&&(0,r.jsxs)("div",{className:c.Flash,children:[!u&&(0,r.jsx)("div",{className:c.ruleViolationsTitle,children:"Repository rule violations found:"}),m?.map(e=>(0,r.jsxs)("div",{className:c.ruleViolationRow,children:[(0,r.jsx)(o.A,{icon:a.XCircleFillIcon,size:16,className:c.Octicon}),(0,r.jsx)("div",{className:c.ruleViolationText,children:e})]},e))]})]}):null}try{u.displayName||(u.displayName="FlashError")}catch{}},65820:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(48845);async function a(e,t,n){let a=await (0,r.q$)(e);if(401===a.status){let e=n.getQueryData(t);if(!e)throw new r.ol;return e}let i=await (0,r.hp)(a);return(0,r.R)(a),i}},65964:(e,t,n)=>{n.d(t,{e:()=>p});var r=n(74848),a=n(29731),i=n(10436),s=n(34164),o=n(96540),l=n(35220);let c={outer:"LeadingVisual-module__outer--qS9Ac",hasNewActivity:"LeadingVisual-module__hasNewActivity--qA_H9",defaultVariant:"LeadingVisual-module__defaultVariant--Qhbnu",inner:"LeadingVisual-module__inner--GeEeG"};var d=n(49744),u=n(27603);let m={container:"UnreadIndicator-module__container--X6F4o"},h=()=>(0,r.jsx)("div",{className:m.container,children:(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("list-view-item-unread-indicator"),children:"New activity."})});try{h.displayName||(h.displayName="ListItemUnreadIndicator")}catch{}function p({icon:e,color:t,description:n,newActivity:m=!1,className:p,children:g,...f}){let{variant:_}=(0,l.e)(),{setStatus:y}=(0,u.x)(),{setHasNewActivity:x}=(0,d.I)(),S=n?.trim();return(0,o.useEffect)(()=>{x(m)},[m,x]),(0,o.useEffect)(()=>{S&&y(S)},[y,S]),(0,r.jsxs)("div",{className:(0,s.$)(c.outer,"default"===_&&c.defaultVariant,m&&c.hasNewActivity,p),...f,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{...(0,a.G)("list-view-leading-visual"),className:c.inner,children:[e&&(0,r.jsx)(i.m4,{"aria-label":"",icon:e,color:t}),g,S&&(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("leading-visual-text-description"),children:S})]})}),m&&(0,r.jsx)(h,{})]})}try{p.displayName||(p.displayName="ListItemLeadingVisual")}catch{}},67475:(e,t,n)=>{n.d(t,{K:()=>i,o:()=>s});var r=n(38621),a=n(35247);function i(e){let t=[];for(let n of e)n.slashCommand&&t.push({key:n.slashCommand.key,name:n.slashCommand.name,description:n.slashCommand.description,icon:n.slashCommand.icon,isNew:n.slashCommand.isNew,order:n.slashCommand.order,suggestions:n.slashCommand.suggestions,execute:async(e,t,r)=>await n.slashCommand.execute(e,t,r)});return a.W.planningAgent&&t.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:r.TasklistIcon,order:1,suggestions:[],execute:(e,t,n,r)=>(r.setUsePlanningIntent(!0),!1)}),t.push({key:"create-issue",name:"Create issue",description:"Create a GitHub issue from your conversation",icon:r.IssueDraftIcon,suggestions:["First, create a new draft issue. Then ask for additional information to fill out the issue.","First, create an issue with sub issues. Then ask for additional information to fill out these issues."],execute:()=>!1}),t.sort((e,t)=>void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name))}function s(e){return i(e).map(e=>e.key)}},69759:(e,t,n)=>{n.d(t,{B:()=>r});function r(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},70257:(e,t,n)=>{n.d(t,{V:()=>t2});var r,a=n(74848),i=n(21728),s=n(53419),o=n(88934),l=n(27042),c=n(46251),d=n(69726),u=n(5524),m=n(96540),h=n(82595),p=n(84646),g=n(2635),f=n(79802);function _(){let{threads:e}=(0,g.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,f.O)(e)).filter(e=>null!==e),n=(0,p.jS)(!0),{data:r}=n;if(void 0===r)return n;let a=new Set,i=[...t.map(e=>r.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!a.has(t)&&(a.add(t),!0)}),...[...r].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!a.has(t)})].slice(0,5);return{...n,data:i}}var y=n(17485),x=n(25641),S=n(34164);let v={toggleButton:"ToggleButton-module__toggleButton--JlWKX",selected:"ToggleButton-module__selected--fx0LM",icon:"ToggleButton-module__icon--mJLXC",textContent:"ToggleButton-module__textContent--xX6cl"},E=(0,m.forwardRef)((e,t)=>{let n,r,s,o,l,c,d,u,m,h,p,g,f,_,y,x,E=(0,i.c)(33);if(E[0]!==e){let{icon:t,isSelected:a,onClick:i,hasMenu:m,isMenuOpen:h,selectedItemLabel:p,children:g,...f}=e;s=t,c=i,d=p,n=g,l=void 0!==a&&a,r=void 0!==m&&m,o=void 0!==h&&h,u=Object.keys(f).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=f[t]),e),{}),E[0]=e,E[1]=n,E[2]=r,E[3]=s,E[4]=o,E[5]=l,E[6]=c,E[7]=d,E[8]=u}else n=E[1],r=E[2],s=E[3],o=E[4],l=E[5],c=E[6],d=E[7],u=E[8];let C=u;E[9]!==r||E[10]!==o||E[11]!==l?(m=()=>r?{"aria-haspopup":"menu","aria-expanded":o}:{"aria-pressed":l},E[9]=r,E[10]=o,E[11]=l,E[12]=m):m=E[12];let w=m;E[13]!==w?(h=w(),E[13]=w,E[14]=h):h=E[14],E[15]!==C||E[16]!==h?(p={...C,...h},E[15]=C,E[16]=h,E[17]=p):p=E[17];let b=p,R=r&&d?d:n;E[18]!==c?(g=e=>{c&&c(e)},E[18]=c,E[19]=g):g=E[19];let N=g,j=l&&v.selected;return E[20]!==j?(f=(0,S.$)(v.toggleButton,j),E[20]=j,E[21]=f):f=E[21],E[22]!==s?(_=!!s&&(0,a.jsx)("span",{className:v.icon,children:s}),E[22]=s,E[23]=_):_=E[23],E[24]!==R?(y=(0,a.jsx)("span",{className:v.textContent,children:R}),E[24]=R,E[25]=y):y=E[25],E[26]!==b||E[27]!==N||E[28]!==t||E[29]!==f||E[30]!==_||E[31]!==y?(x=(0,a.jsxs)("button",{ref:t,type:"button",className:f,onClick:N,...b,children:[_,y]}),E[26]=b,E[27]=N,E[28]=t,E[29]=f,E[30]=_,E[31]=y,E[32]=x):x=E[32],x});E.displayName="ToggleButton";var C=n(76872),w=n(35247);function b(){let[e,t]=(0,m.useState)(!1),n=(0,o.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:i,activeCopilotSpaceId:g,readOnly:f}=(0,y.C)(),S=(0,m.useRef)(null),v=(0,m.useRef)(null),[b,R]=(0,m.useState)(!1),N=()=>{R(!0),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:j=[],isLoading:I}=_(),{data:A=[],isLoading:T}=(0,p.jS)(!0),k=(0,p.BV)(),M=I||T;if((0,m.useEffect)(()=>{if(M&&e&&S.current)S.current.focus();else if(!M&&e&&v.current){let e=setTimeout(()=>{v.current?.focus()},0);return()=>clearTimeout(e)}},[M,e]),!k||f)return;let O=g?A.find(e=>e.id===g.id&&e.owner===g.owner):void 0,L=O?O.name:"Spaces",P="260px";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.W,{open:e,onOpenChange:e=>{w.W.spacesAsAttachmentsEnabled&&e&&(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),t(e)},children:[(0,a.jsx)(l.W.Anchor,{children:(0,a.jsx)(E,{icon:(0,a.jsx)(h.I,{icon:"spaces"}),isSelected:!!O,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:L,children:L})}),(0,a.jsx)(l.W.Overlay,{style:j.length>0?{width:P}:{},children:M?(0,a.jsxs)(c.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:P},children:[(0,a.jsx)("div",{ref:S,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,a.jsx)(d.A,{})]}):(0,a.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:j.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.l.Group,{children:[(0,a.jsx)(u.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),j.map((e,n)=>{let o=!!g&&e.id===g.id&&e.owner===g.owner;return(0,a.jsx)(u.l.Item,{ref:0===n?v:void 0,role:"menuitemradio",onSelect:()=>{g&&e.id===g.id&&e.owner===g.owner?i():(r({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:o,"aria-checked":o,children:(0,a.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(u.l.Item,{onSelect:()=>{n(x.VR),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(u.l.Item,{onSelect:N,children:"Create a space"})]}):(0,a.jsx)(u.l.Item,{ref:v,onSelect:N,children:"Create your first space"})})})]}),b?(0,a.jsx)(C.D,{closeDialog:()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),R(!1)}}):null]})}try{b.displayName||(b.displayName="SpacesSelect")}catch{}var R=n(29731),N=n(83494),j=n(8625),I=n(38621),A=n(52870),T=n(59121),k=n(21373),M=n(94747),O=n(96379),L=n(7277),P=n(47970),D=n(47789),F=n(33592),U=n(79216),B=n(20330);let q=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,$=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function G(e){let t=await (0,O.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new $;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function W(e){let{itemUrl:t}=e,n=await (0,O.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var V=n(88431),Q=n(96459),H=n(17925),z=n(79064),K=n(67475),X=n(72303);let Y=async(e,t,n,r,a,i)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let o=(({manager:e,chatState:t,plugins:n})=>{let r="assistive"===t.mode?[{label:"Delete conversation",key:"delete",icon:I.TrashIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,X.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:I.PencilIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,X.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:I.PlusIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&w.W.chatInputCommands)for(let t of(0,K.K)(n))t.execute&&r.push({key:t.key,action:async(n,r,a)=>await t.execute(n,r,a,e)});return r})({manager:n,chatState:t,plugins:a}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase().includes(n)});if(1!==o.length)return!1;let l=o[0],c=e.substring(l.key.length).trim();return i&&(i.selectedRepo||i.selectedBranch||i.selectedCustomAgent)&&(c=JSON.stringify({text:c,selectedRepo:i.selectedRepo,selectedBranch:i.selectedBranch,selectedCustomAgent:i.selectedCustomAgent})),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:l.key}),await l.action(c,t,r)};var J=n(46062),Z=n(56708),ee=n(61180);function et(e,t,n){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var en=n(26239),er=n(60905),ea=n(76166),ei=n(72439),es=n(23657),eo=n(72206);function el({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:n,activeCopilotSpaceId:r,readOnly:i}){let h=(0,F.b)(),[g,f]=(0,m.useState)(!1),y=(0,o.Zp)(),S=(0,m.useRef)(null),v=(0,m.useRef)(null),[E,w]=(0,m.useState)(!1),b=()=>{w(!0),e(!0),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},{data:R=[],isLoading:N}=_(),{isLoading:j}=(0,p.jS)(!0),A=(0,p.BV)(),T=N||j;if((0,m.useEffect)(()=>{if(T&&g&&S.current)S.current.focus();else if(!T&&g&&v.current){let e=setTimeout(()=>{v.current?.focus()},0);return()=>clearTimeout(e)}},[T,g]),!A||i)return;let k="260px";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.W,{open:g,onOpenChange:e=>{e&&(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),f(e)},children:[(0,a.jsx)(l.W.Anchor,{children:(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"})},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.SpaceIcon,{})}),"Spaces\u2026"]})}),(0,a.jsx)(l.W.Overlay,{style:R.length>0?{width:k}:{},children:T?(0,a.jsxs)(c.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:k},children:[(0,a.jsx)("div",{ref:S,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,a.jsx)(d.A,{})]}):(0,a.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:R.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.l.Group,{children:[(0,a.jsx)(u.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),R.map((e,i)=>{let o=!!r&&e.id===r.id&&e.owner===r.owner;return(0,a.jsx)(u.l.Item,{ref:0===i?v:void 0,role:"menuitemradio",onSelect:()=>{r&&e.id===r.id&&e.owner===r.owner?n():(h.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),f(!1)},selected:o,"aria-checked":o,children:(0,a.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(u.l.Item,{onSelect:()=>{y(x.VR),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(u.l.Item,{onSelect:b,children:"Create a space"})]}):(0,a.jsx)(u.l.Item,{ref:v,onSelect:b,children:"Create your first space"})})})]}),E?(0,a.jsx)(C.D,{closeDialog:()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),w(!1)}}):null]})}try{el.displayName||(el.displayName="SpacesSelectNew")}catch{}var ec=n(14521),ed=n(99054),eu=n(77430);function em(e){let t,n,r,o,c,d,m=(0,i.c)(24),{onSelectPanel:h,onSelectAgent:p}=e,{availableAgents:g,showLimit:f,disabled:_,loading:y}=(0,ed.JE)(),x=g&&g.length>0;if(y){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(u.l.Item,{disabled:!0,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.AppsIcon,{})}),"Extensions\u2026"]}),m[0]=e):e=m[0],e}if(_){let e,t,n;return m[1]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),h("agents-not-supported")},m[1]=h,m[2]=e):e=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.AppsIcon,{})}),m[3]=t):t=m[3],m[4]!==e?(n=(0,a.jsxs)(u.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),m[4]=e,m[5]=n):n=m[5],n}if(!x){let e,t,n;return m[6]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),h("no-agents-available")},m[6]=h,m[7]=e):e=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.AppsIcon,{})}),m[8]=t):t=m[8],m[9]!==e?(n=(0,a.jsxs)(u.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),m[9]=e,m[10]=n):n=m[10],n}if(m[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(l.W.Anchor,{children:(0,a.jsxs)(u.l.Item,{onSelect:ep,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.AppsIcon,{})}),"Extensions\u2026"]})}),m[11]=t):t=m[11],m[12]!==g||m[13]!==p||m[14]!==f){let e;m[16]!==p||m[17]!==f?(e=e=>(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(eu.r,{src:e.avatarUrl})}),e.name,!f&&(0,a.jsxs)(u.l.Description,{variant:"inline",truncate:!0,children:[ed.Z3,e.slug]}),f&&(0,a.jsx)(u.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),m[16]=p,m[17]=f,m[18]=e):e=m[18],n=g.map(e),m[12]=g,m[13]=p,m[14]=f,m[15]=n}else n=m[15];return m[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(u.l.Divider,{}),m[19]=r):r=m[19],m[20]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.TelescopeIcon,{})}),m[20]=o):o=m[20],m[21]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsxs)(u.l.LinkItem,{href:ed.bn,onClick:eh,children:[o,"Marketplace",(0,a.jsx)(u.l.TrailingVisual,{children:(0,a.jsx)(I.LinkExternalIcon,{})})]}),m[21]=c):c=m[21],m[22]!==n?(d=(0,a.jsxs)(l.W,{children:[t,(0,a.jsx)(l.W.Overlay,{width:"small",children:(0,a.jsxs)(u.l,{children:[n,r,c]})})]}),m[22]=n,m[23]=d):d=m[23],d}function eh(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ep(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{em.displayName||(em.displayName="AgentMenu")}catch{}var eg=n(57352),ef=n(15220);let e_={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--v7abd",dialogTitle:"AgentsDialogs-module__dialogTitle--tEo3x",dialogDescription:"AgentsDialogs-module__dialogDescription--LPgKm",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",alertIconContainer:"AgentsDialogs-module__alertIconContainer--jNjdz"};function ey(e){let t,n,r=(0,i.c)(4),{onClose:s,returnFocusRef:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==s||r[2]!==o?(n=(0,a.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:o,renderBody:ex}),r[1]=s,r[2]=o,r[3]=n):n=r[3],n}function ex(){return(0,a.jsx)("div",{className:e_.AgentsDialogsMainContainer,children:(0,a.jsxs)("div",{className:e_.dialogContentWrapper,children:[(0,a.jsx)(I.TelescopeIcon,{size:24}),(0,a.jsx)("h3",{className:e_.dialogTitle,children:"Chat with your favorite tools and services"}),(0,a.jsx)("p",{className:e_.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,a.jsx)(k.Q,{as:"a",href:ed.bn,children:"Browse marketplace"}),(0,a.jsx)("div",{className:e_.documentationLinkContainer,children:(0,a.jsx)(eg.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eS(e){let t,n,r,s=(0,i.c)(9),{onClose:o,returnFocusRef:l}=e,c=(0,F.b)(),d=(0,g.Pk)(),u=(0,p.BV)(),m=(0,J.GF)(d.availableModels);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},s[0]=t):t=s[0],s[1]!==u||s[2]!==m||s[3]!==c?(n=()=>(0,a.jsx)("div",{className:e_.AgentsDialogsAlternateContainer,children:(0,a.jsxs)("div",{className:e_.dialogContentWrapper,children:[(0,a.jsx)("div",{className:e_.alertIconContainer,children:(0,a.jsx)(I.AlertIcon,{size:24})}),(0,a.jsxs)("h3",{className:e_.dialogTitle,children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,a.jsxs)("p",{className:e_.dialogDescription,children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,a.jsx)(k.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),s[1]=u,s[2]=m,s[3]=c,s[4]=n):n=s[4],s[5]!==o||s[6]!==l||s[7]!==n?(r=(0,a.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:o,returnFocusRef:l,renderBody:n}),s[5]=o,s[6]=l,s[7]=n,s[8]=r):r=s[8],r}try{ey.displayName||(ey.displayName="NoAgentsAvailableDialog")}catch{}try{eS.displayName||(eS.displayName="AgentsNotSupportedDialog")}catch{}var ev=n(77809),eE=n(97564);function eC(e){let t,n,r,s=(0,i.c)(10),{isOpen:o,onClose:l,initialRepo:c,onRepoSelect:d}=e,u=(0,F.b)(),{findFileWorkerPath:h}=(0,g.Pk)(),p=(0,m.useRef)(null);s[0]!==u||s[1]!==l?(t=async e=>{if(0===e.length)return void l();let t=await (0,eE.V)(e[0].repositoryId);for(let n of e.map(e=>"github_folder"===e.type?(0,x.OC)(e.filePath,t):(0,x.Od)(e.filePath,t)))u.addReference(n,"references-menu");l()},s[0]=u,s[1]=l,s[2]=t):t=s[2];let f=t;return o?(s[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],s[3]=n):n=s[3],s[4]!==h||s[5]!==f||s[6]!==c||s[7]!==l||s[8]!==d?(r=(0,a.jsx)(ev.Q,{formData:n,onCancel:l,onSaveFiles:f,findFileWorkerPath:h,attachmentButtonRef:p,initialRepo:c,onRepoSelect:d,allowFolderReferences:!0,maxFileCount:20}),s[4]=h,s[5]=f,s[6]=c,s[7]=l,s[8]=d,s[9]=r):r=s[9],r):null}try{eC.displayName||(eC.displayName="CopilotFilePicker")}catch{}var ew=n(82075),eb=n(26108),eR=n(5839),eN=n(31604),ej=n(81960),eI=n(69497),eA=n(10095),eT=n(87448),ek=n(40961);let eM={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",panelHeader:"KnowledgeSelectPanel-module__panelHeader--kWY60",headerContent:"KnowledgeSelectPanel-module__headerContent--AQ0gC",panelTitle:"KnowledgeSelectPanel-module__panelTitle--oQLU4",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",createButton:"KnowledgeSelectPanel-module__createButton--AfP6G",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",organizationsList:"KnowledgeSelectPanel-module__organizationsList--UvNcy",organizationLink:"KnowledgeSelectPanel-module__organizationLink--UkWa7",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--igPHI",organizationName:"KnowledgeSelectPanel-module__organizationName--V_3Jw",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--EKDTO"},eO=(0,m.forwardRef)(function({open:e,setOpen:t,...n},r){return(0,a.jsx)(eb.K,{ref:r,"aria-expanded":!!e||void 0,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:I.BookIcon,onClick:()=>t(!e),variant:"invisible",className:eM.knowledgeBaseIcon,...n})});function eL({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:i}){let s=(0,g.Pk)(),o=(0,F.b)(),l=(0,ew.A)("localStorage"),{knowledgeBases:c}=s,[d,u]=(0,m.useState)([]),[h,p]=(0,m.useState)(!0),[f,_]=(0,m.useState)(""),y=(0,m.useRef)(null),S=l.getItem("lastUsedKnowledgeBaseId")||"",v=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:E}=s;(0,m.useEffect)(()=>{n||_("")},[n]);let C=(0,m.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),w=(0,m.useMemo)(()=>C.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[C]),[b,N]=(0,m.useState)(!1),j=h||"pending"===s.knowledgeBasesLoading.state,I=b||"error"===s.knowledgeBasesLoading.state,A=(0,m.useRef)(!1);(0,m.useEffect)(()=>{let e=async()=>{p(!0),await o.fetchKnowledgeBases();let e=await o.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?u(e.payload||[]):N(!0),p(!1)};n&&!A.current&&(A.current=!0,e())},[n,o]);let T=eB();if(s.model?.hasLimitedCapabilities)return(0,a.jsx)(e$,{open:n,setOpen:r,...e});if(!j&&0===c.length)return(0,a.jsx)(eP,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:s.mode,...t});let k=C.sort((e,t)=>e.id===S?-1:+(t.id===S)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),M=[...w].sort((e,t)=>e.org===v?-1:+(t.org===v)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),O=c.filter(e=>E.some(t=>(0,x.P)(t)&&t.id===e.id));return(0,a.jsx)("div",{ref:y,...(0,R.G)("knowledge-select-panel"),children:(0,a.jsx)(eR.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,ek.flushSync)(()=>r(!1)),i.current?.focus()},open:n,renderAnchor:null,anchorRef:i,onOpenChange:r,loading:j,items:k,onFilterChange:_,groupMetadata:M,notice:null!==T?{text:T,variant:"info"}:void 0,message:I?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===w.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:O,onSelectedChange:e=>(e=>{var t=e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e);let n=t.filter(e=>(0,x.P)(e)&&!E.some(t=>(0,x.P)(t)&&t.id===e.id));for(let e of E.filter(e=>(0,x.P)(e)&&!t.some(t=>t.id===e.id)))o.removeReference(e);for(let e of n)o.addReference((0,x.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function eP({administratedCopilotEnterpriseOrganizations:e,anchorRef:t,open:n,setOpen:r}){let i=eB(),s=t?{anchorRef:t,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,a.jsx)(eO,{open:n,setOpen:r,...e})},o=e?.length===0;return(0,a.jsx)(eN.T,{open:n,onOpen:()=>r(!0),onClose:()=>r(!1),overlayProps:{anchorSide:"outside-bottom",style:{width:"min(100%, 350px)"}},...s,children:(0,a.jsxs)(eT.az,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:{...o?{height:"100%"}:{}},className:eM.KnowledgeSelectPanelContainer,...(0,R.G)("empty-knowledge-base-picker"),children:[(0,a.jsx)("div",{className:eM.panelHeader,children:(0,a.jsxs)("div",{className:eM.headerContent,children:[(0,a.jsx)(ej.A,{id:"knowledge-base-dialog-title",as:"h4",className:eM.panelTitle,children:"Attach a knowledge base"}),(0,a.jsx)(eb.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:I.XIcon,variant:"invisible",onClick:()=>r(!1)})]})}),(0,a.jsxs)(eT.az,{sx:{...o?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{}},className:eM.emptyStateContainer,children:[(0,a.jsx)(eA.A,{icon:I.BookIcon,size:"medium",className:eM.knowledgeBaseIcon}),(0,a.jsxs)(eT.az,{sx:{...o?{maxHeight:"100%"}:{}},className:eM.emptyStateContent,children:[(0,a.jsx)("span",{className:eM.emptyStateMessage,children:"You don't have any knowledge bases"}),(0,a.jsxs)("div",{className:eM.emptyStateDescription,children:[(0,a.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),o&&(0,a.jsx)("p",{className:eM.emptyStateInstructions,...(0,R.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."})]}),e.length>0&&(0,a.jsx)(eD,{administratedCopilotEnterpriseOrganizations:e})]})]}),i&&(0,a.jsx)("div",{className:eM.actionButtonsContainer,children:(0,a.jsx)(eU,{message:i})})]})})}function eD({administratedCopilotEnterpriseOrganizations:e}){return 1===e.length?(0,a.jsx)(k.Q,{as:"a",href:eq(e[0]),className:eM.createButton,...(0,R.G)("create-knowledge-base-button"),children:"Create a knowledge base"}):(0,a.jsxs)("div",{className:eM.organizationsSection,...(0,R.G)("create-knowledge-base-dropdown"),children:[(0,a.jsx)(ej.A,{as:"h3",className:eM.sectionTitle,children:"Create a knowledge base for an organization"}),(0,a.jsx)(u.l,{className:eM.organizationsList,children:e.map(e=>(0,a.jsx)(eF,{org:e},e.id))})]})}function eF({org:e}){return(0,a.jsx)(u.l.Item,{children:(0,a.jsxs)(eg.A,{href:eq(e),className:eM.organizationLink,children:[(0,a.jsx)(eu.r,{square:!0,src:e.avatarUrl,alt:e.login,"aria-hidden":"true",className:eM.organizationAvatar}),(0,a.jsx)(eI.A,{inline:!0,title:e.login,className:eM.organizationName,children:e.login})]})})}function eU({message:e}){return e?(0,a.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:eM.ssoNotice,children:e}):null}function eB(){let e=(0,g.Pk)(),t=e.ssoOrganizations.map(e=>e.login);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eq(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function e$({anchorRef:e,open:t,setOpen:n}){let r=e?{anchorRef:e,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,a.jsx)(eO,{open:t,setOpen:n,...e})};return(0,a.jsx)(eN.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),...r,children:(0,a.jsxs)("div",{className:(0,S.$)("m-3 d-flex flex-column flex-items-center text-center",eM.disabledForPreviewModelsPanel),children:[(0,a.jsx)(I.AlertIcon,{className:"fgColor-attention mb-3"}),(0,a.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,a.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]})})}try{eO.displayName||(eO.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eL.displayName||(eL.displayName="KnowledgeSelectPanel")}catch{}try{eP.displayName||(eP.displayName="EmptyKnowledgeBase")}catch{}try{eD.displayName||(eD.displayName="CreateKnowledgeBaseButton")}catch{}try{eF.displayName||(eF.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eU.displayName||(eU.displayName="SSOFooter")}catch{}try{e$.displayName||(e$.displayName="DisabledForPreviewModels")}catch{}var eG=n(35673),eW=n(71363);let eV=(0,m.memo)(({panel:e,onPanelChange:t,anchorRef:n,initialRepo:r,onRepoSelect:i,...o})=>{let{inputRef:c}=o,d=(0,F.b)(),h=(0,g.Pk)(),p=(0,D.qw)(),{supportedAttachmentTypes:f,supportedReferenceTypes:_}=function(){let e=(0,g.Pk)(),t=null!==(0,ec.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,x.Z6)(e.currentTopic)||!e.currentTopic),a=w.W.knowledgeBasesDisabled;return t||n.push("repositories"),!r||t||a||n.push("knowledge-bases"),!t&&w.W.spacesAsAttachmentsEnabled&&n.push("copilot-spaces"),t||n.push("agents"),t||n.push("plugin-attachment-contribution"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders"]}}(),{model:S}=(0,g.bP)("model"),v="immersive"===h.mode&&!!S.capabilities?.supports?.vision,E=(0,ed.kw)(o),b=(0,m.useRef)(null),N=(0,ec.G)(),j=(0,es.FQ)(!0),{handleSpaceSelect:A,clearSpaceSelection:T,activeCopilotSpaceId:k,readOnly:M}=(0,y.C)(),O=!!(N&&j),[L,P]=(0,m.useState)(!1);return(0,a.jsxs)("div",{children:[f.includes("upload")&&(0,a.jsx)("input",{id:"image-uploader",...(0,R.G)("image-uploader"),hidden:!0,ref:b,type:"file",accept:[v?er.s.getAllowedImageFileExtensions(S):"",ei.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=er.s.getAllowedFiles([...e.target.files],S),r=[];for(let e of(v?new er.s(h,d).addImageAttachments(t,"menu",N,O):r.push(...t),n))new ei.E(d).addAttachment(e);for(let e of r)(0,s.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,a.jsx)(l.W,{anchorRef:n,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,a.jsx)(l.W.Overlay,{width:"small",side:"outside-bottom",align:"start",portalContainerName:"assistive"===h.mode?eG.E5:void 0,children:(0,a.jsxs)(u.l,{children:[f.includes("repositories")&&(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:h.mode}),t("repositories")},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.RepoIcon,{})}),"Repositories\u2026"]}),(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:h.mode}),t("multi-file-picker")},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.FileCodeIcon,{})}),function(e){let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Files, folders, and symbols":t&&n?"Files and folders":t&&r?"Files and symbols":n&&r?"Folders and symbols":t?"Files":n?"Folders":r?"Symbols":"References"}(_),"\u2026"]}),f.includes("knowledge-bases")&&(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:h.mode}),t("knowledge-bases")},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.BookIcon,{})}),(0,a.jsx)("span",{...(0,R.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),f.includes("copilot-spaces")&&(0,a.jsx)(el,{openCreateSpaceDialog:P,setPendingSpace:A,clearSpaceSelection:T,activeCopilotSpaceId:k,readOnly:M}),p.map(e=>{let n=e.attachmentMenuContribution;return n?(0,a.jsx)(n.MenuItemComponent,{onSelect:()=>t(n.attachmentType)},e.id):null}),f.includes("upload")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.l.Divider,{}),(0,a.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:h.mode}),t(null),b.current?.click()},children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.UploadIcon,{})}),"Upload from computer"]})]}),f.includes("agents")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(em,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>E(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,a.jsx)(eC,{isOpen:!0,onClose:()=>t(null),initialRepo:r,onRepoSelect:i}),(0,a.jsx)(eW.FZ,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:c,cancelReturnFocusRef:n}),f.includes("knowledge-bases")&&(0,a.jsx)(eL,{disabledForPreviewModelsProps:{anchorRef:n},emptyKnowledgeBaseProps:{anchorRef:n},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),anchorRef:n}),L&&(0,a.jsx)(C.D,{closeDialog:()=>P(!1)}),"no-agents-available"===e&&(0,a.jsx)(ey,{onClose:()=>t(null),returnFocusRef:n}),"agents-not-supported"===e&&(0,a.jsx)(eS,{onClose:()=>t(null),returnFocusRef:n}),f.includes("plugin-attachment-contribution")&&p.map(r=>r.attachmentMenuContribution&&r.attachmentMenuContribution.attachmentType===e?(0,a.jsx)(r.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),c.current?.focus()},onDismiss:()=>{t(null),n.current?.focus()}},r.id):null)]})});eV.displayName="AttachmentMenu";var eQ=n(71555);let eH={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},ez=[{name:eH.agents,icon:I.AppsIcon,value:"agents",where:"start"},{name:eH.repositories,icon:I.RepoIcon,value:"repositories",where:"anywhere"},{name:eH.files,icon:I.FileIcon,value:"repositories:files",where:"anywhere"},{name:eH.issues,icon:I.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eH.pulls,icon:I.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eH.discussions,icon:I.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],eK={is:e=>ez.some(t=>t.value===e)};function eX(e){let t,n,r,s,o,l=(0,i.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(eu.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.slug?(s=(0,a.jsxs)(u.l.Description,{variant:"inline",truncate:!0,children:[ed.Z3,t.slug]}),l[5]=t.slug,l[6]=s):s=l[6],l[7]!==t.name||l[8]!==n||l[9]!==r||l[10]!==s?(o=(0,a.jsxs)(u.l.Item,{...n,children:[r,t.name,s]}),l[7]=t.name,l[8]=n,l[9]=r,l[10]=s,l[11]=o):o=l[11],o}try{eX.displayName||(eX.displayName="AgentSuggestion")}catch{}function eY(e){let t,n,r,s,o,l,c,d,h=(0,i.c)(20);h[0]!==e?({leadingVisual:t,...n}=e,h[0]=e,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let p=(0,m.useId)(),g=(0,m.useId)();return h[3]!==g||h[4]!==p?(r=(0,S.$)(p,g),h[3]=g,h[4]=p,h[5]=r):r=h[5],h[6]!==t?(s=void 0!==t&&(0,a.jsx)(u.l.LeadingVisual,{children:t}),h[6]=t,h[7]=s):s=h[7],h[8]!==p||h[9]!==n.children?(o=(0,a.jsx)("span",{id:p,children:n.children}),h[8]=p,h[9]=n.children,h[10]=o):o=h[10],h[11]!==g?(l=(0,a.jsx)("span",{className:"d-none","aria-hidden":!0,id:g,children:"Opens in new tab."}),h[11]=g,h[12]=l):l=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(u.l.TrailingVisual,{children:(0,a.jsx)(I.LinkExternalIcon,{})}),h[13]=c):c=h[13],h[14]!==n||h[15]!==r||h[16]!==s||h[17]!==o||h[18]!==l?(d=(0,a.jsxs)(u.l.Item,{...n,"aria-labelledby":r,children:[s,o,l,c]}),h[14]=n,h[15]=r,h[16]=s,h[17]=o,h[18]=l,h[19]=d):d=h[19],d}try{eY.displayName||(eY.displayName="LinkSuggestion")}catch{}function eJ(e){return{value:`@${e.slug}`,render:t=>(0,a.jsx)(eX,{agent:e,...t})}}function eZ(e){let t,n,r,s,o,l=(0,i.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(r=void 0!==t&&(0,a.jsx)(u.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(u.l.TrailingVisual,{children:(0,a.jsx)(I.ArrowRightIcon,{})}),l[5]=s):s=l[5],l[6]!==n||l[7]!==r?(o=(0,a.jsxs)(u.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,s]}),l[6]=n,l[7]=r,l[8]=o):o=l[8],o}try{eZ.displayName||(eZ.displayName="MultistepSuggestion")}catch{}function e0(e){let t,n,r,s,o=(0,i.c)(9);o[0]!==e?({category:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let{name:l,icon:c}=n;return o[3]!==c?(r=(0,a.jsx)(c,{}),o[3]=c,o[4]=r):r=o[4],o[5]!==l||o[6]!==t||o[7]!==r?(s=(0,a.jsx)(eZ,{leadingVisual:r,...t,children:l}),o[5]=l,o[6]=t,o[7]=r,o[8]=s):s=o[8],s}try{e0.displayName||(e0.displayName="CategorySuggestion")}catch{}let e1={asyncSuggestion:"shared-module__asyncSuggestion--AXibl",stale:"shared-module__stale--R4Im6"};function e2(e){let t,n,r,s,o,l,c,d,m,h,p,g=(0,i.c)(25);g[0]!==e?({discussion:n,stale:s,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=s):(t=g[1],n=g[2],r=g[3],s=g[4]);let f=s&&e1.stale;return g[5]!==t||g[6]!==f?(o=(0,S.$)(e1.asyncSuggestion,f,t),g[5]=t,g[6]=f,g[7]=o):o=g[7],g[8]!==n.state?(l="open"===n.state&&(0,a.jsx)(I.CommentDiscussionIcon,{className:"fgColor-open"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="closed"===n.state&&(0,a.jsx)(I.DiscussionClosedIcon,{className:"fgColor-muted"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==l||g[13]!==c?(d=(0,a.jsxs)(u.l.LeadingVisual,{children:[l,c]}),g[12]=l,g[13]=c,g[14]=d):d=g[14],g[15]!==n.title?(m=(0,a.jsx)(eI.A,{title:n.title,maxWidth:350,children:n.title}),g[15]=n.title,g[16]=m):m=g[16],g[17]!==n.number?(h=(0,a.jsxs)(u.l.Description,{children:["#",n.number]}),g[17]=n.number,g[18]=h):h=g[18],g[19]!==r||g[20]!==o||g[21]!==d||g[22]!==m||g[23]!==h?(p=(0,a.jsxs)(u.l.Item,{...r,className:o,children:[d,m,h]}),g[19]=r,g[20]=o,g[21]=d,g[22]=m,g[23]=h,g[24]=p):p=g[24],p}try{e2.displayName||(e2.displayName="DiscussionSuggestion")}catch{}function e3(e){let t,n,r,s,o,l,c,d,m,h,p,g,f,_,y,x=(0,i.c)(35);if(x[0]!==e?({type:o,path:n,stale:s,className:t,...r}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=r,x[4]=s,x[5]=o):(t=x[1],n=x[2],r=x[3],s=x[4],o=x[5]),x[6]!==t||x[7]!==n||x[8]!==r||x[9]!==s||x[10]!==o){let e=n.split("/"),i=e.pop();c=u.l.Item,h=r;let _=s&&e1.stale;x[19]!==t||x[20]!==_?(p=(0,S.$)(e1.asyncSuggestion,_,t),x[19]=t,x[20]=_,x[21]=p):p=x[21],x[22]!==o?(g=(0,a.jsx)(u.l.LeadingVisual,{children:"folder"===o?(0,a.jsx)(I.FileDirectoryFillIcon,{}):(0,a.jsx)(I.FileIcon,{})}),x[22]=o,x[23]=g):g=x[23],f=i,l=u.l.Description,d="inline",m=e.join("/"),x[6]=t,x[7]=n,x[8]=r,x[9]=s,x[10]=o,x[11]=l,x[12]=c,x[13]=d,x[14]=m,x[15]=h,x[16]=p,x[17]=g,x[18]=f}else l=x[11],c=x[12],d=x[13],m=x[14],h=x[15],p=x[16],g=x[17],f=x[18];return x[24]!==l||x[25]!==d||x[26]!==m?(_=(0,a.jsxs)(l,{variant:d,children:[m,"/"]}),x[24]=l,x[25]=d,x[26]=m,x[27]=_):_=x[27],x[28]!==c||x[29]!==h||x[30]!==p||x[31]!==g||x[32]!==f||x[33]!==_?(y=(0,a.jsxs)(c,{...h,className:p,children:[g,f,_]}),x[28]=c,x[29]=h,x[30]=p,x[31]=g,x[32]=f,x[33]=_,x[34]=y):y=x[34],y}try{e3.displayName||(e3.displayName="FileSuggestion")}catch{}function e5(e){let t,n,r,s,o,l,c,d,m,h,p,g,f=(0,i.c)(28);f[0]!==e?({issue:n,stale:s,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=s):(t=f[1],n=f[2],r=f[3],s=f[4]);let _=s&&e1.stale;return f[5]!==t||f[6]!==_?(o=(0,S.$)(e1.asyncSuggestion,_,t),f[5]=t,f[6]=_,f[7]=o):o=f[7],f[8]!==n.state?(l="draft"===n.state&&(0,a.jsx)(I.IssueDraftIcon,{className:"fgColor-draft"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="open"===n.state&&(0,a.jsx)(I.IssueOpenedIcon,{className:"fgColor-open"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==n.state?(d="closed"===n.state&&(0,a.jsx)(I.IssueClosedIcon,{className:"fgColor-done"}),f[12]=n.state,f[13]=d):d=f[13],f[14]!==l||f[15]!==c||f[16]!==d?(m=(0,a.jsxs)(u.l.LeadingVisual,{children:[l,c,d]}),f[14]=l,f[15]=c,f[16]=d,f[17]=m):m=f[17],f[18]!==n.title?(h=(0,a.jsx)(eI.A,{title:n.title,maxWidth:350,children:n.title}),f[18]=n.title,f[19]=h):h=f[19],f[20]!==n.number?(p=(0,a.jsxs)(u.l.Description,{children:["#",n.number]}),f[20]=n.number,f[21]=p):p=f[21],f[22]!==r||f[23]!==o||f[24]!==m||f[25]!==h||f[26]!==p?(g=(0,a.jsxs)(u.l.Item,{...r,className:o,children:[m,h,p]}),f[22]=r,f[23]=o,f[24]=m,f[25]=h,f[26]=p,f[27]=g):g=f[27],g}try{e5.displayName||(e5.displayName="IssueSuggestion")}catch{}function e4(e){let t,n,r,s,o,l,c,d,m,h,p,g,f=(0,i.c)(28);f[0]!==e?({pullRequest:r,stale:s,className:t,...n}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=s):(t=f[1],n=f[2],r=f[3],s=f[4]);let _=s&&e1.stale;return f[5]!==t||f[6]!==_?(o=(0,S.$)(e1.asyncSuggestion,_,t),f[5]=t,f[6]=_,f[7]=o):o=f[7],f[8]!==r.state?(l="draft"===r.state&&(0,a.jsx)(I.GitPullRequestDraftIcon,{className:"fgColor-draft"}),f[8]=r.state,f[9]=l):l=f[9],f[10]!==r.state?(c="open"===r.state&&(0,a.jsx)(I.GitPullRequestIcon,{className:"fgColor-open"}),f[10]=r.state,f[11]=c):c=f[11],f[12]!==r.state?(d="closed"===r.state&&(0,a.jsx)(I.GitPullRequestClosedIcon,{className:"fgColor-done"}),f[12]=r.state,f[13]=d):d=f[13],f[14]!==l||f[15]!==c||f[16]!==d?(m=(0,a.jsxs)(u.l.LeadingVisual,{children:[l,c,d]}),f[14]=l,f[15]=c,f[16]=d,f[17]=m):m=f[17],f[18]!==r.title?(h=(0,a.jsx)(eI.A,{title:r.title,maxWidth:350,children:r.title}),f[18]=r.title,f[19]=h):h=f[19],f[20]!==r.number?(p=(0,a.jsxs)(u.l.Description,{children:["#",r.number]}),f[20]=r.number,f[21]=p):p=f[21],f[22]!==n||f[23]!==o||f[24]!==m||f[25]!==h||f[26]!==p?(g=(0,a.jsxs)(u.l.Item,{...n,className:o,children:[m,h,p]}),f[22]=n,f[23]=o,f[24]=m,f[25]=h,f[26]=p,f[27]=g):g=f[27],g}try{e4.displayName||(e4.displayName="PullRequestSuggestion")}catch{}function e6(e){let t,n,r,s,o,l,c,d,m=(0,i.c)(18);m[0]!==e?({repository:s,isMultistep:n,stale:o,className:t,...r}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=s,m[5]=o):(t=m[1],n=m[2],r=m[3],s=m[4],o=m[5]);let h=o&&e1.stale;m[6]!==t||m[7]!==h?(l=(0,S.$)(e1.asyncSuggestion,h,t),m[6]=t,m[7]=h,m[8]=l):l=m[8];let p=l;m[9]!==s.isInOrganization||m[10]!==s.ownerAvatarUrl?(c=s.ownerAvatarUrl?(0,a.jsx)(eu.r,{src:s.ownerAvatarUrl,alt:"",size:16,square:s.isInOrganization}):(0,a.jsx)(I.RepoIcon,{}),m[9]=s.isInOrganization,m[10]=s.ownerAvatarUrl,m[11]=c):c=m[11];let g=c;return m[12]!==g||m[13]!==p||m[14]!==n||m[15]!==r||m[16]!==s.nwo?(d=n?(0,a.jsx)(eZ,{...r,className:p,leadingVisual:g,children:s.nwo},s.nwo):(0,a.jsxs)(u.l.Item,{...r,className:p,children:[(0,a.jsx)(u.l.LeadingVisual,{children:g}),s.nwo]},s.nwo),m[12]=g,m[13]=p,m[14]=n,m[15]=r,m[16]=s.nwo,m[17]=d):d=m[17],d}try{e6.displayName||(e6.displayName="RepositorySuggestion")}catch{}function e7(e){return{value:null,key:e.value,render:t=>(0,a.jsx)(e0,{category:e,...t})}}function e8(e){return null!==e}var e9=n(84331);function te(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,a.jsxs)(u.l.Item,{...t,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(e.icon,{})}),e.name,(0,a.jsx)(u.l.Description,{variant:"block",children:e.description})]})}}var tt=n(97286);function tn(e){let t,n,r=(0,i.c)(3),[a,s]=(0,m.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&s(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>s(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,m.useEffect)(t,n),a}function tr(e){return e}async function ta(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let s=new Worker(n);s.addEventListener("message",e=>a(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function ti(e){return e}function ts(e){return e}function to(e){return e}var tl=n(26408);function tc(e){let t,n,r,s,o=(0,i.c)(9);return o[0]!==e?({org:t,...n}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==t.avatarUrl?(r=(0,a.jsx)(eu.r,{square:!0,src:t.avatarUrl}),o[3]=t.avatarUrl,o[4]=r):r=o[4],o[5]!==t.login||o[6]!==n||o[7]!==r?(s=(0,a.jsx)(eY,{leadingVisual:r,...n,children:t.login}),o[5]=t.login,o[6]=n,o[7]=r,o[8]=s):s=o[8],s}function td(e){let t,n,r,s=(0,i.c)(7);return s[0]!==e?({orgs:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t[0]?.login||s[4]!==t.length||s[5]!==n?(r=1===t.length?(0,a.jsxs)(eY,{leadingVisual:(0,a.jsx)(I.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,a.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,a.jsx)(eZ,{leadingVisual:(0,a.jsx)(I.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),s[3]=t[0]?.login,s[4]=t.length,s[5]=n,s[6]=r):r=s[6],r}try{tc.displayName||(tc.displayName="SSOOrgSuggestion")}catch{}try{td.displayName||(td.displayName="SSOPromptSuggestion")}catch{}let tu=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tm(e){return{value:null,key:`open-link:${tu(e)}`,render:t=>(0,a.jsx)(tc,{org:e,...t})}}function th(e){let t,n,r,o,l,c,d,h,p,f,_,y=(0,i.c)(29),{children:x,onSelectCommand:S,onSelectReference:v,onShowAgentsDialog:E,hideAutocomplete:C}=e,{mode:b}=(0,g.Pk)();y[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],w.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),y[0]=t):t=y[0];let[R,N]=(0,m.useState)(tp);y[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>N(!0),r=[],y[1]=n,y[2]=r):(n=y[1],r=y[2]),(0,m.useEffect)(n,r);let[j,A]=(0,m.useState)(null),{suggestions:T,stale:k}=function(e){let t=(0,i.c)(9),n=function(e){let t,n,r=(0,i.c)(7),a=(0,D.qw)();r[0]!==a?(t=(0,K.K)(a),r[0]=a,r[1]=t):t=r[1];let s=t;e:{let t,a;if(!e){n=null;break e}r[2]!==s||r[3]!==e.filter?(t=""===e.filter.trim()?s:s.filter(t=>(0,e9.dt)(t.name,e.filter)>.5&&t.key!==e.filter.toLowerCase()),r[2]=s,r[3]=e.filter,r[4]=t):t=r[4];let i=t;r[5]!==i?(a=i.map(te),r[5]=i,r[6]=a):a=r[6],n=a}return n}(e?.category==="commands"?e:null),r=function(e){let t,n=(0,i.c)(3),{currentReferences:r}=(0,g.Pk)();e:{let i;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=r.map(e=>{let t=U.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:U.Q.stringify(t),render:n=>(0,a.jsx)(e6,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:U.Q.stringify(t),render:n=>(0,a.jsx)(e5,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:U.Q.stringify(t),render:n=>(0,a.jsx)(e4,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:U.Q.stringify(t),render:n=>(0,a.jsx)(e2,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:U.Q.stringify(t),render:n=>(0,a.jsx)(e3,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(e8),l=ez.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(e7);if(l.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t,{...e}),(0,a.jsx)(u.l.Divider,{})]})}}i=o.concat(l),n[0]=r,n[1]=e,n[2]=i}else i=n[2];t=i}return t}(e?.category==="categories"?e:null),s=function(e){let t,n=(0,i.c)(4),{availableAgents:r,loading:s,showLimit:o,disabled:l}=(0,ed.JE)(null!==e);e:{let i;if(l||!e){t=null;break e}if(s&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==o?(i=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eJ).concat({value:null,key:`open-link:${ed.bn}`,render:e=>(0,a.jsxs)(a.Fragment,{children:[r.length>0&&(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(eY,{leadingVisual:(0,a.jsx)(I.TelescopeIcon,{}),...e,inactiveText:o?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=o,n[3]=i):i=n[3],t=i}return t}(e?.category==="agents"?e:null),o=function(e){let{currentReferences:t}=(0,g.Pk)(),n=tn(e),r=e!==n,{repositories:i,loading:s}=(0,tl.U)(n?.filter??"",null!==n),o=(0,m.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,g.Pk)();return{suggestions:(0,m.useMemo)(()=>{if(!n)return null;if("initial"===s)return"loading";let e=void 0!==n.nextCategory,t=i.toSorted((e,t)=>o.has(e.databaseId)&&!o.has(t.databaseId)?-1:o.has(t.databaseId)&&!o.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:U.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,a.jsx)(e6,{repository:t,isMultistep:e,stale:!!s||r,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tu(l[0])}`:"sso-orgs",render:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.l.Divider,{}),(0,a.jsx)(td,{orgs:l,...e})]})}),t},[i,s,n,o,l,r]),stale:!0===s}}(e?.category==="repositories"?e:null),l=function(e){let t,n,r,s,o,l=(0,i.c)(18),{service:c}=(0,F.b)(),d=tn(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-issues",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:ts},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let g=(0,tt.I)(r);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==u||l[12]!==g.data||l[13]!==g.isPlaceholderData?(e=g.data?.map(e=>({value:U.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,a.jsx)(e5,{...t,issue:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=g.data,l[13]=g.isPlaceholderData,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="issues"?e:null),c=function(e){let t,n,r,s,o,l=(0,i.c)(18),{service:c}=(0,F.b)(),d=tn(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-pulls",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:to},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let g=(0,tt.I)(r);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==u||l[12]!==g.data||l[13]!==g.isPlaceholderData?(e=g.data?.map(e=>({value:U.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,a.jsx)(e4,{...t,pullRequest:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=g.data,l[13]=g.isPlaceholderData,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="pulls"?e:null),d=function(e){let t,n,r,s,o,l=(0,i.c)(18),{service:c}=(0,F.b)(),d=tn(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-discussions",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tr},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let g=(0,tt.I)(r);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==g.data||l[12]!==g.isPlaceholderData||l[13]!==u?(e=g.data?.map(e=>({value:U.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,a.jsx)(e2,{...t,discussion:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=g.data,l[12]=g.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="discussions"?e:null),h=function(e){let t,n,r,s,o,l,c,d,u=(0,i.c)(23),m=(0,F.b)(),h=null!==e,p=e?.repository;u[0]!==p?(t=["copilot-repository",p],u[0]=p,u[1]=t):t=u[1],u[2]!==m||u[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await m.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},u[2]=m,u[3]=e?.repository,u[4]=n):n=u[4],u[5]!==h||u[6]!==t||u[7]!==n?(r={enabled:h,queryKey:t,queryFn:n,staleTime:3e5},u[5]=h,u[6]=t,u[7]=n,u[8]=r):r=u[8];let f=(0,tt.I)(r),_=function(e,t){let n,r,a,s=(0,i.c)(11),o=(0,F.b)(),l=null!==e;return!0!==s[0]||s[1]!==e?(n=["copilot-repository-files",e,!0],s[0]=!0,s[1]=e,s[2]=n):n=s[2],!0!==s[3]||s[4]!==o||s[5]!==e?(r=async()=>{if(!e)return{};let t=await o.service.listRepoFiles(e,!0);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},s[3]=!0,s[4]=o,s[5]=e,s[6]=r):r=s[6],s[7]!==l||s[8]!==n||s[9]!==r?(a={enabled:l,queryKey:n,queryFn:r,staleTime:3e5},s[7]=l,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,tt.I)(a)}(f.data??null);_.data?.directories,u[9]!==_.data?.directories?(s=_.data?.directories??[],u[9]=_.data?.directories,u[10]=s):s=u[10],u[11]!==s?(o=new Set(s),u[11]=s,u[12]=o):o=u[12];let y=o;u[13]!==_.data?(l=_.data?(_.data.paths??[]).concat(_.data.directories??[]):null,u[13]=_.data,u[14]=l):l=u[14];let x=function(e,t){let n,r,a,s=(0,i.c)(9),{findFileWorkerPath:o}=(0,g.Pk)();s[0]!==e||s[1]!==t||s[2]!==o?(n=["copilot-worker-filter",o,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:ta(e,t,o,r):[]},s[0]=e,s[1]=t,s[2]=o,s[3]=n,s[4]=r):(n=s[3],r=s[4]);let l=null!==e;return s[5]!==n||s[6]!==r||s[7]!==l?(a={queryKey:n,queryFn:r,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:ti},s[5]=n,s[6]=r,s[7]=l,s[8]=a):a=s[8],(0,tt.I)(a)}(l,e?.filter??"");e:{let t;if(!e){c=null;break e}if(f.isLoading||_.isLoading||x.isLoading){c="loading";break e}u[15]!==y||u[16]!==x.data||u[17]!==x.isPlaceholderData||u[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:U.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,a.jsx)(e3,{...e,path:t,type:y.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],u[15]=y,u[16]=x.data,u[17]=x.isPlaceholderData,u[18]=e,u[19]=t):t=u[19];let n=t;c=n.length>0?n:null}let S=c;return u[20]!==f.isPlaceholderData||u[21]!==S?(d={suggestions:S,stale:f.isPlaceholderData},u[20]=f.isPlaceholderData,u[21]=S,u[22]=d):d=u[22],d}(e?.category==="files"?e:null),p=function(e){let t,n=(0,i.c)(5),{ssoOrganizations:r}=(0,g.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tm),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case"commands":{let e;return t[0]!==n?(e={suggestions:n,stale:!1},t[0]=n,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"repositories":return o;case"issues":return l;case"agents":{let e;return t[5]!==s?(e={suggestions:s,stale:!1},t[5]=s,t[6]=e):e=t[6],e}case"discussions":return d;case"pulls":return c;case"files":return h;case"sso-orgs":{let e;return t[7]!==p?(e={suggestions:p,stale:!1},t[7]=p,t[8]=e):e=t[8],e}}}(j);if(y[3]!==E||y[4]!==j?(o={query:j,onShowAgentsDialog:E},y[3]=E,y[4]=j,y[5]=o):o=y[5],!function(e){let t,n,r=(0,i.c)(12),{query:a,onShowAgentsDialog:s}=e,o=a?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,ed.JE)(o);r[0]!==o||r[1]!==l?.length||r[2]!==d||r[3]!==c||r[4]!==s?(t=()=>{o&&!c&&(d?s("agents-not-supported"):l?.length||s("no-agents-available"))},r[0]=o,r[1]=l?.length,r[2]=d,r[3]=c,r[4]=s,r[5]=t):t=r[5],r[6]!==o||r[7]!==l||r[8]!==d||r[9]!==c||r[10]!==s?(n=[o,c,l,d,s],r[6]=o,r[7]=l,r[8]=d,r[9]=c,r[10]=s,r[11]=n):n=r[11],(0,m.useEffect)(t,n)}(o),!R||C){let e;return y[6]!==x?(e=(0,a.jsx)("div",{children:x}),y[6]=x,y[7]=e):e=y[7],e}y[8]!==b||y[9]!==S||y[10]!==v||y[11]!==j?(l=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;if((0,s.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:b,suggestion:n}),"object"==typeof t&&j?.category==="commands")return void S?.(t.key);let r=null!==n&&j?.category!=="agents"?U.Q.parse(n):void 0;if(r&&v(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){A(null),window.open(a[1],"_blank");return}switch(j?.category){case"categories":eK.is(t.key)&&A(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?A({category:"sso-orgs",filter:""}):j.nextCategory&&A({category:j.nextCategory,filter:"",repository:t.key})}},y[8]=b,y[9]=S,y[10]=v,y[11]=j,y[12]=l):l=y[12];let M=l;y[13]!==j?(c=e=>{if("/"===e.trigger.triggerChar){(null===j&&1===e.target.selectionStart&&1===e.target.selectionEnd||j?.category==="commands")&&A({category:"commands",filter:e.query});return}A(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},y[13]=j,y[14]=c):c=y[14];let O=c;y[15]===Symbol.for("react.memo_cache_sentinel")?(d=()=>A(null),y[15]=d):d=y[15];let L=d;return y[16]!==j?(h=j&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eH[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eH[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eH[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(j)||void 0,y[16]=j,y[17]=h):h=y[17],y[18]!==x||y[19]!==M||y[20]!==O||y[21]!==T||y[22]!==h?(p=(0,a.jsx)(eQ.a,{fullWidth:!0,suggestions:T,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:L,onShowSuggestions:O,onSelectSuggestion:M,suggestionsPlacement:"below",title:h,asMenu:!0,children:x}),y[18]=x,y[19]=M,y[20]=O,y[21]=T,y[22]=h,y[23]=p):p=y[23],y[24]!==k?(f=k&&(0,a.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),y[24]=k,y[25]=f):f=y[25],y[26]!==p||y[27]!==f?(_=(0,a.jsxs)(a.Fragment,{children:[p,f]}),y[26]=p,y[27]=f,y[28]=_):_=y[28],_}function tp(){return"undefined"!=typeof document}try{th.displayName||(th.displayName="ChatInputAutocomplete")}catch{}let tg={container:"ChatInput-module__container--qmP6j",input:"ChatInput-module__input--HalEQ",containerDisabled:"ChatInput-module__containerDisabled--bIHy2",toolbar:"ChatInput-module__toolbar--Kv3Gl",containerSmall:"ChatInput-module__containerSmall--NfPkF",inputContainer:"ChatInput-module__inputContainer--cpjba",inputPreview:"ChatInput-module__inputPreview--Fdwj0",clicked:"ChatInput-module__clicked--u0igo",attachments:"ChatInput-module__attachments--Fv007",attachmentButton:"ChatInput-module__attachmentButton--qtFf6",attachmentButtonText:"ChatInput-module__attachmentButtonText--fVuEs",inputContainerNewConversation:"ChatInput-module__inputContainerNewConversation--FexlN",toolbarNoModes:"ChatInput-module__toolbarNoModes--KJL2k",extra:"ChatInput-module__extra--oQVm8",CommandIconButton:"ChatInput-module__CommandIconButton--lxm7H",mode:"ChatInput-module__mode--dH9c4",modeButton:"ChatInput-module__modeButton--y5Yp0",modeSelectButton:"ChatInput-module__modeSelectButton--rJ86j",modeSelectorMobile:"ChatInput-module__modeSelectorMobile--ZPCVa",modeSelectorDesktop:"ChatInput-module__modeSelectorDesktop--SifXL",actions:"ChatInput-module__actions--zbM52",actionsMultiple:"ChatInput-module__actionsMultiple--LHDC3",toolbarButtons:"ChatInput-module__toolbarButtons--YDoIY",lighterSegmentedControl:"ChatInput-module__lighterSegmentedControl--uAdMt"};var tf=n(16378),t_=n(6224);let ty=(0,m.forwardRef)(function(e,t){let n,r,s,o=(0,i.c)(8),{text:l}=e;o[0]!==l?(n=(0,tf._)(l),o[0]=l,o[1]=n):n=o[1];let{availableAgents:c}=(0,ed.JE)(n),{currentReferences:d}=(0,g.Pk)(),u=(0,F.b)(),h=(0,D.qw)(),p=(0,L.l)().use(B.U,{references:d,agents:void 0===c?[]:c,plugins:h}).parse(l),f=(0,tf.O)(p),_=(0,m.useRef)(f);(0,m.useEffect)(function(){for(let e of _.current)if(!f.has(e)){let t=d.find(t=>(0,x.Vb)(t)===e);t&&u.removeReference(t)}_.current=f}),o[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,R.G)("copilot-chat-input-textarea-preview"),o[2]=r):r=o[2];let y=p.children.map(tx);return o[3]!==t||o[4]!==r||o[5]!==tg.inputPreview||o[6]!==y?(s=(0,a.jsx)("div",{id:"copilot-chat-textarea-preview",...r,"aria-hidden":!0,className:tg.inputPreview,ref:t,role:"presentation",children:y}),o[3]=t,o[4]=r,o[5]=tg.inputPreview,o[6]=y,o[7]=s):s=o[7],s});try{ty.displayName||(ty.displayName="ChatInputPreview")}catch{}function tx(e,t){switch(e.type){case"text":return e.value;case"command":return(0,a.jsx)("span",{className:t_.A.command,...(0,R.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,a.jsx)("span",{className:t_.A.mention,...(0,R.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,a.jsx)("span",{className:t_.A.mention,children:e.value},t)}}var tS=n(11683),tv=n(45800),tE=n(25536),tC=n(7730),tw=n(57448);let tb={container:"ChatInputReferences-module__container--bNybl",attachmentsList:"ChatInputReferences-module__attachmentsList--mEJpJ",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--DONiv",loading:"ChatInputReferences-module__loading--kAJlw",divider:"ChatInputReferences-module__divider--k8d6S",menuButton:"ChatInputReferences-module__menuButton--IVLqN",functionLoading:"ChatInputReferences-module__functionLoading--Oimop",convertToFileContainer:"ChatInputReferences-module__convertToFileContainer--y1XOU",convertToFileButton:"ChatInputReferences-module__convertToFileButton--hnPn2"};var tR=n(1631),tN=n(15518);let tj=(0,m.memo)(e=>{let t,n,r,s,o,c,h,p,f,_,y,v,E,C,w,b,N,j=(0,i.c)(51),{className:A,isLoading:T,returnFocusRef:M,tokenSize:O,onSelectReference:L,getReferenceVersion:P,showConvertToFileText:D,onConvertToFile:U,onConvertToFileDismiss:B,hideAttachmentsMenu:q,onRemoveReference:$}=e,G=void 0===O?"medium":O,{currentReferences:W}=(0,g.Pk)(),Q=(0,F.b)(),H=(0,m.useRef)(null),z=(0,tC.g)(H),[K,X]=(0,m.useState)(!1);j[0]!==W?(t=(0,x.rT)(W),j[0]=W,j[1]=t):t=j[1];let Y=t,{setSelectedCopilotSpaceId:J}=(0,tE.O)(),Z=(0,m.useRef)(null);j[2]===Symbol.for("react.memo_cache_sentinel")?(n={containerRef:Z,focusableElementFilter:tA,bindKeys:tS.z0.ArrowHorizontal|tS.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},j[2]=n):n=j[2],j[3]!==Y?(r=[Y],j[3]=Y,j[4]=r):r=j[4],(0,tv.G)(n,r),j[5]===Symbol.for("react.memo_cache_sentinel")?(s=[],j[5]=s):s=j[5];let ee=(0,m.useRef)(s),et=(e,t)=>{let n=ee.current[t+1]??ee.current[t-1]??M.current;n?.focus(),$?.(e),(0,x.yA)(e)&&J(void 0),Q.removeReference(e)};j[6]!==Q||j[7]!==M||j[8]!==Y||j[9]!==J?(o=()=>{setTimeout(()=>M.current?.focus()),Y.filter(x.yA).length>0&&J(void 0),Q.clearCurrentReferences()},j[6]=Q,j[7]=M,j[8]=Y,j[9]=J,j[10]=o):o=j[10];let en=o,er=(0,m.useRef)(Y);j[11]!==Y?(c=()=>{if(er.current.length<Y.length){let e=Y.find(e=>!er.current.find(t=>(0,x.x_)(t,e))),t=e?Y.indexOf(e):-1;ee?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}er.current=Y},h=[Y],j[11]=Y,j[12]=c,j[13]=h):(c=j[12],h=j[13]),(0,V.N)(c,h),j[14]!==B?(p=()=>{B?.()},j[14]=B,j[15]=p):p=j[15];let ea=p;j[16]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{X(tT)},j[16]=f):f=j[16];let ei=f,es=function(e,t,n,r){let a,s,o,l,c,d=(0,i.c)(14),[u,h]=(0,m.useState)(!1);d[0]!==r||d[1]!==t?(a=()=>{t.current&&h(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(r);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=r,d[1]=t,d[2]=a):a=d[2];let p=a;return d[3]!==p||d[4]!==e.length?(s=()=>{if(0===e.length)return void h(!1);let t=requestAnimationFrame(p);return()=>cancelAnimationFrame(t)},d[3]=p,d[4]=e.length,d[5]=s):s=d[5],d[6]!==p||d[7]!==e?(o=[e,p],d[6]=p,d[7]=e,d[8]=o):o=d[8],(0,m.useEffect)(s,o),d[9]!==p||d[10]!==n||d[11]!==e.length?(l=()=>{if(0===e.length||!n.current)return;let t=new ResizeObserver(()=>{p()});return t.observe(n.current),()=>{t.disconnect()}},c=[e.length,p,n],d[9]=p,d[10]=n,d[11]=e.length,d[12]=l,d[13]=c):(l=d[12],c=d[13]),(0,m.useEffect)(l,c),u}(Y,ee,Z,`.${tN.A.name}`),eo=(0,m.useId)();j[17]!==ea||j[18]!==D?(_=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),D&&ea())},j[17]=ea,j[18]=D,j[19]=_):_=j[19];let el=_;if(0===Y.length&&!T&&!D)return null;j[20]!==A?(y=(0,S.$)(A,tb.container),j[20]=A,j[21]=y):y=j[21];let ec=z&&tb.scrolledToEnd,ed=T&&tb.loading;j[22]!==ec||j[23]!==ed?(v=(0,S.$)(tb.attachmentsList,ec,ed),j[22]=ec,j[23]=ed,j[24]=v):v=j[24],j[25]!==eo||j[26]!==ea||j[27]!==U||j[28]!==el||j[29]!==D||j[30]!==G?(E=D&&(0,a.jsxs)("div",{className:tb.convertToFileContainer,children:[(0,a.jsx)(k.Q,{onClick:U,leadingVisual:I.FileIcon,className:tb.convertToFileButton,"aria-describedby":eo,onKeyDown:el,children:"Convert to file"}),(0,a.jsx)(tR.lh,{size:G,onRemove:ea,descriptionId:eo})]}),j[25]=eo,j[26]=ea,j[27]=U,j[28]=el,j[29]=D,j[30]=G,j[31]=E):E=j[31];let eu=Y.map((e,t)=>"repository"===e.type?(0,a.jsx)(tI,{reference:e,ref:e=>{ee.current[t]=e},"data-index":t,size:G,fullWidth:K,onRemove:()=>et(e,t),onClick:L,getReferenceVersion:P},(0,x.Vb)(e)):(0,a.jsx)(tR.BR,{reference:e,ref:e=>{ee.current[t]=e},"data-index":t,size:G,fullWidth:K,onRemove:()=>et(e,t),onClick:L,getReferenceVersion:P},(0,x.Vb)(e)));return j[32]!==T?(C=T&&(0,a.jsxs)("div",{className:tb.functionLoading,...(0,R.G)("loading-indicator"),children:[(0,a.jsx)(d.A,{size:"small"}),"Retrieving\u2026"]}),j[32]=T,j[33]=C):C=j[33],j[34]!==v||j[35]!==E||j[36]!==eu||j[37]!==C?(w=(0,a.jsxs)("div",{className:v,ref:H,children:[E,eu,C]}),j[34]=v,j[35]=E,j[36]=eu,j[37]=C,j[38]=w):w=j[38],j[39]!==ei||j[40]!==es||j[41]!==q||j[42]!==en||j[43]!==Y.length||j[44]!==K||j[45]!==G?(b=Y.length>0&&!q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:tb.divider}),(0,a.jsxs)(l.W,{children:[(0,a.jsx)(l.W.Anchor,{children:(0,a.jsx)(eb.K,{icon:I.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tb.menuButton,size:G})}),(0,a.jsx)(l.W.Overlay,{width:"small",children:(0,a.jsxs)(u.l,{children:[es&&(0,a.jsxs)(u.l.Item,{onSelect:ei,children:[(0,a.jsx)(u.l.LeadingVisual,{children:K?(0,a.jsx)(I.EyeClosedIcon,{}):(0,a.jsx)(I.EyeIcon,{})}),K?"Hide full attachment names":"Show full attachment names"]}),(0,a.jsxs)(u.l.Item,{onSelect:en,children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),j[39]=ei,j[40]=es,j[41]=q,j[42]=en,j[43]=Y.length,j[44]=K,j[45]=G,j[46]=b):b=j[46],j[47]!==y||j[48]!==w||j[49]!==b?(N=(0,a.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:y,ref:Z,children:[w,b]}),j[47]=y,j[48]=w,j[49]=b,j[50]=N):N=j[50],N});tj.displayName="ChatInputReferences";let tI=(0,m.forwardRef)(function(e,t){let n,r,s,o=(0,i.c)(8),l=e.reference,c=(0,g.pn)(tk),d=`${l.ownerLogin}/${l.name}`,[u,h]=(0,tw.vn)(d),p=(0,m.useRef)(!1),f=u.code===tw.W5.Unindexed||u.docs===tw.W5.Unindexed;return o[0]!==c||o[1]!==f||o[2]!==h?(n=function(){!p.current&&f&&c&&(p.current=!0,h())},r=[c,f,h],o[0]=c,o[1]=f,o[2]=h,o[3]=n,o[4]=r):(n=o[3],r=o[4]),(0,m.useEffect)(n,r),o[5]!==e||o[6]!==t?(s=(0,a.jsx)(tR.BR,{ref:t,...e}),o[5]=e,o[6]=t,o[7]=s):s=o[7],s});try{tI.displayName||(tI.displayName="RepoReferenceToken")}catch{}try{tI.displayName||(tI.displayName="RepoReferenceToken")}catch{}function tA(e){return!e.hasAttribute("aria-hidden")}function tT(e){return!e}function tk(e){return e.model&&!e.model.hasLimitedCapabilities}var tM=n(81829);let tO=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,a.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tO.displayName||(tO.displayName="MCPIcon")}catch{}var tL=n(97793),tP=n(97665),tD=n(99511),tF=n(40480),tU=n(26382);let tB={container:"McpToolsManager-module__container--PHa2N",header:"McpToolsManager-module__header--PXzkx",headerTitle:"McpToolsManager-module__headerTitle--CiuwN",searchInput:"McpToolsManager-module__searchInput--v2pAX",contentArea:"McpToolsManager-module__contentArea--aqxn4",loadingContainer:"McpToolsManager-module__loadingContainer--btAEV",emptyState:"McpToolsManager-module__emptyState--qpgwB",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--PLCEY",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--x7TOI",footer:"McpToolsManager-module__footer--UZmCo",serverName:"McpToolsManager-module__serverName--au45P",toolItem:"McpToolsManager-module__toolItem--Eo5Ka",toolNameContainer:"McpToolsManager-module__toolNameContainer--VKNAW",toolName:"McpToolsManager-module__toolName--EL2OQ",toolDescription:"McpToolsManager-module__toolDescription--nn86Q"},tq=({anchorRef:e,open:t,onOpenChange:n})=>{let[r,i]=(0,m.useState)(!1),[s,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(null),[u,h]=(0,m.useState)(()=>new Set),{service:p}=(0,F.b)(),g=(0,tP.jE)(),{data:f,isPending:_,isError:y}=(0,tt.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>p.fetchMCPServers(),placeholderData:e=>e}),x=(0,m.useMemo)(()=>f||[],[f]),S=(0,m.useMemo)(()=>x.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[x,s]),v=e=>{h(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,a.jsx)(a.Fragment,{}),width:"medium",children:(0,a.jsxs)("div",{className:tB.container,children:[(0,a.jsxs)("div",{className:tB.header,children:[(0,a.jsx)("div",{className:tB.headerTitle,children:"MCP tools"}),(0,a.jsx)(tD.A,{placeholder:"Search by provider",value:s,onChange:e=>o(e.target.value),className:tB.searchInput,leadingVisual:I.SearchIcon})]}),(0,a.jsx)("div",{className:tB.contentArea,children:_?(0,a.jsx)("div",{className:tB.loadingContainer,children:(0,a.jsx)(d.A,{})}):y?(0,a.jsxs)(tU.E,{children:[(0,a.jsx)(tU.E.Visual,{children:"\u26A0\uFE0F"}),(0,a.jsx)(tU.E.Heading,{children:"Error loading tools"})]}):0===x.length?(0,a.jsxs)("div",{className:tB.emptyState,children:[(0,a.jsx)(I.ToolsIcon,{size:24}),(0,a.jsx)("div",{className:tB.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,a.jsx)("div",{className:tB.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,a.jsx)(tF.G,{"aria-label":"MCP server selection",children:S.map(e=>(0,a.jsxs)(tF.G.Item,{id:e.id,onSelect:()=>(e=>{c(e),v(e)})(e.id),expanded:u.has(e.id),onExpandedChange:()=>v(e.id),current:l===e.id,"aria-selected":l===e.id,children:[(0,a.jsx)("span",{className:tB.serverName,children:e.name}),e.tools&&e.tools.length>0?(0,a.jsx)(tF.G.SubTree,{children:(e=>e.length>0&&"object"==typeof e[0]&&"name"in e[0])(e.tools)?e.tools.map(t=>{let n=`${e.id}-${t.name}`,r=l===n;return(0,a.jsx)(tF.G.Item,{id:n,current:r,"aria-selected":r,onSelect:()=>{!r&&w.W.mcpToolDescriptions?c(n):c(null)},children:w.W.mcpToolDescriptions?(0,a.jsxs)("div",{className:tB.toolItem,children:[(0,a.jsxs)("div",{className:tB.toolNameContainer,children:[r?(0,a.jsx)(I.DashIcon,{size:12}):(0,a.jsx)(I.PlusIcon,{size:12}),(0,a.jsx)("span",{className:tB.toolName,children:t.name})]}),t.description&&r&&(0,a.jsx)("div",{className:tB.toolDescription,children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let n=`${e.id}-${t}`;return(0,a.jsx)(tF.G.Item,{id:n,onSelect:()=>c(n),current:l===n,"aria-selected":l===n,children:t},t)})}):null]},e.id))})}),(0,a.jsx)("div",{className:tB.footer,children:(0,a.jsx)(k.Q,{variant:"default",leadingVisual:I.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,a.jsx)(tL.O,{isOpen:r,onClose:()=>{i(!1)},onServerAdded:()=>{g.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{tq.displayName||(tq.displayName="McpToolsManager")}catch{}let t$=()=>{let e,t=(0,i.c)(2),[n,r]=(0,m.useState)(!1),s=(0,m.useRef)(null);return t[0]!==n?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eb.K,{ref:s,icon:tO,variant:"invisible","aria-label":"MCP tools",onClick:()=>r(!n)}),(0,a.jsx)(tq,{anchorRef:s,open:n,onOpenChange:r})]}),t[0]=n,t[1]=e):e=t[1],e};try{t$.displayName||(t$.displayName="McpToolMenu")}catch{}var tG=n(12970),tW=n(11196);function tV(){let e,t,n,r=(0,i.c)(8),s=(0,F.b)(),{usePlanningIntent:o,selectedThreadID:l}=(0,g.bP)("usePlanningIntent","selectedThreadID");r[0]!==s||r[1]!==o?(e=()=>s.setUsePlanningIntent(!o),r[0]=s,r[1]=o,r[2]=e):e=r[2];let c=e;if(l){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(tW.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,a.jsx)(k.Q,{leadingVisual:I.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),r[3]=e):e=r[3],e}return r[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(I.TasklistIcon,{}),r[4]=t):t=r[4],r[5]!==c||r[6]!==o?(n=(0,a.jsx)(E,{icon:t,isSelected:o,onClick:c,children:"Plan"}),r[5]=c,r[6]=o,r[7]=n):n=r[7],n}try{tV.displayName||(tV.displayName="PlanningIntentToggle")}catch{}var tQ=n(49851),tH=n(66990),tz=n(46642),tK=n(63422);function tX(e){let t,n,r,s,o,c,m,h,p,g,f=(0,i.c)(26),{nwo:_,branch:y,selectedAgent:x,onSelect:S}=e,{data:v,isLoading:E}=function(e){let t,n,r,a=(0,i.c)(9),s=(0,F.b)(),o=!!e;return a[0]!==e?(t=["custom-agents",e],a[0]=e,a[1]=t):t=a[1],a[2]!==s||a[3]!==e?(n=async()=>{if(!e)return[];let[t,n]=e.split("/");if(!t||!n)return[];let r=await s.service.fetchCustomAgents(t,n);return r.ok?r.payload:[]},a[2]=s,a[3]=e,a[4]=n):n=a[4],a[5]!==o||a[6]!==t||a[7]!==n?(r={enabled:o,queryKey:t,queryFn:n},a[5]=o,a[6]=t,a[7]=n,a[8]=r):r=a[8],(0,tt.I)(r)}(_);f[0]!==v||f[1]!==x?(t=v?.find(e=>e.name===x),f[0]=v,f[1]=x,f[2]=t):t=f[2];let C=t,w=C?.display_name||C?.name;if(f[3]!==y||f[4]!==_){let e=new URLSearchParams({filename:".github/agents/my-agent.md",value:`---
name:
description:
---

# My Agent

Describe what your agent does here...`});n=_,r=y,s=e.toString(),f[3]=y,f[4]=_,f[5]=n,f[6]=r,f[7]=s}else n=f[5],r=f[6],s=f[7];let b=`/${n}/new/${r}?${s}`,R=w?`Custom agent: ${w}`:"Select a custom agent",N=!_||!y,j=!!x;return f[8]!==R||f[9]!==N||f[10]!==j?(o=(0,a.jsx)(l.W.Anchor,{children:(0,a.jsx)(tK.L,{icon:I.DependabotIcon,selectedIcon:tQ.aQ,"aria-label":R,selected:j,disabled:N})}),f[8]=R,f[9]=N,f[10]=j,f[11]=o):o=f[11],f[12]!==v||f[13]!==E||f[14]!==S||f[15]!==x?(c=E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.l.Item,{children:[(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(d.A,{size:"small"})}),"Loading"]}),(0,a.jsx)(u.l.Divider,{})]}):v&&v.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(u.l.Item,{selected:null===x,onSelect:()=>S(void 0),children:"None"}),v.map(e=>(0,a.jsx)(u.l.Item,{selected:x===e.name,onSelect:()=>S(e.name),children:e.display_name||e.name},e.name))]}),(0,a.jsx)(u.l.Divider,{})]}),f[12]=v,f[13]=E,f[14]=S,f[15]=x,f[16]=c):c=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(I.PlusIcon,{})}),f[17]=m):m=f[17],f[18]!==b?(h=(0,a.jsx)(u.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(u.l.LinkItem,{href:b,target:"_blank",children:[m,"Create an agent"]})}),f[18]=b,f[19]=h):h=f[19],f[20]!==c||f[21]!==h?(p=(0,a.jsx)(l.W.Overlay,{width:"auto",children:(0,a.jsxs)(u.l,{children:[c,h]})}),f[20]=c,f[21]=h,f[22]=p):p=f[22],f[23]!==p||f[24]!==o?(g=(0,a.jsxs)(l.W,{children:[o,p]}),f[23]=p,f[24]=o,f[25]=g):g=f[25],g}try{tX.displayName||(tX.displayName="CustomAgentSelector")}catch{}let tY={container:"RepoBranchAgentSelector-module__container--gHrlH"},tJ=e=>{let t,n,r,s,o,l,c,d=(0,i.c)(28),{selectedRepo:u,selectedBranch:m,selectedCustomAgent:h,onRepoSelect:p,onBranchSelect:g,onCustomAgentSelect:f,agentSelectionEnabled:_}=e,y=void 0===_||_;d[0]!==g||d[1]!==p||d[2]!==u?(t=e=>{if(!u){let t=e.find(t0);t&&(p(t),g(t.defaultBranch))}},d[0]=g,d[1]=p,d[2]=u,d[3]=t):t=d[3];let x=t;d[4]!==g||d[5]!==p?(n=e=>{e&&(p(e),g(e.defaultBranch))},d[4]=g,d[5]=p,d[6]=n):n=d[6];let S=`Repository: ${u?.nameWithOwner||"Select repository"}`;return d[7]!==S?(r={"aria-label":S},d[7]=S,d[8]=r):r=d[8],d[9]!==x||d[10]!==u||d[11]!==n||d[12]!==r?(s=(0,a.jsx)(tz.P,{repositoryLoader:tZ,selectionVariant:"single",selectAllOption:!1,onSelect:n,currentSelection:u,width:"medium",additionalButtonProps:r,onLoad:x}),d[9]=x,d[10]=u,d[11]=n,d[12]=r,d[13]=s):s=d[13],d[14]!==g||d[15]!==m||d[16]!==u?(o=(0,a.jsx)(a.Fragment,{children:u?(0,a.jsx)(tH.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:m??u.defaultBranch,defaultBranch:u.defaultBranch,owner:u.owner,repo:u.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:g,renderAnchor:e=>(0,a.jsx)(tK.L,{...e,icon:I.GitBranchIcon,selectedIcon:tQ.gh,selected:m!==u.defaultBranch,"aria-label":`Branch: ${m||"Select branch"}`,"aria-labelledby":void 0})}):(0,a.jsx)(eb.K,{icon:I.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),d[14]=g,d[15]=m,d[16]=u,d[17]=o):o=d[17],d[18]!==y||d[19]!==f||d[20]!==m||d[21]!==h||d[22]!==u?.nameWithOwner?(l=y&&(0,a.jsx)(tX,{nwo:u?.nameWithOwner,branch:m,selectedAgent:h,onSelect:f}),d[18]=y,d[19]=f,d[20]=m,d[21]=h,d[22]=u?.nameWithOwner,d[23]=l):l=d[23],d[24]!==s||d[25]!==o||d[26]!==l?(c=(0,a.jsxs)("div",{className:tY.container,children:[s,o,l]}),d[24]=s,d[25]=o,d[26]=l,d[27]=c):c=d[27],c};async function tZ(e="",t){let n=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&n.searchParams.set("q",e.trim()),t&&n.searchParams.set("defaultOwner",t);let r=await (0,O.lS)(n.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,nameWithOwner:e.nameWithOwner,enabled:!0,name:e.nameWithOwner,owner:e.owner,nameOnly:e.name,defaultBranch:e.defaultBranch,visibility:e.visibility}))}return[]}try{tJ.displayName||(tJ.displayName="RepoBranchAgentPicker")}catch{}function t0(e){return e.enabled}let t1=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t2=e=>{let t,n,r,l,c,d,u,h,p,f,_,v,E,C,b,I,T,k,K,X,el,ec,ed,eu,em,eh,ep,eg,ef,e_,ey,ex,eS,ev,eE,eC,ew,eb,eR,eN,ej,eI,eA=(0,i.c)(194),eT=(0,g.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:ek}=eT,eM=(0,eo.tD)(),eO=(0,F.b)();eA[0]!==eO?(t=eO.maxMessagesReached(),eA[0]=eO,eA[1]=t):t=eA[1];let eL=t,[eP,eD]=(0,m.useState)(null),eF="loading"===eT.slashCommandLoading.state,{safeSetTimeout:eU}=(0,A.A)(),{onSelectReference:eB,containerRef:eq}=e,e$=(0,m.useRef)(null),eG=(0,m.useRef)(""),eW=(0,m.useRef)(!1),eQ=(0,D.qw)(),{activeCopilotSpaceId:eH}=(0,y.C)();eA[2]!==e.activeModeName||eA[3]!==e.modes?(n=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],eA[2]=e.activeModeName,eA[3]=e.modes,eA[4]=n):n=eA[4];let ez=n;eA[5]!==eO||eA[6]!==e.initialReference?(r=()=>{e.initialReference&&eO.addReference(e.initialReference,"page-file-reference")},l=[e.initialReference,eO],eA[5]=eO,eA[6]=e.initialReference,eA[7]=r,eA[8]=l):(r=eA[7],l=eA[8]),(0,m.useEffect)(r,l),eA[9]!==eP||eA[10]!==eT.mode?(c=e=>{e$.current=null,eG.current="",eW.current=!1,eP&&(eD(null),void 0!==e&&e&&(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eT.mode}))},eA[9]=eP,eA[10]=eT.mode,eA[11]=c):c=eA[11];let eK=c,eX=eT.isWaitingOnCopilot||eT.isWaitingOnAttachment||eF,eY=e.isNewConversation||!1;eA[12]!==eK||eA[13]!==e.disableSavedUserMessage||eA[14]!==e.isInPortal||eA[15]!==e.onChatCommandChange||eA[16]!==e.onSubmit||eA[17]!==e.textAreaRef||eA[18]!==eX||eA[19]!==eY?(d={isLoading:eX,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eK,isNewConversation:eY,onChatCommandChange:e.onChatCommandChange,disableSavedUserMessage:e.disableSavedUserMessage,isInPortal:e.isInPortal},eA[12]=eK,eA[13]=e.disableSavedUserMessage,eA[14]=e.isInPortal,eA[15]=e.onChatCommandChange,eA[16]=e.onSubmit,eA[17]=e.textAreaRef,eA[18]=eX,eA[19]=eY,eA[20]=d):d=eA[20];let{typingHasStarted:eJ,textAreaRef:eZ,textareaPreviewRef:e0,textAreaPreviewContainerRef:e1,text:e2,setText:e3,handleSubmit:e5,handleSubmitToNewThread:e4,handleScroll:e6,handleChange:e7,handleStop:e8,handleFocus:e9,selectedRepo:te,setSelectedRepo:tt,selectedBranch:tn,setSelectedBranch:tr,selectedCustomAgent:ta,setSelectedCustomAgent:ti}=function(e){let t=(0,g.Pk)(),n=(0,F.b)(),r=(0,Q.Z)(),{selectedThreadID:a,mode:i,autoSubmit:l,model:c}=t,{clearPastedFile:d,isLoading:u,onSubmit:h,onChatCommandChange:p,isNewConversation:f,disableSavedUserMessage:_,isInPortal:y}=e,x=z.Jt.getSavedMessage(a),S=z.Jt.getSavedUserMessageOnError(a),{pathname:v}=(0,o.zy)(),[E,C]=(0,o.ok)(),[b,R]=(0,m.useState)(()=>{let e=et(t.mode,v,E);return _?e??"":e??S??x??""}),[N,j]=(0,m.useState)(null),[I,T]=(0,m.useState)(!1),k=(0,m.useRef)(null),M=e.textAreaRef||k,O=(0,m.useRef)(null),L=(0,m.useRef)(null),P=(0,m.useRef)(0),U=(0,m.useRef)(null),B=(0,m.useRef)(()=>{}),q=(0,m.useRef)(!1),$=(0,J.GF)(t.availableModels),G=(0,m.useRef)(a),{safeSetTimeout:W}=(0,A.A)(),K=(0,m.useRef)(0),X=(0,D.qw)(),[en,er]=(0,ee.T)(),[ea,ei]=(0,m.useState)(()=>{if(en){let e=`${en.ownerLogin}/${en.name}`;return{id:en.id,nameWithOwner:e,enabled:!0,name:e,owner:en.ownerLogin,nameOnly:en.name,defaultBranch:en.defaultBranch||"main",visibility:en.visibility}}}),es=(0,m.useCallback)(e=>{ei(e),(async()=>{if(e){let t=await n.service.fetchRepo(e.id);t.ok&&t.payload&&er(t.payload)}})()},[n.service,er]),[eo,el]=(0,m.useState)(()=>ea?.defaultBranch),[ec,ed]=(0,m.useState)(void 0),eu=(0,m.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,m.useEffect)(()=>{eu()},[eu]),(0,m.useEffect)(()=>{if(!w.W.stableConversationView)return void z.Jt.setSavedMessage(a,b);a===G.current?z.Jt.setSavedMessage(a,b):(R(z.Jt.getSavedMessage(a)||""),G.current=a)},[a,b]),(0,V.N)(()=>{let e=0;!function t(){if(!M.current||!L.current||!O.current)return;if(e++,(y||"assistive"===i)&&0===M.current.scrollHeight&&e<10)return void W(t,1);if(0===b.length&&56===K.current)return;M.current.style.height="0";let n=M.current.scrollHeight,r=Math.min(n,300);O.current.style.height=`${n}px`,M.current.style.height=`${n}px`,L.current.style.height=`${r}px`,K.current=r}()},[i,W,b,M,O,y]);let em=(0,m.useCallback)(()=>{M?.current&&O?.current&&L?.current&&(O.current.scrollTop=M.current.scrollTop,O.current.scrollLeft=M.current.scrollLeft)},[M]),eh=(0,m.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),ep=(0,m.useCallback)(async e=>{if(T(!1),z.Jt.clearSavedUserMessage(a),z.Jt.clearSavedUserMessageOnError(a),t.defaultRecipient&&!b.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),await Y(b,t,n,r,X,"task"===N?{selectedRepo:ea,selectedBranch:eo,selectedCustomAgent:ec}:{})){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:b}),"/new"===b.trim()&&z.Jt.setSavedMessageFast(a,null),R("");return}if(!u){let e=b;if(!e){let[t,r]=n.tryInferMessage(eh);if(!t||!r)return;e=r}try{R("");let t=[];if("task"===N&&ea){let n={type:"task-request",description:e,repoOwner:ea.owner,repoName:ea.nameOnly,ref:eo||ea.defaultBranch,customAgent:ec};t.push(n)}await h?.(e,t.length>0?t:void 0)}catch(t){if(t instanceof Z.q)return void R(e);throw t}}},[a,t,b,n,r,X,N,ea,eo,ec,u,eh,h]),eg=(0,m.useCallback)(()=>n.sendMessageToNewThread(a,b,eh,t.context,$),[n,a,t.context,eh,b,$]);(0,m.useEffect)(()=>{(async()=>{let e=et(i,v,E),t=new URLSearchParams(E),n=t.get("model"),r=!n||n===c.id;e&&r&&!q.current&&(t.delete("prompt"),t.delete("model"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),C(t,{replace:!0}),l&&(q.current=!0,await Promise.resolve(),await ep()))})()},[v,E,C,i,l,c,ep]);let ef=(0,m.useCallback)(e=>{T(!0),M?.current&&(R(e.target.value),d?.(),P.current=0,em())},[em,d,M]),e_=(0,m.useCallback)(async()=>{await n.stopStreaming(),null!=a&&(n.startThreadReload(),await new Promise(e=>{U.current=setTimeout(()=>e(a),6e3)}),B.current=await n.fetchMessages(a,!0,!0))},[n,a]);return(0,m.useEffect)(()=>{B.current&&(B.current(),B.current=()=>{})},[t.messages]),(0,m.useEffect)(()=>()=>{U.current&&(clearTimeout(U.current),U.current=null),n.cancelThreadReload(),B.current=()=>{}},[n]),(0,m.useEffect)(()=>{if(!f&&!w.W.taskWithinChatThread)return;let e=(0,H.V)(b,X);N!==e&&(j(e),p?.(e))},[f,b,N,p,X]),{typingHasStarted:I,textAreaRef:M,textareaPreviewRef:O,textAreaPreviewContainerRef:L,text:b,setText:R,command:N,setCommand:j,handleSubmit:ep,handleSubmitToNewThread:eg,handleScroll:em,handleChange:ef,handleStop:e_,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},selectedRepo:ea,setSelectedRepo:es,selectedBranch:eo,setSelectedBranch:el,selectedCustomAgent:ec,setSelectedCustomAgent:ed}}(d);eA[21]!==e3?(u=()=>({setText:e3}),h=[e3],eA[21]=e3,eA[22]=u,eA[23]=h):(u=eA[22],h=eA[23]),(0,m.useImperativeHandle)(e.chatInputRef,u,h),eA[24]!==e7||eA[25]!==eZ?(p={inputRef:eZ,fallbackEventHandler:e7},eA[24]=e7,eA[25]=eZ,eA[26]=p):p=eA[26];let ts=(0,j.H)(p);eA[27]!==ts||eA[28]!==e.figmaAuthUrl||eA[29]!==eZ?(f={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eZ,emitChange:ts},eA[27]=ts,eA[28]=e.figmaAuthUrl,eA[29]=eZ,eA[30]=f):f=eA[30];let{replaceUrlWithReferenceMention:to}=function(e){let t,n,r,a,s,o,l,c,d,u,m,h,p=(0,i.c)(35),{figmaAuthUrl:f,textAreaRef:_,emitChange:y}=e,S=(0,F.b)(),{currentReferences:v}=(0,g.Pk)();p[0]!==y||p[1]!==_?(t=(e,t,n)=>{if(!_.current||e===t)return;let r=n?.[0]??0,a=_.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;y(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},p[0]=y,p[1]=_,p[2]=t):t=p[2];let E=t;p[3]!==S?(n=e=>{let{itemUrl:t}=e,n=(0,x.Vc)(t);return S.addReference(n,"url-attacher"),S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),n},p[3]=S,p[4]=n):n=p[4],p[5]!==E||p[6]!==S?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;S.replaceReference(n,e);let a=U.Q.for(e);if(!a)return;let i=U.Q.stringify(r),s=U.Q.stringify(a);i!==s&&E(i,s)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;S.removeReference(n),E(U.Q.stringify(a),r)},p[5]=E,p[6]=S,p[7]=r,p[8]=a):(r=p[7],a=p[8]),p[9]!==S?(s=()=>{S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},p[9]=S,p[10]=s):s=p[10],p[11]!==n||p[12]!==r||p[13]!==a||p[14]!==s?(o={mutationFn:W,onMutate:n,onSuccess:r,onError:a,onSettled:s},p[11]=n,p[12]=r,p[13]=a,p[14]=s,p[15]=o):o=p[15];let C=(0,M.n)(o);p[16]!==S?(l=e=>{let t=(0,x.Vc)(e);return S.addReference(t,"figma-attacher"),S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},c=(e,t,n)=>{S.replaceReference(n,e)},p[16]=S,p[17]=l,p[18]=c):(l=p[17],c=p[18]),p[19]!==f||p[20]!==S?(d=(e,t,n)=>{n&&f&&e instanceof $?S.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:f,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):S.removeReference(n)},p[19]=f,p[20]=S,p[21]=d):d=p[21],p[22]!==S?(u=()=>{S.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},p[22]=S,p[23]=u):u=p[23],p[24]!==u||p[25]!==l||p[26]!==c||p[27]!==d?(m={mutationFn:G,onMutate:l,onSuccess:c,onError:d,onSettled:u},p[24]=u,p[25]=l,p[26]=c,p[27]=d,p[28]=m):m=p[28];let w=(0,M.n)(m);return p[29]!==v||p[30]!==w||p[31]!==E||p[32]!==C||p[33]!==_?(h={replaceUrlWithReferenceMention:e=>{let t=_.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=U.Q.fromUrl(t);n&&(v.every(e=>!U.Q.refersTo(n,e))&&C.mutate({itemUrl:t,parsedReferenceMention:n}),E(t,U.Q.stringify(n),e));let r=q.exec(t);return r&&(w.mutate(t),E(t,r[1],e)),t}},p[29]=v,p[30]=w,p[31]=E,p[32]=C,p[33]=_,p[34]=h):h=p[34],h}(f),{isLoading:tl,addReferenceForMention:tc,addReferencesForMentions:td}=function(){let e=(0,F.b)(),{currentReferences:t,mode:n}=(0,g.Pk)(),r=(0,D.qw)(),a=(0,M.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],r=await (0,O.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,s.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),i=e=>{t.every(t=>!U.Q.refersTo(e,t))&&a.mutate(e)};return{isLoading:a.isPending,addReferenceForMention:i,addReferencesForMentions:e=>{let n=(0,L.l)().use(B.U,{references:t,agents:[],plugins:r}).parse(e),a=0;(0,P.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&a<20&&(a++,i(e.data.referenceMention))})}}}(),tu=(0,es.FQ)(),tm=eH&&tu,tp=!!(eH&&tu);eA[31]!==eQ||eA[32]!==e2?(_=(0,H.V)(e2,eQ),eA[31]=eQ,eA[32]=e2,eA[33]=_):_=eA[33];let tf=_,t_=eF||tl||eT.isWaitingOnAttachment||!!e.submitDisabled||"task"===tf&&!te&&!tn,tx=0===e2.length;eA[34]!==e8||eA[35]!==eT.mode?(v=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eT.mode}),e8()},eA[34]=e8,eA[35]=eT.mode,eA[36]=v):v=eA[36];let tS=v;eA[37]!==eH||eA[38]!==eK||eA[39]!==e5||eA[40]!==tu||eA[41]!==eO||eA[42]!==eP||eA[43]!==tp||eA[44]!==eT.mode||eA[45]!==eT.selectedThreadID||eA[46]!==t_?(E=async()=>{if(t_)return;let e=eH?`${eH.owner}/${eH.id}`:"";(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eT.mode,selectedThreadId:eT.selectedThreadID,copilotSpace:e,fromSpaceUI:tu}),tp&&await eO.selectPendingThread(eH),eP&&eK(!1),e5()},eA[37]=eH,eA[38]=eK,eA[39]=e5,eA[40]=tu,eA[41]=eO,eA[42]=eP,eA[43]=tp,eA[44]=eT.mode,eA[45]=eT.selectedThreadID,eA[46]=t_,eA[47]=E):E=eA[47];let tv=E;eA[48]!==eH||eA[49]!==e4||eA[50]!==eO||eA[51]!==tp||eA[52]!==t_?(C=async()=>{t_||(tp&&await eO.selectPendingThread(eH),e4())},eA[48]=eH,eA[49]=e4,eA[50]=eO,eA[51]=tp,eA[52]=t_,eA[53]=C):C=eA[53];let tE=C;eA[54]!==eO||eA[55]!==eT.messages?(b=()=>{let e=eT.messages.findLast(t6)?.id;e&&eO.startEditingMessage(e)},eA[54]=eO,eA[55]=eT.messages,eA[56]=b):b=eA[56];let tC=b;e:{if(eT.isWaitingOnCopilot){I="Copilot is responding\u2026";break e}if(eT.defaultRecipient){I=void 0;break e}if(eL){I="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}I=ez.placeholder??"Ask anything"}let tw=I;eT.defaultRecipient&&""===e2&&!eJ&&e3(`@${eT.defaultRecipient} `);let tb=(0,m.useRef)(null),[tR,tN]=(0,m.useState)(null),[tI,tA]=(0,m.useState)(null);eA[57]!==eT.mode?(T=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eT.mode}),tN(t7)},eA[57]=eT.mode,eA[58]=T):T=eA[58];let tT=T;eA[59]!==eO||eA[60]!==eT.mode||eA[61]!==eT.skillOptions?.deepCodeSearch?(k=()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eT.mode}),eO.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eT.skillOptions?.deepCodeSearch})},eA[59]=eO,eA[60]=eT.mode,eA[61]=eT.skillOptions?.deepCodeSearch,eA[62]=k):k=eA[62],eT.skillOptions?.deepCodeSearch;let tk=k,tO="immersive"===eT.mode&&!!ek.capabilities?.supports?.vision;eA[63]!==eH||eA[64]!==eM||eA[65]!==eO||eA[66]!==ek||eA[67]!==tp||eA[68]!==e.existingFileNames||eA[69]!==tO?(K=async(t,n,r,a)=>{let i=new er.s(eM(),eO),s=new ei.E(eO,e.existingFileNames),o=[];[...t].some(t8)&&!ek.capabilities?.supports?.vision&&(eO.addAmbientError(`The ${ek.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,ea.d)("vision_not_supported_for_model",{modelId:ek.id,uploadType:n}));let[l,c]=er.s.getAllowedFiles([...t],ek);if(tO){let e=await i.addImageAttachments(l,n,eH,tp);e&&o.push(...e)}let d=[];for(let e of c)if(await ei.E.isAttachable(e)){let t=await s.addAttachment(e,r,a);t&&o.push(t)}else d.push(e.type);return tO&&d.length>0&&(0,ea.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),o},eA[63]=eH,eA[64]=eM,eA[65]=eO,eA[66]=ek,eA[67]=tp,eA[68]=e.existingFileNames,eA[69]=tO,eA[70]=K):K=eA[70];let tL=K;eA[71]!==eK||eA[72]!==tL||eA[73]!==eP||eA[74]!==e3||eA[75]!==eT.mode||eA[76]!==e2?(X=async()=>{if(!eP)return;let e=[eP],t=await tL(e,"paste",e$.current||void 0,eG.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eP.text();e3(e2.replaceAll(e,`@${t[0].name}`)),eK(!1),(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eT.mode})}},eA[71]=eK,eA[72]=tL,eA[73]=eP,eA[74]=e3,eA[75]=eT.mode,eA[76]=e2,eA[77]=X):X=eA[77];let tP=X;eA[78]!==eK?(el=()=>{eK(!0)},eA[78]=eK,eA[79]=el):el=eA[79];let tD=el;eA[80]!==eP||eA[81]!==eT.isWaitingOnAttachment||eA[82]!==eT.mode?(ec=()=>{!eP||eT.isWaitingOnAttachment||eW.current||(eW.current=!0,(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eT.mode}))},ed=[eP,eT.isWaitingOnAttachment,eT.mode],eA[80]=eP,eA[81]=eT.isWaitingOnAttachment,eA[82]=eT.mode,eA[83]=ec,eA[84]=ed):(ec=eA[83],ed=eA[84]),(0,m.useEffect)(ec,ed);let tF=(ez.supportsReferenceAttachments??!0)&&"task"!==tf;eA[85]!==td||eA[86]!==tL||eA[87]!==eO||eA[88]!==e.existingFileNames||eA[89]!==to||eA[90]!==eU||eA[91]!==tF||eA[92]!==eZ?(eu=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=ei.E.getAttachmentSizeLimit())eU(()=>{eW.current=!1;let n=new File([t],"",{type:ei.x}),r=new ei.E(eO,e.existingFileNames);eD(n),e$.current=r.generateFileName(t,n.type).then(e=>eG.current=e)},1);else if(tF){td(t);let e=eZ.current?.selectionStart??0;setTimeout(()=>to([e,e+t.length]))}return}}}r.length>0&&(t.preventDefault(),tL(r,"paste"))}},eA[85]=td,eA[86]=tL,eA[87]=eO,eA[88]=e.existingFileNames,eA[89]=to,eA[90]=eU,eA[91]=tF,eA[92]=eZ,eA[93]=eu):eu=eA[93];let tU=eu;eA[94]!==tL?(em=e=>{tL(e,"drag")},eA[94]=tL,eA[95]=em):em=eA[95];let tB=em,tq=e.isStreaming||eT.isWaitingOnCopilot,t$=!!ez.supportsAttachments&&"task"!==tf,tG=tq?tS:void 0,tW=tx?tC:void 0;eA[96]!==tT||eA[97]!==tv||eA[98]!==tE||eA[99]!==tk||eA[100]!==tG||eA[101]!==tW?(eh={"github:cancel":tG,"copilot-chat:send-message":tv,"copilot-chat:send-message-new-conversation":tE,"copilot-chat:add-attachment":tT,"copilot-chat:edit-last-message":tW,"copilot-chat:deep-codesearch":tk},eA[96]=tT,eA[97]=tv,eA[98]=tE,eA[99]=tk,eA[100]=tG,eA[101]=tW,eA[102]=eh):eh=eA[102];let tV=eh,tQ="small"===e.size;eA[103]!==e.className||eA[104]!==e.disabled||eA[105]!==tQ?(ep=(0,S.$)(tg.container,{[tg.containerSmall]:tQ,[tg.containerDisabled]:e.disabled},e.className),eA[103]=e.className,eA[104]=e.disabled,eA[105]=tQ,eA[106]=ep):ep=eA[106],eA[107]===Symbol.for("react.memo_cache_sentinel")?(eg=(0,R.G)("copilot-chat-input-form"),eA[107]=eg):eg=eA[107],eA[108]!==tP||eA[109]!==tD||eA[110]!==tl||eA[111]!==eB||eA[112]!==eP||eA[113]!==e.getReferenceVersion||eA[114]!==e.initialReference||eA[115]!==e.onRemoveReference||eA[116]!==e.size||eA[117]!==eT.isWaitingOnAttachment||eA[118]!==tF?(ef=tF&&(0,a.jsx)(tj,{className:tg.attachments,returnFocusRef:tb,tokenSize:"small"===e.size?"small":"medium",isLoading:tl,onSelectReference:eB,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!eP&&!eT.isWaitingOnAttachment,onConvertToFile:tP,onConvertToFileDismiss:tD,hideAttachmentsMenu:!!e.initialReference}),eA[108]=tP,eA[109]=tD,eA[110]=tl,eA[111]=eB,eA[112]=eP,eA[113]=e.getReferenceVersion,eA[114]=e.initialReference,eA[115]=e.onRemoveReference,eA[116]=e.size,eA[117]=eT.isWaitingOnAttachment,eA[118]=tF,eA[119]=ef):ef=eA[119],eA[120]!==e.isNewConversation?(e_=(0,S.$)(tg.inputContainer,{[tg.inputContainerNewConversation]:e.isNewConversation}),eA[120]=e.isNewConversation,eA[121]=e_):e_=eA[121];let tH=!ez.supportsAutocompletion,tz=!e.disableAutoFocus,tK=ez.textAreaAriaLabel||tw,tX=eL||e.disabled;eA[122]===Symbol.for("react.memo_cache_sentinel")?(ey=(0,R.G)("copilot-chat-input-textarea"),eA[122]=ey):ey=eA[122],eA[123]!==e7||eA[124]!==e9||eA[125]!==tU||eA[126]!==e6||eA[127]!==tw||eA[128]!==tz||eA[129]!==tK||eA[130]!==tX||eA[131]!==e2||eA[132]!==eZ?(ex=(0,a.jsx)("textarea",{autoFocus:tz,id:en.wg,className:tg.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":tK,"aria-multiline":"true",onPaste:tU,ref:eZ,onScroll:e6,onChange:e7,onFocus:e9,placeholder:tw,value:e2,"data-react-autofocus":!0,disabled:tX,...ey}),eA[123]=e7,eA[124]=e9,eA[125]=tU,eA[126]=e6,eA[127]=tw,eA[128]=tz,eA[129]=tK,eA[130]=tX,eA[131]=e2,eA[132]=eZ,eA[133]=ex):ex=eA[133],eA[134]!==tc||eA[135]!==tH||eA[136]!==ex?(eS=(0,a.jsx)(th,{onSelectReference:tc,onShowAgentsDialog:tN,hideAutocomplete:tH,children:ex}),eA[134]=tc,eA[135]=tH,eA[136]=ex,eA[137]=eS):eS=eA[137],eA[138]!==e2||eA[139]!==e0?(ev=(0,a.jsx)(ty,{text:e2,ref:e0}),eA[138]=e2,eA[139]=e0,eA[140]=ev):ev=eA[140],eA[141]!==e_||eA[142]!==eS||eA[143]!==ev||eA[144]!==e1?(eE=(0,a.jsxs)(N.tL.LimitKeybindingScope,{commandIds:t1,className:e_,ref:e1,children:[eS,ev]}),eA[141]=e_,eA[142]=eS,eA[143]=ev,eA[144]=e1,eA[145]=eE):eE=eA[145];let tY=eT.skillOptions?.deepCodeSearch,tZ=t_&&!e.disabled;return eA[146]!==tf||eA[147]!==e.extraToolbar||eA[148]!==tn||eA[149]!==ta||eA[150]!==te||eA[151]!==tr||eA[152]!==ti||eA[153]!==tt?(eC="task"===tf?(0,a.jsx)(tJ,{selectedRepo:te,selectedBranch:tn,selectedCustomAgent:ta,onRepoSelect:tt,onBranchSelect:tr,onCustomAgentSelect:ti,agentSelectionEnabled:w.W.sweAgentUseSubagents}):e.extraToolbar,eA[146]=tf,eA[147]=e.extraToolbar,eA[148]=tn,eA[149]=ta,eA[150]=te,eA[151]=tr,eA[152]=ti,eA[153]=tt,eA[154]=eC):eC=eA[154],eA[155]!==tT||eA[156]!==tf||eA[157]!==ez||eA[158]!==e.disabled||eA[159]!==e.modes||eA[160]!==e.onNewThreadSelected||eA[161]!==e.showPlanningToggle||eA[162]!==eT.thirdPartyMcpAllowed||eA[163]!==tq||eA[164]!==t_||eA[165]!==t$||eA[166]!==tY||eA[167]!==tZ||eA[168]!==eC?(ew=(0,a.jsx)(t3,{addAttachment:tT,currentMode:ez,attachmentButtonRef:tb,deepCodeSearch:tY,modes:e.modes,stoppable:tq,submitDisabled:t_,submitInactive:tZ,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eT.thirdPartyMcpAllowed,supportsAttachments:t$,disabled:e.disabled,extraToolbar:eC,showPlanningToggle:e.showPlanningToggle,chatCommand:tf}),eA[155]=tT,eA[156]=tf,eA[157]=ez,eA[158]=e.disabled,eA[159]=e.modes,eA[160]=e.onNewThreadSelected,eA[161]=e.showPlanningToggle,eA[162]=eT.thirdPartyMcpAllowed,eA[163]=tq,eA[164]=t_,eA[165]=t$,eA[166]=tY,eA[167]=tZ,eA[168]=eC,eA[169]=ew):ew=eA[169],eA[170]!==eq||eA[171]!==ep||eA[172]!==ef||eA[173]!==eE||eA[174]!==ew?(eb=(0,a.jsxs)("form",{className:ep,ref:eq,...eg,children:[ef,eE,ew]}),eA[170]=eq,eA[171]=ep,eA[172]=ef,eA[173]=eE,eA[174]=ew,eA[175]=eb):eb=eA[175],eA[176]!==tV||eA[177]!==eb?(eR=(0,a.jsx)(N.tL,{commands:tV,children:eb}),eA[176]=tV,eA[177]=eb,eA[178]=eR):eR=eA[178],eA[179]!==tR||eA[180]!==e7||eA[181]!==tI||eA[182]!==eZ?(eN=(0,a.jsx)(eV,{inputRef:eZ,inputOnChange:e7,anchorRef:tb,panel:tR,onPanelChange:tN,initialRepo:tI,onRepoSelect:tA}),eA[179]=tR,eA[180]=e7,eA[181]=tI,eA[182]=eZ,eA[183]=eN):eN=eA[183],eA[184]!==tB||eA[185]!==tm||eA[186]!==eT.attachmentProcessingType||eA[187]!==eT.isWaitingOnAttachment||eA[188]!==t$?(ej=t$&&!tm&&(0,a.jsx)(tM.A,{onFilesDrop:tB,isUploading:eT.isWaitingOnAttachment&&"file-upload"===eT.attachmentProcessingType}),eA[184]=tB,eA[185]=tm,eA[186]=eT.attachmentProcessingType,eA[187]=eT.isWaitingOnAttachment,eA[188]=t$,eA[189]=ej):ej=eA[189],eA[190]!==eR||eA[191]!==eN||eA[192]!==ej?(eI=(0,a.jsxs)(a.Fragment,{children:[eR,eN,ej]}),eA[190]=eR,eA[191]=eN,eA[192]=ej,eA[193]=eI):eI=eA[193],eI},t3=(0,m.memo)(e=>{let{chatCommand:t,extraToolbar:n,currentMode:r,supportsAttachments:i,submitInactive:s,submitDisabled:o}=e,c="task"!==t&&"loop"!==t&&"spark"!==t,d=!!(e.onNewThreadSelected&&r.supportsModelSwitching&&c);return(0,a.jsxs)("div",{className:(0,S.$)(tg.toolbar,{[tg.toolbarNoModes]:1===e.modes.length}),children:[e.modes.length>1&&(0,a.jsxs)("div",{className:tg.mode,children:[(0,a.jsx)("div",{className:tg.modeSelectorMobile,children:(0,a.jsxs)(l.W,{children:[(0,a.jsx)(l.W.Button,{className:tg.modeSelectButton,leadingVisual:r.icon,variant:"invisible",trailingAction:I.TriangleDownIcon,children:r.name}),(0,a.jsx)(l.W.Overlay,{width:"auto",children:(0,a.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,a.jsxs)(u.l.Item,{selected:r.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,a.jsx)(u.l.LeadingVisual,{children:t.icon}),t.name]},t.name))})})]})}),(0,a.jsx)("div",{className:tg.modeSelectorDesktop,children:(0,a.jsx)(T.I,{className:tg.lighterSegmentedControl,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(e=>(0,a.jsx)(T.I.Button,{className:tg.modeButton,selected:e.name===r.name,children:e.name},e.name))})})]}),(0,a.jsxs)("div",{className:tg.extra,children:[i&&(0,a.jsx)(k.Q,{ref:e.attachmentButtonRef,leadingVisual:I.PlusIcon,variant:"invisible","aria-label":"Add repositories, files, and spaces",className:tg.attachmentButton,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,a.jsx)("span",{className:(0,S.$)(tg.attachmentButtonText,{"sr-only":"task"===t}),children:"Add repositories, files, and spaces"})}),w.W.showDeepCodeSearchButton&&(0,a.jsx)(N.N5,{commandId:"copilot-chat:deep-codesearch",icon:I.RocketIcon,variant:"invisible",tooltipDirection:"s",className:(0,S.$)({[tg.clicked]:e.deepCodeSearch})}),n,!w.W.spacesAsAttachmentsEnabled&&r.supportsSpaces&&(0,a.jsx)(b,{}),w.W.planningAgent&&!w.W.chatInputCommands&&e.showPlanningToggle&&(0,a.jsx)(tV,{})]}),(0,a.jsxs)("div",{className:(0,S.$)(tg.actions,{[tg.actionsMultiple]:d}),children:[d&&(0,a.jsx)(tG.Yb,{onNewThreadSelected:e.onNewThreadSelected,disabled:e.disabled}),(0,a.jsxs)("div",{className:tg.toolbarButtons,children:[w.W.copilotThirdPartyMcp&&r.supportsMCP&&e.thirdPartyMcpAllowed&&c&&(0,a.jsx)(t$,{}),e.stoppable?(0,a.jsx)(t4,{}):(0,a.jsx)(t5,{disabledType:s?"inactive":o?"disabled":void 0,label:r.submitLabel})]})]})]})});function t5(e){let t,n=(0,i.c)(4),{disabledType:r,label:s}=e,o=s||"Send now",l="disabled"===r,c="inactive"===r;return n[0]!==o||n[1]!==l||n[2]!==c?(t=(0,a.jsx)(N.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:I.PaperAirplaneIcon,"aria-label":o,disabled:l,inactive:c,tooltipDirection:"s"}),n[0]=o,n[1]=l,n[2]=c,n[3]=t):t=n[3],t}function t4(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(N.N5,{...(0,R.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:I.SquareFillIcon,tooltipDirection:"s",className:tg.CommandIconButton}),t[0]=e):e=t[0],e}t3.displayName="ChatInputToolbar";try{t2.displayName||(t2.displayName="ChatInput")}catch{}try{t5.displayName||(t5.displayName="SubmitButton")}catch{}try{t4.displayName||(t4.displayName="StopButton")}catch{}function t6(e){return"user"===e.role}function t7(e){return"attachment-types"===e?null:"attachment-types"}function t8(e){return e.type.startsWith("image/")}},71363:(e,t,n)=>{n.d(t,{FZ:()=>w,X1:()=>N});var r,a=n(74848),i=n(21728),s=n(69599),o=n(53419),l=n(33544),c=n(29731),d=n(5524),u=n(18096),m=n(34164),h=n(96540),p=n(40961),g=n(26408),f=n(25641),_=n(79064),y=n(2635),x=n(33592);let S=e=>{let t,n,r,s=(0,i.c)(6),{children:o,delay:l,assertive:c}=e,d=void 0===l?500:l,[u,m]=(0,h.useState)(!1);if(s[0]!==d?(t=()=>{m(!1);let e=setTimeout(()=>m(!0),d);return()=>clearTimeout(e)},n=[d,m],s[0]=d,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,h.useEffect)(t,n),!u)return null;let p=void 0!==c&&c?"assertive":"polite";return s[3]!==o||s[4]!==p?(r=(0,a.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:o}),s[3]=o,s[4]=p,s[5]=r):r=s[5],r};try{S.displayName||(S.displayName="DelayedComponent")}catch{}var v=n(35673);let E={ActionList:"RepoSelectPanel-module__ActionList--ud9yE",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--qQwDm",CopilotRepoSelectPanelAnchored:"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm"};var C=n(27844);function w(e){let t,n,r,s,o=(0,i.c)(12),{currentReferences:l}=(0,y.Pk)(),c=(0,x.b)();o[0]!==l?(n=new Set((t=l.filter(R)).map(b)),o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let d=n,[u,m]=(0,h.useState)();o[3]!==c||o[4]!==e||o[5]!==t?(r=async n=>{m(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,f.qS)(a.payload);c.addReference(i,"repoMenu")},o[3]=c,o[4]=e,o[5]=t,o[6]=r):r=o[6];let p=r;return o[7]!==u||o[8]!==e||o[9]!==d||o[10]!==p?(s=(0,a.jsx)(N,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),o[7]=u,o[8]=e,o[9]=d,o[10]=p,o[11]=s):s=o[11],s}function b(e){return e.id}function R(e){return"repository"===e.type}function N(e){let t,n,r,f,_,x,w,b,R,N,A,T,k,M,O,L,P,D,F,U=(0,i.c)(52),{open:B,onOpenChange:q,submitReturnFocusRef:$,cancelReturnFocusRef:G,selectedRepoIds:W,featuredRepoIds:V,onSelectRepo:Q,selectionVariant:H,description:z,error:K,ownerDisplayLogin:X,includeForks:Y,anchorRef:J}=e,Z=void 0===V?W:V,{ssoOrganizations:ee}=(0,y.Pk)(),[et,en]=(0,h.useState)("");U[0]!==B?(t=()=>{B||en("")},n=[B],U[0]=B,U[1]=t,U[2]=n):(t=U[1],n=U[2]),(0,h.useEffect)(t,n);let{repositories:er,loading:ea}=(0,g.U)(et,B,void 0,X,void 0!==Y&&Y);e:{if(ea){r="Loading repositories";break e}if(0===er.length){r="No repositories found";break e}if(1===er.length){r="1 repository found";break e}r=`${er.length} repositories found`}let ei=r;U[3]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{en(e.currentTarget.value)},U[3]=f):f=U[3];let es=f;t:{let e;if(!ee){let e;U[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[4]=e):e=U[4],_=e;break t}U[5]!==ee?(e=ee.map(I),U[5]=ee,U[6]=e):e=U[6],_=e}let eo=_;U[7]!==Z?(x=e=>Z.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",U[7]=Z,U[8]=x):x=U[8];let{featuredRepos:el,nonFeaturedRepos:ec}=function(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}(er,x),[ed,eu]=(0,h.useState)(!1);U[9]!==Q?(w=async e=>{eu(!0),await Q(e),eu(!1)},U[9]=Q,U[10]=w):w=U[10];let em=w;U[11]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.G)("repo-select-panel"),U[11]=b):b=U[11];let eh=u.X,ep=J&&E.CopilotRepoSelectPanelAnchored;U[12]!==ep?(R=(0,m.$)(ep),U[12]=ep,U[13]=R):R=U[13],U[14]!==G||U[15]!==q?(N=()=>{(0,p.flushSync)(()=>q(!1)),G.current?.focus(),(0,o.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},U[14]=G,U[15]=q,U[16]=N):N=U[16],U[17]!==q||U[18]!==$?(A=()=>{(0,p.flushSync)(()=>q(!1)),$.current?.focus()},U[17]=q,U[18]=$,U[19]=A):A=U[19];let eg=J?"anchored":"modal",ef="multiple"===H?"Select repositories":"Select a repository",e_=eo.length>0&&"border-bottom-0";U[20]!==e_?(T=(0,m.$)(e_),U[20]=e_,U[21]=T):T=U[21];let ey=!0===ea||ed;U[22]!==ey?(k=(0,a.jsx)(u.X.SearchInput,{loading:ey,onChange:es,placeholder:"Search repositories","aria-label":"Search repositories"}),U[22]=ey,U[23]=k):k=U[23],U[24]!==T||U[25]!==k?(M=(0,a.jsx)(u.X.Header,{className:T,children:k}),U[24]=T,U[25]=k,U[26]=M):M=U[26],U[27]!==X||U[28]!==eo?(O=(void 0===X||""===X)&&!(0,s.G7)("global_sso_banner")&&(0,a.jsx)(l.x,{portalContainerName:v.f1,protectedOrgs:eo,redirectURI:j,useFullWidthStyle:!0}),U[27]=X,U[28]=eo,U[29]=O):O=U[29],U[30]===Symbol.for("react.memo_cache_sentinel")?(L=(0,a.jsx)(v.hl,{}),U[30]=L):L=U[30],U[31]!==K?(P=K&&(0,a.jsx)(u.X.Message,{variant:"error",size:"inline",children:K}),U[31]=K,U[32]=P):P=U[32];let ex="initial"===ea?(0,a.jsxs)("div",{className:E.ActionList,children:[(0,a.jsx)("div",{className:"sr-only",children:ei}),(0,a.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==er.length||ea?(0,a.jsxs)(d.l,{className:E.ActionList,children:[(0,a.jsx)("div",{className:"sr-only",children:ei}),el?.map(e=>(0,a.jsx)(C.W,{repo:e,onSelect:em,selected:W.has(e.databaseId)},e.databaseId)),el&&ec&&(0,a.jsx)(d.l.Divider,{}),ec?.map(e=>(0,a.jsx)(C.W,{repo:e,onSelect:em,selected:W.has(e.databaseId)},e.databaseId))]}):(0,a.jsxs)("div",{className:E.ActionList,children:[(0,a.jsx)("div",{className:"sr-only",children:ei}),(0,a.jsx)("div",{className:E.emptyStateMessage,children:(0,a.jsx)(S,{delay:750,children:(0,a.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return U[33]!==eh||U[34]!==J||U[35]!==z||U[36]!==B||U[37]!==H||U[38]!==R||U[39]!==N||U[40]!==A||U[41]!==eg||U[42]!==ef||U[43]!==M||U[44]!==O||U[45]!==L||U[46]!==P||U[47]!==ex?(D=(0,a.jsxs)(eh,{className:R,width:"large",maxHeight:"xlarge",onCancel:N,onSubmit:A,open:B,variant:eg,selectionVariant:H,title:ef,description:z,anchorRef:J,children:[M,O,L,P,ex]}),U[33]=eh,U[34]=J,U[35]=z,U[36]=B,U[37]=H,U[38]=R,U[39]=N,U[40]=A,U[41]=eg,U[42]=ef,U[43]=M,U[44]=O,U[45]=L,U[46]=P,U[47]=ex,U[48]=D):D=U[48],U[49]!==b||U[50]!==D?(F=(0,a.jsx)("div",{...b,children:D}),U[49]=b,U[50]=D,U[51]=F):F=U[51],F}function j(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function I(e){return e.login}try{(r=function(e){let t,n,r,s=(0,i.c)(9),{selectedThreadID:o,currentTopic:l}=(0,y.Pk)(),c=(0,x.b)();s[0]!==c||s[1]!==o?(t=async e=>{_.Jt.setSelectedTopic(o??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},s[0]=c,s[1]=o,s[2]=t):t=s[2];let d=t;return s[3]!==l?(n=new Set(l?[l.id]:[]),s[3]=l,s[4]=n):n=s[4],s[5]!==d||s[6]!==e||s[7]!==n?(r=(0,a.jsx)(N,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),s[5]=d,s[6]=e,s[7]=n,s[8]=r):r=s[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{w.displayName||(w.displayName="RepoReferencesSelectPanel")}catch{}try{N.displayName||(N.displayName="RepoSelectPanel")}catch{}},72011:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>o,dp:()=>l,ee:()=>u});var r=n(25641),a=n(23657),i=n(96379);let s="/github-copilot/chat",o=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${s}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${s}/custom_copilots/${t}/${n}`,o=await (0,i.lS)(a);if(!o.ok)return{status:o.status,ok:!1,error:r.nN[o.status]||r.DW};let l=await o.json();return{status:o.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},72439:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>o});var r=n(50467),a=n(53419),i=n(25641),s=n(23967);let o="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(s.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:t>127&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,a.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let a=await e.text();if(!CopilotTextAttacher.isPlainText(a))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(a,n),this.manager.addReference(r,"text-attacher");else{let n=(0,i.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?l.exec(r.payload)?.[1]:null;return i?(0,a.BI)("copilot.generate_pasted_file_name.success"):(0,a.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===o?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,r._)(this,"manager",void 0),(0,r._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,r._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},72931:(e,t,n)=>{function r(){return{favicon:document.querySelector('.js-site-favicon[type="image/svg+xml"]'),faviconFallback:document.querySelector('.js-site-favicon[type="image/png"]')}}function a(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=l();e=e.substr(0,e.lastIndexOf(".")),t.href=e=`${e}${a}.svg`;let i=t.href.substr(0,t.href.lastIndexOf("."));n.href=`${i}.png`}function i(){let{favicon:e,faviconFallback:t}=r();if(!e||!t)return;let n=l(),a=e.href.indexOf("-dark.svg"),i=e.href.substr(0,-1!==a?a:e.href.lastIndexOf("."));e.href=`${i}${n}.svg`,t.href=`${i}${n}.png`}function s(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=t.getAttribute("data-base-href"),i="default"===e?"":`-${e}`,s=l();a&&(t.href=`${a}${i}${s}.svg`,n.href=`${a}${i}${s}.png`)}function o(){s("default")}function l(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"-dark":""}n.d(t,{Ow:()=>a,gd:()=>o,iD:()=>s,uQ:()=>i})},76166:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(53419);function a(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},76186:(e,t,n)=>{n.d(t,{Q:()=>T});var r=n(74848),a=n(70257),i=n(33592),s=n(96540),o=n(66565),l=n(26108),c=n(38621),d=n(49851),u=n(46642),m=n(66990),h=n(69599),p=n(88934),g=n(21728),f=n(97949);let _={requestBanner:"MemberRequestBanner-module__requestBanner--O88Xw"},y=s.memo(x);function x(e){let t,n,a,i,s,o=(0,g.c)(6),{repo:l}=e;if(l.userCanRequestCca)t="Copilot coding agent access is disabled by your enterprise.",n="Request Access",a=C;else if(l.userCanGrantEnterpriseCca)t="Copilot coding agent access is disabled.",n="Set Copilot policies",a=E;else if(l.userCanGrantOrgCca)t="Copilot coding agent access is disabled.",n="Enable Feature",a=v;else{if(!l.userHasRequestedCca)return null;t="Copilot coding agent access is disabled by your enterprise.",n="Remove request",a=S}return o[0]!==n||o[1]!==a?(i=(0,r.jsx)(f.l.PrimaryAction,{onClick:a,children:n}),o[0]=n,o[1]=a,o[2]=i):i=o[2],o[3]!==t||o[4]!==i?(s=(0,r.jsx)(f.l,{className:_.requestBanner,variant:"warning",title:"Coding Agent Disabled",hideTitle:!0,description:t,primaryAction:i}),o[3]=t,o[4]=i,o[5]=s):s=o[5],s}function S(){}function v(){}function E(){}function C(){}try{y.displayName||(y.displayName="MemberRequestBanner")}catch{}try{x.displayName||(x.displayName="MemberRequestBannerUnmemoized")}catch{}var w=n(91779),b=n(95304),R=n(9711),N=n(25641);let j={extraToolbarActions:"NewTaskChatInput-module__extraToolbarActions--tmsZL",reposSelectorButton:"NewTaskChatInput-module__reposSelectorButton--DTiqX"};var I=n(63422);function A({referenceRepo:e,reference:t}){return t.range?(0,N.XN)(t.path,t.range,e):(0,N.Od)(t.path,e)}function T({handleUserSubmit:e,initialRepo:t,initialReference:n,hideRepoSelector:g,isInPortal:f}){let _=(0,i.b)(),[x,S]=(0,s.useState)(null),[v,E]=(0,s.useState)(!0),[C,T]=(0,s.useState)(!1),k=(0,h.G7)("swe_agent_member_requests_agent_panel"),[M,O]=(0,s.useState)(!1),[L,P]=(0,s.useState)(null),[D,F]=(0,s.useState)(""),[U,B]=(0,s.useState)(null),[q,$]=(0,s.useState)(null),[G,W]=(0,s.useState)(n||null),[V]=(0,p.ok)(),Q=V.get("branch"),H=t&&`${t.ownerLogin}/${t.name}`,z=V.get("repo")??H,K=(0,R.$)(t?.ownerLogin),X=(0,h.G7)("copilot_swe_agent_use_subagents");(0,s.useEffect)(()=>{if(t&&Object.keys(t).length>0){let e=`${t.ownerLogin}/${t.name}`;S({id:t.id,owner:t.ownerLogin,name:e,nameOnly:t.name,nameWithOwner:e,enabled:!0,defaultBranch:t.defaultBranch,private:t.private,isEmpty:t.isEmpty,userHasRequestedCca:t.userHasRequestedCca,userCanRequestCca:t.userCanRequestCca,userCanGrantOrgCca:t.userCanGrantOrgCca,userCanGrantEnterpriseCca:t.userCanGrantEnterpriseCca});let n=Q??t?.defaultBranch;if(n)F(n);else{let t=async()=>{try{let t=(await (0,b.P0)(e)).find(t=>t.nameWithOwner===e);t&&(S(t),F(t.defaultBranch),B(t.defaultBranch),T(!t.enabled&&k))}finally{O(!1)}};O(!0),t()}_.clearCurrentReferences(),E(!1)}else(async()=>{try{let e=await (0,b.P0)(),t=z?e.find(e=>e.nameWithOwner===z&&e.enabled):void 0;if(z&&!t)try{t=(await (0,b.P0)(z)).find(e=>e.nameWithOwner===z&&e.enabled)}catch{}t||(t=e.find(e=>e.enabled)),t&&(S(t),F(Q??t.defaultBranch))}catch{}finally{E(!1)}})()},[]);let Y=(0,s.useCallback)(async t=>e(t,x,D,q||"",L&&G?(0,N.z$)(A({referenceRepo:L,reference:G})):void 0),[e,x,D,q,G,L]);return(0,s.useEffect)(()=>{t?.id!=null&&(async()=>{let e=await _.service.fetchRepo(t.id);e.payload&&P(e.payload)})()},[t,_]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.V,{modes:[{name:"Agent",icon:(0,r.jsx)(c.AgentIcon,{}),submitLabel:"Start task",placeholder:"Describe a coding task to work on",textAreaAriaLabel:"Coding task prompt",supportsAttachments:!1,supportsReferenceAttachments:!1}],size:"large",onSubmit:Y,disabled:C,initialReference:L&&G?A({reference:G,referenceRepo:L}):void 0,extraToolbar:(0,r.jsxs)("div",{className:j.extraToolbarActions,children:[v?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.f,{height:"32px",width:"130px"})}):g?null:(0,r.jsx)(u.P,{repositoryLoader:K,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(S(e),F(e.defaultBranch),T(!e.enabled&&k))},currentSelection:x||void 0,buttonText:x?.nameWithOwner||"Select repository",width:"medium",additionalButtonProps:{"aria-label":`Repository: ${x?.nameWithOwner||"Select repository"}`,className:j.reposSelectorButton}}),x&&!M?(0,r.jsx)(m.PI,{cacheKey:"agent-sessions-ref-selector",canCreate:!1,currentCommitish:D,defaultBranch:x.defaultBranch,owner:x.owner,repo:x.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,onSelectItem:e=>{F(e)},renderAnchor:e=>(0,r.jsx)(I.L,{...e,icon:c.GitBranchIcon,selectedIcon:d.gh,selected:D!==x.defaultBranch,"aria-label":`Branch: ${D||"Select branch"}`,"aria-labelledby":void 0})}):(0,r.jsx)(l.K,{disabled:!0,icon:c.GitBranchIcon,"aria-label":"Loading branches\u2026"}),X&&x&&!C&&(0,r.jsx)(w.p,{selectedAgent:q,onSelect:$,repo:x,branch:x.defaultBranch??U??D})]}),submitDisabled:!x||C,disableSavedUserMessage:!0,onRemoveReference:()=>{W(null)},isInPortal:f}),C&&x&&k&&(0,r.jsx)(y,{repo:x})]})}try{T.displayName||(T.displayName="NewTaskChatInput")}catch{}},76872:(e,t,n)=>{n.d(t,{D:()=>x});var r=n(74848),a=n(23657),i=n(84646),s=n(96459),o=n(24990),l=n(15220),c=n(46251),d=n(86877),u=n(99511),m=n(96540),h=n(51563),p=n(6236);let g={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--YECfV"};var f=n(44956),_=n(53419),y=n(20263);function x({dialogTitle:e="New Space",closeDialog:t,initialSpace:n}){let x=(0,s.Z)(),S=(0,m.useRef)(null),v=(0,i.AV)(),[E,C]=(0,m.useState)(n?.name??v),[w,b]=(0,m.useState)(null),[R,N]=(0,m.useState)({}),{upsertCopilotSpace:j,isPending:I}=(0,h.$)(),A=(0,o.S)(),T=(0,m.useCallback)(e=>{let t={...R};for(let n of e)t[n]&&delete t[n];N(t)},[R]),k=(0,m.useCallback)(e=>b(e),[]);(0,m.useEffect)(()=>{(0,_.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,m.useEffect)(()=>{n?S.current?.focus():S.current?.select()},[n]);let M=async()=>{if(I)return;let e=n?.resources?[...n.resources]:[],i=[];if(n&&w){let t=function(e,t,n){let r=[],a=[];if(!n)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let n of e)"ownerId"in n&&"private"in n&&n.private&&n.ownerId!==t?a.push(n):r.push(n);return{resourcesToSave:r,resourcesThatWillNotTransfer:a}}(n.resources||[],w.id,"Organization"===w.type);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let s=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;s=await A({title:"Some resources will not be duplicated",content:(0,r.jsx)(y.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(s)try{let r=await j({name:E,ownerId:w?.id,ownerType:w?.type,resources:e,generalInstructions:n?.generalInstructions});N({}),t();let i=(0,a.Cb)(r);return x(i)}catch(e){N(e??{})}},O=()=>{t()};return(0,r.jsx)(l.l,{position:{narrow:"fullscreen"},title:e,onClose:t,width:"large","aria-label":e,className:g.createSpaceDialog,renderFooter:()=>(0,r.jsx)(f.m,{onCancel:O,onSave:M,isLoading:I,disabled:!w,saveButtonText:"Create Space"}),children:(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await M()},children:(0,r.jsxs)(c.B,{children:[(0,r.jsxs)(d.A,{children:[(0,r.jsx)(d.A.Label,{required:!0,children:"Space name"}),(0,r.jsx)(u.A,{ref:S,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:E,onChange:e=>{C(e.target.value),T(["name","slug"])}}),(0,r.jsx)(d.A.Caption,{children:"Choose a name that describes your project or use case"}),R.name?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsxs)("span",{children:["Name ",R.name]})}):R.slug?(0,r.jsx)(d.A.Validation,{variant:"error",children:(0,r.jsx)("span",{children:a.j0})}):null]}),(0,r.jsx)(p.E,{onSelect:k})]})})})}try{x.displayName||(x.displayName="CreateSpaceDialog")}catch{}},77809:(e,t,n)=>{n.d(t,{Q:()=>ei});var r=n(74848),a=n(26108),i=n(15220),s=n(46251),o=n(86877),l=n(21373),c=n(72511),d=n(38621),u=n(96540),m=n(97564),h=n(54030),p=n(39176),g=n(54114),f=n(71363),_=n(78314),y=n(31078),x=n(53552),S=n(64375),v=n(29731),E=n(6665),C=n(19189),w=n(7808),b=n(64642),R=n(65787),N=n(25407),j=n(66108),I=n(94195),A=n(96459),T=n(11683),k=n(45800),M=n(31604),O=n(87448),L=n(10095),P=n(91385),D=n(70170),F=n(37272),U=n(71315),B=n(34164);let q=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:a,className:i,onBlur:s,onFocus:o,onKeyDown:l,onPreload:c,onSearch:m,query:h,searchPlaceholder:p,loading:g,sx:f},_)=>{let{sendRepoClickEvent:y}=(0,E.T)(),[x,S]=u.useState(h),v=u.useRef((0,D.s)(e=>m(e),250));u.useEffect(()=>{S(h)},[h]);let C=h?(0,r.jsx)(O.ks.Action,{onClick:()=>{y("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,r.jsx)(O.ks,{autoFocus:$(),className:(0,B.$)("d-flex",i),ref:_,value:x,onKeyDown:l,onChange:e=>{S(e.target.value),c(),v.current(e.target.value)},sx:f,"aria-label":p||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",loading:""!==h&&g,leadingVisual:d.SearchIcon,trailingAction:C,trailingVisual:C?void 0:()=>(0,r.jsx)(F.E,{children:(0,r.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),o?.(e)},onBlur:s,onClick:()=>y("FILE_TREE.SEARCH_BOX")})});function $(){return"1"===new URLSearchParams(U.fV.search).get("search")}q.displayName="FilesSearchBox";let G={Box:"FileResultsList-module__Box--cUmDY",ActionList:"FileResultsList-module__ActionList--kDNEZ",FilesSearchBox:"FileResultsList-module__FilesSearchBox--KW9Zl",HighlightMatch:"FileResultsList-module__HighlightMatch--Jy_cG",Octicon:"FileResultsList-module__Octicon--PvMf4"},W={excludeDirectories:!1,excludeSeeAllResults:!1};function V({actionListSx:e,additionalResults:t,className:n,commitOid:a,config:i=W,findFileWorkerPath:s,getItemUrl:o,onRenderRow:l,onItemSelected:d,searchBoxRef:m,sx:p}){let{excludeDirectories:g,excludeSeeAllResults:f}=i,{query:S,setQuery:v}=(0,y.JS)(),j=(0,_.t)(),L=u.useRef(null),P=m??L,[D,F]=u.useState(S.length>0),[U,B]=u.useState(!!S),{list:V,directories:Q,loading:H,error:z}=(0,h.o)(a,D,!!g),{path:X}=(0,x.eu)(),{getUrl:Y}=(0,C.Z)(),{queryText:J,queryLine:Z}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(S),{matches:ee,clearMatches:et}=function(e,t,n,r){let[a,i]=u.useState(),s=u.useRef(""),o=u.useRef(),{sendStats:l}=(0,E.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new w.z(n,b.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[l,n]);return u.useEffect(()=>{if(r)return d(),function(){o.current?.terminate()}},[d,r]),u.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let n=s.current&&t.startsWith(s.current);c.current=!0,o.current?.postMessage({baseList:n&&a||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:a,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...V,...t??[]].sort(),[t,V]),J,s,D),{sendRepoClickEvent:en}=(0,E.T)(),er=(0,A.Z)(),[ea,ei]=u.useState(0),[es,eo]=u.useState(()=>$()),el=u.useRef(null),ec=u.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,E.T)(),{screenSize:em}=(0,I.lm)(),eh=i.enableOverlay??em>=I.Gy.large,ep=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),B(!1)},[en,d]),eg=(e,t,n)=>o?o(e,t,n):Y({path:e,action:t?"tree":"blob",hash:n}),{containerRef:ef}=(0,k.G)({bindKeys:T.z0.ArrowVertical|T.z0.HomeAndEnd,focusInStrategy:"previous"},[H,z]);u.useEffect(()=>{S||B(!1)},[S]),u.useEffect(()=>{document.activeElement!==P.current&&eh&&B(!1)},[X,P,eh]);let e_=ee?.slice(0,20)||[],ey=ee&&ee.length>e_.length,ex=!i.disableNavigation,eS=ec.current?.getBoundingClientRect().width,ev=(0,r.jsx)(O.az,{sx:{maxHeight:eh?"180px":"100% !important",width:eh?eS:"100%"},className:G.Box,children:z?(0,r.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,r.jsxs)(O.lF,{ref:ef,sx:{p:eh?2:3,pr:3*!!eh,pt:eh?3:"2px !important",...e},role:"listbox",className:G.ActionList,children:[!H&&e_.map((e,t)=>{let n=Q.includes(e),a=eg(e,n,Z?`L${Z}`:"");return(0,r.jsx)(K,{active:!1,index:t,focused:es&&ea===t,match:e,onRender:l,query:J,onClick:ep,isDirectory:n,to:a,useOverlay:eh,listRef:ef,noAnchor:i.disableNavigation},e)}),0===e_.length&&(0,r.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.az,{className:n,ref:ec,sx:p,children:(0,r.jsx)(q,{ariaActiveDescendant:(!eh&&S||eh&&U)&&es&&ea>-1?ey&&ea===e_.length?"see-all-results-link":`file-result-${ea}`:void 0,ariaExpanded:eh?U:void 0,ariaHasPopup:eh,ariaControls:eh?ed:void 0,ref:P,loading:H,query:S,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:a,ctrlKey:i}=e;if(!n&&!r&&!a){if("Escape"===t)S?(eu("FILE_TREE.CANCEL_SEARCH"),v(""),et()):document.activeElement&&document.activeElement.blur();else if(!S)return;else if("Enter"===t){if(!f&&ey&&ea===e_.length)ex&&er((0,N.Y8Y)({owner:j.ownerLogin,repo:j.name,searchTerm:`path:${J}`})),d?.();else if(e_[ea]){let e=e_[ea];ex&&er(eg(e_[ea],!1,Z?`L${Z}`:"")),B(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!f&&ey&&ea>=e_.length-1){if(ei(e_.length),el.current&&ef.current){let e=(0,R.U)(ef.current);(0,T.Rt)(el.current,e,{behavior:"instant"})}}else ei(Math.min(ea+1,e_.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){ei(Math.max(ea-1,0)),e.preventDefault();return}}},onPreload:()=>F(!0),onSearch:e=>{v(e),e?B(!0):(et(),B(!1)),ei(0)},onBlur:e=>{ef.current?.contains(e.relatedTarget)||(B(!1),eo(!1))},onFocus:()=>{S&&B(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:G.FilesSearchBox})}),eh&&e_.length>0&&(0,r.jsx)(M.T,{anchorRef:ec,open:eh&&U,renderAnchor:null,onClose:()=>{B(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:ed,role:"dialog"},children:ev}),!eh&&S&&ev]})}let Q=({active:e,focused:t,index:n,match:a,query:i,to:s,isDirectory:o,onClick:l,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,P.Xq)(i,a);c?.();let g=u.useRef(null);u.useEffect(()=>{if(t&&g.current&&m?.current){let e=(0,R.U)(m.current);(0,T.Rt)(g.current,e,{behavior:"instant"})}},[t,m]);let f={};t&&(f={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let _={id:`file-result-${n}`,active:e,onSelect:(0,u.useCallback)(()=>{l?.(a)},[a,l]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...f},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},y=(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,r.jsx)(X,{text:a,positionsList:p,LeadingIcon:o?H:z,className:G.HighlightMatch})})});return h?(0,r.jsx)(O.lF.Item,{..._,children:y},a):(0,r.jsx)(O.lF.LinkItem,{..._,ref:g,as:j.N,to:s,children:y},a)},H=()=>(0,r.jsx)(L.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:G.Octicon}),z=()=>(0,r.jsx)(L.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),K=u.memo(Q);function X({className:e,text:t,positionsList:n,sx:a,LeadingIcon:i}){let s=[],o=0;for(let e of n){if(Number(e)!==e||e<o||e>t.length)continue;let n=t.slice(o,e);n&&s.push(Y(n)),o=e+1,s.push((0,r.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return s.push(Y(t.slice(o))),(0,r.jsx)(O.az,{className:e,sx:a,children:(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(i,{}),s]})})}function Y(e){return e.replaceAll("/","/\u200B")}try{V.displayName||(V.displayName="FileResultsList")}catch{}try{Q.displayName||(Q.displayName="FileResultRow")}catch{}try{H.displayName||(H.displayName="DirectoryIcon")}catch{}try{z.displayName||(z.displayName="FileResultIcon")}catch{}try{K.displayName||(K.displayName="MemoizedFileResultRow")}catch{}try{X.displayName||(X.displayName="HighlightMatch")}catch{}let J={dialogHeader:"MultiFilePicker-module__dialogHeader--CApsB",Box:"MultiFilePicker-module__Box--gINxM",Dialog:"MultiFilePicker-module__Dialog--ls9MF"};var Z=n(73017),ee=n(53419);function et(e,t,n){return{id:`${n.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:n.id,nwo:`${n.ownerLogin}/${n.name}`,filePath:e,type:t}}function en(e,t,n,r,a,i){let s=Array.from(e).filter(e=>t.has(e)),o=Array.from(e).filter(e=>!t.has(e));if(!i)return o.map(e=>et(e,"github_file",n));let l=[],c=new Set;for(let e of s){if(s.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=o.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){l.push(et(e,"github_folder",n));continue}if(i&&t.length>=a)for(let r of(l.push(et(e,"github_folder",n)),t))c.add(r);else for(let e of t)l.push(et(e,"github_file",n)),c.add(e)}let d=o.filter(e=>!c.has(e));if(r&&i){let e=new Map;for(let t of d){let n=t.lastIndexOf("/"),r=n>0?t.substring(0,n):"";e.has(r)||e.set(r,[]),e.get(r)?.push(t)}for(let[t,r]of e)if(""===t)for(let e of r)l.push(et(e,"github_file",n));else l.push(et(t,"github_folder",n))}else for(let e of d)l.push(et(e,"github_file",n));return l}function er({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:a,expandedPath:i,resourceCounts:s,allowFolderReferences:o,maxFileCount:l,onRejectionMessage:c,onDisplayCountChange:d}){let[m,f]=(0,u.useState)(()=>new Set),[_,y]=(0,u.useState)(()=>new Set),x=l??50,{list:S,directories:v,loading:E}=(0,h.o)(e.commitOID,!0),[C,w]=(0,u.useState)([]);(0,u.useEffect)(()=>{w((0,p.k)({paths:S,directories:v})),y(new Set(v))},[S,v,w,e.commitOID]),(0,u.useEffect)(()=>{let n=Array.from(m).filter(e=>!_.has(e)),r=Array.from(m).filter(e=>_.has(e));a?.(n.length);let i=!1;if(o&&n.length>0){let e=r.map(e=>`${e}/`),t=n.filter(t=>!e.some(e=>t.startsWith(e))),a=t.some(e=>e.includes("/"));i=t.length>x&&a}let s=en(m,_,e,i,x,o??!1);t(s),d&&d(s.length)},[m,_,e,t,a,d,o,x]);let b=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),R=(0,u.useCallback)(t=>{if(t.size<=m.size){f(t),c?.(null);return}if(!o){let e=Array.from(t).filter(e=>!_.has(e)),n=s?s.maxResourceCount-s.currentResourceCount:x;if(e.length>n){let n=s?`${s.currentResourceCount+e.length} / ${s.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${x} files can be added at a time.`;c?.(n),f(t);return}c?.(null),f(t);return}let n=Array.from(t).filter(e=>!_.has(e)),r=Array.from(t).filter(e=>_.has(e)).map(e=>`${e}/`),a=n.filter(e=>!r.some(t=>e.startsWith(t))),i=a.some(e=>e.includes("/"));if(en(t,_,e,a.length>x&&i,x,o).length>x)return void f(t);f(t)},[m,x,_,o,c,e,s]);return(0,r.jsx)("div",{className:J.Box,children:(0,r.jsx)(g.Rw,{rootItems:C,expandedPath:i,selectedItemRef:()=>{},setRootItems:w,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:m,onSelectionChange:R,loading:E||!1,fetchError:!!n,getItemUrl:b,allowFolderReferences:!!o,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ea({onClose:e}){return(0,r.jsx)(a.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function ei({formData:e,onCancel:t,onSaveFiles:n,findFileWorkerPath:h,attachmentButtonRef:p,owner:g,resourceCounts:E,initialRepo:C,onRepoSelect:w,hideBackButton:b=!1,allowFolderReferences:R=!1,maxFileCount:N=50}){let[j,I]=(0,u.useState)({}),[A,T]=(0,u.useState)(null),[k,M]=(0,u.useState)(C||null),[O,L]=(0,u.useState)(!0),[P,D]=(0,u.useState)(e),[F,U]=(0,u.useState)(!1),[B,q]=(0,u.useState)(null),[$,G]=(0,u.useState)(""),[W,Q]=(0,u.useState)(null),[H,z]=(0,u.useState)(0),[K,X]=(0,u.useState)(0),Y=(0,u.useRef)(!1),et=async e=>{let t;if(Y.current=!0,j[e]){M(t=j[e]),w?.(t);return}try{t=await (0,m.V)(e),I(n=>({...n,[e]:t})),M(t),w?.(t),L(!1)}catch(e){T(e instanceof Error?e.message:"An unknown error occurred")}Y.current=!1},en=()=>{w?.(null),M(null),D([]),L(!0)},ei=void 0!==E,es=(ei?K:H)>(ei?E.maxResourceCount-E.currentResourceCount:N),eo=async()=>{U(!0);try{if(es)return;(0,ee.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await n(P)}catch(t){let e="An unknown error occurred";t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(e=t.base.startsWith("unsupported_file_type")&&"files"in t?function(e){if(1===e.length)return`This file can't be submitted: ${e[0]}. Only supported file types are allowed.`;let t=e.slice(0,3).map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(-t)}`;return`<b>${n}</b>`})(e)),n=e.length-3,r=`One or more files can't be submitted: ${t.join(", ")}`;return n>0&&(r+=`, and ${n} more`),`${r}. Only supported file types are allowed.`}(t.files):t.base.startsWith("The size of the space exceeds the current limit")?"The size of the space exceeds the current limit":t.base),q(e)}finally{U(!1)}};(0,u.useEffect)(()=>{q(null)},[P]);let el=es?ei?`${E.currentResourceCount+K} / ${E.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${N} items can be added at a time.`:W,ec=es||!!W;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.X1,{selectionVariant:"instant",open:!k&&O,onOpenChange:e=>{Y.current||(L(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(D([]),(0,ee.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await et(e))},cancelReturnFocusRef:p,submitReturnFocusRef:p,error:A??void 0,ownerDisplayLogin:g,includeForks:!0}),k&&(0,r.jsx)(i.l,{onClose:t,title:`Add files from ${k.ownerLogin}/${k.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,r.jsxs)(i.l.Header,{children:[(0,r.jsx)("div",{className:J.dialogHeader,children:(0,r.jsx)(i.l.Title,{id:t,children:(0,r.jsxs)(s.B,{align:"center",direction:"horizontal",gap:"none",children:[!b&&(0,r.jsx)(s.B.Item,{children:(0,r.jsx)(a.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:en,variant:"invisible"})}),(0,r.jsxs)(s.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",k.ownerLogin,"/",k.name]}),(0,r.jsx)(s.B.Item,{children:(0,r.jsx)(ea,{onClose:()=>e("close-button")})})]})})}),(0,r.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,r.jsx)(_.d,{repository:k,children:(0,r.jsx)(y.Ck,{children:(0,r.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(S.$,{allShortcutsEnabled:!1,children:(0,r.jsx)(V,{commitOid:k.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&G(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,r.jsx)(i.l.Footer,{children:(0,r.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,r.jsx)("div",{className:"d-flex flex-items-center",children:el&&(0,r.jsx)(o.A.Validation,{variant:"error",children:el})}),(0,r.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,r.jsx)(l.Q,{onClick:t,children:"Cancel"}),(0,r.jsx)(l.Q,{...(0,v.G)("save-resource-button"),variant:"primary",onClick:eo,count:F?void 0:(ei?K:H)||void 0,loading:F,disabled:ec,children:"Add"})]})]})}),renderBody:()=>(0,r.jsxs)("div",{className:"d-flex flex-column",children:[A&&(0,r.jsx)("span",{children:A}),B&&(0,r.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,r.jsx)(c.A,{full:!0,variant:"danger",children:(0,r.jsx)(Z.JR,{as:"span",html:B})})}),(0,r.jsx)(_.d,{repository:k,children:(0,r.jsx)(y.Ck,{children:(0,r.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,r.jsx)(er,{expandedPath:$,currentRepo:k,localFormData:P,setLocalFormData:D,onFileCountChange:X,onDisplayCountChange:z,fetchError:A,resourceCounts:E,allowFolderReferences:R,maxFileCount:N,onRejectionMessage:Q})})})})]}),className:J.Dialog})]})}try{er.displayName||(er.displayName="FilePickerForm")}catch{}try{ea.displayName||(ea.displayName="CloseButton")}catch{}try{ei.displayName||(ei.displayName="MultiFilePicker")}catch{}},79216:(e,t,n)=>{n.d(t,{Q:()=>s});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...s]=t.pathname.split("/"),o=s.join("/"),l=i.fromUrlType(a);if(n&&r&&l)return{repo:`${n}/${r}`,type:o?l:"repository",id:o}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let n=s.for(t);return null!==n&&s.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},81829:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(74848),a=n(21728),i=n(71315),s=n(69726),o=n(96540);function l(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,n,i,s,o,l,c,d,u,m,h,p,g,f,_,y,x=(0,a.c)(17);return x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),n=(0,r.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),x[0]=t,x[1]=n,x[2]=i):(t=x[0],n=x[1],i=x[2]),x[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),o=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),l=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),x[3]=s,x[4]=o,x[5]=l,x[6]=c):(s=x[3],o=x[4],l=x[5],c=x[6]),x[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,r.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,r.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),x[7]=d,x[8]=u,x[9]=m,x[10]=h):(d=x[7],u=x[8],m=x[9],h=x[10]),x[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,r.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),x[11]=p):p=x[11],x[12]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),x[12]=g):g=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),x[13]=f):f=x[13],x[14]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsxs)("defs",{children:[g,f,(0,r.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,r.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),x[14]=_):_=x[14],x[15]!==e?(y=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,n,i,s,o,l,c,u,m,h,d,p,_]}),x[15]=e,x[16]=y):y=x[16],y};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u={overlay:"FullScreenDragOverlay-module__overlay--Q9gow",centeredContent:"FullScreenDragOverlay-module__centeredContent--iAFMy",text:"FullScreenDragOverlay-module__text--oftCM"};function m(e){let t,n,m,h=(0,a.c)(9),{onFilesDrop:p,isUploading:g}=e,f=void 0!==g&&g;h[0]!==f||h[1]!==p?(t=e=>{f||p(e)},h[0]=f,h[1]=p,h[2]=t):t=h[2];let _=t;h[3]!==_?(n={onFilesDrop:_,targetElement:i.XC},h[3]=_,h[4]=n):n=h[4];let{isDragging:y}=function(e){let t,n,r,i=(0,a.c)(6),{onFilesDrop:s,targetElement:d}=e,[u,m]=(0,o.useState)(!1),h=(0,o.useRef)(0);return i[0]!==s||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},n=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&s(t)};return d.addEventListener("dragover",l),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",n),()=>{d.removeEventListener("dragover",l),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",n)}},n=[s,d],i[0]=s,i[1]=d,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,o.useEffect)(t,n),i[4]!==u?(r={isDragging:u},i[4]=u,i[5]=r):r=i[5],r}(n),x=null;if(f){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{size:"large"}),(0,r.jsx)("p",{className:u.text,children:"Uploading files..."})]}),h[5]=e):e=h[5],x=e}else if(y){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{}),(0,r.jsx)("p",{className:u.text,children:"Drop files to upload"})]}),h[6]=e):e=h[6],x=e}return x?(h[7]!==x?(m=(0,r.jsx)("div",{className:u.overlay,children:(0,r.jsx)("div",{className:u.centeredContent,children:x})}),h[7]=x,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},82595:(e,t,n)=>{n.d(t,{I:()=>d});var r=n(74848),a=n(21728),i=n(34164),s=n(49851),o=n(38621);let l={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,n,d,u,m,h,p=(0,a.c)(19),{icon:g,hasBackground:f,color:_,size:y,className:x}=e,S=void 0!==f&&f,v=void 0===_?"gray":_,E=void 0===y?16:y;if("string"==typeof g)if(g in s.OZ)t=s.OZ[g];else{let e;p[0]!==g?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return t in o?o[t]:void 0}(g),p[0]=g,p[1]=e):e=p[1],t=e}else t=g;if(!t)return null;p[2]!==v?(n=c.has(v),p[2]=v,p[3]=n):n=p[3];let C=n,w=`${S?2*E:E}px`;p[4]!==v||p[5]!==C||p[6]!==w?(d={"--custom-size":w},C||(d["--custom-color"]=v),p[4]=v,p[5]=C,p[6]=w,p[7]=d):d=p[7];let b=C?l[v]:l.customColor,R=S&&l.hasBackground;return p[8]!==x||p[9]!==b||p[10]!==R?(u=(0,i.$)(l.container,b,R,x),p[8]=x,p[9]=b,p[10]=R,p[11]=u):u=p[11],p[12]!==t||p[13]!==E?(m=(0,r.jsx)(t,{size:E,fill:"currentColor"}),p[12]=t,p[13]=E,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,r.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},84331:(e,t,n)=>{function r(e,t,n=.1){let a=s(e,t,n);return a&&-1===t.indexOf("/")&&(a+=s(e.substring(e.lastIndexOf("/")+1),t,n)),a}function a(e,t,n){if(t){let r=e.innerHTML.trim().match(n||function(e){let t=e.toLowerCase().split(""),n="",r=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");r?(n+=`(.*)(${t})`,r=!1):n+=`([^${t}]*?)(${t})`}return RegExp(`${n}(.*?)$`,"i")}(t));if(!r)return;let a=!1,i=[];for(let e=1;e<r.length;++e){let t=r[e];t&&(e%2==0?a||(i.push("<mark>"),a=!0):a&&(i.push("</mark>"),a=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),n=t.replace(/<\/?mark>/g,"");t!==n&&(e.innerHTML=n)}}n.d(t,{He:()=>a,UD:()=>o,dt:()=>r});let i=new Set([" ","-","_"]);function s(e,t,n=.1){let r=e;if(r===t)return 1;let a=r.length,o=0,l=0,c=!0;for(let e of t){let t=r.indexOf(e.toLowerCase()),s=r.indexOf(e.toUpperCase()),d=Math.min(t,s),u=d>-1?d:Math.max(t,s);if(-1===u)return 0;o+=.1,r[u]===e&&(o+=.1),0===u&&(o+=.9-n,c&&(l=1)),i.has(r.charAt(u-1))&&(o+=.9-n),r=r.substring(u+1,a),c=!1}let d=t.length,u=o/d,m=(d/a*u+u)/2;return l&&m+n<1&&(m+=n),m}function o(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}},84646:(e,t,n)=>{n.d(t,{$7:()=>h,$W:()=>S,AV:()=>x,Ao:()=>f,BV:()=>y,OW:()=>CopilotSpaceSSOError,Tx:()=>_,e9:()=>p,i9:()=>CopilotSpaceNotFoundError,jS:()=>g});var r=n(50467),a=n(97665),i=n(94747),s=n(97286),o=n(72011),l=n(33592),c=n(96540),d=n(2635),u=n(71315),m=n(23657);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,r._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function h(){let e=(0,a.jE)(),t=(0,l.b)();return(0,i.n)({mutationFn:async e=>{let n=await (0,o.ee)(e);if(!n.ok)throw Error(n.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:n.status,ok:!0,payload:n.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:o.O6})}})}function p(e){let t=(0,l.b)(),{data:n}=g(e,{throwOnError:!1});(0,c.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function g(e,t={}){return(0,s.I)({queryKey:o.O6,queryFn:o.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function f(e){return(0,s.I)({queryKey:(0,o.dp)(e),queryFn:async()=>{let t=await (0,o.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function _(e,t){return(0,s.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,o.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function y(){return(0,d.A3)("customCopilotsEnabled")}function x(){let e=function(){let e=(0,d.A3)("customCopilots");return e?.length??0}();return(0,c.useMemo)(()=>`New Space ${e+1}`,[e])}function S(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,n=u.cg?.location.origin;if(!n)return;let r=(0,m.Cb)(e),a=`${n}${r}`,i=`content_url=${encodeURIComponent(a)}&report=${t}+(user)`;return`${n}/contact/report-content?${i}`},[e])}},91865:(e,t,n)=>{n.d(t,{ET:()=>s,Iw:()=>l,V4:()=>c,ms:()=>o});var r=n(96540),a=n(97286),i=n(64846);let s="AGENT_SESSIONS_PR_MAP";function o(e){return Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(",")}let l=async(e,t)=>{let n=o(e);if(!n)return{};let r=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(n)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!r.ok)throw Error("Failed to fetch pull requests");let a=(await r.json()).pull_requests;return t(a),a};function c({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:n}){let c=o(e),{value:d,setValue:u}=(0,i.Q)(s),m=(0,r.useRef)(n??{}),h=(0,a.I)({queryKey:["agent-sessions-pull-requests",c],queryFn:async()=>await l(e,u),initialData:n??d,refetchInterval:t,refetchIntervalInBackground:!1,enabled:c.length>0});h.data&&(m.current={...m.current,...h.data});let p=(0,r.useMemo)(()=>m.current,[h.data]);return{...h,data:p}}},93654:(e,t,n)=>{n.d(t,{Nt:()=>m,ZL:()=>d,j:()=>p,si:()=>g,xZ:()=>u});var r=n(35247),a=n(97665),i=n(96540),s=n(51120),o=n(42455),l=n(64846),c=n(91865);let d=["agent-tasks"],u="AGENT_SESSIONS_TASKS",m=300;function h(e){return e?[...d,e]:d}let p=async({queryClient:e,setCachedTasks:t,pageSize:n,paginated:r=!1})=>{let a=r&&n?`?page_size=${n+5}`:"",i=await (0,s.I)({path:`/agents/sessions${a}`}),o=function(e,t){let n=e.map(e=>{let n=t.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!n,...n&&{problemStatement:n.problemStatement,nwo:n.nwo,baseRef:n.baseRef,clientGeneratedId:n.clientGeneratedId}}}),r=t.filter(e=>!n.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return[...n,...r].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}(function(e){let t=new Map;for(let n of e){let e=t.get(n.resource_id.toString());if(e){if(e.session_count+=1,new Date(n.last_updated_at)>new Date(e.latest_session_updated_at)&&(e.latest_session_updated_at=n.last_updated_at,e.latest_session_state=n.state),n.event_identifiers){let t=new Set(e.event_identifiers||[]),r=n.event_identifiers.filter(e=>!t.has(e));e.event_identifiers=[...e.event_identifiers||[],...r]}}else t.set(n.resource_id.toString(),{resource_type:n.resource_type,resource_id:n.resource_id,resource_global_id:n.resource_global_id,session_count:1,latest_session_updated_at:n.last_updated_at,latest_session_state:n.state,event_identifiers:n.event_identifiers,event_type:n.event_type??void 0})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await i.json()).sessions),(e.getQueryData(h(n))||[]).filter(e=>!0===e.isOptimistic));return t(o),o};function g({sessionsPollingInterval:e=3e3,initialTasks:t,initialPullRequestsMap:n,tasksToFetch:s,paginated:d=!1}={}){let{value:f,setValue:_}=(0,l.Q)(u),y=(0,a.jE)(),x=r.W.paginateAgentTasks&&d,S=s&&s>m?m:s,v=(0,o.b)({queryKey:h(s),queryFn:async()=>await p({queryClient:y,setCachedTasks:_,pageSize:S,paginated:x}),initialData:t??f,refetchInterval:e,refetchIntervalInBackground:!1}),E=(0,i.useMemo)(()=>x&&s?v.data?.slice(0,s)||[]:v.data||[],[v.data,s,x]),C=E.filter(e=>void 0!==e.resource_id),{data:w,isError:b,isLoading:R}=(0,c.V4)({tasks:C,sessionsPollingInterval:e,initialPullRequestsMap:n}),N=E.map(e=>{if(void 0===e.resource_id)return e;let t=w[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}}).filter(e=>!0===e.isOptimistic||void 0!==e.pull),j=v.isLoading&&!v.data||R&&!n;return{tasks:N,isLoading:j,isError:v.isError||b,hasMore:function(e,t,n){if(!n||!t)return!1;let r=new Set(e.slice(0,t).map(e=>e.resource_id));return e.slice(t).some(e=>!r.has(e.resource_id))}(v.data||[],s,x)}}},95378:(e,t,n)=>{n.d(t,{kx:()=>C,ao:()=>E});var r,a,i=n(74848),s=n(20263),o=n(73017),l=n(29731),c=n(34164),d=n(96540),u=n(56825),m=n(35220),h=n(87670),p=n(46720),g=n(24347);let f={container:"Selection-module__container--OQE4d",containerWithDragHandle:"Selection-module__containerWithDragHandle--mLWh4",dragTrigger:"Selection-module__dragTrigger--SM4bZ",compact:"Selection-module__compact--azMKM",checkbox:"Selection-module__checkbox--X3ras",checkboxCompact:"Selection-module__checkboxCompact--zfQtx"};var _=n(60257),y=n(74501);let x=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,g.v)(),{isSelected:r,onSelect:a}=(0,_.r)(),{title:s}=(0,y.J)();return t?(0,i.jsxs)("div",{className:n?f.containerWithDragHandle:f.container,...(0,l.G)("list-view-item-selection"),children:[n&&(0,i.jsx)(h.BS.DragTrigger,{className:(0,c.$)(f.dragTrigger,"compact"===e&&f.compact)}),(0,i.jsx)(p.A,{className:"default"===e?f.checkbox:f.checkboxCompact,checked:r,onChange:()=>a(!r),"aria-label":`Select: ${s}`,"data-listview-component":"selection-input",...(0,l.G)("list-view-item-selection-input")})]}):null};try{x.displayName||(x.displayName="ListItemSelection")}catch{}let S={anchor:"Title-module__anchor--GmXUE",heading:"Title-module__heading--s7YnL",compact:"Title-module__compact--eK6hD",container:"Title-module__container--XD9YG",trailingBadgesSpacer:"Title-module__trailingBadgesSpacer--Son9W",trailingBadgesContainer:"Title-module__trailingBadgesContainer--mijcn",inline:"Title-module__inline--oM0P7"};function v({children:e,containerStyle:t,containerClassName:n,headerContainerRef:r,headingStyle:a,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:h,header:p}){let{variant:g}=(0,m.e)(),{headingRef:f}=(0,y.J)(),_=(0,u.m)("listitem");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{...(0,l.G)("list-view-item-title-container"),style:t,className:(0,c.$)(S.container,"compact"===g&&S.compact,n),ref:r,children:[(0,i.jsxs)(_,{className:(0,c.$)(S.heading,"compact"===g&&S.compact,s),style:a,ref:e=>{if(f&&(f.current=e),o&&"current"in o)try{o.current=e}catch{}},...(0,l.G)("list-view-item-title"),children:[d,p]}),h&&(0,i.jsx)("span",{className:S.trailingBadgesSpacer}),(0,i.jsx)("span",{className:S.trailingBadgesContainer,children:h}),e]}),(0,i.jsx)(x,{})]})}function E({children:e,value:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,anchorRef:m,...h}){let p=(0,d.useRef)(null),g=m||p;return b({anchorRef:g,...h}),(0,i.jsx)(v,{header:h.href||h.onClick?(0,i.jsx)(w,{anchorRef:g,...h,children:(0,i.jsx)("span",{children:t})}):(0,i.jsx)("span",{children:t}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,children:e})}function C({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return b(m),(0,i.jsx)(v,{header:(0,i.jsx)(s.BC,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function w({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:r,children:a,...s}){let{as:o="a",...u}=r??{},m=(0,d.useRef)(null);return(0,i.jsx)(o,{...(0,l.G)("listitem-title-link"),style:e,ref:n||m,className:(0,c.$)(S.anchor,S.inline,t),...s,...u,children:a})}let b=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:r,headingRef:a}=(0,y.J)();return(0,d.useEffect)(()=>{(e||t)&&r(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(a?.current){let e=a.current.querySelector("a, button");e&&e.click()}})},[n,a,e,t,r]),null};try{v.displayName||(v.displayName="InternalTitle")}catch{}try{(r=TitleTag).displayName||(r.displayName="TitleTag")}catch{}try{E.displayName||(E.displayName="ListItemTitle")}catch{}try{C.displayName||(C.displayName="ListItemSafeHTMLTitle")}catch{}try{(a=function({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return b(m),(0,i.jsx)(v,{header:(0,i.jsx)(o.JR,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(a.displayName="ListItemUnsafeHTMLTitle")}catch{}try{w.displayName||(w.displayName="HeadingLink")}catch{}},97564:(e,t,n)=>{n.d(t,{V:()=>a});var r=n(96379);async function a(e){let t=await (0,r.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,n)=>{n.d(t,{O:()=>p});var r=n(74848),a=n(96379),i=n(38621),s=n(15220),o=n(86877),l=n(99511),c=n(43371),d=n.n(c),u=n(96540);let m={dialogForm:"McpServerDialog-module__dialogForm--pUtNF",underline:"McpServerDialog-module__underline--YKUMk",inputError:"McpServerDialog-module__inputError--Ojb_P",formField:"McpServerDialog-module__formField--rsUqW",hiddenSubmitButton:"McpServerDialog-module__hiddenSubmitButton--KcK0s"},h=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),p=({isOpen:e,onClose:t,returnUrl:n,onServerAdded:c,returnFocusRef:p,showSettingsLink:g=!0})=>{let[f,_]=(0,u.useState)(""),[y,x]=(0,u.useState)(""),[S,v]=(0,u.useState)(null),[E,C]=(0,u.useState)(null),w=(0,u.useCallback)(()=>{_(""),x(""),v(null),C(null),t()},[t]),b=async e=>{if(e&&e.preventDefault(),""===f.trim()||""===y.trim()){y.trim()||v("MCP server URL is required"),f.trim()||C("Name is required");return}try{if(v(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(y))return void v("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",y.trim()),e.append("name",f.trim()),n&&e.append("return_url",n);let t=await (0,a.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);if("unsupported_server_type"===t.error)e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]});else if(t.field_errors){for(let[e,n]of Object.entries(t.field_errors)){let t=n.join(", ");"mcp_server_url"===e?v(t):"display_name"===e&&C(t)}return}else t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")||"Client setup failed"===n.trim()?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",h,"."]}):n||e}}catch{e="Failed to add MCP server"}v(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(w(),c?.(),window.location.assign(i)):(w(),c?.())}catch(e){e instanceof Error?v(e.message):v("An unknown error occurred")}};return e?(0,r.jsx)(s.l,{title:"Add MCP server",onClose:w,footerButtons:[{buttonType:"default",content:"Cancel",onClick:w},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP server",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{b()}}],returnFocusRef:p,children:(0,r.jsxs)("form",{className:m.dialogForm,onSubmit:b,autoComplete:"on",children:[(0,r.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,r.jsx)(o.A.Label,{children:"MCP server name"}),(0,r.jsx)(l.A,{name:"mcp-server-name",type:"text",value:f,onChange:e=>{_(e.target.value),C(null)},placeholder:"Enter a name for this MCP server",className:E?m.inputError:void 0,autoComplete:"on",block:!0}),E&&(0,r.jsx)(o.A.Validation,{variant:"error",children:E})]}),(0,r.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,r.jsx)(o.A.Label,{children:"MCP server URL"}),(0,r.jsx)(l.A,{name:"mcp-url",type:"url",value:y,onChange:e=>{x(e.target.value),v(null)},placeholder:"https://mcp.example.com",className:S?m.inputError:void 0,autoComplete:"on",block:!0}),S&&(0,r.jsx)(o.A.Validation,{variant:"error",children:S})]}),(0,r.jsx)("button",{type:"submit",className:m.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,r.jsxs)(r.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:m.underline,children:"your settings"}),"."]})]})]})}):null};try{h.displayName||(h.displayName="MCP_SPEC_LINK")}catch{}try{p.displayName||(p.displayName="McpServerDialog")}catch{}},99054:(e,t,n)=>{n.d(t,{JE:()=>p,Z3:()=>m,bn:()=>u,kw:()=>g,qj:()=>h});var r=n(21728),a=n(97286),i=n(8625),s=n(14521),o=n(25641),l=n(2635),c=n(33592),d=n(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",h=/^@(?<slug>\S+)$/;function p(e){let t,n,i,u,m,h,p=(0,r.c)(25),{agentsPath:g,model:f}=(0,l.bP)("agentsPath","model"),_=(0,d.tD)(),y=(0,c.b)(),x=!!(0,s.G)(),S=f?.hasLimitedCapabilities;p[0]!==_||p[1]!==x||p[2]!==S?(t=e=>{let{messages:t}=_();if(S||x)return{agents:[],showLimit:!1};let n=(0,o.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=_,p[1]=x,p[2]=S,p[3]=t):t=p[3];let v=t;p[4]!==g?(n=["copilot-chat","agents",g],p[4]=g,p[5]=n):n=p[5],p[6]!==g||p[7]!==y?(i=()=>g?y.fetchAgents(g):[],p[6]=g,p[7]=y,p[8]=i):i=p[8];let E=(void 0===e||e)&&!S&&!x;p[9]!==v||p[10]!==n||p[11]!==i||p[12]!==E?(u={queryKey:n,queryFn:i,select:v,enabled:E},p[9]=v,p[10]=n,p[11]=i,p[12]=E,p[13]=u):u=p[13];let{isLoading:C,data:w,refetch:b,isStale:R,isFetched:N}=(0,a.I)(u);p[14]!==w||p[15]!==N||p[16]!==R||p[17]!==b?(m=async()=>!N||R?(await b()).data:w,p[14]=w,p[15]=N,p[16]=R,p[17]=b,p[18]=m):m=p[18];let j=m,I=w?.agents,A=w?.showLimit??!1;return p[19]!==j||p[20]!==C||p[21]!==I||p[22]!==A||p[23]!==S?(h={loading:C,disabled:S,availableAgents:I,showLimit:A,imperativelyFetch:j},p[19]=j,p[20]=C,p[21]=I,p[22]=A,p[23]=S,p[24]=h):h=p[24],h}function g(e){let t,n,a=(0,r.c)(6),{inputOnChange:s,inputRef:o}=e;a[0]!==s||a[1]!==o?(t={inputRef:o,fallbackEventHandler:s},a[0]=s,a[1]=o,a[2]=t):t=a[2];let l=(0,i.H)(t);return a[3]!==l||a[4]!==o?(n=e=>{o.current?.value&&l(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;l(t,[0,0],t.length)},a[3]=l,a[4]=o,a[5]=n):n=a[5],n}}}]);
//# sourceMappingURL=packages_agent-sessions_utils_generate-task-path_ts-packages_agent-sessions_utils_get-leading-e06b3d-d3d91a3828b6.js.map