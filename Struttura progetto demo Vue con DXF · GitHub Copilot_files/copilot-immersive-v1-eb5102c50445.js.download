"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["copilot-immersive-v1","dashboard-lists","vendors-node_modules_github_catalyst_lib_index_js-node_modules_swc_helpers_esm__class_static_-5988f50","vendors-node_modules_github_catalyst_lib_index_js-node_modules_swc_helpers_esm__class_static_-5988f51","vendors-node_modules_gsap_ScrambleTextPlugin_js-node_modules_motion_dist_es_framer-motion_dis-c68318"],{11891:(e,t,a)=>{var s,n,r,i=a(27744),o=a(70103),l=a(40548),c=a(74848),u=a(21728);function d(e){let t,a=(0,u.c)(2);return a[0]!==e.children?(t=(0,c.jsx)(c.Fragment,{children:e.children}),a[0]=e.children,a[1]=t):t=a[1],t}try{d.displayName||(d.displayName="App")}catch{}var m=a(10221),h=a(47865),p=a(83599),_=a(37294),D=a(96540),g=a(2635),f=a(60460),x=a(47789),C=a(25641),y=a(35247),v=a(41746),b=a(69599),j=a(42312),S=a(79634),E=a(91747),N=a(30721),I=a(94195),w=a(6007),F=a(18312),A=a(1747),T=a(78328),k=a(53419),R=a(97949),B=a(73077);let O={container:"ImmersiveDisabled-module__container--MY4uP",content:"ImmersiveDisabled-module__content--ZhI_r",footer:"ImmersiveDisabled-module__footer--PVto2",bannerContainer:"ImmersiveDisabled-module__bannerContainer--QHoXa"};function P(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:O.content,children:(0,c.jsx)(T.A,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:O.container,children:[e,(0,c.jsx)("div",{className:O.footer,children:(0,c.jsx)("div",{className:O.bannerContainer,children:(0,c.jsx)(R.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,c.jsx)(B.z,{as:"a",href:"https://github.com/settings/copilot",onClick:L,children:"Settings"})})})})]}),a[1]=t):t=a[1],t}function L(){return(0,k.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{P.displayName||(P.displayName="ImmersiveDisabled")}catch{}var M=a(3024),U=a(27359),z=a(38627),$=a(23657),V=a(84646),W=a(27912),G=a(88934),H=a(62828),q=a(21502),K=a(38598),Q=a(98678),J=a(79184),Y=a(8939),X=a(33592),Z=a(14521),ee=a(79064),et=a(68637),ea=a(75202),es=a(72303),en=a(17485),er=a(7812);function ei(){let e,t=(0,u.c)(2),a=(0,G.zy)().pathname;return t[0]!==a?(e=a.includes("/share/"),t[0]=a,t[1]=e):e=t[1],e}function eo(){let{threadID:e}=(0,G.g)();return e??null}function el(e,t){let a,s,n=(0,u.c)(17),r=(0,g.Pk)(),{currentReferences:i,context:o}=r,l=(0,X.b)(),{reloadQuota:c}=(0,J.xR)();n[0]!==r?(a=(0,es.W)(r),n[0]=r,n[1]=a):a=n[1];let d=a,{updateItem:m}=(0,A.xx)(),h=ei(),p=eo(),{activeCopilotSpaceId:_}=(0,en.C)();return n[2]!==o||n[3]!==i||n[4]!==e||n[5]!==_||n[6]!==h||n[7]!==l||n[8]!==t||n[9]!==c||n[10]!==r.customInstructions||n[11]!==r.model||n[12]!==r.skillOptions||n[13]!==d||n[14]!==p||n[15]!==m?(s=async(a,s,n,u)=>{let D=void 0!==n&&n;if(c("handle_message_submit"),""===a.trim())return;D&&l.clearAllReferences();let g=D?[]:i;for(let e of g){let a=(0,er.oR)({ref:e,messageIndex:t});null!=a&&m({...a,isUserEdited:!1})}let f={thread:d,content:a,references:[...g,...s||[]],topic:e.current,context:o,customInstructions:r.customInstructions,model:u||r.model,customCopilotId:_,skillOptions:r.skillOptions};if(h){let e=await l.continueSharedThread(p);if(e){let{thread:t,messages:a}=e,s=a.at(-1)?.id;await l.sendChatMessage({...f,thread:t,parentMessageId:s})}}else await l.sendChatMessage(f)},n[2]=o,n[3]=i,n[4]=e,n[5]=_,n[6]=h,n[7]=l,n[8]=t,n[9]=c,n[10]=r.customInstructions,n[11]=r.model,n[12]=r.skillOptions,n[13]=d,n[14]=p,n[15]=m,n[16]=s):s=n[16],s}var ec=a(70257),eu=a(84802);function ed(){let e=(0,g.A3)("messagesLoading")?.missingOrgIds,t=(0,g.A3)("ssoOrganizations"),a=e?.map(e=>{let a=t?.find(t=>t.id===String(e));return a?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:a||[]}}var em=a(38621);let eh={chatInputContainer:"Layout-module__chatInputContainer--ty1RG"};var ep=a(97315);let e_={notificationsSection:"NotificationsSection-module__notificationsSection--K0_2c",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--G0_MH",banner:"NotificationsSection-module__banner--a4C8F"},eD={container:"FreeChatExceededBanner-module__container--iiSMU"};function eg(){let e,t,a=(0,u.c)(3),{resetDate:s}=(0,J.xR)(),n=`You have reached your free plan limit. Limit resets on ${s}.`;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(B.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:ef,children:"Upgrade"}),a[0]=e):e=a[0];let r=e;return a[1]!==n?(t=(0,c.jsx)("div",{className:eD.container,children:(0,c.jsx)(R.l,{variant:"upsell",title:"Limit reached",description:n,hideTitle:!0,primaryAction:r})}),a[1]=n,a[2]=t):t=a[2],t}function ef(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{eg.displayName||(eg.displayName="FreeChatExceededBanner")}catch{}var ex=a(51213);let eC={container:"QuotaExceededBanner-module__container--ETlPC"};function ey(){let e,t,a,s,n=(0,u.c)(12),{isLicensedLimited:r,chatQuotaRemaining:i,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,J.xR)(),[d,m]=(0,D.useState)(ev);n[0]!==i||n[1]!==c||n[2]!==l?(e=()=>{if(y.W.premiumRequestQuotasEnabled&&void 0!==i){let e=ee.Jt.getQuotaExceededBannerFlag();y.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(ee.Jt.setQuotaExceededBannerFlag(!0),m(!0)):m(e):(ee.Jt.removeQuotaExceededBannerFlag(),m(!1))}},n[0]=i,n[1]=c,n[2]=l,n[3]=e):e=n[3],n[4]!==i||n[5]!==c||n[6]!==o||n[7]!==l?(t=[i,o,c,l],n[4]=i,n[5]=c,n[6]=o,n[7]=l,n[8]=t):t=n[8],(0,D.useEffect)(e,t),n[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{ee.Jt.setQuotaExceededBannerFlag(!1),m(!1)},n[9]=a):a=n[9];let h=a,p=d&&!r&&void 0!==i&&y.W.premiumRequestQuotasEnabled;return n[10]!==p?(s={visible:p,onDismiss:h},n[10]=p,n[11]=s):s=n[11],s}function ev(){return ee.Jt.getQuotaExceededBannerFlag()??!1}function eb(e){let t,a,s=(0,u.c)(9),{onDismiss:n}=e,{plan:r,canUpgradePlan:i,resetDate:o}=(0,J.xR)(),l=null,d=null;if(r===ex.UH.IndividualFree){let e;l=`You have used all requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(B.z,{as:"a",href:C.Zs,onClick:eE,children:"Upgrade"}),s[0]=e):e=s[0],d=e}else if(r===ex.UH.IndividualPro||r===ex.UH.IndividualProPlus)if(i){let e;l=`You have used all premium requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,s[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(B.z,{as:"a",href:C.Zs,onClick:eS,children:"Upgrade"}),s[1]=e):e=s[1],d=e}else{let e;l=`You have used all premium requests available this month. Enable additional requests to get more. Limit resets on ${o}.`,s[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(B.z,{as:"a",href:C.pF,onClick:ej,children:"Enable additional requests"}),s[2]=e):e=s[2],d=e}else(r===ex.UH.Business||r===ex.UH.Enterprise)&&(l=`You have reached your monthly limit for premium requests. Ask your admin to increase your limit. Limit resets on ${o}.`);return s[3]!==n?(t=()=>{n(),(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},s[3]=n,s[4]=t):t=s[4],s[5]!==l||s[6]!==d||s[7]!==t?(a=(0,c.jsx)("div",{className:eC.container,children:(0,c.jsx)(R.l,{variant:"upsell",title:"Limit reached",description:l,hideTitle:!0,primaryAction:d,onDismiss:t})}),s[5]=l,s[6]=d,s[7]=t,s[8]=a):a=s[8],a}function ej(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function eS(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function eE(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{eb.displayName||(eb.displayName="QuotaExceededBanner")}catch{}var eN=a(57352);let eI=y.W.premiumRequestQuotasEnabled?C.mF:10;function ew(){return ee.Jt.getMeterBannerFlag()??!1}function eF(e){let t,a,s,n,r,i=(0,u.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:d,canUpgradePlan:m,canPurchaseAdditionalQuota:h,premiumInteractionsQuotaExceeded:p,resetDate:_}=(0,J.xR)(),D=d?`You have used ${100-eI}% of your free requests this month.`:p?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${_}.`:`You have used ${100-eI}% of your premium responses this month. ${m?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;i[0]!==h||i[1]!==m||i[2]!==p?(t=m&&!p?(0,c.jsx)(B.z,{as:"a",href:C.Zs,onClick:eR,children:"Upgrade"}):h&&!p?(0,c.jsx)(B.z,{as:"a",href:C.pF,onClick:ek,children:"Enable additional requests"}):h&&(0,c.jsx)(B.z,{as:"a",href:C.MB,onClick:eT,children:"Manage billing"}),i[0]=h,i[1]=m,i[2]=p,i[3]=t):t=i[3];let g=t;i[4]!==h||i[5]!==m||i[6]!==p?(a=m&&h&&!p?(0,c.jsx)(eN.A,{as:"a",href:C.Zs,onClick:eA,children:"Enable additional requests"}):null,i[4]=h,i[5]=m,i[6]=p,i[7]=a):a=i[7];let f=a;return i[8]!==o?(s=()=>{o(),(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},i[8]=o,i[9]=s):s=i[9],i[10]!==D||i[11]!==g||i[12]!==f||i[13]!==s?(n=(0,c.jsx)(R.l,{variant:"info",title:"Limit reached soon",description:D,hideTitle:!0,primaryAction:g,secondaryAction:f,onDismiss:s}),i[10]=D,i[11]=g,i[12]=f,i[13]=s,i[14]=n):n=i[14],i[15]!==l||i[16]!==n?(r=(0,c.jsx)("div",{className:l,children:n}),i[15]=l,i[16]=n,i[17]=r):r=i[17],r}function eA(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function eT(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function ek(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function eR(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{eF.displayName||(eF.displayName="QuotaMeterBanner")}catch{}function eB(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(R.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function eO(e){let t,a=(0,u.c)(3),{customCopilot:s}=e,n=(0,G.Zp)();return a[0]!==s||a[1]!==n?(t=s&&(0,c.jsx)(R.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,c.jsx)(B.z,{as:"a",href:(0,$.Cb)(s),onClick:e=>{e.preventDefault(),n((0,$.Cb)(s))},children:"Edit"})}),a[0]=s,a[1]=n,a[2]=t):t=a[2],t}function eP(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(R.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function eL(e){let t,a,s=(0,u.c)(6),{errorMessages:n,onDismiss:r,className:i}=e,o=void 0===i?"":i;if(0===n.length)return null;if(s[0]!==n){let e=Array.from(new Set(n));t=1===e.length?e[0]:(0,c.jsxs)(c.Fragment,{children:["Errors during attachment upload:",(0,c.jsx)("ul",{style:{paddingLeft:"1.2em"},children:e.map(eM)})]}),s[0]=n,s[1]=t}else t=s[1];let l=t;return s[2]!==o||s[3]!==l||s[4]!==r?(a=(0,c.jsx)(R.l,{variant:"critical",description:l,title:"Error during attachment upload",hideTitle:!0,className:o,onDismiss:r}),s[2]=o,s[3]=l,s[4]=r,s[5]=a):a=s[5],a}function eM(e){return(0,c.jsx)("li",{children:e},e)}try{eB.displayName||(eB.displayName="SpaceDeletedBanner")}catch{}try{eO.displayName||(eO.displayName="SpaceSizeExceededBanner")}catch{}try{eP.displayName||(eP.displayName="ReferenceSizeExceededBanner")}catch{}try{(s=function(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(R.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(s.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{eL.displayName||(eL.displayName="UploadErrorBanner")}catch{}let eU={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function ez(e,t){let a,s,n=(0,u.c)(9),{isPending:r,data:i,error:o}=(0,V.Ao)(e),l=o instanceof V.i9,c=o instanceof V.OW;if(o&&!l&&!c)throw o;let d=r||l||c||!i?void 0:i;n[0]!==d||n[1]!==e||n[2]!==r||n[3]!==t?(a=function(e,t,a,s){if(e&&!s)return eU.spaceHomepage;if(a)return null;let n=!!t;return e&&!n?eU.customCopilotDisabled:(0,$.Hh)(t)?eU.customCopilotSizeExceeded:null}(e,d,r,t),n[0]=d,n[1]=e,n[2]=r,n[3]=t,n[4]=a):a=n[4];let m=a;return n[5]!==d||n[6]!==r||n[7]!==m?(s={variant:m,customCopilot:d,isLoading:r},n[5]=d,n[6]=r,n[7]=m,n[8]=s):s=n[8],s}try{(n=function(e){let t=(0,u.c)(4),{variant:a,customCopilot:s}=e;switch(a){case eU.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(eB,{}),t[0]=e):e=t[0],e}case eU.customCopilotSizeExceeded:{let e;return t[1]!==s?(e=(0,c.jsx)(eO,{customCopilot:s}),t[1]=s,t[2]=e):e=t[2],e}case eU.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(c.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}).displayName||(n.displayName="SpaceConversationBanner")}catch{}function e$(){let e,t,a=(0,u.c)(16),{ambientError:s,customCopilots:n,selectedThreadID:r}=(0,g.Pk)(),i=(0,Z.G)();a[0]!==i||a[1]!==n?(e=(0,$.JB)(n,i),a[0]=i,a[1]=n,a[2]=e):e=a[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:d}=(0,J.xR)(),{variant:m,customCopilot:h}=ez(i,r),p=(!m||o)&&!(d&&l),_=function(){let e,t,a,s,n=(0,u.c)(10),{isLicensedLimited:r,chatQuotaRemaining:i,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,J.xR)(),[d,m]=(0,D.useState)(ew);n[0]!==i||n[1]!==r||n[2]!==c||n[3]!==o||n[4]!==l?(e=()=>{if((r||y.W.premiumRequestQuotasEnabled)&&void 0!==i){let e=ee.Jt.getMeterBannerFlag();i>0&&i<=eI||!r&&o>0&&o<=eI||!r&&l&&c?null===e?(ee.Jt.setMeterBannerFlag(!0),m(!0)):m(e):(ee.Jt.removeMeterBannerFlag(),m(!1))}},t=[r,i,o,c,l],n[0]=i,n[1]=r,n[2]=c,n[3]=o,n[4]=l,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,D.useEffect)(e,t),n[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{ee.Jt.setMeterBannerFlag(!1),m(!1)},n[7]=a):a=n[7];let h=a,p=d&&void 0!==i&&(r||y.W.premiumRequestQuotasEnabled);return n[8]!==p?(s={visible:p,onDismiss:h},n[8]=p,n[9]=s):s=n[9],s}(),f=ey(),x=m===eU.customCopilotDisabled,C=m===eU.customCopilotSizeExceeded,v=p&&s,b=p&&f.visible,j=p&&_.visible,S=!p,E=x||C,N=x||C||v||b||j||S;return a[3]!==s||a[4]!==h||a[5]!==f||a[6]!==_||a[7]!==v||a[8]!==S||a[9]!==b||a[10]!==j||a[11]!==N||a[12]!==x||a[13]!==E||a[14]!==C?(t=N&&(0,c.jsxs)("section",{"aria-label":"Notifications",className:e_.notificationsSection,children:[E&&(0,c.jsxs)("div",{className:e_.spaceBannerContainer,children:[x&&(0,c.jsx)(eB,{}),C&&(0,c.jsx)(eO,{customCopilot:h})]}),v&&(0,c.jsx)(ep.P,{ambientError:s,useLargerBorderRadius:!0}),!E&&(0,c.jsxs)(c.Fragment,{children:[b&&(0,c.jsx)(eb,{onDismiss:f.onDismiss}),j&&(0,c.jsx)(eF,{className:e_.banner,onDismiss:_.onDismiss}),S&&(0,c.jsx)(eg,{})]})]}),a[3]=s,a[4]=h,a[5]=f,a[6]=_,a[7]=v,a[8]=S,a[9]=b,a[10]=j,a[11]=N,a[12]=x,a[13]=E,a[14]=C,a[15]=t):t=a[15],t}try{e$.displayName||(e$.displayName="NotificationsSection")}catch{}function eV(e){let t,a,s,n,r,i=(0,u.c)(23),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:d,chatInputRef:m,isNewConversation:h,onChatCommandChange:p,containerRef:_}=e,D=(0,g.Pk)(),{chatQuotaExceeded:f,isLicensedLimited:x}=(0,J.xR)(),{needsSsoAuthentication:C}=ed(),y=(0,Z.G)(),v=C&&y,b=(0,eu.G)(),j=function(){let e,t=(0,u.c)(2),{figmaAuthUrl:a}=(0,S.X)();if(a){if(t[0]!==a){let s=new URL(a,location.origin);s.searchParams.set("return_url",location.pathname+location.search),e=s.toString(),t[0]=a,t[1]=e}else e=t[1];return e}}();i[0]!==d?(t={messageIndex:d},i[0]=d,i[1]=t):t=i[1];let E=(0,H.I)(t),{versionedItems:N,items:I}=(0,A.xx)();if(i[2]!==I){for(let[,e]of(a=new Set,I))"file"===e.type&&a.add(e.name);i[2]=I,i[3]=a}else a=i[3];let w=a,F=!(x&&f)&&!v;return i[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(e$,{}),i[4]=s):s=i[4],i[5]!==F||i[6]!==m||i[7]!==_||i[8]!==w||i[9]!==j||i[10]!==l||i[11]!==h||i[12]!==b||i[13]!==d||i[14]!==p||i[15]!==E||i[16]!==y||i[17]!==D||i[18]!==o||i[19]!==N?(n=F&&(0,c.jsx)(ec.V,{modes:[{name:"Chat",supportsMCP:!y,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,c.jsx)(em.CommentIcon,{}),placeholder:D.usePlanningIntent&&!D.selectedThreadID?"What would you like to create?":"Ask anything"}],onNewThreadSelected:b,textAreaRef:o,chatInputRef:m,containerRef:_,onSubmit:l,isStreaming:!!D.streamingMessage,size:"large",showPlanningToggle:!D.selectedThreadID,onSelectReference:E,getReferenceVersion:e=>(0,er.wt)(e,d,N),existingFileNames:w,figmaAuthUrl:j,isNewConversation:h,onChatCommandChange:p,disableSavedUserMessage:!0}),i[5]=F,i[6]=m,i[7]=_,i[8]=w,i[9]=j,i[10]=l,i[11]=h,i[12]=b,i[13]=d,i[14]=p,i[15]=E,i[16]=y,i[17]=D,i[18]=o,i[19]=N,i[20]=n):n=i[20],i[21]!==n?(r=(0,c.jsxs)("div",{className:eh.chatInputContainer,children:[s,n]}),i[21]=n,i[22]=r):r=i[22],r}try{eV.displayName||(eV.displayName="ChatInputContainer")}catch{}let eW={root:"ConversationView-module__root--k4AIo",container:"ConversationView-module__container--XaY36",footer:"ConversationView-module__footer--xr6HB"};var eG=a(22116),eH=a(63262),eq=a(7104),eK=a(35673),eQ=a(87419),eJ=a(88392),eY=a(73952),eX=a(88431),eZ=a(6551),e0=a(26108),e1=a(34164),e2=a(46665),e3=a(59524),e4=a(88752),e6=a(32744),e5=a(82178),e7=a(94517),e8=a(73010),e9=a(11633),te=a(31958),tt=a(42983),ta=a(95896),ts=a(82151),tn=a(45244),tr=a(52940),ti=a(16946),to=a(72206),tl=a(98755),tc=a(29731),tu=a(83494),td=a(31223),tm=a(55009);let th={imageAttachment:"ChatImageAttachment-module__imageAttachment--Kt80m"},tp=e=>{let t,a,s,n,r=(0,u.c)(18),{messageId:i,src:o,alt:l,name:d,mode:m,squareView:h}=e,{openPreviewPane:p,openItem:_,updateItem:g}=(0,A.xx)(),f=`image:${o}`;r[0]!==f||r[1]!==_||r[2]!==p?(t=e=>{e.metaKey||e.ctrlKey||((0,k.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),_(f),p(),e.preventDefault())},r[0]=f,r[1]=_,r[2]=p,r[3]=t):t=r[3];let x=t;return r[4]!==l||r[5]!==f||r[6]!==i||r[7]!==d||r[8]!==o||r[9]!==g?(a=()=>{g({altText:l,id:f,messageId:i,name:d,type:"image",url:o})},s=[f,l,i,d,o,g],r[4]=l,r[5]=f,r[6]=i,r[7]=d,r[8]=o,r[9]=g,r[10]=a,r[11]=s):(a=r[10],s=r[11]),(0,D.useEffect)(a,s),r[12]!==l||r[13]!==m||r[14]!==x||r[15]!==h||r[16]!==o?(n=(0,c.jsx)("div",{className:th.imageAttachment,children:(0,c.jsx)(tm.o,{src:o,alt:l,onClick:x,mode:m,useOverlay:!0,squareView:h})}),r[12]=l,r[13]=m,r[14]=x,r[15]=h,r[16]=o,r[17]=n):n=r[17],n},t_=(0,D.memo)(tp);try{tp.displayName||(tp.displayName="ChatImageAttachmentUnmemoized")}catch{}try{t_.displayName||(t_.displayName="ChatImageAttachment")}catch{}let tD={chatMessage:"ChatMessage-module__chatMessage--mrG0f",user:"ChatMessage-module__user--D7H_T",editing:"ChatMessage-module__editing--yOYer",content:"ChatMessage-module__content--sWQll",imageGrid:"ChatMessage-module__imageGrid--yEdjI",imageRow:"ChatMessage-module__imageRow--NNiyM",references:"ChatMessage-module__references--Pi5OH",messageArea:"ChatMessage-module__messageArea--gxJTG",userMessage:"ChatMessage-module__userMessage--K0oH6",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--fjOXe",actions:"ChatMessage-module__actions--CS2_w",ai:"ChatMessage-module__ai--l6YpD",latest:"ChatMessage-module__latest--AGxtS",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--gN7Zq",avatar:"ChatMessage-module__avatar--hKTWx",sharedThreadActions:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w",skillExecutionText:"ChatMessage-module__skillExecutionText--Jbpi1",errorFallback:"ChatMessage-module__errorFallback--h1kRS"};var tg=a(37673);let tf={container:"ChatPagingComponent-module__container--HQpDa",disabledButton:"ChatPagingComponent-module__disabledButton--qwjg3",pageIndicator:"ChatPagingComponent-module__pageIndicator--hEqlR"};function tx(e){let t,a,s,n,r,i,o=(0,u.c)(23),{currentPage:l,totalPages:d,onPrev:m,onNext:h,isUserMessage:p}=e,_=(0,g.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(d<1)throw Error("totalPages must be greater than or equal to 1");if(l>d)throw Error("currentPage must be less than or equal to totalPages");let D=1===l||_,f=l===d||_,x=D?tf.disabledButton:"",C=f?tf.disabledButton:"";o[0]!==l||o[1]!==p||o[2]!==m||o[3]!==D?(t=()=>{if(D)return;let e=p?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,k.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),m(l-1)},o[0]=l,o[1]=p,o[2]=m,o[3]=D,o[4]=t):t=o[4];let y=t;o[5]!==l||o[6]!==p||o[7]!==f||o[8]!==h?(a=()=>{if(f)return;let e=p?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,k.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),h(l+1)},o[5]=l,o[6]=p,o[7]=f,o[8]=h,o[9]=a):a=o[9];let v=a;return o[10]!==y||o[11]!==x?(s=(0,c.jsx)(e0.K,{variant:"invisible","aria-label":"Previous response",onClick:y,icon:em.ChevronLeftIcon,className:x}),o[10]=y,o[11]=x,o[12]=s):s=o[12],o[13]!==l||o[14]!==d?(n=(0,c.jsxs)("span",{className:tf.pageIndicator,children:[l,"/",d]}),o[13]=l,o[14]=d,o[15]=n):n=o[15],o[16]!==v||o[17]!==C?(r=(0,c.jsx)(e0.K,{variant:"invisible","aria-label":"Next response",onClick:v,icon:em.ChevronRightIcon,className:C}),o[16]=v,o[17]=C,o[18]=r):r=o[18],o[19]!==s||o[20]!==n||o[21]!==r?(i=(0,c.jsxs)("div",{className:tf.container,"data-testid":"chat-paging-component",children:[s,n,r]}),o[19]=s,o[20]=n,o[21]=r,o[22]=i):i=o[22],i}try{tx.displayName||(tx.displayName="ChatPagingComponent")}catch{}let tC={container:"ClientConfirmations-module__container--rZT37",text:"ClientConfirmations-module__text--KBSlX"};function ty(e){let t,a,s,n=(0,u.c)(5),{authorName:r,clientConfirmations:i}=e,o=i?.[0],l=o?.state;return r=o?.userLogin||r,n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e1.$)("my-1",tC.container),n[0]=t):t=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(em.CheckIcon,{}),n[1]=a):a=n[1],n[2]!==r||n[3]!==l?(s=(0,c.jsx)("div",{className:t,children:(0,c.jsxs)("span",{className:tC.text,children:[a," ",r," ",l," the action"]})}),n[2]=r,n[3]=l,n[4]=s):s=n[4],s}try{ty.displayName||(ty.displayName="ClientConfirmations")}catch{}var tv=a(80947),tb=a(38447);let tj={container:"UserMessageEdit-module__container--wVL0b",input:"UserMessageEdit-module__input--cgkv0",inputContainer:"UserMessageEdit-module__inputContainer--iXdUm",actions:"UserMessageEdit-module__actions--GxMb3"},tS=e=>{let t,a,s,n,r,i,o,l,d,m,h,p,_,f=(0,u.c)(25),{messageContent:x,onSubmit:C,onCancel:y}=e,v=(0,g.A3)("isWaitingOnCopilot"),[b,j]=(0,D.useState)(x),S=(0,D.useRef)(null),E=(0,D.useRef)(null);f[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},f[0]=t):t=f[0],f[1]!==b?(a=[b],f[1]=b,f[2]=a):a=f[2],(0,D.useEffect)(t,a),f[3]!==b||f[4]!==x||f[5]!==y||f[6]!==C?(n=()=>{if(document.activeElement===E.current)return void s();(0,k.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),C(b)},s=()=>{y(),j(x),(0,k.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},f[3]=b,f[4]=x,f[5]=y,f[6]=C,f[7]=s,f[8]=n):(s=f[7],n=f[8]);let N=v?void 0:n;return f[9]!==s||f[10]!==N?(r={"copilot-chat:send-message":N,"github:cancel":s},f[9]=s,f[10]=N,f[11]=r):r=f[11],f[12]===Symbol.for("react.memo_cache_sentinel")?(i=(0,tc.G)("user-message-edit-box"),f[12]=i):i=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>j(e.target.value),f[13]=o):o=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},f[14]=l):l=f[14],f[15]!==b?(d=(0,c.jsx)("div",{className:tj.inputContainer,children:(0,c.jsx)("textarea",{ref:S,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:b,onChange:o,className:tj.input,autoFocus:!0,onInput:l,onFocus:tE})}),f[15]=b,f[16]=d):d=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(tu.cQ,{commandId:"github:cancel",ref:E,children:"Cancel"}),f[17]=m):m=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,tc.G)("user-message-edit-submit"),f[18]=h):h=f[18],f[19]!==v?(p=(0,c.jsxs)("div",{className:tj.actions,children:[m,(0,c.jsx)(tu.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...h,disabled:v,children:"Send"})]}),f[19]=v,f[20]=p):p=f[20],f[21]!==p||f[22]!==r||f[23]!==d?(_=(0,c.jsxs)(tu.tL,{commands:r,className:tj.container,...i,children:[d,p]}),f[21]=p,f[22]=r,f[23]=d,f[24]=_):_=f[24],_};try{tS.displayName||(tS.displayName="UserMessageEdit")}catch{}function tE(e){return e.target.setSelectionRange(0,e.target.value.length)}let tN=({excludeFeedback:e,inputRef:t,isLatestMessage:a,isLatestUserMessage:s,isFirstReply:n,isStreaming:r,parentMessage:i,messageIndex:o,autoOpenPreviewPane:l,...u})=>{let{message:d}=(0,e2.V)(),m=(0,D.useMemo)(()=>(0,C.H2)(d.references??[]),[d.references]),h=(0,X.b)(),p=(0,g.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),_=(0,to.tD)(),{items:f,versionedItems:x,openItem:y,removeItems:v,getOpenItems:b,openItemsBeforeSubthreadChange:j,setOpenItemsBeforeSubthreadChange:S,enableLoadingState:E,disableLoadingState:N}=(0,A.xx)(),I=(0,H.I)({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),w=(0,D.useCallback)(()=>{let e=_(),t=[],a=d;for(;null!=a;)t.push(a.id),a=void 0!==a.selectedChildIndex?e.messages[a.selectedChildIndex]:void 0;let s=new Map;for(let[e,t]of f){let a=s.get(t.messageId)||[];a.push(e),s.set(t.messageId,a)}let n=[];for(let e of t){let t=s.get(e);if(t)for(let e of t)n.push(e)}for(let[e,t]of f)t.messageId===ex.Wp&&n.push(e);let r=b();S([...r]),n.some(e=>r.includes(e))&&E(),v(n)},[f,E,_,d,b,v,S]),{author:F,handleConfirmationAction:T,handleRetryErrorMessage:R,handleRetryCopilotResponse:B,handleEditUserMessage:O,hasClientConfirmations:P,isAgentError:L,isAI:M,isCopilot:U,isError:z,isInterrupted:V,isUser:W,myRef:G,rendererConfig:q,renderFeedback:K,shouldShowMessageActions:Q,skillExecutionToUseForRespondingText:J,showRetryButton:Y}=(0,tr.p)({excludeFeedback:e,inputRef:t,isLatestMessage:a,isStreaming:r,removeOutdatedContentPreviewItems:w}),ee=ei(),et=p.editingMessage===d.id,ea=r&&!z&&!d.confirmations&&!Q&&a&&(!e||M),es=(i?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,en=i?.childMessageIndexes?.length||1,eo=en>=ti.L9,el=h.maxMessagesReached(),ec=en>1,ed=(0,D.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),eh=(0,D.useMemo)(()=>!!ed?.length,[ed]),ep=Q&&ee&&(U||ec),e_=(0,D.useRef)(null),eD=(0,td.M)(e=>{let t=x.get((0,er.oy)(e))?.at(-1);t&&y(t,!1)});(0,D.useEffect)(()=>{if(d.error?.type!=="publicCode")return;let e=[];for(let[t,a]of f)(a.messageId===d.id||a.messageId===e_.current)&&e.push(t);e.length>0&&v(e)},[d.error?.type,d.id,f,v]),(0,D.useEffect)(()=>{if(e_.current!==d.id&&a&&j.length>0){let e=setTimeout(()=>{for(let e of j)eD.current(e);N(),S([])});return()=>clearTimeout(e)}e_.current=d.id},[N,d.id,j,a,S,eD]);let eg=(0,D.useCallback)(()=>{let{messages:e}=_(),t=es-1;h.setSelectedMessage(e[i.childMessageIndexes[t-1]]),w()},[es,h,i,w,_]),ef=(0,D.useCallback)(()=>{let{messages:e}=_(),t=es-1;h.setSelectedMessage(e[i.childMessageIndexes[t+1]]),w()},[es,h,i,w,_]),eC=(0,eu.G)(),{model:ey,availableModels:ev}=(0,g.bP)("model","availableModels"),eb=ey;d.model&&(eb=(ev??[eb]).find(e=>e.id===d.model)||eb);let ej=()=>h.startEditingMessage(d.id),eS=(0,Z.G)(),eE=!!(0,$.JB)(p.customCopilots,eS),{selectedThreadID:eN}=(0,g.bP)("selectedThreadID"),{variant:eI}=ez(eS,eN),ew=eI===eU.customCopilotSizeExceeded,eF=eo||el||!!eS&&!eE||ew,eA=U&&r&&a&&!d.content,eT=(0,D.useCallback)(e=>{h.setWrapCodeLines(e)},[h]),ek=r?tv.G:tv.o;return(0,c.jsxs)("div",{className:(0,e1.$)("message-container",tD.chatMessage,W&&tD.user,M&&tD.ai,et?tD.editing:"",a&&tD.latest),ref:G,...(0,tc.G)(`message-${z?"error":r?"streaming":d.id}`),children:[M?(0,c.jsx)(e5.W,{isLoading:r&&a,isLoadingSkills:(d.skillExecutions??[]).length>0&&r&&""===d.content&&a,isError:z&&d.error?.type!=="agentUnauthorized",className:tD.avatar,mode:p.mode,isFirstMessage:n,message:d.content||"",createdAt:d.createdAt}):null,W&&eh&&(0,c.jsx)("div",{className:ed?.length===4?tD.imageGrid:tD.imageRow,children:ed?.map(e=>(0,c.jsx)(t_,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:p.mode,squareView:ed?.length>=2},e?.url||""))}),W&&d.references&&d.references.length>0&&(0,c.jsx)(tg.K,{className:tD.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!et&&(0,c.jsx)("div",{className:tD.content,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,e1.$)("js-snippet-clipboard-copy-unpositioned",tD.messageArea),children:[P?(0,c.jsx)(ty,{authorName:F.name,clientConfirmations:d.clientConfirmations??[]}):W?(0,c.jsx)(ts.R,{accessibleHeader:(0,C.hV)("You",d.content??""),className:tD.userMessage}):(0,c.jsxs)(c.Fragment,{children:[eA&&(0,c.jsx)(tn.b,{className:(0,e1.$)(tD.skillExecutionText,"mb-2"),children:`${(0,e9.WA)(J)}...`}),d.references&&d.references.length>0&&d.content&&(0,c.jsx)(e4.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{("draft-issue"===e.type||"draft-update-issue"===e.type)&&I(e,t)}}),"assistant"===d.role&&(m.length?(0,c.jsx)(e3.Q,{mcpToolResults:m}):null),!P&&d.content&&(0,c.jsx)(tI,{children:(0,c.jsx)(ek,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,C.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:p.wrapCodeLines,onWrapCodeLinesChange:eT,...q})}),z?(0,c.jsx)(e7.K,{manager:h}):null,L&&d.agentErrors&&(0,c.jsx)(e7.h,{errors:d.agentErrors}),V?(0,c.jsx)(te.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,M&&!eA&&(0,C.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,c.jsx)(e6.m,{confirmation:e,handleConfirmation:T,isLatestMessage:a},t))]}),ec&&!a&&(0,c.jsxs)("div",{className:tD.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[es,"/",en]})]}),ea&&(0,c.jsx)("div",{className:tD.actionsPlaceholder}),!Q&&Y&&(0,c.jsx)(tt.$,{handleRetryMessage:R,disabled:eF}),Q&&!ee&&(0,c.jsxs)(ta.M,{"aria-label":"Message tools",className:tD.actions,"data-testid":"nonshared-toolbar",children:[W&&(s?(0,c.jsx)(tu.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ej,icon:em.PencilIcon,disabled:eF,...(0,tc.G)("edit-message-button")}):(0,c.jsx)(e0.K,{variant:"invisible","aria-label":"Edit message",onClick:ej,icon:em.PencilIcon,disabled:eF,...(0,tc.G)("edit-message-button")})),U&&(0,c.jsxs)(c.Fragment,{children:[K&&(0,c.jsx)(e8.G,{iconSize:"medium"}),!!d.content&&!r&&(0,c.jsx)(tl.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,k.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),Y&&z?(0,c.jsx)(tt.$,{handleRetryMessage:R,disabled:eF}):M&&!z&&!d.clientSide&&(0,c.jsx)(tt.$,{handleRetryMessage:B,disabled:eF,showModelPicker:!!ev&&ev.length>1,model:eb,navigateToNewThread:eC}),ec&&(0,c.jsx)(tx,{currentPage:es,totalPages:en,onPrev:eg,onNext:ef,isUserMessage:W})]}),ep&&(0,c.jsxs)(ta.M,{"aria-label":"Message tools",className:tD.sharedThreadActions,"data-testid":"shared-toolbar",children:[U&&(0,c.jsx)(c.Fragment,{children:!!d.content&&!r&&(0,c.jsx)(tl.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,k.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),ec&&(0,c.jsx)(tx,{currentPage:es,totalPages:en,onPrev:eg,onNext:ef,isUserMessage:W})]})]})}),et&&(0,c.jsx)(tS,{messageContent:d.content||"",onSubmit:O,onCancel:()=>h.cancelEditingMessage()})]})},tI=({children:e})=>(0,c.jsx)(ea.t,{fallback:(0,c.jsx)(R.l,{className:tD.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),children:e}),tw=({message:e,messageIndex:t,isSharedMessage:a,isLatestMessage:s,...n})=>{let r=ei();return(0,c.jsxs)(e2.$,{message:e,children:[!(0,tb.E)(e)&&(0,c.jsx)(tN,{...n,messageIndex:t,isSharedMessage:a,isLatestMessage:s,isViewingSharedThread:r}),(0,c.jsx)(tb.p,{message:e,messageIndex:t,isViewingSharedThread:r,isSharedMessage:a,isLatestMessage:s})]})},tF=(0,D.memo)(tw),tA=e=>{let{message:t}=e,a=(0,g.Pk)(),s=(0,eY.CX)(a.messages,t),n="user"===t.role&&a.messages.findLast(e=>"user"===e.role)?.id===t.id;return(0,c.jsx)(tF,{...e,parentMessage:s,isLatestUserMessage:n})},tT=e=>(0,c.jsx)(tI,{children:(0,c.jsx)(tA,{...e})});try{tN.displayName||(tN.displayName="InnerChatMessage")}catch{}try{tI.displayName||(tI.displayName="MessageErrorBoundary")}catch{}try{tw.displayName||(tw.displayName="ChatMessageUnmemoized")}catch{}try{tF.displayName||(tF.displayName="ChatMessageMemoized")}catch{}try{tA.displayName||(tA.displayName="ChatMessageWrapped")}catch{}try{tT.displayName||(tT.displayName="ChatMessage")}catch{}var tk=a(81945);let tR={ConversationLoader:"ConversationLoader-module__ConversationLoader--kdZTM",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA",assistantAvatarSkeleton:"ConversationLoader-module__assistantAvatarSkeleton--f2f7n"};function tB(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:tR.ConversationLoader__userGroup,children:(0,c.jsx)(tk.O,{variant:"rounded",height:"20px",width:"random"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:tR.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,c.jsxs)("div",{className:tR.ConversationLoader__assistantGroup,children:[(0,c.jsx)(tk.O,{className:(0,e1.$)(tR.ConversationLoader__assistantAvatar,tR.assistantAvatarSkeleton),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(tO)]})]}),a[1]=t):t=a[1],t}function tO(e,t){return(0,c.jsx)(tk.O,{variant:"rounded",height:"20px",width:"random"},t)}try{tB.displayName||(tB.displayName="ConversationLoader")}catch{}var tP=a(33544),tL=a(26382);let tM={container:"ErrorState-module__container--FoMc5",icon:"ErrorState-module__icon--ykhTC",description:"ErrorState-module__description--zsnez",sso:"ErrorState-module__sso--Q4Ig1"};function tU(e){let t,a,s,n,r,i,o=(0,u.c)(13),{title:l,description:d,ssoOrgs:m}=e;o[0]!==m?(t=m&&m.length>0&&!(0,b.G7)("global_sso_banner"),o[0]=m,o[1]=t):t=o[1];let h=t;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),o[2]=a):a=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(tL.E.Visual,{children:(0,c.jsx)(em.AlertIcon,{size:"medium",className:tM.icon})}),o[3]=s):s=o[3],o[4]!==l?(n=(0,c.jsx)(tL.E.Heading,{as:"h2",children:l}),o[4]=l,o[5]=n):n=o[5],o[6]!==d||o[7]!==h||o[8]!==m?(r=(void 0!==d||h)&&(0,c.jsxs)("div",{className:tM.description,children:[(0,c.jsx)(tL.E.Description,{children:(0,c.jsx)("span",{children:d})}),(0,c.jsx)("div",{className:tM.sso,children:h&&(0,c.jsx)(tP.x,{protectedOrgs:m})})]}),o[6]=d,o[7]=h,o[8]=m,o[9]=r):r=o[9],o[10]!==n||o[11]!==r?(i=(0,c.jsxs)("div",{className:tM.container,children:[a,(0,c.jsxs)(tL.E,{border:!1,children:[s,n,r]})]}),o[10]=n,o[11]=r,o[12]=i):i=o[12],i}function tz(e){let t,a,s,n,r,i,o,l=(0,u.c)(9),{mode:d}=e,{helpUrl:m}=(0,S.X)();l[0]!==d?(t=()=>{d&&(0,k.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:d,message:"Shared thread no access"})},a=[d],l[0]=d,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,D.useEffect)(t,a),l[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),l[3]=s):s=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(tL.E.Visual,{children:(0,c.jsx)(em.LockIcon,{size:"medium",className:tM.icon})}),r=(0,c.jsx)(tL.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),l[4]=n,l[5]=r):(n=l[4],r=l[5]),l[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)(tL.E.Description,{children:(0,c.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),l[6]=i):i=l[6];let h=`${m}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return l[7]!==h?(o=(0,c.jsxs)("div",{className:tM.container,children:[s,(0,c.jsxs)(tL.E,{border:!1,children:[n,r,(0,c.jsxs)("div",{className:tM.description,children:[i,(0,c.jsx)(eN.A,{inline:!0,href:h,children:"Learn more"})]})]})]}),l[7]=h,l[8]=o):o=l[8],o}try{tU.displayName||(tU.displayName="ErrorState")}catch{}try{tz.displayName||(tz.displayName="SharedThreadForbidden")}catch{}let t$={container:"ImmersiveChat-module__container--h_Pmt",emptyContent:"ImmersiveChat-module__emptyContent--a_vXm",messageContent:"ImmersiveChat-module__messageContent--JE3f_",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--FbWSF",hidden:"ImmersiveChat-module__hidden--b_DNj"},tV=e=>{let t,a,s,n,r,i,o,l,d,m,h,p=(0,u.c)(42),{inputRef:_,isMobile:f}=e,{scrollToBottom:x}=(0,eq.b)(),v=(0,g.Pk)(),{isWaitingOnCopilot:b,messagesLoading:j,streamingMessage:S,messages:E}=v,{reloadQuota:N,premiumChatQuotaRemaining:I,isLicensedLimited:w}=(0,J.xR)();p[0]!==v?(a=(0,es.W)(v),t=(0,C.CB)(a),p[0]=v,p[1]=t,p[2]=a):(t=p[1],a=p[2]);let F=t,A=a?.sharedMessageID,{messages:T,groupedMessages:k}=(0,eJ.a)(v);p[3]!==T?(s=T.find(tQ)?.id,p[3]=T,p[4]=s):s=p[4];let R=s;p[5]!==x?(n=()=>x("instant"),r=[x],p[5]=x,p[6]=n,p[7]=r):(n=p[6],r=p[7]),(0,eX.N)(n,r);let B=(0,eZ.S)(v.streamingMessage);if(p[8]!==w||p[9]!==b||p[10]!==T.length||p[11]!==j.state||p[12]!==I||p[13]!==B||p[14]!==N||p[15]!==S?(i=()=>{T.length>0&&!w&&y.W.premiumRequestQuotasEnabled&&I<=C.aX&&!b&&"loaded"===j.state&&B&&!S&&N("quota_low_trigger")},o=[w,b,T.length,j.state,I,B,N,S],p[8]=w,p[9]=b,p[10]=T.length,p[11]=j.state,p[12]=I,p[13]=B,p[14]=N,p[15]=S,p[16]=i,p[17]=o):(i=p[16],o=p[17]),(0,D.useEffect)(i,o),p[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)("h1",{children:"Copilot Chat"}),p[18]=l):l=p[18],p[19]!==F?(d=(0,c.jsxs)("div",{className:"sr-only",children:[l,(0,c.jsx)("h2",{children:F})]}),p[19]=F,p[20]=d):d=p[20],p[21]!==E||p[22]!==R||p[23]!==k||p[24]!==_||p[25]!==f||p[26]!==b||p[27]!==A||p[28]!==S?.id){let e;p[30]!==E||p[31]!==R||p[32]!==k.length||p[33]!==_||p[34]!==f||p[35]!==b||p[36]!==A||p[37]!==S?.id?(e=(e,t)=>(0,c.jsx)(eH.i,{isLastGroup:t===k.length-1,children:e.map((a,s)=>{let n=-1===a.messageIndex?E.length:a.messageIndex,r=t===k.length-1&&s===e.length-1;return(0,c.jsx)(tT,{isLatestMessage:r,isSharedMessage:a.id===A,isFirstReply:a.id===R,message:a,messageIndex:n,inputRef:_,isStreaming:a.id===S?.id||r&&b,autoOpenPreviewPane:!f},s)})},t),p[30]=E,p[31]=R,p[32]=k.length,p[33]=_,p[34]=f,p[35]=b,p[36]=A,p[37]=S?.id,p[38]=e):e=p[38],m=k.map(e),p[21]=E,p[22]=R,p[23]=k,p[24]=_,p[25]=f,p[26]=b,p[27]=A,p[28]=S?.id,p[29]=m}else m=p[29];return p[39]!==d||p[40]!==m?(h=(0,c.jsxs)("div",{children:[d,m]}),p[39]=d,p[40]=m,p[41]=h):h=p[41],h},tW=()=>{let e,t,a,s=(0,u.c)(4),{mode:n}=(0,g.Pk)();return s[0]!==n?(e=()=>{(0,k.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:n,message:"Conversation failed to load"})},t=[n],s[0]=n,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,D.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(tU,{title:"Conversation failed to load",description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(eN.A,{href:"",onClick:tJ,inline:!0,children:"Reload the page"})," ","to try again."]})}),s[3]=a):a=s[3],a},tG=()=>{let e,t,a,s=(0,u.c)(4),{mode:n}=(0,g.Pk)();return s[0]!==n?(e=()=>{(0,k.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:n,message:"Access denied"})},t=[n],s[0]=n,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,D.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(tU,{title:"Access denied",description:"You do not have permission to view this."}),s[3]=a):a=s[3],a},tH=e=>{let t,a,s,n=(0,u.c)(9),{isSharedThread:r}=e,{mode:i}=(0,g.Pk)(),{needsSsoAuthentication:o,ssoOrgNames:l}=ed(),d=(0,Z.G)(),m=r?"Shared conversation not found":"Conversation not found",h=o?`This URL may be incorrect, you may be signed out of your organization or the ${d?"space":"conversation"} may have been deleted.`:"This URL may be incorrect or the conversation may have been deleted.";return n[0]!==r||n[1]!==i||n[2]!==m?(t=()=>{(0,k.BI)("dotcom_chat.activate.error",{target:r?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:i,message:m})},a=[i,r,m],n[0]=r,n[1]=i,n[2]=m,n[3]=t,n[4]=a):(t=n[3],a=n[4]),(0,D.useEffect)(t,a),n[5]!==h||n[6]!==l||n[7]!==m?(s=(0,c.jsx)(tU,{title:m,description:h,ssoOrgs:l}),n[5]=h,n[6]=l,n[7]=m,n[8]=s):s=n[8],s},tq=e=>{let t,a,s,n,r,i=(0,u.c)(20),{inputRef:o,isMobile:l}=e,d=(0,g.Pk)(),{messagesLoading:m,threadsLoading:h,messages:p,showTopicPicker:_,pendingFirstMessage:D}=d,f=(0,es.W)(d),{textAreaRef:x}=(0,eQ.Y)(o),C=ei(),y=null,v=null;if((0,eY.B)(p,D).length&&"loaded"===m.state){let e;i[0]!==l||i[1]!==x?(e=(0,c.jsx)(tV,{inputRef:x,isMobile:l}),i[0]=l,i[1]=x,i[2]=e):e=i[2],y=e}else if(("loading"===m.state||"pending"===m.state)&&d.selectedThreadID&&!_){let e;i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(tB,{}),i[3]=e):e=i[3],y=e}else if("error"===m.state&&d.selectedThreadID&&(null===f&&"error"!==h.state||m.notFound))if(C&&d.fetchSharedThreads?.ok===!1&&(403===d.fetchSharedThreads.status||401===d.fetchSharedThreads.status)){let e;i[4]!==d.mode?(e=(0,c.jsx)(tz,{mode:d.mode}),i[4]=d.mode,i[5]=e):e=i[5],v=e}else{let e;i[6]!==C?(e=(0,c.jsx)(tH,{isSharedThread:C}),i[6]=C,i[7]=e):e=i[7],v=e}else if("error"===m.state||"error"===h.state){let e;i[8]!==h.status?(e=403===h.status?(0,c.jsx)(tG,{}):(0,c.jsx)(tW,{}),i[8]=h.status,i[9]=e):e=i[9],v=e}let b=(0,j.U)();return i[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(tK,{}),i[10]=t):t=i[10],i[11]!==v?(a=v&&(0,c.jsx)("div",{className:t$.emptyContent,children:v}),i[11]=v,i[12]=a):a=i[12],i[13]!==y?(s=y&&(0,c.jsxs)("div",{className:t$.messageContent,children:[y,(0,c.jsx)(eK.Cb,{})]}),i[13]=y,i[14]=s):s=i[14],i[15]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eK.zc,{}),i[15]=n):n=i[15],i[16]!==b||i[17]!==a||i[18]!==s?(r=(0,c.jsxs)(eq.$,{className:t$.container,containerRef:b,children:[t,a,s,n]}),i[16]=b,i[17]=a,i[18]=s,i[19]=r):r=i[19],r},tK=()=>{let e,t,a,s=(0,u.c)(7),{isScrolledUp:n,scrollToBottom:r}=(0,eq.b)(),i=!n&&t$.hidden;return s[0]!==i?(e=(0,e1.$)(t$.scrollToBottomButton,i),s[0]=i,s[1]=e):e=s[1],s[2]!==r?(t=()=>r("smooth"),s[2]=r,s[3]=t):t=s[3],s[4]!==e||s[5]!==t?(a=(0,c.jsx)(e0.K,{"aria-label":"Scroll to bottom",className:e,onClick:t,icon:em.ArrowDownIcon,tooltipDirection:"n"}),s[4]=e,s[5]=t,s[6]=a):a=s[6],a};try{tV.displayName||(tV.displayName="Messages")}catch{}try{tW.displayName||(tW.displayName="FailedToLoadThreadError")}catch{}try{tG.displayName||(tG.displayName="AccessDeniedError")}catch{}try{tH.displayName||(tH.displayName="NotFoundError")}catch{}try{tq.displayName||(tq.displayName="ImmersiveChat")}catch{}try{tK.displayName||(tK.displayName="ScrollToBottomButton")}catch{}function tQ(e){return"assistant"===e.role}function tJ(e){e.preventDefault(),window.location.reload()}var tY=a(97189),tX=a(93412),tZ=a(17593),t0=a(20111),t1=a(74807),t2=a(52870);function t3(e){let t,a,s,n,r,i=(0,u.c)(12),{className:o}=e,[l,d]=(0,D.useState)(t1.L.Static),[m,h]=(0,D.useState)(!0),{safeSetTimeout:p}=(0,t2.A)();return i[0]!==p?(t=()=>{let e=p(()=>{ee.Jt.getAnimationFlag()?(d(t1.L.Activate),h(!1)):(d(t1.L.Idle),h(!0))},1e3);return()=>clearTimeout(e)},a=[p],i[0]=p,i[1]=t,i[2]=a):(t=i[1],a=i[2]),(0,D.useEffect)(t,a),i[3]!==l?(s=()=>{l===t1.L.Activate&&(d(t1.L.Idle),h(!0),ee.Jt.removeAnimationFlag())},i[3]=l,i[4]=s):s=i[4],i[5]!==l||i[6]!==m||i[7]!==s?(n=(0,c.jsx)(t1.N,{animationType:l,onAnimationEnd:s,loopAnimation:m,size:48}),i[5]=l,i[6]=m,i[7]=s,i[8]=n):n=i[8],i[9]!==o||i[10]!==n?(r=(0,c.jsx)("div",{className:o,children:n}),i[9]=o,i[10]=n,i[11]=r):r=i[11],r}try{t3.displayName||(t3.displayName="CopilotEmptyStateAnimation")}catch{}var t4=a(95772);let t6={scrollContainer:"NewConversation-module__scrollContainer--pS_a1",container:"NewConversation-module__container--fMmET",banner:"NewConversation-module__banner--binRv",main:"NewConversation-module__main--P10kO",withTaskList:"NewConversation-module__withTaskList--iIEmp",content:"NewConversation-module__content--cXGzS",innerContainer:"NewConversation-module__innerContainer--u29kY",inputAndStartersContainer:"NewConversation-module__inputAndStartersContainer--jSg3S",commandStartersContainer:"NewConversation-module__commandStartersContainer--noJst",footer:"NewConversation-module__footer--HIKDz",agentListContainer:"NewConversation-module__agentListContainer--uNTRm"},t5={banner:"ChatInputBanners-module__banner--itq1j"},t7={trial:{title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",dismissTarget:"TRIAL_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:[]},pro_plus:{title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",dismissTarget:"PRO_PLUS_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:["trial"]}};function t8(e){let t,a,s,n=(0,u.c)(10),{skuType:r,onDismiss:i,className:o}=e,l=t7[r];return l?(n[0]!==l.dismissTarget||n[1]!==i?(t=()=>{i(),(0,k.BI)("dotcom_chat.activate",{target:l.dismissTarget,mode:"immersive"})},n[0]=l.dismissTarget,n[1]=i,n[2]=t):t=n[2],n[3]!==l.description||n[4]!==l.title||n[5]!==t?(a=(0,c.jsx)(R.l,{variant:"success",title:l.title,description:l.description,hideTitle:!0,onDismiss:t}),n[3]=l.description,n[4]=l.title,n[5]=t,n[6]=a):a=n[6],n[7]!==o||n[8]!==a?(s=(0,c.jsx)("div",{className:o,children:a}),n[7]=o,n[8]=a,n[9]=s):s=n[9],s):null}try{t8.displayName||(t8.displayName="SkuSuccessBanner")}catch{}let t9=["pro_plus","trial"],ae=()=>{let e=Object.create(null);for(let t of t9)e[t]=ee.Jt.getSkuSuccessBannerFlag(t)??!1;return e};function at(){let e,t,a,s=(0,u.c)(11),n=(0,J.xR)().licenseType,{activeSku:r,visibility:i}=function(){let e,t,a,s=(0,u.c)(7),[n,r]=(0,D.useState)(ae);s[0]!==n?(e=t9.find(e=>n[e])||null,s[0]=n,s[1]=e):e=s[1];let i=e;if(s[2]!==i){for(let e of(t={},t9)){let a=t7[e],s=new Set([e,...a?.clearFlagsOnDismiss??[]]);t[e]={visible:i===e,onDismiss:()=>{for(let e of s)ee.Jt.removeSkuSuccessBannerFlag(e);r(e=>{let t={...e};for(let e of s)t[e]=!1;return t})}}}s[2]=i,s[3]=t}else t=s[3];return s[4]!==i||s[5]!==t?(a={activeSku:i,visibility:t},s[4]=i,s[5]=t,s[6]=a):a=s[6],a}(),o="trial"===r&&n===ex.mF.LicensedFull,l=r&&"trial"!==r;return s[0]!==r||s[1]!==o||s[2]!==i?(e=o&&i.trial&&(0,c.jsx)(t8,{skuType:r,className:t5.banner,onDismiss:i.trial.onDismiss}),s[0]=r,s[1]=o,s[2]=i,s[3]=e):e=s[3],s[4]!==r||s[5]!==l||s[6]!==i?(t=l&&i[r]&&(0,c.jsx)(t8,{skuType:r,className:t5.banner,onDismiss:i[r].onDismiss}),s[4]=r,s[5]=l,s[6]=i,s[7]=t):t=s[7],s[8]!==e||s[9]!==t?(a=(0,c.jsxs)(c.Fragment,{children:[e,t]}),s[8]=e,s[9]=t,s[10]=a):a=s[10],a}try{at.displayName||(at.displayName="NewConversationBanners")}catch{}let aa=e=>{switch(e){case"displayed":(0,k.BI)("view",{category:"universe_banner",action:"banner_view",label:"banner_universe_loggedIn"});break;case"clicked":(0,k.BI)("click",{category:"universe_banner",action:"banner_click_openModal",label:"banner_universe_loggedIn"});break;case"dismissed":(0,k.BI)("click",{category:"universe_banner",action:"banner_dismiss",label:"banner_universe_loggedIn"})}},as=(e,t)=>{switch(e){case"opened":(0,k.BI)("view",{category:"universe_modal",action:"modal_view",label:"modal_universe_loggedIn"});break;case"closed":(0,k.BI)("click",{category:"universe_modal",action:"modal_nav_click",label:"modal_universe_loggedIn"});break;case"tab_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_nav_click",label:"modal_universe_loggedIn",navItem:t?.tabName});break;case"main_cta_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_primary_cta_left_click",label:"modal_universe_loggedIn"});break;case"see_all_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_seeAllAnnouncements_left_click",label:"modal_universe_loggedIn"});break;case"tab_cta_1_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_primary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"primary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_cta_2_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_secondary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"secondary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_link_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"learn_more_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_description_link_clicked":(0,k.BI)("click",{category:"universe_modal",action:"modal_description_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"link",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex})}};var an=a(2702);function ar(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,f,x,C,v=(0,u.c)(39),{textAreaRef:j,handleUserSubmit:S,nextMessageIndex:N}=e,I=(0,X.b)(),w=(0,g.Pk)();v[0]!==w?(t=(0,es.W)(w),v[0]=w,v[1]=t):t=v[1];let F=t;v[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,b.G7)("copilot_chat_cca_request_cta"),v[2]=a):a=v[2];let A=a,R=(0,D.useRef)(null),[B,O]=(0,D.useState)(null),P=(0,D.useRef)(null);v[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,b.G7)("hyperspace_nudges_universe25")?"universe25":"",v[3]=s):s=v[3];let L=s,{plan:M}=(0,J.xR)();v[4]!==F||v[5]!==I||v[6]!==w?(n=e=>{let t=0===w.messages.length?F:(0,es.W)(w),a=w.currentUserLogin||"",s=e.message.replaceAll("$$USERNAME$$",a);I.sendChatMessage({thread:t,content:s,references:w.currentReferences,topic:w.currentTopic,context:w.context,customInstructions:w.customInstructions,model:w.model}),(0,k.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:w.currentTopic?.name,mode:"immersive",starterId:e.id})},v[4]=F,v[5]=I,v[6]=w,v[7]=n):n=v[7];let U=n,z=(0,E.u)("copilot_swe_agent_progress_commands")&&w.agentsEnabled,$=(0,E.u)("copilot_agent_task_list_v2");v[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("div",{className:t6.banner,children:(0,c.jsx)(at,{})}),v[8]=r):r=v[8];let V=z&&$;v[9]!==V?(i=(0,e1.$)(t6.main,{[t6.withTaskList]:V}),v[9]=V,v[10]=i):i=v[10],v[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),v[11]=o):o=v[11];let W=(0,E.u)("copilot_pro_plus_animation")?(0,c.jsx)(t3,{}):(0,c.jsx)(T.A,{hidden:!0});return v[12]!==S||v[13]!==N||v[14]!==j?(l=(0,c.jsx)(eV,{chatInputRef:P,textAreaRef:j,handleUserSubmit:S,nextMessageIndex:N,onChatCommandChange:O,isNewConversation:!0,containerRef:R}),v[12]=S,v[13]=N,v[14]=j,v[15]=l):l=v[15],v[16]!==B||v[17]!==U||v[18]!==j?(d=y.W.chatInputCommands?(0,c.jsx)("div",{className:t6.commandStartersContainer,children:(0,c.jsx)(t4.A,{chatCommand:B,chatInputRef:P,textAreaRef:j,containerRef:R})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(an.X,{taskStarterEnabled:A,handleStarterEntrySelect:U,startersLocationId:"new_conversation"})}),v[16]=B,v[17]=U,v[18]=j,v[19]=d):d=v[19],v[20]!==l||v[21]!==d||v[22]!==W?(m=(0,c.jsxs)("div",{className:t6.inputAndStartersContainer,children:[W,l,d]}),v[20]=l,v[21]=d,v[22]=W,v[23]=m):m=v[23],v[24]!==M?(h=L&&(0,c.jsx)(t0.A,{id:"copilot-immersive-v1",announcementId:L,shouldShowTabCtas:!!(M&&M!==ex.UH.IndividualFree),shouldShowMainCta:!!(!M||M===ex.UH.IndividualFree),useLocalStorage:!0,onBannerEvent:aa,onModalEvent:as}),v[24]=M,v[25]=h):h=v[25],v[26]!==z||v[27]!==$?(p=z&&$&&(0,c.jsx)("div",{className:t6.agentListContainer,children:(0,c.jsx)(tY.Fn,{children:(0,c.jsx)(tZ.f,{showViewAll:!0,title:"Recent agents",initialResultCount:5})})}),v[26]=z,v[27]=$,v[28]=p):p=v[28],v[29]!==m||v[30]!==h||v[31]!==p?(_=(0,c.jsx)("div",{className:t6.content,children:(0,c.jsxs)("div",{className:t6.innerContainer,children:[o,m,h,p]})}),v[29]=m,v[30]=h,v[31]=p,v[32]=_):_=v[32],v[33]!==_||v[34]!==i?(f=(0,c.jsx)("div",{className:i,children:_}),v[33]=_,v[34]=i,v[35]=f):f=v[35],v[36]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)("div",{className:t6.footer,children:(0,c.jsx)(tX.h,{})}),v[36]=x):x=v[36],v[37]!==f?(C=(0,c.jsx)("div",{className:t6.scrollContainer,children:(0,c.jsxs)("div",{className:t6.container,children:[r,f,x]})}),v[37]=f,v[38]=C):C=v[38],C}try{ar.displayName||(ar.displayName="NewConversation")}catch{}let ai={container:"QuotaExceededEmptyState-module__container--WOGM3",main:"QuotaExceededEmptyState-module__main--kc9CL",copy:"QuotaExceededEmptyState-module__copy--S4GE7",heading:"QuotaExceededEmptyState-module__heading--mfW4i",description:"QuotaExceededEmptyState-module__description--JR0Bv",footer:"QuotaExceededEmptyState-module__footer--ckJFW"};function ao(){let e,t,a,s,n,r,i,o,l,d,m,h,p=(0,u.c)(21),{resetDate:_,eligibleForTrial:g}=(0,J.xR)(),[f,x]=(0,D.useState)(!1),[C,y]=(0,D.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{x(!0),y(!0)},p[0]=e):e=p[0];let v=e;p[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{x(!1)},p[1]=t):t=p[1];let b=t;p[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{y(!1)},p[2]=a):a=p[2];let j=a,S=f||C;p[3]!==f||p[4]!==S?(s=S?(0,c.jsx)(t1.N,{animationType:"jumpWiggle",loopAnimation:f,size:96,onAnimationEnd:j}):(0,c.jsx)(t1.N,{animationType:"static",loopAnimation:!1,size:96}),p[3]=f,p[4]=S,p[5]=s):s=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)("h2",{className:ai.heading,children:"You\u2019ve reached your free plan limit"}),p[6]=n):n=p[6],p[7]!==_?(r=(0,c.jsxs)("p",{className:ai.description,children:["Your limits will reset on ",_,"."]}),p[7]=_,p[8]=r):r=p[8];let E=g?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return p[9]!==E?(i=(0,c.jsx)(B.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onMouseEnter:v,onMouseLeave:b,onClick:al,children:E}),p[9]=E,p[10]=i):i=p[10],p[11]!==r||p[12]!==i?(o=(0,c.jsxs)("div",{className:ai.copy,children:[n,r,i]}),p[11]=r,p[12]=i,p[13]=o):o=p[13],p[14]!==s||p[15]!==o?(l=(0,c.jsxs)("div",{className:ai.main,children:[s,o]}),p[14]=s,p[15]=o,p[16]=l):l=p[16],p[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)("strong",{children:"Part of an organization?"}),p[17]=d):d=p[17],p[18]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsxs)("div",{className:ai.footer,children:[d,(0,c.jsxs)("span",{children:["Upgrade to"," ",(0,c.jsx)(eN.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),p[18]=m):m=p[18],p[19]!==l?(h=(0,c.jsxs)("div",{className:ai.container,children:[l,m]}),p[19]=l,p[20]=h):h=p[20],h}function al(){(0,k.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{ao.displayName||(ao.displayName="QuotaExceededEmptyState")}catch{}function ac(e){let t,a,s,n,r,i,o,l=(0,u.c)(27),{isMobile:d,textAreaRef:m}=e,h=(0,g.Pk)(),p=(0,X.b)(),f=(0,_.Kf)(),{messages:x,messagesLoading:C,threadsLoading:v}=h,{chatQuotaExceeded:j}=(0,J.xR)(),S=(0,Z.G)();l[0]!==S||l[1]!==h.customCopilots?(t=(0,$.JB)(h.customCopilots,S),l[0]=S,l[1]=h.customCopilots,l[2]=t):t=l[2];let E=!!t,{variant:N}=ez(S,h.selectedThreadID),I=N===eU.customCopilotSizeExceeded,w=(!N||E)&&!I,F=(0,D.useRef)(h.currentTopic),A=ei(),T=!h.selectedThreadID&&ee.Jt.getEntrypointMessage();e:{if(h.selectedThreadID||h.pendingFirstMessage||T||S||j||"error"===C.state||"error"===v.state){a=!1;break e}a=!0}let k=a,R=x.length,B=el(F,R);return l[3]!==h.currentTopic?(s=()=>{F.current=h.currentTopic},n=[h.currentTopic],l[3]=h.currentTopic,l[4]=s,l[5]=n):(s=l[4],n=l[5]),(0,D.useEffect)(s,n),l[6]!==j||l[7]!==B||l[8]!==p?(r=()=>{let e=ee.Jt.getEntrypointMessage();if(e&&!j){ee.Jt.setEntrypointMessage(null);let t=(0,b.G7)("copilot_chat_action_logs_redirect")&&e.message===(0,et.oo)(void 0,!0);e.model&&p.selectModel(e.model),setTimeout(()=>{B(e.message,e.references,t,e.model)},100)}},l[6]=j,l[7]=B,l[8]=p,l[9]=r):r=l[9],l[10]!==j||l[11]!==B||l[12]!==p||l[13]!==h.currentReferences?(i=[B,j,h.currentReferences,p],l[10]=j,l[11]=B,l[12]=p,l[13]=h.currentReferences,l[14]=i):i=l[14],(0,D.useEffect)(r,i),l[15]!==j||l[16]!==B||l[17]!==d||l[18]!==A||l[19]!==R||l[20]!==k||l[21]!==w||l[22]!==h.selectedThreadID||l[23]!==h.sharedThreadChannel||l[24]!==m||l[25]!==f?(o=(0,c.jsx)("div",{className:eW.root,children:!h.selectedThreadID&&j?(0,c.jsx)(ao,{}):f.traceInfo?.visible?(0,c.jsx)(Y.k,{sharedThreadChannel:h.sharedThreadChannel,threadId:h.selectedThreadID}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:eW.container,children:k?(0,c.jsx)(ar,{textAreaRef:m,handleUserSubmit:B,nextMessageIndex:R}):(0,c.jsx)(tq,{inputRef:m,isMobile:d})}),(!A||y.W.copilotDuplicateThread)&&!k&&(0,c.jsxs)("div",{className:eW.footer,children:[!w&&(0,c.jsx)(e$,{}),w&&(0,c.jsx)(eV,{textAreaRef:m,handleUserSubmit:B,nextMessageIndex:R})]})]})}),l[15]=j,l[16]=B,l[17]=d,l[18]=A,l[19]=R,l[20]=k,l[21]=w,l[22]=h.selectedThreadID,l[23]=h.sharedThreadChannel,l[24]=m,l[25]=f,l[26]=o):o=l[26],o}function au(e){let t,a=(0,u.c)(2);return a[0]!==e?(t=(0,c.jsx)(ad,{children:(0,c.jsx)(ac,{...e})}),a[0]=e,a[1]=t):t=a[1],t}function ad(e){let t,a,s,n,r,i=(0,u.c)(8),{selectedThreadID:o}=(0,g.bP)("selectedThreadID"),[l,d]=(0,D.useState)(0),m=(0,D.useRef)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{m.current=!0},i[0]=t):t=i[0];let h=t;return i[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{y.W.stableConversationView&&m.current&&(d(am),m.current=!1)},i[1]=a):a=i[1],i[2]!==o?(s=[o],i[2]=o,i[3]=s):s=i[3],(0,D.useEffect)(a,s),i[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eG.x,{regionName:"This conversation"}),i[4]=n):n=i[4],i[5]!==l||i[6]!==e.children?(r=(0,c.jsx)(ea.t,{fallback:n,onError:h,children:e.children},l),i[5]=l,i[6]=e.children,i[7]=r):r=i[7],r}function am(e){return e+1}try{ac.displayName||(ac.displayName="ConversationViewInner")}catch{}try{au.displayName||(au.displayName="ConversationView")}catch{}try{ad.displayName||(ad.displayName="ConversationViewErrorBoundary")}catch{}var ah=a(40683),ap=a(76143),a_=a(79684),aD=a(27042),ag=a(5524),af=a(26607),ax=a(21373),aC=a(40961),ay=a(93380);let av={container:"Header-module__container--x6PHc",leftControls:"Header-module__leftControls--LaO7p",rightControls:"Header-module__rightControls--yQ1vI",hideOnMobile:"Header-module__hideOnMobile--OHZqN"};var ab=a(49851);let aj={newChatButtonContainer:"NewChatButton-module__newChatButtonContainer--JlmNy"};function aS(){let e,t,a=(0,u.c)(4),s=(0,eu.G)();a[0]!==s?(e=async()=>{await s({clearTopic:!0,includeThreads:!1})},a[0]=s,a[1]=e):e=a[1];let n=e;return a[2]!==n?(t=(0,c.jsx)("div",{className:aj.newChatButtonContainer,children:(0,c.jsx)(e0.K,{icon:ab.KJ,onClick:n,"aria-label":"New chat"})}),a[2]=n,a[3]=t):t=a[3],t}try{aS.displayName||(aS.displayName="NewChatButton")}catch{}var aE=a(61767);let aN=()=>{let e=(0,g.Pk)(),t=(0,Z.G)(),a=(0,$.JB)(e.customCopilots,t),s=(0,$.mM)(),n=(0,$.FQ)(),r=s||a,i=!n&&a;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];r&&e.push({label:"Spaces",href:C.VR}),i&&a&&e.push({label:a.name,href:(0,$.Cb)(a)}),(0,aE.FC)(e)}}};var aI=a(79575),aw=a(11083),aF=a(15220);let aA={container:"TraceButtons-module__container--QKBPy"};function aT(){let e,t,a,s,n,r,i,o,l,d,m,h,p,x=(0,u.c)(37),C=(0,f.y)(),{traceInfo:v}=(0,_.Kf)(),b=function(){let e,t=(0,u.c)(2),a=(0,g.bP)("selectedThreadID","threads");return t[0]!==a?(e=(0,es.W)(a),t[0]=a,t[1]=e):e=t[1],e}(),j=ei(),[S,E]=(0,D.useState)(!1),[N,I]=(0,ee.iI)("getTracingRequestedFlag","setTracingRequestedFlag"),w=y.W.requestTracing&&(0,aw.X)();x[0]!==j||x[1]!==b?.id||x[2]!==v?.traces?(e=()=>(0,aI.$1)(v?.traces,b?.id,j),x[0]=j,x[1]=b?.id,x[2]=v?.traces,x[3]=e):e=x[3],v?.traces,b?.id,x[4]!==e?(t=e(),x[4]=e,x[5]=t):t=x[5];let F=t,A=!!v?.visible;x[6]!==A||x[7]!==C?(a=()=>{C.showTraceDisplay(!A)},x[6]=A,x[7]=C,x[8]=a):a=x[8];let T=a;x[9]!==I||x[10]!==N?(s=()=>{N?I(!1):E(!0)},x[9]=I,x[10]=N,x[11]=s):s=x[11];let k=s;if(!w)return null;let R=N?"danger":void 0;x[12]!==R?(n=(0,c.jsx)(aD.W.Button,{"aria-label":"Tracing",icon:em.ToolsIcon,variant:R}),x[12]=R,x[13]=n):n=x[13];let B=N?"danger":void 0;x[14]!==N?(r=(0,c.jsx)(ag.l.LeadingVisual,{children:N?(0,c.jsx)(em.SquareCircleIcon,{}):(0,c.jsx)(em.ToolsIcon,{})}),x[14]=N,x[15]=r):r=x[15];let O=N?"Stop tracing":"Start tracing";x[16]!==k||x[17]!==B||x[18]!==r||x[19]!==O?(i=(0,c.jsxs)(ag.l.Item,{onSelect:k,variant:B,children:[r,O]}),x[16]=k,x[17]=B,x[18]=r,x[19]=O,x[20]=i):i=x[20];let P=!F;return x[21]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.LogIcon,{})}),x[21]=o):o=x[21],x[22]!==T||x[23]!==P?(l=(0,c.jsxs)(ag.l.Item,{onSelect:T,disabled:P,children:[o,"View trace"]}),x[22]=T,x[23]=P,x[24]=l):l=x[24],x[25]!==l||x[26]!==i?(d=(0,c.jsx)(aD.W.Overlay,{children:(0,c.jsxs)(ag.l,{children:[i,l]})}),x[25]=l,x[26]=i,x[27]=d):d=x[27],x[28]!==d||x[29]!==n?(m=(0,c.jsxs)(aD.W,{children:[n,d]}),x[28]=d,x[29]=n,x[30]=m):m=x[30],x[31]!==I||x[32]!==S?(h=S&&(0,c.jsx)(aF.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>E(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{I(!0),E(!1)}}],onClose:()=>E(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),x[31]=I,x[32]=S,x[33]=h):h=x[33],x[34]!==m||x[35]!==h?(p=(0,c.jsxs)("div",{className:aA.container,children:[m,h]}),x[34]=m,x[35]=h,x[36]=p):p=x[36],p}try{aT.displayName||(aT.displayName="TraceButtons")}catch{}function ak(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,f,x,y,v,b=(0,u.c)(54),{showPreviewPaneButton:j,conversationSpecificItems:E,customButtons:N,defaultName:I}=e,w=void 0===j||j,F=void 0===I?"":I,A=(0,g.Pk)(),{selectedThreadID:T,threads:k,messagesLoading:R,messages:B,usePlanningIntent:O}=A,P=(0,g.pn)(aR);b[0]!==P?(t=(0,C.CB)(P),b[0]=P,b[1]=t):t=b[1];let L=t,M=ei(),z=eo(),W=(0,Z.G)(),G=(0,$.JB)(A.customCopilots,W),H=(0,V.BV)(),q=(0,$.mM)(),K=(0,U.v)(),[,Q,J]=(0,ay.B)(!1);b[2]!==T||b[3]!==k?(a=k.get(T),b[2]=T,b[3]=k,b[4]=a):a=b[4];let Y=a,X=T&&O,ee=!!(M?z:Y?.sharedID),{updateGlobalNavigationBreadcrumbs:et}=aN();b[5]!==et?(s=()=>{et()},b[5]=et,b[6]=s):s=b[6],b[7]!==W||b[8]!==et?(n=[et,W],b[7]=W,b[8]=et,b[9]=n):n=b[9],(0,D.useEffect)(s,n),b[10]!==M||b[11]!==z||b[12]!==T?(r=()=>T?M&&z?`/copilot/share/${z}`:`/copilot/c/${T}`:C.Jz,b[10]=M,b[11]=z,b[12]=T,b[13]=r):r=b[13];let ea=r;K?.id;let es=q&&!W||!T&&!K?.id&&!q,en=(0,D.useRef)(null),[er,el]=(0,D.useState)(null),{canShareThread:ec}=(0,S.X)(),eu="loaded"===R.state,ed=ec&&!M&&T&&!W&&eu;b[14]!==B?(i=(0,C.Q7)(B),b[14]=B,b[15]=i):i=b[15];let eh=i.length>0;b[16]!==B?(o=(0,C.UM)(B),b[16]=B,b[17]=o):o=b[17];let ep=o,e_=eh||ep;b[18]!==e_||b[19]!==el?(l=()=>{e_||el("share")},b[18]=e_,b[19]=el,b[20]=l):l=b[20];let eD=l;G?P?(0,ap.D)(`${L} \xb7 ${G.name} \xb7 GitHub Copilot Spaces`):(0,ap.D)(`${G.name} \xb7 GitHub Copilot Spaces`):q?(0,ap.D)("Spaces \xb7 GitHub Copilot"):M?(0,ap.D)("Shared conversation \xb7 GitHub Copilot"):(0,ap.D)(`${L} \xb7 GitHub Copilot`),b[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)(aS,{}),b[21]=d):d=b[21];let eg=!es&&(0,c.jsx)(a_.B,{children:H&&(G||F)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a_.B.Item,{href:C.VR,children:"Spaces"}),T||!E?(0,c.jsx)(a_.B.Item,{href:G?(0,$.Cb)(G):C.VR,children:G?.name||F}):(0,c.jsx)(a_.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(aD.W.Overlay,{children:(0,c.jsx)(ag.l,{children:E})}),children:G?.name||F}),T&&(0,c.jsx)(a_.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(aD.W.Overlay,{children:(0,c.jsx)(ag.l,{children:(0,c.jsx)(ah.V,{onOpenDialog:el,isShared:ee,showShare:!W,hideShareOnDesktop:!0})})}),children:L})]}):K?(0,c.jsx)(a_.B.Item,{href:`/copilot/${K.id}`,children:K.displayName||"Plugin"}):T&&!M?(0,c.jsx)(a_.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(aD.W.Overlay,{children:(0,c.jsx)(ag.l,{children:(0,c.jsx)(ah.V,{onOpenDialog:el,isShared:ee,showShare:!W,hideShareOnDesktop:!0})})}),children:L}):M?(0,c.jsx)(a_.B.Item,{href:ea(),children:L}):null});return b[22]!==X?(m=X&&(0,c.jsx)(af.A,{variant:"accent",children:"Brainstorm"}),b[22]=X,b[23]=m):m=b[23],b[24]!==av.leftControls||b[25]!==d||b[26]!==eg||b[27]!==m?(h=(0,c.jsxs)("div",{className:av.leftControls,children:[d,eg,m]}),b[24]=av.leftControls,b[25]=d,b[26]=eg,b[27]=m,b[28]=h):h=b[28],b[29]!==ee||b[30]!==e_||b[31]!==eD||b[32]!==ed?(p=ed&&(0,c.jsx)("div",{className:av.hideOnMobile,children:(0,c.jsx)(ax.Q,{leadingVisual:ee?(0,c.jsx)(em.UnlockIcon,{}):(0,c.jsx)(em.LockIcon,{}),disabled:e_,onClick:eD,children:"Share"})}),b[29]=ee,b[30]=e_,b[31]=eD,b[32]=ed,b[33]=p):p=b[33],b[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,c.jsx)(aT,{}),b[34]=_):_=b[34],b[35]!==T||b[36]!==w?(f=w&&T&&(0,c.jsx)(aB,{}),b[35]=T,b[36]=w,b[37]=f):f=b[37],b[38]!==N||b[39]!==p||b[40]!==f?(x=(0,c.jsxs)("div",{className:av.rightControls,children:[p,_,N,f]}),b[38]=N,b[39]=p,b[40]=f,b[41]=x):x=b[41],b[42]!==er||b[43]!==T||b[44]!==el||b[45]!==Q||b[46]!==J||b[47]!==L?(y=T&&(0,c.jsx)(ah.p,{visibleDialog:er,onClose:()=>{(0,aC.flushSync)(()=>el(null)),en.current?.focus()},threadName:L,threadId:T,selectedThreadId:T,onStartLoading:Q,onFinishLoading:J,returnFocusRef:en}),b[42]=er,b[43]=T,b[44]=el,b[45]=Q,b[46]=J,b[47]=L,b[48]=y):y=b[48],b[49]!==av.container||b[50]!==h||b[51]!==x||b[52]!==y?(v=(0,c.jsxs)("div",{className:av.container,children:[h,x,y]}),b[49]=av.container,b[50]=h,b[51]=x,b[52]=y,b[53]=v):v=b[53],v}function aR(e){return(0,es.W)(e)}function aB(){let e,t=(0,u.c)(4),a=(0,A.tZ)(),{openPreviewPane:s}=(0,A.xx)(),n=(0,j.U)();return t[0]!==n||t[1]!==s||t[2]!==a?(e=!a&&(0,c.jsx)(e0.K,{icon:em.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,k.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),s()},ref:n}),t[0]=n,t[1]=s,t[2]=a,t[3]=e):e=t[3],e}try{ak.displayName||(ak.displayName="Header")}catch{}try{aB.displayName||(aB.displayName="PreviewPaneButton")}catch{}var aO=a(56487),aP=a(60429),aL=a(73783);let aM={actions:"EditorDownload-module__actions--u7T1C",editorButton:"EditorDownload-module__editorButton--A8J3X",dropdownButton:"EditorDownload-module__dropdownButton--pOfML"};function aU(){let e,t,a,s=(0,u.c)(3),n=az;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(B.z,{className:aM.editorButton,href:aP.A.vscode.url,leadingVisual:(0,c.jsx)("img",{src:aP.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n("vscode","ide_menu_primary_button_click")},children:"Download"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(aD.W.Anchor,{children:(0,c.jsx)(e0.K,{"aria-label":"More editors",icon:em.TriangleDownIcon,className:aM.dropdownButton,unsafeDisableTooltip:!0,onClick:()=>{n("menu","ide_menu_open")}})}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsxs)(aL.A,{className:aM.actions,children:[e,(0,c.jsxs)(aD.W,{children:[t,(0,c.jsx)(aD.W.Overlay,{align:"end",children:(0,c.jsx)(ag.l,{children:(0,c.jsxs)(ag.l.Group,{variant:"subtle",children:[(0,c.jsx)(ag.l.GroupHeading,{children:"Download for"}),(0,c.jsx)(aO.t,{menuLocation:"editor_cta",mode:"immersive"})]})})})]})]}),s[2]=a):a=s[2],a}function az(e,t){y.W.freeToPaidTelemetry?(0,aO.F)({eventName:e,menuLocation:"editor_cta",mode:"immersive",action:t}):(0,k.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{aU.displayName||(aU.displayName="EditorDownload")}catch{}let a$={mobileActions:"NewConversationDownloadActions-module__mobileActions--MXDvY",desktopActions:"NewConversationDownloadActions-module__desktopActions--SOL35"},aV="https://github.com/features/copilot/cli";function aW(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:a$.mobileActions,children:(0,c.jsx)(aG,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsxs)("div",{className:a$.desktopActions,children:[(0,c.jsx)(ax.Q,{as:"a",href:aV,leadingVisual:em.TerminalIcon,children:"CLI"}),(0,c.jsx)(aU,{})]})]}),a[1]=t):t=a[1],t}function aG(){let e,t,a,s,n,r=(0,u.c)(5);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(aD.W.Anchor,{id:"custom-anchor-id",children:(0,c.jsx)(e0.K,{icon:em.KebabHorizontalIcon,"aria-label":"Open menu"})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(ag.l.GroupHeading,{children:"Download for"}),a=(0,c.jsx)(aO.t,{menuLocation:"editor_cta",mode:"immersive"}),s=(0,c.jsx)(ag.l.Divider,{}),r[1]=t,r[2]=a,r[3]=s):(t=r[1],a=r[2],s=r[3]),r[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsxs)(aD.W,{children:[e,(0,c.jsx)(aD.W.Overlay,{children:(0,c.jsxs)(ag.l,{children:[t,a,s,(0,c.jsxs)(ag.l.LinkItem,{href:aV,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.TerminalIcon,{})}),"CLI"]})]})})]}),r[4]=n):n=r[4],n}try{aW.displayName||(aW.displayName="NewConversationDownloadActions")}catch{}try{aG.displayName||(aG.displayName="MobileMenu")}catch{}var aH=a(31078),aq=a(53552),aK=a(54030),aQ=a(71363),aJ=a(61180),aY=a(54114),aX=a(39176),aZ=a(78314),a0=a(19579);let a1={resourcePanel:"ResourcePanel-module__resourcePanel--QFUYz",resourcePanelHeader:"ResourcePanel-module__resourcePanelHeader--xpYIo",resourcePanelHeaderRow:"ResourcePanel-module__resourcePanelHeaderRow--U3piY",resourcePanelContent:"ResourcePanel-module__resourcePanelContent--zjIvl",resourcePanelPlaceholder:"ResourcePanel-module__resourcePanelPlaceholder--Tzewz",resourcePanelRepoButton:"ResourcePanel-module__resourcePanelRepoButton--W2AOy",resourcePanelNavItem:"ResourcePanel-module__resourcePanelNavItem--Q9A53"};function a2(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,g,f,x,C,y,v,b,j,S=(0,u.c)(45),{className:E}=e,{closeResourcePanel:N}=(0,A.xx)(),[I,w]=(0,D.useState)(!1),[F,T]=(0,aJ.T)(),[k,R]=(0,D.useState)("files"),[B,O]=(0,D.useState)(""),P=(0,X.b)(),L=(0,D.useRef)(null),M=F?`${F.ownerLogin}/${F.name}`:"Select Repo";S[0]!==E?(t=(0,e1.$)(a1.resourcePanel,E),S[0]=E,S[1]=t):t=S[1],S[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>w(!0),S[2]=a):a=S[2],S[3]!==M?(s=(0,c.jsx)(ax.Q,{ref:L,onClick:a,variant:"invisible",trailingVisual:em.ChevronDownIcon,className:a1.resourcePanelRepoButton,children:M}),S[3]=M,S[4]=s):s=S[4],S[5]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,S[5]=n):n=S[5],S[6]!==P||S[7]!==T?(r=async e=>{if(!e)return;let t=await P.service.fetchRepo(e);t.ok&&t.payload?T(t.payload):t.error&&O(t.error)},S[6]=P,S[7]=T,S[8]=r):r=S[8],S[9]!==I||S[10]!==r?(i=(0,c.jsx)(aQ.X1,{selectionVariant:"instant",open:I,onOpenChange:w,selectedRepoIds:n,onSelectRepo:r,submitReturnFocusRef:L,cancelReturnFocusRef:L,anchorRef:L,includeForks:!0}),S[9]=I,S[10]=r,S[11]=i):i=S[11],S[12]!==N?(o=(0,c.jsx)("div",{className:"d-flex flex-justify-end",children:(0,c.jsx)(e0.K,{size:"small",icon:em.SidebarCollapseIcon,"aria-label":"Close resource panel",onClick:N,variant:"invisible"})}),S[12]=N,S[13]=o):o=S[13],S[14]!==s||S[15]!==i||S[16]!==o?(l=(0,c.jsxs)("div",{className:a1.resourcePanelHeaderRow,children:[s,i,o]}),S[14]=s,S[15]=i,S[16]=o,S[17]=l):l=S[17];let U="files"===k?"location":void 0;S[18]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{R("files"),e.preventDefault()},S[18]=d):d=S[18],S[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(em.CodeIcon,{}),S[19]=m):m=S[19],S[20]!==U?(h=(0,c.jsx)(a0.O.Item,{"aria-current":U,"aria-label":"Files",onSelect:d,className:a1.resourcePanelNavItem,children:m}),S[20]=U,S[21]=h):h=S[21];let z="pull-requests"===k?"location":void 0;S[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{R("pull-requests"),e.preventDefault()},S[22]=p):p=S[22],S[23]===Symbol.for("react.memo_cache_sentinel")?(_=(0,c.jsx)(em.GitPullRequestIcon,{}),S[23]=_):_=S[23],S[24]!==z?(g=(0,c.jsx)(a0.O.Item,{"aria-current":z,"aria-label":"Pull requests",onSelect:p,className:a1.resourcePanelNavItem,children:_}),S[24]=z,S[25]=g):g=S[25];let $="issues"===k?"location":void 0;return S[26]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{R("issues"),e.preventDefault()},S[26]=f):f=S[26],S[27]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)(em.IssueOpenedIcon,{}),S[27]=x):x=S[27],S[28]!==$?(C=(0,c.jsx)(a0.O.Item,{"aria-current":$,"aria-label":"Issues",onSelect:f,className:a1.resourcePanelNavItem,children:x}),S[28]=$,S[29]=C):C=S[29],S[30]!==h||S[31]!==g||S[32]!==C?(y=(0,c.jsxs)(a0.O,{"aria-label":"Resource panel navigation",children:[h,g,C]}),S[30]=h,S[31]=g,S[32]=C,S[33]=y):y=S[33],S[34]!==y||S[35]!==l?(v=(0,c.jsxs)("div",{className:a1.resourcePanelHeader,children:[l,y]}),S[34]=y,S[35]=l,S[36]=v):v=S[36],S[37]!==B||S[38]!==F||S[39]!==k?(b=(0,c.jsx)("div",{className:a1.resourcePanelContent,children:"files"===k?F?(0,c.jsx)("div",{children:(0,c.jsx)(aZ.d,{repository:F,children:(0,c.jsx)(aH.Ck,{children:(0,c.jsx)(aq.qV,{refInfo:{name:F.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:F.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)(a3,{currentRepo:F,fetchError:B})})})})}):(0,c.jsx)("div",{className:a1.resourcePanelPlaceholder,children:"Select a repository to view files"}):(0,c.jsx)("div",{className:a1.resourcePanelPlaceholder,children:"Coming soon..."})}),S[37]=B,S[38]=F,S[39]=k,S[40]=b):b=S[40],S[41]!==t||S[42]!==v||S[43]!==b?(j=(0,c.jsxs)("div",{className:t,"data-testid":"resource-panel",children:[v,b]}),S[41]=t,S[42]=v,S[43]=b,S[44]=j):j=S[44],j}function a3(e){let t,a,s,n,r,i=(0,u.c)(21),{currentRepo:o,fetchError:l}=e,{openPreviewPane:d,openItem:m,updateItem:h}=(0,A.xx)(),p=(0,X.b)(),{list:_,directories:g,loading:f}=(0,aK.o)(o.commitOID,!0);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],i[0]=t):t=i[0];let[x,C]=(0,D.useState)(t),[y,v]=(0,D.useState)(a5);i[1]!==o.id||i[2]!==o.refInfo||i[3]!==p||i[4]!==m||i[5]!==d||i[6]!==h?(a=async e=>{if(0===e.size)return;let t=Array.from(e)[0],a=await p.service.fetchFileContents(o.id,o.refInfo.name,t);if(a.ok&&a.payload){let e={messageId:ex.Wp,id:`file:${t}#0`,timestamp:new Date,isUserEdited:!1,value:a.payload?.content,type:"file",name:t,isStreaming:!1,language:a.payload?.language??"plaintext"};h(e),m(e.id),d()}v(new Set([t]))},i[1]=o.id,i[2]=o.refInfo,i[3]=p,i[4]=m,i[5]=d,i[6]=h,i[7]=a):a=i[7];let b=a;i[8]!==g||i[9]!==_?(s=()=>{C((0,aX.k)({paths:_,directories:g}))},i[8]=g,i[9]=_,i[10]=s):s=i[10],i[11]!==o.commitOID||i[12]!==g||i[13]!==_?(n=[_,g,C,o.commitOID],i[11]=o.commitOID,i[12]=g,i[13]=_,i[14]=n):n=i[14],(0,D.useEffect)(s,n);let j=f||!1,S=!!l;return i[15]!==b||i[16]!==x||i[17]!==y||i[18]!==j||i[19]!==S?(r=(0,c.jsx)(aY.Rw,{rootItems:x,expandedPath:"",setRootItems:C,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:y,onSelectionChange:b,loading:j,fetchError:S,sortDirectoryItems:a4,singleSelect:!0}),i[15]=b,i[16]=x,i[17]=y,i[18]=j,i[19]=S,i[20]=r):r=i[20],r}function a4(e){return e.sort(a6)}function a6(e,t){return e.data.name.localeCompare(t.data.name)}function a5(){return new Set}try{a2.displayName||(a2.displayName="ResourcePanel")}catch{}try{a3.displayName||(a3.displayName="ResourcePanelFileTree")}catch{}var a7=a(17005),a8=a(76872),a9=a(56149);let se={ReportSpaceContainer:"ReportSpaceDialog-module__ReportSpaceContainer--zrFJR",ReportSpaceHelpText:"ReportSpaceDialog-module__ReportSpaceHelpText--dcoV2",ReportSpaceSubmitButton:"ReportSpaceDialog-module__ReportSpaceSubmitButton--c04jD",ReportSpaceFooterSpacing:"ReportSpaceDialog-module__ReportSpaceFooterSpacing--eTYaB",ReportSpaceDialog:"ReportSpaceDialog-module__ReportSpaceDialog--X_oiN"},st=({reportUrl:e,onClose:t})=>{let a=(0,c.jsxs)("div",{className:se.ReportSpaceContainer,children:[(0,c.jsx)("span",{children:"Contact GitHub Support about this user's spammy or abusive behavior."}),(0,c.jsxs)("div",{className:se.ReportSpaceFooterSpacing,children:[(0,c.jsxs)("div",{className:se.ReportSpaceHelpText,children:[(0,c.jsx)("span",{children:"Learn more about "}),(0,c.jsx)(eN.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"reporting abuse to GitHub support"})]}),e&&(0,c.jsx)(ax.Q,{variant:"danger",as:"a",href:e,target:"_blank",rel:"noopener noreferrer",className:se.ReportSpaceSubmitButton,children:"Report abuse to GitHub support"})]})]});return(0,c.jsx)(a9.ZL,{children:(0,c.jsx)(aF.l,{title:"Report Space to GitHub Support",width:"xlarge",height:"auto",onClose:t,className:se.ReportSpaceDialog,children:a})})};try{st.displayName||(st.displayName="ReportSpaceDialog")}catch{}var sa=a(96459),ss=a(72511),sn=a(72011),sr=a(97665),si=a(94747),so=a(96379),sl=a(24990),sc=a(69726),su=a(51563),sd=a(40260),sm=a(77430),sh=a(71315),sp=a(46251),s_=a(69497),sD=a(99511),sg=a(97286);let sf=(e,t)=>{let a,s,n,r,i,o,l,c,d,m,h,p,_,D,g,f,x,C,y=(0,u.c)(51),v=(0,sr.jE)();y[0]!==t||y[1]!==e?(a=(0,$.Cb)({id:t,owner:e}),y[0]=t,y[1]=e,y[2]=a):a=y[2];let b=a,j=`${b}/permissions`;y[3]!==j?(s={queryKey:["copilotSpaceCollaborators",j],queryFn:async()=>{let e=await (0,so.lS)(j),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},y[3]=j,y[4]=s):s=y[4];let{data:S,isLoading:E}=(0,sg.I)(s);y[5]!==j?(n=async e=>{let t=await (0,so.lS)(j,{method:"POST",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[5]=j,y[6]=n):n=y[6],y[7]!==j||y[8]!==v||y[9]!==t||y[10]!==e?(r=()=>(v.invalidateQueries({queryKey:(0,sn.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[7]=j,y[8]=v,y[9]=t,y[10]=e,y[11]=r):r=y[11],y[12]!==n||y[13]!==r?(i={mutationFn:n,onSuccess:r},y[12]=n,y[13]=r,y[14]=i):i=y[14];let N=(0,si.n)(i);y[15]!==N?({mutateAsync:o,...l}=N,y[15]=N,y[16]=o,y[17]=l):(o=y[16],l=y[17]),y[18]!==j?(c=async e=>{let t=await (0,so.lS)(j,{method:"PUT",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[18]=j,y[19]=c):c=y[19],y[20]!==j||y[21]!==v?(d=()=>v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]}),y[20]=j,y[21]=v,y[22]=d):d=y[22],y[23]!==c||y[24]!==d?(m={mutationFn:c,onSuccess:d},y[23]=c,y[24]=d,y[25]=m):m=y[25];let I=(0,si.n)(m);y[26]!==I?({mutateAsync:h,...p}=I,y[26]=I,y[27]=h,y[28]=p):(h=y[27],p=y[28]),y[29]!==j?(_=async e=>{let t=await (0,so.lS)(j,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},y[29]=j,y[30]=_):_=y[30],y[31]!==j||y[32]!==v||y[33]!==t||y[34]!==e?(D=()=>(v.invalidateQueries({queryKey:(0,sn.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[31]=j,y[32]=v,y[33]=t,y[34]=e,y[35]=D):D=y[35],y[36]!==_||y[37]!==D?(g={mutationFn:_,onSuccess:D},y[36]=_,y[37]=D,y[38]=g):g=y[38];let w=(0,si.n)(g);return y[39]!==w?({mutateAsync:f,...x}=w,y[39]=w,y[40]=f,y[41]=x):(f=y[40],x=y[41]),y[42]!==o||y[43]!==l||y[44]!==S||y[45]!==E||y[46]!==f||y[47]!==x||y[48]!==h||y[49]!==p?(C={collaborators:S,isLoading:E,addCollaborator:o,updateCollaborator:h,removeCollaborator:f,isAddPending:l.isPending,isUpdatePending:p.isPending,isRemovePending:x.isPending,...l,...p,...x},y[42]=o,y[43]=l,y[44]=S,y[45]=E,y[46]=f,y[47]=x,y[48]=h,y[49]=p,y[50]=C):C=y[50],C};function sx(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let sC={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--G8YCd",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--oqwht"};function sy({copilotSpace:e,onError:t}){let a=(0,X.b)(),[s,n]=(0,D.useState)(""),[r,i]=(0,D.useState)(!1),o=(0,D.useRef)(null),l=y.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:d,isLoading:m}=(e=>{let t,a,s,n,r,i,o=(0,u.c)(17),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.allUsers||o[3]!==l.query||o[4]!==l.spaceId||o[5]!==l.spaceOwner?(a=async()=>{let e=(0,$.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=l.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,a=await (0,so.lS)(t);if(!a.ok)throw Error("Failed to fetch suggested collaborators");return(await a.json()).suggestions.map(sx)},o[2]=l.allUsers,o[3]=l.query,o[4]=l.spaceId,o[5]=l.spaceOwner,o[6]=a):a=o[6];let c=!!l.query;o[7]!==t||o[8]!==a||o[9]!==c?(s={queryKey:t,queryFn:a,enabled:c},o[7]=t,o[8]=a,o[9]=c,o[10]=s):s=o[10];let d=(0,sg.I)(s);return o[11]!==d?({data:n,...r}=d,o[11]=d,o[12]=n,o[13]=r):(n=o[12],r=o[13]),o[14]!==n||o[15]!==r?(i={data:n,...r},o[14]=n,o[15]=r,o[16]=i):i=o[16],i})({input:{query:(0,D.useDeferredValue)(s.startsWith("@")?s.trim().slice(1):s.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:l&&!e.ownerIsOrg}}),{collaborators:h,addCollaborator:p,error:_,isLoading:g}=sf(e.owner,e.id);async function f(s){if(h?.some(e=>e.actor_id===s.id&&e.actor_type===s.actor_type)){n(""),i(!1);return}try{await p({actor_id:s.id,role_name:"custom_copilot_reader",actor_type:s.actor_type}),n(""),!e.ownerIsOrg&&h&&h?.length<=1&&a.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),i(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,D.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,D.useEffect)(()=>{i(!!(s&&!m&&d&&d.length>0))},[s,d,m]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(sp.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,c.jsxs)("div",{className:sC.copyLinkSection,style:{position:"relative"},children:[(0,c.jsx)(sD.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:s,onChange:e=>n(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),r&&d&&(0,c.jsx)("div",{ref:o,children:(0,c.jsx)(sE,{items:d,onSelect:f})})]})]}),g?(0,c.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,c.jsx)(sc.A,{})}):_?(0,c.jsx)(R.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):h&&h.length>0?(0,c.jsx)(sp.B,{direction:"vertical",gap:"condensed",align:"start",children:h.map(a=>(0,c.jsx)(sv,{actor:a,copilotSpace:e,collaboratorsCount:h.length,onError:t},`${a.actor_type}-${a.actor_id}`))}):(0,c.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function sv(e){let t,a,s,n,r,i,o,l,d,m=(0,u.c)(27),{actor:h,copilotSpace:p,onError:_,collaboratorsCount:D}=e,g="user"===h.actor_type?h.display_login:h.slug,f="team"===h.actor_type;return m[0]!==h.avatar_url||m[1]!==f?(t=(0,c.jsx)(sm.r,{src:h.avatar_url,className:"mr-2",square:f,size:32}),m[0]=h.avatar_url,m[1]=f,m[2]=t):t=m[2],m[3]!==g?(a=(0,c.jsx)("b",{children:g}),m[3]=g,m[4]=a):a=m[4],m[5]!==g||m[6]!==a?(s=(0,c.jsx)("span",{className:"ml-1",children:(0,c.jsx)(s_.A,{maxWidth:"230px",title:g,inline:!0,children:a})}),m[5]=g,m[6]=a,m[7]=s):s=m[7],m[8]!==h.name?(n=(0,c.jsx)("p",{children:h.name}),m[8]=h.name,m[9]=n):n=m[9],m[10]!==h.name||m[11]!==n?(r=(0,c.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,c.jsx)(s_.A,{maxWidth:"230px",title:h.name,inline:!0,children:n})}),m[10]=h.name,m[11]=n,m[12]=r):r=m[12],m[13]!==s||m[14]!==r?(i=(0,c.jsxs)("div",{className:"d-flex flex-column mt-1",children:[s,r]}),m[13]=s,m[14]=r,m[15]=i):i=m[15],m[16]!==t||m[17]!==i?(o=(0,c.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,i]}),m[16]=t,m[17]=i,m[18]=o):o=m[18],m[19]!==h||m[20]!==D||m[21]!==p||m[22]!==_?(l=(0,c.jsx)(sS,{actor:h,onError:_,copilotSpace:p,collaboratorsCount:D}),m[19]=h,m[20]=D,m[21]=p,m[22]=_,m[23]=l):l=m[23],m[24]!==o||m[25]!==l?(d=(0,c.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),m[24]=o,m[25]=l,m[26]=d):d=m[26],d}let sb=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],sj={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function sS({actor:e,onError:t,copilotSpace:a,collaboratorsCount:s}){let n=(0,X.b)(),[r,i]=(0,D.useState)(!1),o=(0,D.useRef)(null),l=sb.find(t=>t.value===e.role),{updateCollaborator:u,removeCollaborator:d,isUpdatePending:m,isRemovePending:h}=sf(a.owner,a.id);async function p(a){try{await u({actor_id:e.actor_id,role_name:a,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{i(!1)}}async function _(){try{await d({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!a.ownerIsOrg&&s<=2&&n.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...a,collaborative:!1}}),i(!1)}}return(0,c.jsxs)(aD.W,{onOpenChange:i,anchorRef:o,open:r,children:[(0,c.jsx)(aD.W.Button,{disabled:e.disabled,loading:m||h,variant:"invisible",className:"text-small",ref:o,onClick:()=>i(!0),"aria-label":`Change role for ${e.name}`,children:(0,c.jsx)(s_.A,{title:l?.text||"",inline:!0,children:l?.text})}),(0,c.jsx)(aD.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,c.jsxs)(ag.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[sb.map(e=>(0,c.jsxs)(ag.l.Item,{selected:e.value===l?.value,onSelect:()=>p(e.value),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:e.text})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:sj[e.value]})})]},e.value)),(0,c.jsx)(ag.l.Divider,{}),(0,c.jsxs)(ag.l.Item,{variant:"danger",onSelect:()=>_(),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:"Remove"})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function sE(e){let t,a,s=(0,u.c)(7),{items:n,onSelect:r}=e;if(s[0]!==n||s[1]!==r){let e;s[3]!==r?(e=e=>{let t=`${e.actor_type}-${e.id}`,a="user"===e.actor_type?e.login:e.slug;return(0,c.jsxs)(ag.l.Item,{onSelect:()=>r(e),role:"option",children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(sm.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,c.jsx)("span",{className:"text-bold",children:a}),e.name&&(0,c.jsx)(ag.l.Description,{children:e.name})]},t)},s[3]=r,s[4]=e):e=s[4],t=n.map(e),s[0]=n,s[1]=r,s[2]=t}else t=s[2];return s[5]!==t?(a=(0,c.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:sC.spacesSuggestionsList,children:(0,c.jsx)(ag.l,{children:t})}),s[5]=t,s[6]=a):a=s[6],a}try{sy.displayName||(sy.displayName="SpaceCollaborators")}catch{}try{sv.displayName||(sv.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{sS.displayName||(sS.displayName="ActorRoleSelect")}catch{}try{sE.displayName||(sE.displayName="SpacesSuggestionsList")}catch{}let sN={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",errorBanner:"SpaceSharingDialog-module__errorBanner--SkBp1",visibilityDropdown:"SpaceSharingDialog-module__visibilityDropdown--HMESi",visibilityChoice:"SpaceSharingDialog-module__visibilityChoice--Z75rm",visibilityIcon:"SpaceSharingDialog-module__visibilityIcon--KK57C",attentionIcon:"SpaceSharingDialog-module__attentionIcon--lZ9Sq",accentIcon:"SpaceSharingDialog-module__accentIcon--q8VZ5",footerText:"SpaceSharingDialog-module__footerText--TJavK"};function sI(e){let t,a,s,n,r,i,o,l,d,m=(0,u.c)(23),{closeDialog:h,customCopilotId:p,userOwned:_}=e;m[0]===Symbol.for("react.memo_cache_sentinel")?(t={},m[0]=t):t=m[0];let[g,f]=(0,D.useState)(t),[x,C]=(0,D.useState)(!1),v=(0,D.useRef)(null),b=y.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==_&&_;m[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{v.current&&(clearTimeout(v.current),v.current=null)},s=[],m[1]=a,m[2]=s):(a=m[1],s=m[2]),(0,D.useEffect)(a,s),m[3]!==e.customCopilotId?(n=(0,$.Cb)(e.customCopilotId),m[3]=e.customCopilotId,m[4]=n):n=m[4];let j=`${sh.fV.origin}${n}`,S=()=>{(0,sd.D)(j),C(!0),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{C(!1),v.current=null},2e3)},{isPending:E,data:N}=(0,V.Ao)(p),I=y.W.spacesIndividualRestrictedOrgContent&&!N?.shareable;m[5]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen"},m[5]=r):r=m[5];let w=I?void 0:()=>(0,c.jsx)(sk,{copySharedLink:S,copied:x,isSpaceLoading:E,copilotSpace:N});return m[6]!==I?(i=I&&(0,c.jsx)(R.l,{hideTitle:!0,variant:"warning",title:"org content restricted",description:"This space contains resources owned by an organization and cannot be shared. Please either delete the resources owned by the organization or duplicate this space and change ownership to the organization."}),m[6]=I,m[7]=i):i=m[7],m[8]!==g.base||m[9]!==g.visibility?(o=g.base||g.visibility?(0,c.jsx)(R.l,{hideTitle:!0,title:"Unable to update space",description:g.visibility||g.base,"aria-label":"Critical",variant:"critical",className:sN.errorBanner}):null,m[8]=g.base,m[9]=g.visibility,m[10]=o):o=m[10],m[11]!==N||m[12]!==E||m[13]!==I||m[14]!==e||m[15]!==b?(l=!I&&(0,c.jsxs)(sp.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[N&&(0,c.jsx)(sy,{copilotSpace:N,onError:f}),(0,c.jsx)(ag.l.Divider,{}),b?(0,c.jsx)(sP,{copilotSpace:N,isSpaceLoading:E,onError:f}):(0,c.jsxs)(sp.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,c.jsx)(sw,{onError:f,copilotSpace:N,isSpaceLoading:E,...e})]})]}),m[11]=N,m[12]=E,m[13]=I,m[14]=e,m[15]=b,m[16]=l):l=m[16],m[17]!==h||m[18]!==l||m[19]!==w||m[20]!==i||m[21]!==o?(d=(0,c.jsxs)(aF.l,{position:r,title:"Share this space",renderFooter:w,onClose:h,className:sN.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[i,o,l]}),m[17]=h,m[18]=l,m[19]=w,m[20]=i,m[21]=o,m[22]=d):d=m[22],d}function sw(e){let t,a,s,n,r,i,o,l,d,m,h,p,_=(0,u.c)(36),{copilotSpace:g,isSpaceLoading:f,onError:x}=e,{data:C,isLoading:y,error:v}=(0,V.Tx)(g?.owner||"",g?.id??-1);if(_[0]!==g||_[1]!==f||_[2]!==y||_[3]!==x||_[4]!==C?(t=()=>{f||y||g&&C||x({visibility:"Could not load your space's visibility settings"})},a=[f,y,g,C,x],_[0]=g,_[1]=f,_[2]=y,_[3]=x,_[4]=C,_[5]=t,_[6]=a):(t=_[5],a=_[6]),(0,D.useEffect)(t,a),f){let e;return _[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),_[7]=e):e=_[7],e}if(!g){let e;return _[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),_[8]=e):e=_[8],e}let b=g.owner,j=C?.memberCount;return _[9]!==g.ownerAvatar?(s=(0,c.jsx)(sm.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),_[9]=g.ownerAvatar,_[10]=s):s=_[10],_[11]!==g.ownerDisplayName?(n=(0,c.jsx)("b",{children:g.ownerDisplayName}),_[11]=g.ownerDisplayName,_[12]=n):n=_[12],_[13]!==g.ownerDisplayName||_[14]!==n?(r=(0,c.jsx)(s_.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:n}),_[13]=g.ownerDisplayName,_[14]=n,_[15]=r):r=_[15],_[16]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),_[16]=i):i=_[16],_[17]!==r?(o=(0,c.jsxs)("span",{className:"ml-1",children:[r,i]}),_[17]=r,_[18]=o):o=_[18],_[19]!==v||_[20]!==y||_[21]!==j||_[22]!==b?(l=b&&(0,c.jsxs)(c.Fragment,{children:[!y&&null!==j&&(0,c.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(y||v||null===j)&&(0,c.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),_[19]=v,_[20]=y,_[21]=j,_[22]=b,_[23]=l):l=_[23],_[24]!==o||_[25]!==l?(d=(0,c.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),_[24]=o,_[25]=l,_[26]=d):d=_[26],_[27]!==s||_[28]!==d?(m=(0,c.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[s,d]}),_[27]=s,_[28]=d,_[29]=m):m=_[29],_[30]!==g||_[31]!==x?(h=(0,c.jsx)(sT,{onError:x,copilotSpace:g}),_[30]=g,_[31]=x,_[32]=h):h=_[32],_[33]!==m||_[34]!==h?(p=(0,c.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[m,h]}),_[33]=m,_[34]=h,_[35]=p):p=_[35],p}let sF=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],sA={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function sT({copilotSpace:e,onError:t}){let[a,s]=(0,D.useState)(!1),n=(0,D.useRef)(null),r=sF.find(t=>t.value===e.baseRole),{upsertCopilotSpace:i,isPending:o}=(0,su.$)(e);async function l(e){if(!o)try{await i({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{s(!1)}}return e.adminable?(0,c.jsxs)(aD.W,{onOpenChange:s,anchorRef:n,open:a,children:[(0,c.jsx)(aD.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:n,onClick:()=>s(!0),children:(0,c.jsx)(s_.A,{title:r?.text||"",inline:!0,children:r?.text})}),(0,c.jsx)(aD.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,c.jsx)(ag.l,{selectionVariant:"single",children:sF.map(e=>(0,c.jsxs)(ag.l.Item,{selected:e.value===r?.value,onSelect:()=>l(e.value),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:e.text})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:sA[e.value]})})]},e.value))})})]}):(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:r?.text||"",className:"text-small text-light",children:r?.text})})}function sk(e){let t,a,s,n,r,i=(0,u.c)(12),{copySharedLink:o,copied:l,isSpaceLoading:d,copilotSpace:m}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},i[0]=t):t=i[0],i[1]!==m?.ownerIsOrg?(a=!m?.ownerIsOrg&&(0,c.jsxs)("div",{className:sN.footerText,children:[(0,c.jsx)(em.InfoIcon,{}),(0,c.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),i[1]=m?.ownerIsOrg,i[2]=a):a=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:"90px"},i[3]=s):s=i[3],i[4]!==l||i[5]!==m||i[6]!==o||i[7]!==d?(n=(0,c.jsx)("div",{style:s,className:"d-flex flex-items-center gap-2",children:l?(0,c.jsx)(ax.Q,{className:"color-fg-success",disabled:d||!m,children:"Link copied"}):(0,c.jsx)(ax.Q,{onClick:o,leadingVisual:em.LinkIcon,disabled:d||!m,children:"Copy link"})}),i[4]=l,i[5]=m,i[6]=o,i[7]=d,i[8]=n):n=i[8],i[9]!==a||i[10]!==n?(r=(0,c.jsxs)(aF.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[a,n]}),i[9]=a,i[10]=n,i[11]=r):r=i[11],r}let sR={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:em.LockIcon,color:"attention"},sB={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:em.GlobeIcon,color:"accent"},sO=y.W.copilotSpacesPublicAccessToUserOwnedSpaces?[sR,sB]:[sR];function sP({copilotSpace:e,isSpaceLoading:t,onError:a}){let[s,n]=(0,D.useState)(!1),r=(0,D.useRef)(null),i=sO.find(t=>t.value===e?.baseRole)??sR,{upsertCopilotSpace:o,isPending:l}=(0,su.$)(e);async function u(e){if(!l)try{await o({baseRole:e})}catch{a({base:"An error occurred while updating your space's visibility."})}finally{n(!1)}}let d=i.icon;return t?(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,c.jsxs)(sp.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,c.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,c.jsxs)("div",{className:sN.visibilityChoice,children:[(0,c.jsx)("div",{className:(0,e1.$)(sN.visibilityIcon,"accent"===i.color?sN.accentIcon:sN.attentionIcon),children:(0,c.jsx)(d,{size:16})}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[y.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,c.jsxs)(aD.W,{onOpenChange:n,anchorRef:r,open:s,children:[(0,c.jsx)(aD.W.Button,{loading:l,variant:"invisible",className:sN.visibilityDropdown,ref:r,onClick:()=>n(!0),disabled:!e.adminable,children:i.text}),(0,c.jsx)(aD.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,c.jsx)(ag.l,{selectionVariant:"single",children:sO.map(t=>{let a=t.icon;return(0,c.jsxs)(ag.l.Item,{selected:t.value===e.baseRole,onSelect:()=>u(t.value),children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(a,{})}),(0,c.jsx)("div",{className:"d-flex flex-column",children:(0,c.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,c.jsx)("span",{className:sN.visibilityDropdown,children:i.text}),(0,c.jsx)("span",{className:"text-small color-fg-muted p-1",children:i.description})]})]})})]}):(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{sI.displayName||(sI.displayName="SpaceSharingDialog")}catch{}try{sw.displayName||(sw.displayName="VisibilitySettings")}catch{}try{sT.displayName||(sT.displayName="BaseRoleSelect")}catch{}try{sk.displayName||(sk.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{sP.displayName||(sP.displayName="UserOwnedVisibilitySettings")}catch{}function sL(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,g,f,x,C,v,b,j,S,E=(0,u.c)(57),{onDelete:N,copilot:I}=e,[w,F]=(0,D.useState)(null),[A,T]=(0,D.useState)(!1),[R,B]=(0,D.useState)(!1),O=(0,D.useRef)(null),P=(0,G.Zp)(),L=y.W.copilotSpacesReadAccessToUserOwnedSpaces,M=I?.ownerIsOrg&&I?.adminable,U=L&&!I?.ownerIsOrg&&I?.adminable,z=M||U,W=I?.ownerIsOrg&&("none"!==I.baseRole||I.collaborative),H=!!(I&&(W||I?.shared));E[0]!==I?(t=I?{id:I.id,owner:I.owner}:null,E[0]=I,E[1]=t):t=E[1];let q=(0,V.$W)(t),K="duplicate"===w,{data:Q,isLoading:J}=(0,V.Ao)(K?I:null);"duplicate"===w&&R&&!J&&Q&&B(!1),E[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,aC.flushSync)(()=>F(null)),O.current?.focus()},E[2]=a):a=E[2];let Y=a;E[3]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),Y()},E[3]=s):s=E[3];let X=s;E[4]===Symbol.for("react.memo_cache_sentinel")?(n=async e=>{Y(),T(!0),await e(),T(!1)},E[4]=n):n=E[4];let Z=n;E[5]!==N?(r=async()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await Z(N)},E[5]=N,E[6]=r):r=E[6];let ee=r;E[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),F("share")},E[7]=i):i=E[7];let et=i;E[8]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),F("duplicate"),e.preventDefault()},E[8]=o):o=E[8];let ea=o;E[9]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),F("report")},E[9]=l):l=E[9];let es=l;return E[10]!==A?(d=(0,c.jsx)(aD.W.Anchor,{children:(0,c.jsx)(e0.K,{loading:A,icon:em.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:sM})}),E[10]=A,E[11]=d):d=E[11],E[12]!==I||E[13]!==P?(m=I.editable&&(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),P((0,$.Cb)(I))},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.PencilIcon,{})}),"Edit"]}),E[12]=I,E[13]=P,E[14]=m):m=E[14],E[15]!==z?(h=z&&(0,c.jsxs)(ag.l.Item,{onSelect:et,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.ShareIcon,{})}),"Share"]}),E[15]=z,E[16]=h):h=E[16],E[17]!==I.adminable||E[18]!==I.editable||E[19]!==J||E[20]!==w?(p=(I.adminable||I.editable)&&(0,c.jsxs)(ag.l.Item,{onSelect:e=>{ea(e)},loading:J&&"duplicate"===w,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.CopyIcon,{})}),"Duplicate"]}),E[17]=I.adminable,E[18]=I.editable,E[19]=J,E[20]=w,E[21]=p):p=E[21],E[22]!==H?(_=y.W.copilotSpacesReportAbuse&&H&&(0,c.jsxs)(ag.l.Item,{onSelect:es,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.ReportIcon,{})}),"Report content"]}),E[22]=H,E[23]=_):_=E[23],E[24]!==I.adminable?(g=I.adminable&&(0,c.jsxs)(ag.l.Item,{variant:"danger",onSelect:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),F("delete")},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.TrashIcon,{})}),"Delete"]}),E[24]=I.adminable,E[25]=g):g=E[25],E[26]!==m||E[27]!==h||E[28]!==p||E[29]!==_||E[30]!==g?(f=(0,c.jsx)(aD.W.Overlay,{side:"outside-bottom",align:"end",children:(0,c.jsxs)(ag.l,{children:[m,h,p,_,g]})}),E[26]=m,E[27]=h,E[28]=p,E[29]=_,E[30]=g,E[31]=f):f=E[31],E[32]!==R||E[33]!==f||E[34]!==d?(x=(0,c.jsxs)(aD.W,{anchorRef:O,open:R,onOpenChange:B,children:[d,f]}),E[32]=R,E[33]=f,E[34]=d,E[35]=x):x=E[35],E[36]!==ee||E[37]!==w?(C="delete"===w?(0,c.jsx)(sU,{onCancel:Y,onConfirm:ee}):null,E[36]=ee,E[37]=w,E[38]=C):C=E[38],E[39]!==I||E[40]!==M||E[41]!==U||E[42]!==w?(v="share"===w?(0,c.jsx)(sI,{closeDialog:X,customCopilotId:I,userOwned:!M&&U}):null,E[39]=I,E[40]=M,E[41]=U,E[42]=w,E[43]=v):v=E[43],E[44]!==Q||E[45]!==w?(b="duplicate"===w&&Q?(0,c.jsx)(a8.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),F(null)},initialSpace:Q}):null,E[44]=Q,E[45]=w,E[46]=b):b=E[46],E[47]!==I||E[48]!==q||E[49]!==w?(j="report"===w&&I&&q?(0,c.jsx)(st,{reportUrl:q,onClose:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),F(null)}}):null,E[47]=I,E[48]=q,E[49]=w,E[50]=j):j=E[50],E[51]!==x||E[52]!==C||E[53]!==v||E[54]!==b||E[55]!==j?(S=(0,c.jsxs)(c.Fragment,{children:[x,C,v,b,j]}),E[51]=x,E[52]=C,E[53]=v,E[54]=b,E[55]=j,E[56]=S):S=E[56],S}function sM(){return(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let sU=({onConfirm:e,onCancel:t})=>{let[a,s]=(0,D.useState)(!1),n=async()=>{s(!0),(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{s(!1)}};return(0,c.jsx)(sl.K,{title:"Delete space",onClose:async e=>{a||("confirm"===e?await n():((0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()))},confirmButtonContent:a?(0,c.jsx)(sc.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{sL.displayName||(sL.displayName="CopilotSpacesMenu")}catch{}try{sU.displayName||(sU.displayName="DeleteDialog")}catch{}let sz={starButton:"SpacesHeader-module__starButton--RT51O"};var s$=a(44956),sV=a(86877),sW=a(4175);function sG({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s,maxDescriptionLength:n}){let{upsertCopilotSpace:r,isPending:i}=(0,su.$)(e),[o,l]=(0,D.useState)(e.description??""),[u,d]=(0,D.useState)(null);async function m(){try{let e=await r({description:o});a?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function h(){l(e.description??""),t()}return(0,c.jsx)(aF.l,{title:"Description",onClose:h,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:"p-3",children:[u&&(0,c.jsx)(R.l,{variant:"critical",title:u,className:"mb-2"}),(0,c.jsxs)(sV.A,{children:[(0,c.jsx)(sV.A.Label,{visuallyHidden:!0,children:"Description"}),(0,c.jsx)(sW.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,c.jsx)(sH,{text:o,promptCharLimit:n})]})]}),renderFooter:()=>(0,c.jsx)(s$.m,{onCancel:h,onSave:m,isLoading:i,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function sH(e){let t,a,s,n,r=(0,u.c)(10),{text:i,promptCharLimit:o}=e,l=i.length>o;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==o?(a=o.toLocaleString(),r[2]=o,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,c.jsxs)(c.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==l?(n=l?(0,c.jsx)(sV.A.Validation,{variant:"error",children:d}):(0,c.jsx)(sV.A.Caption,{children:d}),r[7]=d,r[8]=l,r[9]=n):n=r[9],n}try{sG.displayName||(sG.displayName="DescriptionDialog")}catch{}try{sH.displayName||(sH.displayName="CharacterCount")}catch{}function sq(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,f,x,v,b,j,E,N,I,w,F,A,T,R,B,O,P,L,M,U,z,W,H=(0,u.c)(87),{copilotSpace:q}=e,K=(0,g.Pk)(),Q=(0,X.b)(),J=(0,G.zy)(),Y=(0,Z.G)(),{updateGlobalNavigationBreadcrumbs:ee}=aN(),et=(0,sa.Z)(),[ea,es]=(0,D.useState)(!1),[en,er]=(0,D.useState)(!1),[ei,eo]=(0,D.useState)(!1),[el,ec]=(0,D.useState)(!1),[eu,ed]=(0,D.useState)(!1),[eh,ep]=(0,D.useState)(null),e_=(0,D.useRef)(null),eD=(0,D.useRef)(null),eg=(0,D.useRef)(null),ef=J.pathname,ex=Y&&ef!==C.VR,eC=y.W.copilotSpacesReadAccessToUserOwnedSpaces,ey=eC&&y.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:ev}=(0,V.Ao)(Y),{mutateAsync:eb}=(0,V.$7)(),{copilotSpacesConfig:ej}=(0,S.X)(),{maxDescriptionLength:eS}=ej;e:if(ey)t=q??ev??null;else{let e;if(!Y){t=null;break e}H[0]!==Y||H[1]!==K.customCopilots?(e=(0,$.JB)(K.customCopilots,Y),H[0]=Y,H[1]=K.customCopilots,H[2]=e):e=H[2],t=e}let eE=t,eN=eE?.ownerIsOrg&&eE?.adminable,eI=eC&&!eE?.ownerIsOrg&&Y&&eE?.adminable,ew=eN||eI,eF=eE?.ownerIsOrg&&("none"!==eE.baseRole||eE.collaborative),eA=!!(eE&&Y&&(eF||eE?.shared)),eT=(0,V.$W)(Y),{starCopilotSpace:ek,isLoading:eR}=((e,t)=>{let a,s,n,r,i,o,l,c=(0,u.c)(20),d=y.W.copilotSpacesReadAccessToUserOwnedSpaces&&y.W.copilotSpacesPublicAccessToUserOwnedSpaces,m=(0,X.b)(),{customCopilots:h}=(0,g.Pk)(),p=(0,sr.jE)();c[0]!==e||c[1]!==p||c[2]!==t?(a=async()=>{if(!d&&e&&await p.invalidateQueries({queryKey:(0,sn.dp)(e)}),d&&t){let e={id:t.id,owner:t.owner};await p.invalidateQueries({queryKey:(0,sn.dp)(e)})}return p.invalidateQueries({queryKey:sn.O6})},c[0]=e,c[1]=p,c[2]=t,c[3]=a):a=c[3],c[4]!==h||c[5]!==e||c[6]!==m||c[7]!==t?(s=async a=>{let s=d?t:(0,$.JB)(h,e);if(!s)return;let n=d?{id:s.id,owner:s.owner}:e,r=`${(0,$.Cb)(n)}/stars`,i=a.starred?"POST":"DELETE";if((await (0,so.lS)(r,{method:i})).ok)return s={...s,starred:a.starred},m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},c[4]=h,c[5]=e,c[6]=m,c[7]=t,c[8]=s):s=c[8],c[9]!==a||c[10]!==s?(n={onSuccess:a,mutationFn:s},c[9]=a,c[10]=s,c[11]=n):n=c[11];let _=(0,si.n)(n);return c[12]!==_?({mutateAsync:o,isPending:r,...i}=_,c[12]=_,c[13]=r,c[14]=i,c[15]=o):(r=c[13],i=c[14],o=c[15]),c[16]!==r||c[17]!==i||c[18]!==o?(l={starCopilotSpace:o,isLoading:r,...i},c[16]=r,c[17]=i,c[18]=o,c[19]=l):l=c[19],l})(Y,eE);H[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{ec(!1),es(!1),er(!1),eo(!1),ed(!1)},H[3]=a):a=H[3],H[4]!==Y?(s=[Y],H[4]=Y,H[5]=s):s=H[5],(0,D.useEffect)(a,s),H[6]!==ee?(n=()=>{ee()},r=[ee],H[6]=ee,H[7]=n,H[8]=r):(n=H[7],r=H[8]),(0,D.useEffect)(n,r),H[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),ec(!1)},H[9]=i):i=H[9];let eB=i;H[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),er(!1)},H[10]=o):o=H[10];let eO=o;H[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),es(!1)},H[11]=l):l=H[11];let eP=l;H[12]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),ed(!1)},H[12]=d):d=H[12];let eL=d;H[13]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),ec(!0)},H[13]=m):m=H[13];let eM=m;H[14]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),er(!0)},H[14]=h):h=H[14];let eU=h;H[15]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),es(!0)},H[15]=p):p=H[15];let ez=p;H[16]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),ed(!0)},H[16]=_):_=H[16];let e$=_;H[17]!==eb||H[18]!==et||H[19]!==Y?(f=async()=>{if(Y)try{await eb(Y),es(!1),et(C.VR)}catch(e){ep(e instanceof Error?e:Error(String(e))),eP()}},H[17]=eb,H[18]=et,H[19]=Y,H[20]=f):f=H[20];let eV=f;H[21]!==eE||H[22]!==ek?(x=()=>{eE&&ek&&((0,k.BI)("dotcom_chat.activate",{target:eE.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ek({starred:!eE.starred}))},H[21]=eE,H[22]=ek,H[23]=x):x=H[23];let eW=x,eG=eE?.adminable;H[24]!==eG?(v=eG&&(0,c.jsxs)(ag.l.Item,{variant:"danger",onSelect:ez,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.TrashIcon,{})}),"Delete"]}),H[24]=eG,H[25]=v):v=H[25];let eH=v;H[26]!==eE?(b=eE&&(0,c.jsxs)(ag.l.Item,{onSelect:eM,children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.CopyIcon,{})}),"Duplicate"]}),H[26]=eE,H[27]=b):b=H[27];let eq=b;H[28]!==eH||H[29]!==eq||H[30]!==ex||H[31]!==K.selectedThreadID?(j=ex&&!K.selectedThreadID&&(eq||eH)?(0,c.jsxs)(c.Fragment,{children:[eq,eH]}):null,H[28]=eH,H[29]=eq,H[30]=ex,H[31]=K.selectedThreadID,H[32]=j):j=H[32];let eK=j;H[33]===Symbol.for("react.memo_cache_sentinel")?(E=(0,c.jsx)(ax.Q,{variant:"link",onClick:()=>{eD.current?.openDialog(),(0,k.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}),H[33]=E):E=H[33];let eQ=E;H[34]!==ew?(N=ew&&(0,c.jsx)(e0.K,{icon:em.ShareIcon,onClick:eU,variant:"invisible","aria-label":"Share space",...(0,tc.G)("share-space-button")}),H[34]=ew,H[35]=N):N=H[35];let eJ=N;H[36]!==eA?(I=y.W.copilotSpacesReportAbuse&&eA&&(0,c.jsx)(e0.K,{icon:em.ReportIcon,onClick:e$,variant:"invisible","aria-label":"Report space content",...(0,tc.G)("report-space-button")}),H[36]=eA,H[37]=I):I=H[37];let eY=I;H[38]!==eE||H[39]!==eW||H[40]!==eR||H[41]!==Y?(w=eE&&Y&&(0,c.jsx)(e0.K,{ref:e_,onClick:eW,disabled:eR,icon:eE.starred?em.StarFillIcon:em.StarIcon,className:eE.starred?sz.starButton:void 0,variant:"invisible","aria-label":eE.starred?"Unstar space":"Star space"}),H[38]=eE,H[39]=eW,H[40]=eR,H[41]=Y,H[42]=w):w=H[42];let eX=w;H[43]===Symbol.for("react.memo_cache_sentinel")?(F=(0,c.jsx)(e0.K,{icon:em.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:sK,...(0,tc.G)("spaces-doc-link")}),H[43]=F):F=H[43],H[44]!==eX||H[45]!==eY||H[46]!==eJ?(A=(0,c.jsxs)(c.Fragment,{children:[eQ,F,eJ,eY,eX]}),H[44]=eX,H[45]=eY,H[46]=eJ,H[47]=A):A=H[47];let eZ=A;H[48]!==Q?(T=e=>{Q.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},H[48]=Q,H[49]=T):T=H[49];let e1=T,e2=eE?.name||"";return H[50]!==eZ||H[51]!==eK||H[52]!==e2?(R=(0,c.jsx)(ak,{showPreviewPaneButton:!1,conversationSpecificItems:eK,customButtons:eZ,defaultName:e2}),H[50]=eZ,H[51]=eK,H[52]=e2,H[53]=R):R=H[53],H[54]!==eh?(B=eh&&(0,c.jsxs)(ss.A,{variant:"danger",children:[(0,c.jsx)(em.AlertIcon,{}),"There was a problem deleting your space."]}),H[54]=eh,H[55]=B):B=H[55],H[56]!==ev||H[57]!==el?(O=el&&ev?(0,c.jsx)(a8.D,{dialogTitle:"Duplicate Space",closeDialog:eB,initialSpace:ev}):null,H[56]=ev,H[57]=el,H[58]=O):O=H[58],H[59]!==eV||H[60]!==Y||H[61]!==ea?(P=ea&&Y?(0,c.jsx)(sU,{onCancel:eP,onConfirm:eV}):null,H[59]=eV,H[60]=Y,H[61]=ea,H[62]=P):P=H[62],H[63]!==eN||H[64]!==Y||H[65]!==en||H[66]!==eI?(L=en&&Y?(0,c.jsx)(sI,{closeDialog:eO,customCopilotId:Y,userOwned:!!(!eN&&eI)}):null,H[63]=eN,H[64]=Y,H[65]=en,H[66]=eI,H[67]=L):L=H[67],H[68]!==eE||H[69]!==e1||H[70]!==eS||H[71]!==ei?(M=ei&&eE?(0,c.jsx)(sG,{copilotSpace:eE,onClose:()=>eo(!1),returnFocusRef:e_,maxDescriptionLength:eS,onSaved:e1}):null,H[68]=eE,H[69]=e1,H[70]=eS,H[71]=ei,H[72]=M):M=H[72],H[73]!==eE||H[74]!==eT||H[75]!==Y||H[76]!==eu?(U=eu&&eE&&Y?(0,c.jsx)(st,{reportUrl:eT,onClose:eL}):null,H[73]=eE,H[74]=eT,H[75]=Y,H[76]=eu,H[77]=U):U=H[77],H[78]===Symbol.for("react.memo_cache_sentinel")?(z=(0,c.jsx)(a7.l,{ref:eD,mode:"immersive",returnFocusRef:eg}),H[78]=z):z=H[78],H[79]!==R||H[80]!==B||H[81]!==O||H[82]!==P||H[83]!==L||H[84]!==M||H[85]!==U?(W=(0,c.jsxs)(c.Fragment,{children:[R,B,O,P,L,M,U,z]}),H[79]=R,H[80]=B,H[81]=O,H[82]=P,H[83]=L,H[84]=M,H[85]=U,H[86]=W):W=H[86],W}function sK(){return(0,k.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{sq.displayName||(sq.displayName="SpacesHeader")}catch{}var sQ=a(81829);let sJ={container:"InlineEditableText-module__container--aZo_B",textarea:"InlineEditableText-module__textarea--5ls6_",placeholder:"InlineEditableText-module__placeholder--e7Xf4",readModeContainer:"InlineEditableText-module__readModeContainer--ysnii",editIcon:"InlineEditableText-module__editIcon--UTuha",readModeText:"InlineEditableText-module__readModeText--MyHNO"},sY={circleProgressBar:"CircleProgressBar-module__circleProgressBar--LGSpA",exceeded:"CircleProgressBar-module__exceeded--duTAI"};function sX({value:e}){let t=e>100;return(0,c.jsx)("div",{className:(0,e1.$)(sY.circleProgressBar,t?sY.exceeded:""),style:{"--progress":`${e}%`},children:(0,c.jsxs)("progress",{value:e,max:"100",style:{visibility:"hidden",height:0,width:0},children:[e,"%"]})})}try{sX.displayName||(sX.displayName="CircleProgressBar")}catch{}let sZ={actionButtons:"InlineEditActions-module__actionButtons--yWSpe",cancelButton:"InlineEditActions-module__cancelButton--a0gzS",saveButton:"InlineEditActions-module__saveButton--pMcIj",line:"InlineEditActions-module__line--vKo7v",characterCountStatus:"InlineEditActions-module__characterCountStatus--wRiqc",characterCountText:"InlineEditActions-module__characterCountText--QcUxR"};function s0({value:e,maxLength:t,onSave:a,onCancel:s}){let n=!!(t&&t>0),r=n&&e.length>(t||0);return(0,c.jsxs)("div",{className:sZ.actionButtons,children:[n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s2,{text:e,promptCharLimit:t||0}),(0,c.jsx)(s1,{})]}),(0,c.jsx)(e0.K,{className:sZ.cancelButton,variant:"invisible",icon:em.XIcon,"aria-label":"Cancel",size:"small",onClick:s}),(0,c.jsx)(e0.K,{className:sZ.saveButton,variant:"invisible",icon:em.CheckIcon,"aria-label":"Save",disabled:r,size:"small",onClick:a})]})}let s1=()=>(0,c.jsx)("div",{className:sZ.line});function s2({text:e,promptCharLimit:t}){return(0,c.jsxs)("div",{className:sZ.characterCountStatus,children:[(0,c.jsx)(sX,{value:e.length/t*100}),(0,c.jsx)("span",{className:sZ.characterCountText,children:(t-e.length).toLocaleString()})]})}try{s0.displayName||(s0.displayName="InlineEditActions")}catch{}try{s1.displayName||(s1.displayName="Line")}catch{}try{s2.displayName||(s2.displayName="CharacterCountStatus")}catch{}function s3({value:e,onChange:t,maxLength:a=null,placeholder:s="",className:n="",defaultEditing:r=!1}){let[i,o]=(0,D.useState)(r),[l,u]=(0,D.useState)(e),[d,m]=(0,D.useState)(null),h=(0,D.useRef)(null),p=(0,D.useRef)(null),_=(0,D.useRef)(null);(0,D.useEffect)(()=>{let e=e=>{i&&_.current&&!_.current.contains(e.target)&&(o(!1),t(l.trim()))};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i,l,_,t]),(0,D.useEffect)(()=>{h.current&&m(h.current.offsetHeight)},[e]),(0,D.useEffect)(()=>{i&&p.current&&(p.current.focus(),p.current.style.height=`${d}px`)},[i,d]);let g=()=>{o(!1),t(l.trim())};return(0,c.jsxs)("div",{ref:_,className:(0,e1.$)(sJ.container,n),children:[i?(0,c.jsx)(sW.Ay,{ref:p,value:l,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:s,className:sJ.textarea,style:{height:d||"auto"},resize:"none"}):(0,c.jsxs)("button",{ref:h,onClick:()=>o(!0),className:sJ.readModeContainer,children:[(0,c.jsx)("span",{className:(0,e1.$)(sJ.readModeText,n),children:e?.trim()||(0,c.jsx)("span",{className:sJ.placeholder,children:s})}),(0,c.jsx)(em.PencilIcon,{className:sJ.editIcon,size:16})]}),i&&(0,c.jsx)(s0,{value:l,maxLength:a,onSave:g,onCancel:()=>{o(!1),u(e)}})]})}try{s3.displayName||(s3.displayName="InlineEditableText")}catch{}var s4=a(26956),s6=a(77141),s5=a(62935);function s7(e){if(y.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}let s8={container:"SpaceNotFoundComponent-module__container--IrGEt",description:"SpaceNotFoundComponent-module__description--klDGL",banner:"SpaceNotFoundComponent-module__banner--uHb2q",icon:"SpaceNotFoundComponent-module__icon--dQYtq"},s9=e=>{let t,a,s,n,r,i=(0,u.c)(7),{protectedOrganizations:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(em.AlertIcon,{className:s8.icon}),a=(0,c.jsx)("h3",{children:"Space not found"}),s=(0,c.jsx)("p",{className:s8.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),i[0]=t,i[1]=a,i[2]=s):(t=i[0],a=i[1],s=i[2]),i[3]!==o?(n=o&&!(0,b.G7)("global_sso_banner")&&(0,c.jsx)(tP.x,{protectedOrgs:o,redirectURI:ne}),i[3]=o,i[4]=n):n=i[4],i[5]!==n?(r=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:s8.container,children:[t,a,s,(0,c.jsx)("div",{className:s8.banner,children:n})]})}),i[5]=n,i[6]=r):r=i[6],r};try{s9.displayName||(s9.displayName="SpaceNotFoundComponent")}catch{}function ne(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}var nt=a(97564),na=a(6219),ns=a(60905),nn=a(30456),nr=a(81075),ni=a(75735),no=a(72439);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,nr._)(this,UploadableFileExtensions,nl))return(0,nr._)(this,UploadableFileExtensions,nl);let e=[...no.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,ni._)(this,UploadableFileExtensions,nl,new Set(e.map(e=>e.toLowerCase()))),(0,nr._)(this,UploadableFileExtensions,nl)}static images(e){return new Set(ns.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var nl={writable:!0,value:void 0},nc=a(31971);let nu=()=>{let e,t,a,s,n=(0,u.c)(7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:nm},n[0]=e):e=n[0];let r=(0,si.n)(e);return n[1]!==r?({mutateAsync:t,...a}=r,n[1]=r,n[2]=t,n[3]=a):(t=n[2],a=n[3]),n[4]!==t||n[5]!==a?(s={getCopilotSpaceResourceSizes:t,...a},n[4]=t,n[5]=a,n[6]=s):s=n[6],s};function nd(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,nc.M)(e)}}async function nm(e){let t={resources:e.resources?.map(nd)},a=await (0,so.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw s.errorMessages;return s}function nh({onResourcesAdded:e,onError:t,onUploadingChange:a}){let{availableModels:s}=(0,g.Pk)(),{hydrateResourcesWithSizePercentages:n}=function(){let{getCopilotSpaceResourceSizes:e}=nu();return{hydrateResourcesWithSizePercentages:(0,D.useCallback)(async t=>{if(0===t.length)return;let a=await e({resources:t});for(let e of t)e.sizePercentage=a[e.id]??0},[e])}}();return{processFiles:(0,D.useCallback)(async(r,{source:i})=>{if(r&&0!==r.length){(function(e,{source:t}){for(let a of((0,k.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=np(a.name);(0,k.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:a.type,fileSize:a.size,source:t})}})(r,{source:i}),a?.(!0),t?.([]);try{let{imageFiles:a,nonImageFiles:o}=function(e,t){let a=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let a=np(e.name);return t.has(a)}(t,a)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(r,s),[l,c]=await Promise.all([nf(o),nD(a,s)]),u=[...l.resources,...c.resources];await n(u),u.length>0&&(e(u),(0,$.Pg)(u,i));let d=[...l.errorMessages,...c.errorMessages];d.length>0&&t?.(d)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{a?.(!1)}}},[s,e,t,n,a])}}function np(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function n_(e){let t=[],a=[];for(let s of e)"fulfilled"===s.status?"resource"in s.value?t.push(s.value.resource):a.push(s.value.error):a.push("An unexpected error occurred while processing a file.");return{errorMessages:a,resources:t}}async function nD(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!y.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let a=e.map(e=>ng(e,ns.s.getMimeTypes(t)));return n_(await Promise.allSettled(a))}async function ng(e,t){try{if(e.size>ns.s.getAttachmentSizeLimit())return{error:nv(e.name)};if(!t.includes(e.type))return{error:ny(e.name)};let{id:a,attachment:s}=ns.s.makeImageReference(e,""),n=await s.prefetch();return{resource:{id:a,type:"media_content",mediaType:e.type,name:e.name||"Image",url:n.href||"",copilotChatAttachmentId:n.id||0,height:s.height||0,width:s.width||0,markedForDestroy:!1}}}catch(t){var a,s;return a=t,s=e,a instanceof Error&&"FileSizeError"===a.name?{error:nv(s.name)}:{error:nC(s.name)}}}async function nf(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>nx(e));return n_(await Promise.allSettled(t))}async function nx(e){try{var t;if(!e.type.startsWith("text/")){let t=np(e.name);if(!UploadableFileExtensions.text.has(t))return{error:ny(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let a=crypto.randomUUID(),s=await new nn.N(a,e).prefetch();return{resource:{id:a,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:s.id,url:s.href,markedForDestroy:!1}}}catch(n){var a=n,s=e;if(!(a instanceof na.ZK))return{error:nC(s.name)};let t=a.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||nC(s.name)}}}function nC(e){return`An error occurred uploading "${e}".`}function ny(e){return`File "${e}" is not a supported file type.`}function nv(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],a=e,s=0;for(;a>=1024&&s<t.length-1;)a/=1024,s++;let n=Math.round(100*a)/100;return`${n}${t[s]}`}(ns.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let nb=(0,D.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:a},s)=>{let{processFiles:n}=nh({onResourcesAdded:e,onError:t,onUploadingChange:a}),{availableModels:r}=(0,g.Pk)(),i=(0,D.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...y.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(r)):[]].join(","),[r]),o=(0,D.useRef)(null);return(0,D.useImperativeHandle)(s,()=>({addResources:()=>o.current?.click()})),(0,c.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:i,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(n(e.target.files,{source:"file-upload"}),e.target.value="")}})});nb.displayName="FileUploadInput";var nj=a(73017),nS=a(46747),nE=a(50467);let UrlDetails=class UrlDetails{constructor(e,t="",a="",s="",n=0,r="",i="",o="unknown"){(0,nE._)(this,"url",void 0),(0,nE._)(this,"owner",void 0),(0,nE._)(this,"repo",void 0),(0,nE._)(this,"number",void 0),(0,nE._)(this,"type",void 0),(0,nE._)(this,"id",void 0),(0,nE._)(this,"file_path",void 0),(0,nE._)(this,"errorMessage",void 0),(0,nE._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=a,this.repo=s,this.number=n,this.type=o,this.file_path=i,this.sha=r}};function nN(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function nI(e){let{input:t,spaceOwner:a}=e,s={resources_attributes:t.map(nN),space_owner:a},n=await (0,so.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:s}),r=await n.json();if(!n.ok)throw r;return r}function nw(e){let t,a,s,n,r,i,o,l,d,m,h,p,_,g,f,x,C,y=(0,u.c)(62),{onClose:v,onSave:b,resourcesToSave:j,owner:S,resourceCounts:E}=e,[N,I]=(0,D.useState)(!1),[w,F]=(0,D.useState)(nT),[A,T]=(0,D.useState)(!1),[k,B]=(0,D.useState)(!1),{validateUrlResources:O}=(()=>{let e,t,a,s,n=(0,u.c)(7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:nI},n[0]=e):e=n[0];let r=(0,si.n)(e);return n[1]!==r?({mutateAsync:a,...t}=r,n[1]=r,n[2]=t,n[3]=a):(t=n[2],a=n[3]),n[4]!==t||n[5]!==a?(s={validateUrlResources:a,...t},n[4]=t,n[5]=a,n[6]=s):s=n[6],s})();if(y[0]!==N||y[1]!==v||y[2]!==b||y[3]!==S||y[4]!==j||y[5]!==w||y[6]!==O){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),N||(I(!0),s().finally(()=>{I(!1)}))},y[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.sha,s="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${a}/${s}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.number,s=e.type;return`${t}/${a}/${s}`}return""},y[8]=e):e=y[8];let a=e,s=async()=>{T(!1),B(!1);let e=(()=>{let e=new Set(j?.map(e=>a(e))??[]),t=new Set;return w.filter(s=>{let n=a(s);return!(t.has(n)||e.has(n))&&""!==s.url.trim()&&(t.add(n),!0)})})(),t=nA,s=e.filter(e=>"unknown"===e.type||S&&e.owner!==S||e.file_path&&!t(e.file_path));if(s.length>0){F(w.map(e=>S&&e.owner&&e.owner!==S?{...e,errorMessage:`This doesn't belong to the ${S} organization.`}:e.file_path&&!t(e.file_path)?{...e,errorMessage:"Unsupported file type"}:s.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),T(!0);return}if(0===e.length)return void v();try{let t=await O({input:e,spaceOwner:S});b(t),(0,$.Pg)(t,"url-dialog"),v()}catch(e){if(Array.isArray(e)){for(let t of e){let e=w.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}T(!0)}}};y[0]=N,y[1]=v,y[2]=b,y[3]=S,y[4]=j,y[5]=w,y[6]=O,y[7]=t}else t=y[7];let P=!!E&&E.currentResourceCount+w.length+1>E.maxResourceCount;y[9]!==w||y[10]!==P?(a=()=>{if(P)return void B(!0);F([...w,new UrlDetails(crypto.randomUUID())])},y[9]=w,y[10]=P,y[11]=a):a=y[11];let L=a,M=k&&E?`You can select a maximum of ${E.maxResourceCount} sources.`:null;y[12]!==k||y[13]!==E?(s=e=>{k&&E&&(E.currentResourceCount+e.length>E.maxResourceCount||B(!1))},y[12]=k,y[13]=E,y[14]=s):s=y[14];let U=s;y[15]!==U||y[16]!==w?(n=e=>{let t=[...w];t.splice(e,1),F(t),U(t)},y[15]=U,y[16]=w,y[17]=n):n=y[17];let z=n;if(y[18]!==U||y[19]!==w){r=(t,a)=>{let s=[...w],n=e(a,s[t]||new UrlDetails(crypto.randomUUID()));s[t]=n,F(s),U(s)};let e=nF;y[18]=U,y[19]=w,y[20]=r}else r=y[20];if(y[21]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},y[21]=i):i=y[21],y[22]!==t||y[23]!==N||y[24]!==v||y[25]!==M?(o=()=>(0,c.jsxs)(aF.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:M&&(0,c.jsx)(sV.A.Validation,{variant:"error",children:M})}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(ax.Q,{onClick:v,children:"Cancel"}),(0,c.jsx)(ax.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:N,children:"Add"})]})]}),y[22]=t,y[23]=N,y[24]=v,y[25]=M,y[26]=o):o=y[26],y[27]!==A?(l=A&&(0,c.jsx)(R.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),y[27]=A,y[28]=l):l=y[28],y[29]!==S?(d=S&&(0,c.jsx)(nj.JR,{html:`from the <b>${S}</b> organization`}),y[29]=S,y[30]=d):d=y[30],y[31]!==d?(m=(0,c.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",d," you want to add. You can include issues and pull requests."]}),y[31]=d,y[32]=m):m=y[32],y[33]!==t?(h={"github:submit-form":()=>t()},y[33]=t,y[34]=h):h=y[34],y[35]!==A||y[36]!==r||y[37]!==z||y[38]!==w){let e;y[40]!==A||y[41]!==r||y[42]!==z||y[43]!==w.length?(e=(e,t)=>(0,c.jsxs)("div",{style:{width:"100%"},children:[(0,c.jsx)(nk,{index:t,removeUrlTextInputRow:z,inputCount:w.length,updateUrls:r,setIsUpdating:I,urlValue:e.url}),A&&void 0!==e.errorMessage&&(0,c.jsx)(sV.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),y[40]=A,y[41]=r,y[42]=z,y[43]=w.length,y[44]=e):e=y[44],p=w.map(e),y[35]=A,y[36]=r,y[37]=z,y[38]=w,y[39]=p}else p=y[39];return y[45]!==p?(_=(0,c.jsx)(sp.B,{direction:"vertical",align:"center",children:p}),y[45]=p,y[46]=_):_=y[46],y[47]!==t||y[48]!==_?(g=(0,c.jsx)("form",{onSubmit:t,children:_}),y[47]=t,y[48]=_,y[49]=g):g=y[49],y[50]!==g||y[51]!==h?(f=(0,c.jsx)(tu.tL,{commands:h,children:g}),y[50]=g,y[51]=h,y[52]=f):f=y[52],y[53]!==L?(x=(0,c.jsx)(ax.Q,{leadingVisual:em.PlusIcon,className:"mt-3",onClick:L,children:"Add another"}),y[53]=L,y[54]=x):x=y[54],y[55]!==v||y[56]!==f||y[57]!==x||y[58]!==o||y[59]!==l||y[60]!==m?(C=(0,c.jsxs)(aF.l,{position:i,width:"large",title:"Add via GitHub URL",onClose:v,renderFooter:o,children:[l,m,f,x]}),y[55]=v,y[56]=f,y[57]=x,y[58]=o,y[59]=l,y[60]=m,y[61]=C):C=y[61],C}function nF(e,t){let a=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),s=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),n=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_issue"):s?(t.owner=s[1]??"",t.repo=s[2]??"",t.number=parseInt(s[3]??"0",10),t.type="github_pull_request"):n&&(t.owner=n[1]??"",t.repo=n[2]??"",t.sha=n[3]??"",t.file_path=n[4]??"",t.type="github_file"),t}function nA(e){let t=e.match(/\.([^.]+)$/);if(!t)return!0;let a=`.${t[1]?.toLowerCase()}`;return UploadableFileExtensions.text.has(a)}function nT(){return[new UrlDetails(crypto.randomUUID())]}function nk(e){let t,a,s,n,r,i,o,l=(0,u.c)(18),{index:d,removeUrlTextInputRow:m,inputCount:h,updateUrls:p,setIsUpdating:_,urlValue:g}=e,[f,x]=(0,D.useState)(g),[C,y]=(0,D.useState)(!1);l[0]!==g?(t=()=>{x(g)},a=[g],l[0]=g,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,D.useEffect)(t,a);let v=e=>{let t=e.target.value;x(t),C||(y(!0),_(!0)),b(t)};l[3]!==d||l[4]!==_||l[5]!==p?(s=e=>{p(d,e),y(!1),_(!1)},l[3]=d,l[4]=_,l[5]=p,l[6]=s):s=l[6];let b=(0,nS.d)(s,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(sV.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=n):n=l[7],l[8]!==v||l[9]!==f?(r=(0,c.jsx)(sD.A,{placeholder:"https://github.com/mona/playground/issues/123",value:f,onChange:v,className:"width-full"}),l[8]=v,l[9]=f,l[10]=r):r=l[10],l[11]!==d||l[12]!==h||l[13]!==m?(i=h>1&&(0,c.jsx)(e0.K,{icon:em.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>m(d)}),l[11]=d,l[12]=h,l[13]=m,l[14]=i):i=l[14],l[15]!==r||l[16]!==i?(o=(0,c.jsxs)(sV.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[n,r,i]}),l[15]=r,l[16]=i,l[17]=o):o=l[17],o}try{nw.displayName||(nw.displayName="GitHubUrlDialog")}catch{}try{(r=AddUrlTextInputRow).displayName||(r.displayName="AddUrlTextInputRow")}catch{}try{nk.displayName||(nk.displayName="UrlTextInputRow")}catch{}var nR=a(77809);function nB(e){let t,a,s,n=(0,u.c)(14),{isOpen:r,onClose:i,onResourcesAdded:o,owner:l,resourceCounts:d,initialRepo:m,onRepoSelect:h,hideBackButton:p}=e,_=(0,D.useRef)(null),{getCopilotSpaceResourceSizes:g}=nu(),{searchWorkerFilePath:f}=(0,S.X)();n[0]!==i||n[1]!==o||n[2]!==g?(t=async e=>{let t=e.filter(nO);if(0===t.length)return void i();let a=await g({resources:t}),s=t.map(e=>{let t=a[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});o(s),(0,$.Pg)(s,"file-picker"),i()},n[0]=i,n[1]=o,n[2]=g,n[3]=t):t=n[3];let x=t;return r?(n[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],n[4]=a):a=n[4],n[5]!==p||n[6]!==m||n[7]!==i||n[8]!==h||n[9]!==l||n[10]!==d||n[11]!==x||n[12]!==f?(s=(0,c.jsx)(nR.Q,{formData:a,onCancel:i,onSaveFiles:x,findFileWorkerPath:f,attachmentButtonRef:_,owner:l,resourceCounts:d,initialRepo:m,onRepoSelect:h,hideBackButton:p,maxFileCount:50}),n[5]=p,n[6]=m,n[7]=i,n[8]=h,n[9]=l,n[10]=d,n[11]=x,n[12]=f,n[13]=s):s=n[13],s):null}function nO(e){return"github_file"===e.type}try{nB.displayName||(nB.displayName="SpacesFilePicker")}catch{}let nP={dialogBody:"TextFileDialog-module__dialogBody--e27Cv",grow:"TextFileDialog-module__grow--TUgOh",form:"TextFileDialog-module__form--BVMha",footerContainer:"TextFileDialog-module__footerContainer--A_bOn"};function nL({sizePercentage:e,onClose:t,onSave:a,resource:s,readOnly:n=!1}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,S.X)(),[i,o]=(0,D.useState)(s?.name||""),[l,u]=(0,D.useState)(s?.text||""),[d,m]=(0,D.useState)(!1),[h,p]=(0,D.useState)(""),[_,g]=(0,D.useState)(!1),f=s?.text??"",[x,C]=(0,D.useState)({}),{getCopilotSpaceResourceSizes:y}=nu(),v=async e=>{e?.preventDefault(),e?.stopPropagation();let n=!i.trim(),r=!l.trim();if(n||r)return void C(e=>({...e,"resources.name":n?"Name is required":"","resources.text":r?"Content is required":""}));m(!0),p("");try{let e={id:s?.id||Date.now().toString(),databaseId:s?.databaseId,type:"free_text",name:i,text:l,markedForDestroy:!1},n=await y({resources:[e]}),r={...e,sizePercentage:n[e.id]};a(r),(0,$.Pg)([r],"text-file-dialog"),t()}catch{p("An unexpected error occurred while validating the text file")}finally{m(!1)}};return(0,c.jsx)(aF.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,c.jsxs)("div",{className:nP.dialogBody,children:[h&&(0,c.jsx)(R.l,{variant:"critical",className:"mb-2",title:h}),(0,c.jsx)(tu.tL,{className:nP.grow,commands:{"github:submit-form":()=>void v()},children:(0,c.jsxs)("form",{onSubmit:v,className:nP.form,children:[(0,c.jsxs)(sV.A,{required:!0,children:[(0,c.jsx)(sV.A.Label,{children:"Name"}),(0,c.jsx)(sD.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{o(e.target.value),C(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:x["resources.name"]?"error":void 0,...(0,tc.G)("text-file-name-input"),readOnly:n}),x["resources.name"]&&(0,c.jsx)(sV.A.Validation,{variant:"error",children:x["resources.name"]})]}),(0,c.jsxs)(sV.A,{required:!0,className:nP.grow,children:[(0,c.jsx)(sV.A.Label,{children:"Content"}),(0,c.jsx)(sW.Ay,{block:!0,name:"content",value:l,placeholder:"Enter content here",resize:"none",className:nP.grow,onChange:e=>{u(e.target.value),C(e=>({...e,"resources.text":""}))},...(0,tc.G)("text-file-content-input"),readOnly:n}),x["resources.text"]?(0,c.jsx)(sV.A.Validation,{variant:"error",children:x["resources.text"]}):void 0!==e&&(0,c.jsx)(nM,{text:l,percentage:e,resourceContent:f,setOverSpaceLimit:g,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,c.jsxs)("div",{className:nP.footerContainer,children:[(0,c.jsx)(ax.Q,{onClick:t,children:"Cancel"}),(0,c.jsx)(ax.Q,{variant:"primary",onClickCapture:_?void 0:v,loadingAnnouncement:"Validating resource",inactive:_,loading:d,...(0,tc.G)("save-text-file-button"),disabled:n,children:"Add"})]})})}function nM(e){let t,a,s,n,r=(0,u.c)(11),{text:i,percentage:o,resourceContent:l,setOverSpaceLimit:d,maxContentSize:m}=e;r[0]!==l.length||r[1]!==i.length?(t=i.length>l.length?Math.abs(i.length-l.length):-Math.abs(i.length-l.length),r[0]=l.length,r[1]=i.length,r[2]=t):t=r[2];let h=o/100*m+t,p=Math.floor(h/m*100),_=h>m;if(r[3]!==d||r[4]!==_?(a=()=>{d(_)},s=[_,d],r[3]=d,r[4]=_,r[5]=a,r[6]=s):(a=r[5],s=r[6]),(0,D.useEffect)(a,s),_){let e,t=`Total percent used: ${p}%`;return r[7]!==t?(e=(0,c.jsx)(sV.A.Validation,{variant:"error",children:t}),r[7]=t,r[8]=e):e=r[8],e}let g=`Total percent used: ${p}%`;return r[9]!==g?(n=(0,c.jsx)(sV.A.Caption,{children:g}),r[9]=g,r[10]=n):n=r[10],n}try{nL.displayName||(nL.displayName="TextFileDialog")}catch{}try{nM.displayName||(nM.displayName="CharacterCount")}catch{}let nU=({children:e,onResourcesAdded:t,onError:a,owner:s,sizePercentage:n,resourcesToSave:r,resourceCounts:i,onUploadingChange:o,initialRepo:l,onRepoSelect:u})=>{let[d,m]=(0,D.useState)(!1),[h,p]=(0,D.useState)(!1),[_,g]=(0,D.useState)(!1),[f,x]=(0,D.useState)(!1),[C,y]=(0,D.useState)(),v=(0,D.useRef)(null),b=(0,D.useRef)(null),j=(0,D.useRef)(!1),S=(0,D.useCallback)(async e=>{if(e){j.current=!0,y(void 0);try{let a=await (0,nt.V)(e),s={type:"repository",id:`${a.id}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,ownerAvatarUrl:a.ownerAvatarUrl,ownerType:a.ownerType,markedForDestroy:!1};t([s]),(0,k.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_REPO_PICKER"}),u?.(a),x(!1)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";y("Error: failed to attach repository. Please try again."),a?.([e])}finally{j.current=!1}}},[a,u,t]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nb,{ref:v,onResourcesAdded:t,onError:a,onUploadingChange:o}),(0,c.jsxs)(aD.W,{anchorRef:b,children:[(0,c.jsx)(aD.W.Anchor,{ref:b,children:e}),(0,c.jsx)(aD.W.Overlay,{align:"end",width:"small",children:(0,c.jsxs)(ag.l,{children:[(0,c.jsxs)(ag.l.Group,{children:[(0,c.jsx)(ag.l.GroupHeading,{children:"Repository"}),(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("copilot-spaces.click",{target:"ADD_REPOSITORY_BUTTON"}),y(void 0),x(!0)},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.RepoIcon,{...(0,tc.G)("add-repository-menu-item-icon")})}),"Add repository"]}),(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),p(!0)},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.FileCodeIcon,{...(0,tc.G)("add-github-files-menu-item-icon")})}),"Add files from repository"]}),(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),g(!0)},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),(0,c.jsx)(ag.l.Divider,{}),(0,c.jsxs)(ag.l.Group,{children:[(0,c.jsx)(ag.l.GroupHeading,{children:"Local"}),(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),v.current?.addResources()},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.UploadIcon,{})}),"Upload a file"]}),(0,c.jsxs)(ag.l.Item,{onSelect:()=>{(0,k.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),m(!0)},children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.PasteIcon,{...(0,tc.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})})]}),d&&(0,c.jsx)(nL,{sizePercentage:n,onClose:()=>m(!1),onSave:e=>t([e])}),h&&(0,c.jsx)(nB,{isOpen:h,onClose:()=>p(!1),onResourcesAdded:t,owner:s,resourceCounts:i,initialRepo:l,onRepoSelect:u}),_&&(0,c.jsx)(nw,{onClose:()=>g(!1),onSave:e=>t(e),resourcesToSave:r,resourceCounts:i,owner:s}),f&&(0,c.jsx)(aQ.X1,{cancelReturnFocusRef:b,submitReturnFocusRef:b,open:f,onOpenChange:e=>{j.current||x(e)},selectedRepoIds:new Set,onSelectRepo:S,selectionVariant:"instant",description:"Select a repository to add to this space.",error:C,ownerDisplayLogin:s,includeForks:!0})]})};try{nU.displayName||(nU.displayName="AddAttachmentMenu")}catch{}function nz(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,nc.M)(e)}}var n$=a(46720),nV=a(74753),nW=a(10006),nG=a(3803);function nH(e){let t=(0,u.c)(14),{attachment:a,className:s}=e;switch(a.type){case"github_file":{let e;return t[0]!==s?(e=(0,c.jsx)(em.FileIcon,{className:s}),t[0]=s,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==s?(e=(0,c.jsx)(em.PasteIcon,{className:s}),t[2]=s,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==s?(e=(0,c.jsx)(em.FileIcon,{className:s}),t[4]=s,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==s?(e=(0,c.jsx)(em.IssueOpenedIcon,{className:s}),t[6]=s,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==s?(e=(0,c.jsx)(em.GitPullRequestIcon,{className:s}),t[8]=s,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==s?(e=(0,c.jsx)(em.ImageIcon,{className:s}),t[10]=s,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==s?(e=(0,c.jsx)(em.RepoIcon,{className:s}),t[12]=s,t[13]=e):e=t[13],e}default:return null}}try{nH.displayName||(nH.displayName="AttachmentIcon")}catch{}let nq={attachmentText:"AttachmentPreview-module__attachmentText--ELczx",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--hqleR"};function nK(e){let t=(0,u.c)(13),{attachment:a}=e;if(!a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{className:nq.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(a.type){case"free_text":{let e;return t[1]!==a.text?(e=(0,c.jsx)("p",{className:nq.attachmentText,children:a.text}),t[1]=a.text,t[2]=e):e=t[2],e}case"media_content":{let e,s,n,r=`image: ${a.name}`;return t[3]!==a.url||t[4]!==r?(e=(0,c.jsx)("img",{alt:r,src:a.url}),t[3]=a.url,t[4]=r,t[5]=e):e=t[5],t[6]!==a.name||t[7]!==a.url?(s=(0,c.jsx)(ax.Q,{onClick:()=>(function(e,t,a="image"){let s=document.createElement("a");s.href=e,s.setAttribute("download",t||a),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(a.url,a.name),children:"Download"}),t[6]=a.name,t[7]=a.url,t[8]=s):s=t[8],t[9]!==e||t[10]!==s?(n=(0,c.jsxs)("div",{className:nq.attachmentPreviewImage,children:[e,s]}),t[9]=e,t[10]=s,t[11]=n):n=t[11],n}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{nK.displayName||(nK.displayName="AttachmentPreview")}catch{}let nQ={warningIcon:"ReferencesTable-module__warningIcon--ZQ8GD",referenceTitle:"ReferencesTable-module__referenceTitle--X4GB2",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--cUDlc",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--rezaS",headerText:"ReferencesTable-module__headerText--HR4t9"};function nJ({resources:e,onDeleteResources:t,onUpdateResource:a,sizePercentage:s,onResourcesAdded:n,owner:r,readOnly:i=!1}){let o=(0,D.useMemo)(()=>Object.values(e.reduce((e,t)=>{let a=nZ(t);return{...e,[a]:t}},{})),[e]),[l,u]=(0,D.useState)(!1),[d,m]=(0,D.useState)(null),h=(0,D.useRef)(null),[p,_]=(0,D.useState)([]),g=(0,D.useCallback)(()=>{p.length>0&&(t(p),_([]))},[t,p]),f=(0,D.useCallback)(()=>{p.length>0?_([]):_(o)},[p,o]),x=(0,D.useMemo)(()=>{let e={id:"id",header:()=>(0,c.jsx)("span",{className:nQ.headerText,children:p.length>0?`${p.length} selected`:`${o.length} ${1===o.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:a,fileUrl:s,sha:n}=(0,$.q5)(e);return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(nH,{attachment:e,className:"fgColor-muted"}),(0,c.jsxs)(sp.B,{gap:"none",children:[(0,c.jsx)("div",{children:e.fileExists?(0,c.jsxs)(sp.B,{direction:"horizontal",wrap:"wrap",children:[(0,c.jsx)(s_.A,{title:a,className:nQ.referenceTitle,children:(0,c.jsx)(eN.A,{rel:"noopener",target:"_blank",href:s,className:nQ.referenceTitleLink,children:a})}),n&&(0,c.jsx)(af.A,{className:"ml-1",children:n.substring(0,7)})]}):(0,c.jsx)(s_.A,{title:a,className:nQ.referenceTitle,children:a})}),(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:t,className:(0,e1.$)(nQ.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(nH,{attachment:e,className:"fgColor-muted"}),(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:e.name,maxWidth:300,className:nQ.referenceTitle,children:e.name})})]});case"repository":return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(sm.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,c.jsxs)(sp.B,{gap:"none",children:[(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:e.nwo,maxWidth:300,className:nQ.referenceTitle,children:(0,c.jsx)(eN.A,{className:nQ.referenceTitleLink,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),!i&&(0,c.jsx)("div",{className:(0,e1.$)(nQ.referenceSubtitle,"fgColor-attention"),...(0,tc.G)("repo-warning"),children:"Attaching a large number of files may reduce response quality."})]})]});case"uploaded_text_file":return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(nH,{attachment:e,className:"fgColor-muted"}),(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:e.name,maxWidth:300,className:nQ.referenceTitle,children:(0,c.jsx)(eN.A,{className:nQ.referenceTitleLink,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{children:(0,c.jsx)(nH,{attachment:e,className:"fgColor-success"})}),(0,c.jsxs)(sp.B,{gap:"none",children:[(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:e.title||"",className:nQ.referenceTitle,children:(0,c.jsxs)(eN.A,{rel:"noopener",target:"_blank",href:e.url,className:nQ.referenceTitleLink,children:[e.title," ",(0,c.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,c.jsx)("div",{children:(0,c.jsx)(s_.A,{title:e.nwo||"",className:(0,e1.$)(nQ.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{className:"fgColor-muted",children:(0,c.jsx)(nH,{attachment:e,className:"fgColor-muted"})}),(0,c.jsx)(eN.A,{as:"button",className:nQ.referenceTitleLink,ref:h,onClick:t=>{t.preventDefault(),m(e),u(!0)},"aria-haspopup":"dialog","aria-expanded":l,children:(0,c.jsx)(s_.A,{title:e.name,maxWidth:300,className:(0,e1.$)(nQ.referenceTitle),children:e.name})})]});default:return null}}},d={id:"size",header:()=>(0,c.jsx)(nV.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,c.jsx)(nY,{row:e,onResourcesAdded:n,owner:r})},D={id:"actions",header:()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nV.s,{children:"Actions"}),(0,c.jsx)(ax.Q,{style:{visibility:p.length>0&&!i?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:g,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let n="github_file"===e.type&&!e.fileExists;return(0,c.jsxs)(c.Fragment,{children:[n&&(0,c.jsx)(e0.K,{className:nQ.warningIcon,icon:em.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,c.jsx)(nX,{row:e,onEdit:a,onDelete:e=>t([e]),sizePercentage:s,readOnly:i})]})}};return i?[e,d,D]:[{id:"select",header:()=>(0,c.jsx)(n$.A,{checked:p.length===o.length,indeterminate:p.length>0&&p.length<o.length,"aria-label":"Select all sources",value:"default",onChange:f}),width:"auto",renderCell:e=>(0,c.jsx)(n$.A,{checked:p.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{_(a=>t.target.checked?[...a,e]:a.filter(t=>t.id!==e.id))}})},e,d,D]},[p,o.length,f,l,g,a,s,n,r,t,i]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nW.X.Container,{children:(0,c.jsx)(nG.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:o,columns:x})}),l&&d&&"media_content"===d.type&&(0,c.jsx)(aF.l,{onClose:()=>{m(null),u(!1)},position:{narrow:"fullscreen"},returnFocusRef:h,title:d.name,children:(0,c.jsx)(nK,{attachment:d})})]})}let nY=({row:e,onResourcesAdded:t,owner:a})=>{let[s,n]=(0,D.useState)(!1),[r,i]=(0,D.useState)(null),[o,l]=(0,D.useState)(!1),u=(0,D.useRef)(null),d=async e=>{l(!0);try{let t=await (0,nt.V)(e);i(t),n(!0)}finally{l(!1)}};return"repository"===e.type?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e0.K,{variant:"invisible",className:(0,e1.$)(nQ.warningIcon,"float-left"),ref:u,loading:o,"aria-label":"Copilot works best when working with fewer files. Click to choose specific files",onClick:async()=>{await d(e.repositoryId)},icon:em.AlertIcon}),s&&r&&(0,c.jsx)(nB,{isOpen:s,onClose:()=>n(!1),onResourcesAdded:t,owner:a,initialRepo:r,hideBackButton:!0})]}):"sizePercentage"in e?(0,c.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},nX=({row:e,onDelete:t,onEdit:a,sizePercentage:s,readOnly:n=!1})=>{let[r,i]=(0,D.useState)(null),o="";switch(e.type){case"github_pull_request":case"github_issue":o=e.title;break;case"github_file":o=e.filePath;break;case"repository":o=e.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":o=e.name}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-md-none",children:(!n||n&&"free_text"===e.type)&&(0,c.jsxs)(aD.W,{children:[(0,c.jsx)(aD.W.Anchor,{children:(0,c.jsx)(e0.K,{"aria-label":`Attachment actions: ${o}`,title:"Attachment actions",icon:em.KebabHorizontalIcon,variant:"invisible"})}),(0,c.jsx)(aD.W.Overlay,{align:"end",children:(0,c.jsxs)(ag.l,{children:["free_text"===e.type&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(ag.l.Item,{"aria-label":`${n?"View":"Edit"} attachment: ${e.id}`,onSelect:()=>i(e),children:[(0,c.jsx)(ag.l.LeadingVisual,{children:n?(0,c.jsx)(em.EyeIcon,{}):(0,c.jsx)(em.PencilIcon,{})}),n?"View":"Edit"]})}),!n&&(0,c.jsxs)(ag.l.Item,{"aria-label":`Delete attachment: ${e.id}`,variant:"danger",onSelect:()=>t(e),children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.TrashIcon,{})}),"Delete"]})]})})]})}),(0,c.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:["free_text"===e.type&&(0,c.jsx)(e0.K,{onClick:()=>i(e),variant:"invisible","aria-label":n?"View":"Edit",icon:n?em.EyeIcon:em.PencilIcon}),!n&&(0,c.jsx)(e0.K,{onClick:()=>t(e),variant:"invisible","aria-label":"Delete",icon:em.TrashIcon})]}),r&&(0,c.jsx)(nL,{sizePercentage:s,resource:r,onSave:a,onClose:()=>i(null),readOnly:n})]})},nZ=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{nJ.displayName||(nJ.displayName="ReferencesTable")}catch{}try{nY.displayName||(nY.displayName="RowSize")}catch{}try{nX.displayName||(nX.displayName="RowActions")}catch{}let n0={instructionsContainer:"InstructionsDialog-module__instructionsContainer--tvd1E",grow:"InstructionsDialog-module__grow--mfJpQ"};function n1({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s}){let{upsertCopilotSpace:n,isPending:r}=(0,su.$)(e),[i,o]=(0,D.useState)(e.generalInstructions??""),[l,u]=(0,D.useState)(null);async function d(){try{let e=await n({generalInstructions:i});a?.(e),t()}catch(e){e instanceof Error?u(e.message):u("Failed to save instructions")}}function m(){o(e.generalInstructions??""),t()}return(0,c.jsx)(aF.l,{width:"xlarge",height:"large",title:"Instructions",onClose:m,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:n0.instructionsContainer,children:[l&&(0,c.jsx)(R.l,{variant:"critical",title:l,className:"mb-2"}),(0,c.jsxs)(sV.A,{className:n0.grow,disabled:!e.editable,children:[(0,c.jsx)(sV.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,c.jsx)(sW.Ay,{block:!0,value:i,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:n0.grow}),(0,c.jsx)(n2,{text:i,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,c.jsx)(s$.m,{onCancel:m,onSave:d,isLoading:r,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function n2(e){let t,a,s,n,r=(0,u.c)(10),{text:i,promptCharLimit:o}=e,l=i.length>o;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==o?(a=o.toLocaleString(),r[2]=o,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,c.jsxs)(c.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==l?(n=l?(0,c.jsx)(sV.A.Validation,{variant:"error",children:d}):(0,c.jsx)(sV.A.Caption,{children:d}),r[7]=d,r[8]=l,r[9]=n):n=r[9],n}try{n1.displayName||(n1.displayName="InstructionsDialog")}catch{}try{n2.displayName||(n2.displayName="CharacterCount")}catch{}let n3={header:"SpacesConversation-module__header--GkfTQ",headerTopRow:"SpacesConversation-module__headerTopRow--vpBF1",spaceDescription:"SpacesConversation-module__spaceDescription--nRmSr",chatInput:"SpacesConversation-module__chatInput--Nrvmc",instructions:"SpacesConversation-module__instructions--t36Ks",instructionsHeader:"SpacesConversation-module__instructionsHeader--ynDM7",instructionsIcon:"SpacesConversation-module__instructionsIcon--KKXjS",instructionsTitle:"SpacesConversation-module__instructionsTitle--xAAKT",instructionsContent:"SpacesConversation-module__instructionsContent--DYqhz",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--wlbTe",content:"SpacesConversation-module__content--FPhr6",tabContainer:"SpacesConversation-module__tabContainer--rTZgf",underlineNav:"SpacesConversation-module__underlineNav--qjoAn",attachButton:"SpacesConversation-module__attachButton--Hr8sv",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--dnmPR",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--Pw6Ln",tabEmptyText:"SpacesConversation-module__tabEmptyText--SxP9A",tabContent:"SpacesConversation-module__tabContent--zCP1V",conversationsList:"SpacesConversation-module__conversationsList--KLG2n",conversationItem:"SpacesConversation-module__conversationItem--kxjxw",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--Z1mQR",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",conversationName:"SpacesConversation-module__conversationName--wbn54",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--tcI92",text:"SpacesConversation-module__text--v551F",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--pRjZw",referencesSizeText:"SpacesConversation-module__referencesSizeText--buwhH",descriptionText:"SpacesConversation-module__descriptionText--hYXsZ",titleText:"SpacesConversation-module__titleText--czjJm"};function n4({customCopilotId:e,selectedThreadID:t,textAreaRef:a}){let{currentTopic:s,messages:n,streamingMessage:r,ambientError:i,threads:o}=(0,g.Pk)(),l=(0,X.b)(),[d,m]=(0,G.ok)(),h=(0,eu.G)(),p=ey(),_=d.get("tab")||"attachments",[f,x]=(0,D.useState)(!1),[C,y]=(0,D.useState)(null),v=(0,D.useRef)(null),[b,j]=(0,D.useState)(null),[E,N]=(0,D.useState)([]),[I,w]=(0,D.useState)(null),[F,A]=(0,D.useState)(null),[T,k]=(0,D.useState)(!1),[B,O]=(0,D.useState)([]),[P,L]=(0,D.useState)(null),M=el((0,D.useRef)(s),n.length),{isPending:U,data:z,error:W}=(0,V.Ao)(e),{upsertCopilotSpace:H,error:q}=(0,su.$)(b||void 0),{deleteCopilotSpaceResources:K,error:Q}=(e=>{let t,a,s,n,r,i,o,l=(0,u.c)(15),c=(0,sr.jE)(),[d,m]=(0,D.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;m(!0);let a=(0,$.fn)(e),s={custom_copilot:{resources_attributes:t.map(nz)}},n=await (0,so.lS)(a,{method:"PUT",body:s}),r=await n.json();if(!n.ok&&404!==n.status)throw Error("Unable to delete resources.");return r}},l[0]=e,l[1]=t):t=l[1];let h=(0,si.n)(t);return l[2]!==h?({mutateAsync:a,isPending:s,...n}=h,l[2]=h,l[3]=a,l[4]=s,l[5]=n):(a=l[3],s=l[4],n=l[5]),l[6]!==e||l[7]!==s||l[8]!==c||l[9]!==d?(r=()=>{e&&d&&!s&&(m(!1),c.invalidateQueries({queryKey:(0,sn.dp)(e)}))},i=[d,s,e,c],l[6]=e,l[7]=s,l[8]=c,l[9]=d,l[10]=r,l[11]=i):(r=l[10],i=l[11]),(0,D.useEffect)(r,i),l[12]!==a||l[13]!==n?(o={deleteCopilotSpaceResources:a,...n},l[12]=a,l[13]=n,l[14]=o):o=l[14],o})(b||void 0);(0,D.useEffect)(()=>{(0,ap.D)(b?.name?`${b.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[b?.name]);let{processFiles:J}=nh({onResourcesAdded:e=>void eD(e),onError:O,onUploadingChange:k}),{copilotSpacesConfig:{maxResourceCount:Y,maxDescriptionLength:Z}}=(0,S.X)(),ee=q||W||F||Q,et=(0,D.useRef)(!1),es=E.filter(e=>!e.markedForDestroy).length,en=(0,D.useMemo)(()=>b?l.sortAndFilterThreads(o,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[o,e,l,b]),er=(0,D.useMemo)(()=>b?b.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[b]);(0,D.useEffect)(()=>{z&&(j(z),N(e=>z.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:z})),l.clearCurrentReferences(["image"])},[z,l]),(0,D.useEffect)(()=>()=>{et.current||(l.clearCurrentReferences(),et.current=!1)},[l,e]);let ei=(0,D.useCallback)(async e=>{et.current=!0,await M(e)},[M]),eo=(0,D.useCallback)(e=>{m({tab:e},{replace:!0})},[m]),ed=(0,D.useCallback)(e=>{l.deleteThread(e)},[l]);async function eh(e){let t=[];if(N(a=>{for(let s of(t=[...a],e))t=s.databaseId?t.map(e=>s.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==s.id);return t}),b)try{await K(e),A(null)}catch{N(t=>[...t,...e])}}async function e_(e){let t=[];if(N(a=>t=a.map(t=>t.id===e.id?e:t)),b)try{await H({...b,resources:t}),A(null)}catch{N(b.resources)}}let eD=(0,D.useCallback)(async e=>{let t=function(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let s of t){if("repository"===s.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===s.repositoryId);if(t){a.set(t.id,{...t,markedForDestroy:!1});continue}}a.set(s.id,s)}return Array.from(a.values())}(E,e);N(t);try{await H({...b,resources:t}),A(null)}catch{b&&N(b.resources)}},[b,H,E]),eg=(0,D.useCallback)(()=>{A(`You can select a maximum of ${Y} sources`)},[Y]),ef=(0,D.useCallback)(e=>{J(e,{source:"drag-and-drop"})},[J]),ex=(0,D.useCallback)(async e=>{if(b&&e){w(e);try{let t=await H({name:e});j(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),w(null),A(null)}catch{j(b),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:b}),w(null)}}},[b,H,l]),eC=(0,D.useCallback)(async e=>{if(b){j({...b,description:e});try{let t=await H({description:e});j(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{j(b),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:b})}}},[b,H,l]);if(W instanceof V.OW)return(0,c.jsx)(s9,{protectedOrganizations:W.protectedOrganizations});if(W instanceof V.i9)return(0,c.jsx)(s9,{});if(U||!b)return(0,c.jsx)(tB,{});let ev=b.ownerIsOrg?b.owner:void 0,ej=I??b.name,eS=(0,$.Hh)(z);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ea.t,{fallback:(0,c.jsx)(eG.x,{regionName:"This space"}),children:(0,c.jsxs)(s4.Zf.Container,{width:"small",children:[(0,c.jsxs)("div",{className:n3.header,children:[(0,c.jsxs)("div",{className:n3.headerTopRow,children:[(0,c.jsx)("div",{children:(0,c.jsx)(af.A,{children:s7(b)})}),(0,c.jsx)(ax.Q,{leadingVisual:em.McpIcon,as:"a",href:$.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})]}),(0,c.jsx)("h1",{children:b.editable?(0,c.jsx)(s3,{className:n3.titleText,value:ej,onChange:ex}):(0,c.jsx)("span",{className:n3.text,children:ej})}),b.editable?(0,c.jsx)(s3,{className:n3.descriptionText,placeholder:"Add a short description to explain this space's purpose (e.g., 'Frontend design system' or 'API docs hub').",value:b.description||"",maxLength:Z,onChange:eC}):b.description&&(0,c.jsx)("p",{className:n3.spaceDescription,children:b.description})]}),(0,c.jsxs)("div",{className:n3.chatInput,children:[i&&(0,c.jsx)(ep.P,{ambientError:i}),eS&&(0,c.jsx)(eP,{}),!eS&&(p.visible?(0,c.jsx)(eb,{onDismiss:p.onDismiss}):(0,c.jsx)(ec.V,{textAreaRef:a,onSubmit:ei,isStreaming:!!r,size:"large",modes:[{name:"Chat",supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:(0,c.jsx)(em.SpaceIcon,{}),placeholder:"How can I help you?"}],showPlanningToggle:!t,onNewThreadSelected:h},t))]}),(0,c.jsxs)("button",{ref:v,className:n3.instructions,onClick:()=>x(!0),"aria-haspopup":"dialog","aria-expanded":f,children:[(0,c.jsxs)("div",{className:n3.instructionsHeader,children:[(0,c.jsx)(em.SlidersIcon,{size:16,className:n3.instructionsIcon}),(0,c.jsx)("h2",{className:n3.instructionsTitle,children:"Instructions"})]}),b.generalInstructions?(0,c.jsx)("p",{className:n3.instructionsContent,children:b.generalInstructions}):(0,c.jsx)("p",{className:n3.instructionsEmptyState,children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),ee&&(0,c.jsx)(R.l,{title:F?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof ee?ee:"object"==typeof ee&&null!==ee&&"base"in ee?String(ee.base):ee instanceof Error?ee.message:"An error occurred"}),B.length>0&&(0,c.jsx)(eL,{errorMessages:B,onDismiss:()=>O([])}),(0,c.jsxs)("div",{className:n3.content,children:[(0,c.jsxs)("div",{className:n3.tabContainer,children:[(0,c.jsx)("div",{className:n3.underlineNav,children:(0,c.jsxs)(a0.O,{"aria-label":"Space content",children:[(0,c.jsx)(a0.O.Item,{"aria-current":"attachments"===_?"page":void 0,onClick:()=>eo("attachments"),counter:es,children:"Sources"}),(0,c.jsx)(a0.O.Item,{"aria-current":"conversations"===_?"page":void 0,onClick:()=>eo("conversations"),counter:en.length,children:"Conversations"})]})}),(0,c.jsxs)(sp.B,{direction:"horizontal",align:"center",gap:"none",children:[er>80&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s6.z,{inline:!0,barSize:"small",progress:er,className:n3.referencesSizeProgressBar,"aria-hidden":"true"}),(0,c.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-er))}% remaining attachment capacity`}),(0,c.jsxs)("span",{className:n3.referencesSizeText,children:[er<1?"<1":Math.round(er),"%"]})]}),b.editable&&(0,c.jsx)("div",{className:n3.attachButton,children:es>=Y?(0,c.jsx)(ax.Q,{leadingVisual:em.PlusIcon,onClick:eg,children:"Add sources"}):(0,c.jsx)(nU,{sizePercentage:er,owner:ev,onResourcesAdded:eD,resourcesToSave:E,resourceCounts:{currentResourceCount:es,maxResourceCount:Y},onError:O,initialRepo:P,onRepoSelect:L,onUploadingChange:e=>{e&&O([]),k(e)},children:(0,c.jsx)(ax.Q,{leadingVisual:em.PlusIcon,children:"Add sources"})})})]})]}),(0,c.jsx)("div",{className:n3.tabContent,children:(()=>{if("attachments"===_){let e=E.filter(e=>!e.markedForDestroy);return e.length>0?(0,c.jsx)(nJ,{resources:e,sizePercentage:er,onDeleteResources:eh,onUpdateResource:e_,onResourcesAdded:eD,readOnly:!b?.editable}):(0,c.jsxs)("div",{className:n3.tabEmptyContainer,children:[(0,c.jsx)(em.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,c.jsx)("h2",{className:n3.tabEmptyTitle,children:b?.editable?"Add sources to get started":"Welcome"}),(0,c.jsx)("p",{className:n3.tabEmptyText,children:b?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===_)return en.length>0?(0,c.jsx)("ul",{role:"menu",className:n3.conversationsList,children:en.map(e=>(0,c.jsx)(n6,{conversation:e,activeMenuConversationId:C,setActiveMenuConversationId:y,onDelete:ed},e.id))}):(0,c.jsxs)("div",{className:n3.tabEmptyContainer,children:[(0,c.jsx)("h2",{className:n3.tabEmptyTitle,children:"No conversations yet"}),(0,c.jsx)("p",{className:n3.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),f&&(0,c.jsx)(n1,{copilotSpace:b,onClose:()=>x(!1),returnFocusRef:v,onSaved:e=>{j(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,c.jsx)(sQ.A,{onFilesDrop:ef,isUploading:T})]})}function n6({conversation:e,activeMenuConversationId:t,setActiveMenuConversationId:a,onDelete:s}){let n=(0,sa.Z)(),r=(0,C.CB)(e),i=`${C.Jz}/c/${e.id}`;return(0,c.jsxs)("li",{role:"menuitem",onClick:()=>n(i),onKeyDown:e=>{"Enter"===e.key&&n(i)},className:(0,e1.$)(n3.conversationItem,null!==t&&n3.conversationItemMenuOpen),children:[(0,c.jsxs)("div",{className:n3.conversationItemLeftColumn,children:[(0,c.jsx)("div",{className:n3.conversationName,children:r}),(0,c.jsxs)("div",{className:n3.conversationTimestamp,children:[(0,c.jsx)(em.ClockIcon,{})," ",(0,c.jsx)(s5.A,{format:"relative",prefix:"",date:new Date(e.updatedAt)})]})]}),(0,c.jsxs)(aD.W,{open:t===e.id,onOpenChange:t=>{a(t?e.id:null)},children:[(0,c.jsx)(aD.W.Anchor,{children:(0,c.jsx)(e0.K,{variant:"invisible","aria-label":"Conversation options",icon:em.KebabHorizontalIcon,onClick:e=>{e.stopPropagation()}})}),(0,c.jsx)(aD.W.Overlay,{onClick:e=>e.stopPropagation(),align:"end",children:(0,c.jsx)(ag.l,{children:(0,c.jsxs)(ag.l.Item,{variant:"danger",onSelect:()=>s(e),children:[(0,c.jsx)(ag.l.LeadingVisual,{children:(0,c.jsx)(em.TrashIcon,{})}),"Delete"]})})})]})]})}try{n4.displayName||(n4.displayName="SpacesConversation")}catch{}try{n6.displayName||(n6.displayName="ConversationItem")}catch{}function n5({primary:e=!1}){let[t,a]=(0,D.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsx)(a8.D,{closeDialog:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),a(!1)}}):null,(0,c.jsx)(ax.Q,{variant:e?"primary":"default",onClick:()=>{(0,k.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),a(!0)},children:"Create space"})]})}try{n5.displayName||(n5.displayName="CreateSpaceButton")}catch{}var n7=a(30388);function n8(e,t){var a=["name","description","owner"],s=!1;if(!t.trim())return!0;let n=s?t.trim():t.toLowerCase().trim();return a.some(t=>{let a;return null!=(a="function"==typeof t?t(e):e[t])&&(s?String(a):String(a).toLowerCase()).includes(n)})}var n9=a(21229);let re={banner:"SpacesView-module__banner--ZHxIa",button:"SpacesView-module__button--j38nS",counter:"SpacesView-module__counter--ZdDOv",disabledButton:"SpacesView-module__disabledButton--Ygunf",description:"SpacesView-module__description--IyY7g",filterButtons:"SpacesView-module__filterButtons--qTV2E",metadata:"SpacesView-module__metadata--Sw1rv",metadataItem:"SpacesView-module__metadataItem--rLi5j",sharedSpacesTab:"SpacesView-module__sharedSpacesTab--dS9e3",benefitSections:"SpacesView-module__benefitSections--ZQRGR",benefitSection:"SpacesView-module__benefitSection--GRkgW",benefitIcon:"SpacesView-module__benefitIcon--Pk9zH",benefitTitle:"SpacesView-module__benefitTitle--NOGgu",benefitDescription:"SpacesView-module__benefitDescription--FU6Sj"};function rt(){return(0,c.jsx)(eN.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",rel:"noopener noreferrer",children:"Need help? Read the docs"})}function ra({copilotSpace:e,onDelete:t,onClick:a}){let s=e.ownerIsOrg?em.OrganizationIcon:em.PersonIcon,n=s7(e),r="Shared"===n?em.PeopleIcon:em.LockIcon,i=e.adminable||e.editable;return(0,c.jsxs)(n7.qJ.Item,{href:(0,$.Cb)(e),onClick:a,children:[(0,c.jsx)(n7.qJ.Item.Title,{children:e.name}),(0,c.jsx)(n7.qJ.Item.Description,{children:(0,c.jsx)("div",{className:re.description,children:e.description})}),(0,c.jsx)(n7.qJ.Item.Metadata,{children:(0,c.jsxs)("div",{className:re.metadata,children:[(0,c.jsxs)("span",{className:re.metadataItem,children:[(0,c.jsx)(s,{size:16}),e.owner]}),(0,c.jsxs)("span",{className:re.metadataItem,children:[(0,c.jsx)(r,{size:16}),n]})]})}),(i||y.W.copilotSpacesReportAbuse)&&(0,c.jsx)(n7.qJ.Item.Actions,{children:(0,c.jsx)(sL,{copilot:e,onDelete:t})})]})}function rs(){return(0,c.jsxs)("li",{children:[(0,c.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[(0,c.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),(0,c.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,c.jsx)(n5,{}),(0,c.jsx)(rt,{})]})]}),(0,c.jsxs)("div",{className:re.benefitSections,children:[(0,c.jsxs)("div",{className:re.benefitSection,children:[(0,c.jsx)("div",{className:re.benefitIcon,children:(0,c.jsx)(em.CodeIcon,{size:16})}),(0,c.jsx)("h3",{className:re.benefitTitle,children:"Generate code"}),(0,c.jsx)("p",{className:re.benefitDescription,children:"Produce code that follows your team's patterns."})]}),(0,c.jsxs)("div",{className:re.benefitSection,children:[(0,c.jsx)("div",{className:re.benefitIcon,children:(0,c.jsx)(em.BookIcon,{size:16})}),(0,c.jsx)("h3",{className:re.benefitTitle,children:"Share knowledge"}),(0,c.jsx)("p",{className:re.benefitDescription,children:"Centralize docs so your team can quickly find answers."})]}),(0,c.jsxs)("div",{className:re.benefitSection,children:[(0,c.jsx)("div",{className:re.benefitIcon,children:(0,c.jsx)(em.ProjectIcon,{size:16})}),(0,c.jsx)("h3",{className:re.benefitTitle,children:"Plan projects"}),(0,c.jsx)("p",{className:re.benefitDescription,children:"Create requirements and issues your team can ship."})]})]})]})}let rn=e=>e.shared&&e.collaborative;function rr({spaces:e,starredSpaces:t,isLoading:a,onDelete:s,onSpaceClick:n,searchQuery:r,currentUserLogin:i}){let o=ee.Jt.getSpacesSelectedTab(),[l,u]=(0,D.useState)(o),d=(0,D.useCallback)(e=>{u(e),ee.Jt.setSpacesSelectedTab(e)},[]),m=t&&t.length>0,h=y.W.copilotSpacesReadAccessToUserOwnedSpaces,{copilotSpacesConfig:{userHasOrgs:p}}=(0,S.X)();(0,D.useEffect)(()=>{m&&d("starred")},[m,d]);let _=(0,D.useMemo)(()=>e?e.filter(e=>!!("starred"===l&&e.starred||"personal"===l&&!e.ownerIsOrg&&!e.shared||"org"===l&&e.ownerIsOrg||h&&"shared"===l&&rn(e))&&n8(e,r)):[],[e,l,r,h]),{personalSpacesCount:g,orgSpacesCount:f,starredSpacesCount:x,sharedSpacesCount:C}=(0,D.useMemo)(()=>{if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let t=r.trim()?e.filter(e=>n8(e,r)):e;return{personalSpacesCount:t.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:t.filter(e=>e.ownerIsOrg).length,starredSpacesCount:t.filter(e=>e.starred).length,sharedSpacesCount:h?t.filter(rn).length:0}},[e,r,h]),v=e&&!e.some(e=>e.creator===i)&&!a,b=e&&e.length>0&&_?.length===0&&!a,j=h&&C>0;return(0,c.jsxs)(n7.qJ,{children:[(0,c.jsx)(n7.qJ.Header,{children:(0,c.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:re.filterButtons,children:[m&&(0,c.jsxs)("button",{onClick:()=>d("starred"),role:"tab","aria-selected":"starred"===l,"aria-controls":"spaces-list",id:"starred-tab",className:re.button,children:["Starred ",(0,c.jsx)("span",{className:re.counter,children:x})]}),p||m||j?(0,c.jsxs)("button",{onClick:()=>d("personal"),role:"tab","aria-selected":"personal"===l,"aria-controls":"spaces-list",id:"personal-tab",className:re.button,children:["Yours ",(0,c.jsx)("span",{className:re.counter,children:g})]}):(0,c.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:re.disabledButton,children:["Yours ",(0,c.jsx)("span",{className:re.counter,children:g})]}),j&&(0,c.jsxs)("button",{onClick:()=>d("shared"),role:"tab","aria-selected":"shared"===l,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,e1.$)(re.button,re.sharedSpacesTab),children:["Shared with me ",(0,c.jsx)("span",{className:re.counter,children:C})]}),p&&(0,c.jsxs)("button",{onClick:()=>d("org"),role:"tab","aria-selected":"org"===l,"aria-controls":"spaces-list",id:"org-tab",className:re.button,children:["Organizations ",(0,c.jsx)("span",{className:re.counter,children:f})]})]})}),(0,c.jsx)(n7.qJ.List,{loading:a,id:"spaces-list","aria-labelledby":l,children:v&&_?.length===0?(0,c.jsx)(rs,{}):b?(0,c.jsxs)(n7.qJ.EmptyState,{children:[(0,c.jsxs)("p",{children:["starred"===l&&"Spaces you star will appear here.","personal"===l&&"Spaces you create will appear here.","org"===l&&"Spaces belonging to your organizations will appear here.","shared"===l&&"Shared spaces will appear here."]}),(0,c.jsx)(n5,{}),(0,c.jsx)(rt,{})]}):_?.map(e=>(0,c.jsx)(ra,{copilotSpace:e,onDelete:()=>s(e),onClick:n},e.owner?`${e.owner}/${e.id}`:e.id))})]})}function ri({copilotSpaces:e}){let t=(0,g.Pk)(),{ssoOrganizations:a}=t,s=a.map(e=>e.login),[n,r]=(0,D.useState)(null),[i,o]=(0,D.useState)(""),l=ee.Jt.getSpacesMcpBannerDismissalCount(),[u,d]=(0,D.useState)(l<2),m=void 0===e,h=e?.filter(e=>e.starred),{mutateAsync:p}=(0,V.$7)(),_=async e=>{try{await p(e),r(null)}catch(e){r(e instanceof Error?e:Error(String(e)))}};return(0,c.jsxs)(ea.t,{fallback:(0,c.jsx)(eG.x,{regionName:"Spaces"}),children:[n&&(0,c.jsxs)(ss.A,{variant:"danger",children:[(0,c.jsx)(em.AlertIcon,{}),"There was a problem deleting your space."]}),(0,c.jsxs)(s4.Zf.Container,{width:"small",children:[u&&(0,c.jsx)(s4.Zf.Banner,{children:(0,c.jsx)(R.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,c.jsx)(em.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,c.jsx)(R.l.PrimaryAction,{as:"a",href:$.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{let e=ee.Jt.getSpacesMcpBannerDismissalCount();ee.Jt.setSpacesMcpBannerDismissalCount(e+1),d(!1)}})}),(0,c.jsxs)(s4.Zf.Header,{children:[(0,c.jsx)(s4.Zf.Title,{children:"Spaces"}),(0,c.jsx)(s4.Zf.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give more relevant help for your work."}),(0,c.jsx)(s4.Zf.Actions,{children:(0,c.jsx)(n5,{primary:!0})})]}),a.length>0&&!(0,b.G7)("global_sso_banner")&&(0,c.jsx)("div",{className:re.banner,children:(0,c.jsx)(tP.x,{protectedOrgs:s,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})}),(0,c.jsx)(n9.D,{onSearch:o}),(0,c.jsx)(s4.Zf.Section,{children:(0,c.jsx)(rr,{spaces:e,starredSpaces:h,isLoading:m,onDelete:_,onSpaceClick:()=>{(0,k.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})},searchQuery:i,currentUserLogin:t.currentUserLogin})})]})]})}try{rt.displayName||(rt.displayName="DocsLink")}catch{}try{ra.displayName||(ra.displayName="SpacesListItem")}catch{}try{rs.displayName||(rs.displayName="FirstSpaceEmptyState")}catch{}try{rr.displayName||(rr.displayName="SpacesList")}catch{}try{ri.displayName||(ri.displayName="SpacesView")}catch{}function ro(){let e,t,a,s,n,r,i,o,l,d,m,h,p,_,f=(0,u.c)(52),x=(0,g.Pk)(),{customCopilots:v}=x,b=(0,j.U)(),S=(0,U.v)(),E=(0,G.zy)(),N=(0,V.BV)(),I=(0,$.y_)(),w=N&&I,F=(0,$.iI)(),{isNarrowViewport:T}=(0,q.B)();(0,V.e9)(N),function(){let e=(0,g.Pk)(),{referenceId:t,messageIndex:a}=function(){let e=(0,G.zy)();return(0,D.useMemo)(()=>{let t=new URLSearchParams(e.search),a=t.get("reference_id"),s=t.get("message_index"),n=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(n=e)}return{referenceId:a,messageIndex:n}},[e.search])}(),[,s]=(0,G.ok)(),n=(0,D.useMemo)(()=>e.messages??[],[e.messages]),r=(0,D.useMemo)(()=>null!==a&&a>=0&&a<n.length?n[a]:null,[n,a]),i=(0,D.useMemo)(()=>r?.references??e.currentReferences??[],[r?.references,e.currentReferences]),o=(0,D.useMemo)(()=>t&&i.length?i.find(e=>(0,C.Vb)(e)===t)??null:null,[t,i]),l=(0,H.I)({messageIndex:a??n.length,messageId:r?.id,messageTimestamp:r?.createdAt});(0,D.useEffect)(()=>{o&&(l(o),s(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,s])}();let k=(0,A.tZ)(),R=(0,A.wI)(),{closePreviewPane:B,openPreviewPane:O,closeResourcePanel:P,openResourcePanel:L}=(0,A.xx)();f[0]!==B||f[1]!==O?(e=e=>{e?O():B()},f[0]=B,f[1]=O,f[2]=e):e=f[2];let J=e;f[3]!==P||f[4]!==L?(t=e=>{e?L():P()},f[3]=P,f[4]=L,f[5]=t):t=f[5];let Y=t;f[6]!==S||f[7]!==E?(a=(0,z.bG)(S,E),f[6]=S,f[7]=E,f[8]=a):a=f[8];let X=a;if(S&&X){let e,t,a=X.Component;return f[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("span",{"data-favicon-override":K.i}),f[9]=e):e=f[9],f[10]!==a||f[11]!==S||f[12]!==x?(t=(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsx)(D.Suspense,{children:(0,c.jsx)(a,{chatState:x,plugin:S})})]}),f[10]=a,f[11]=S,f[12]=x,f[13]=t):t=f[13],t}f[14]!==F||f[15]!==v||f[16]!==w||f[17]!==x.selectedThreadID||f[18]!==b?(s=w?(0,c.jsx)(ri,{copilotSpaces:v}):F?(0,c.jsx)(n4,{customCopilotId:F,selectedThreadID:x.selectedThreadID,textAreaRef:b}):null,f[14]=F,f[15]=v,f[16]=w,f[17]=x.selectedThreadID,f[18]=b,f[19]=s):s=f[19];let Z=s;if(Z){let e,t,a;return f[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(W.P.Header,{children:(0,c.jsx)(sq,{})}),f[20]=e):e=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(W.P.Sidebar,{children:(0,c.jsx)(M.U,{})}),f[21]=t):t=f[21],f[22]!==Z?(a=(0,c.jsxs)(W.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:K.i,children:[e,t,(0,c.jsx)(W.P.ColumnLeft,{children:Z})]}),f[22]=Z,f[23]=a):a=f[23],a}f[24]!==k||f[25]!==J?(n=[k,J],f[24]=k,f[25]=J,f[26]=n):n=f[26],f[27]!==R||f[28]!==Y?(r=[R,Y],f[27]=R,f[28]=Y,f[29]=r):r=f[29],f[30]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)(W.P.Sidebar,{children:(0,c.jsx)(M.U,{})}),f[30]=i):i=f[30],f[31]!==x.selectedThreadID?(o=!x.selectedThreadID&&(0,c.jsx)(aW,{}),f[31]=x.selectedThreadID,f[32]=o):o=f[32],f[33]!==o?(l=(0,c.jsx)(W.P.Header,{children:(0,c.jsx)(ak,{customButtons:o})}),f[33]=o,f[34]=l):l=f[34];let ee=y.W.stableConversationView?void 0:x.selectedThreadID;return f[35]!==T||f[36]!==ee||f[37]!==b?(d=(0,c.jsx)(W.P.ColumnLeft,{children:(0,c.jsx)(au,{isMobile:T,textAreaRef:b},ee)}),f[35]=T,f[36]=ee,f[37]=b,f[38]=d):d=f[38],f[39]!==R?(m=y.W.copilotResourcePanel&&R&&(0,c.jsx)(a2,{}),f[39]=R,f[40]=m):m=f[40],f[41]!==b?(h=(0,c.jsx)(Q.U,{returnFocusRef:b}),f[41]=b,f[42]=h):h=f[42],f[43]!==m||f[44]!==h?(p=(0,c.jsxs)(W.P.ColumnRight,{className:"d-flex",children:[m,h]}),f[43]=m,f[44]=h,f[45]=p):p=f[45],f[46]!==d||f[47]!==p||f[48]!==n||f[49]!==r||f[50]!==l?(_=(0,c.jsxs)(W.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:K.i,secondaryColumnState:n,resourcePanelState:r,children:[i,l,d,p]}),f[46]=d,f[47]=p,f[48]=n,f[49]=r,f[50]=l,f[51]=_):_=f[51],_}try{ro.displayName||(ro.displayName="Layout")}catch{}var rl=a(40235);let rc=(0,N.E7)();function ru(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(F.RelayEnvironmentProvider,{environment:rc,children:(0,c.jsx)(rd,{})}),t[0]=e):e=t[0],e}function rd(){let e=(0,u.c)(2),t=(0,S.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(rm,{children:(0,c.jsx)(rp,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(P,{}),e[1]=t):t=e[1],t}}function rm(e){let t,a,s,n,r,i,o,l,d,f,N,F,T=(0,u.c)(60),{children:k}=e,R=(0,S.X)(),B=eo(),O=R.requestedTopic;if((0,C.P)(O)){let e,a;T[0]!==O?(e=(0,C.UU)(O),T[0]=O,T[1]=e):e=T[1],T[2]!==e?(a={refs:[e],topic:void 0},T[2]=e,T[3]=a):a=T[3],t=a}else if(R.reference){let e,a;T[4]!==R.reference?(e=[R.reference],T[4]=R.reference,T[5]=e):e=T[5],T[6]!==O||T[7]!==e?(a={refs:e,topic:O},T[6]=O,T[7]=e,T[8]=a):a=T[8],t=a}else{let e,a;T[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],T[9]=e):e=T[9],T[10]!==O?(a={refs:e,topic:O},T[10]=O,T[11]=a):a=T[11],t=a}let{refs:P,topic:L}=t;T[12]===Symbol.for("react.memo_cache_sentinel")?(a=[],T[12]=a):a=T[12];let[,M]=(0,D.useState)(a);T[13]===Symbol.for("react.memo_cache_sentinel")?(s={onError:(e,t)=>{M(e=>[{...t},...e])}},T[13]=s):s=T[13];let{createTask:U}=(0,h.Z)(s);T[14]!==U?(n=(e,t,a,s)=>{let n=e.trim();""!==n&&a&&""!==a.trim()&&t&&U({nwo:t.nameWithOwner,problemStatement:n,baseRef:a,eventType:"immersive_page",customAgent:s})},T[14]=U,T[15]=n):n=T[15];let z=n,$=(0,D.useRef)(z);T[16]!==z?(r=()=>{$.current=z},i=[z],T[16]=z,T[17]=r,T[18]=i):(r=T[17],i=T[18]),(0,D.useEffect)(r,i),T[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,b.G7)("copilot_chat_agents_empty_state"),T[19]=o):o=T[19];let V=o,W=(0,E.u)("copilot_swe_agent_progress_commands"),G=(0,E.u)("copilot_agent_task_list_v2");if(T[20]!==G||T[21]!==W||T[22]!==R.agentsEnabled||T[23]!==R.apiURL||T[24]!==R.graphqlApiUrl||T[25]!==R.loopsClientUrl||T[26]!==R.loopsEnabled||T[27]!==R.loopsExecutionUrl||T[28]!==R.previewUrl||T[29]!==R.realIp||T[30]!==R.sparkEnabled||T[31]!==R.ssoOrganizations){if(l=[],y.W.loopsPlugin&&(R.loopsEnabled??!0)){let e;T[33]!==R.apiURL||T[34]!==R.graphqlApiUrl||T[35]!==R.loopsClientUrl||T[36]!==R.loopsExecutionUrl||T[37]!==R.previewUrl||T[38]!==R.realIp||T[39]!==R.ssoOrganizations?(e=new v.V(R.apiURL,R.graphqlApiUrl,R.loopsClientUrl,R.loopsExecutionUrl,R.ssoOrganizations.map(rh),R.previewUrl,R.realIp),T[33]=R.apiURL,T[34]=R.graphqlApiUrl,T[35]=R.loopsClientUrl,T[36]=R.loopsExecutionUrl,T[37]=R.previewUrl,T[38]=R.realIp,T[39]=R.ssoOrganizations,T[40]=e):e=T[40],l.push(e)}if(R.sparkEnabled){let e;T[41]===Symbol.for("react.memo_cache_sentinel")?(e=new w.x,T[41]=e):e=T[41],l.push(e)}if(R.agentsEnabled||V){let e,t=G&&W;T[42]!==t?(e=new m.c(t,$),T[42]=t,T[43]=e):e=T[43],l.push(e)}if(W){let e;T[44]===Symbol.for("react.memo_cache_sentinel")?(e=new p.A,T[44]=e):e=T[44],l.push(e)}T[20]=G,T[21]=W,T[22]=R.agentsEnabled,T[23]=R.apiURL,T[24]=R.graphqlApiUrl,T[25]=R.loopsClientUrl,T[26]=R.loopsEnabled,T[27]=R.loopsExecutionUrl,T[28]=R.previewUrl,T[29]=R.realIp,T[30]=R.sparkEnabled,T[31]=R.ssoOrganizations,T[32]=l}else l=T[32];let H=l;return T[45]!==k?(d=(0,c.jsx)(A.BH,{children:k}),T[45]=k,T[46]=d):d=T[46],T[47]!==R||T[48]!==P||T[49]!==d||T[50]!==B||T[51]!==L?(f=(0,c.jsx)(g.Mj,{workerPath:R.searchWorkerFilePath,threadId:B,refs:P,mode:"immersive",topic:L,ssoOrganizations:R.ssoOrganizations,copilotChatPayload:R,children:d}),T[47]=R,T[48]=P,T[49]=d,T[50]=B,T[51]=L,T[52]=f):f=T[52],T[53]!==R.apiURL||T[54]!==R.ssoOrganizations||T[55]!==f?(N=(0,c.jsx)(_.hh,{apiURL:R.apiURL,ssoOrgs:R.ssoOrganizations,children:f}),T[53]=R.apiURL,T[54]=R.ssoOrganizations,T[55]=f,T[56]=N):N=T[56],T[57]!==H||T[58]!==N?(F=(0,c.jsx)(j.KL,{children:(0,c.jsx)(I.LB,{children:(0,c.jsx)(x.Hb,{plugins:H,children:N})})}),T[57]=H,T[58]=N,T[59]=F):F=T[59],F}function rh(e){return e.id}function rp(){let e,t,a,s=(0,u.c)(1);!function(){let e,t,a=(0,u.c)(7),s=eo(),n=(0,D.useRef)(!0),r=(0,D.useRef)(null),i=(0,X.b)(),{threads:o,selectedThreadID:l}=(0,g.Pk)(),c=ei(),{selectedThreadID:d,sharedThreadChannel:m}=(0,g.Pk)(),h=(0,X.b)();(0,rl.x)(m,()=>{h.fetchSharedThreadMessages(d)}),a[0]!==c||a[1]!==i||a[2]!==l||a[3]!==s||a[4]!==o?(e=()=>{if(n.current){n.current=!1,r.current=s,c?i.fetchSharedThreadMessages(l):i.fetchMessages(l);return}if(r.current!==s){if(r.current=s,s===l)return;let e=s&&o?.get(s);i.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[i,s,o,l,c],a[0]=c,a[1]=i,a[2]=l,a[3]=s,a[4]=o,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,D.useEffect)(e,t)}(),function(){let e,t,a=(0,u.c)(8),{selectedThreadID:s}=(0,g.Pk)(),n=(0,U.v)(),r=(0,td.M)((0,G.Zp)());a[0]!==r||a[1]!==n?.skipSyncRouteToThread||a[2]!==s?(e=()=>{if(!s||n?.skipSyncRouteToThread)return;let e=`${C.Jz}/c/${s}`,t=`${C.Jz}/share/${s}`,a=window.location.pathname;a.startsWith(e)||a.startsWith(t)||r.current(e)},a[0]=r,a[1]=n?.skipSyncRouteToThread,a[2]=s,a[3]=e):e=a[3];let i=n?.skipSyncRouteToThread;a[4]!==r||a[5]!==s||a[6]!==i?(t=[r,i,s],a[4]=r,a[5]=s,a[6]=i,a[7]=t):t=a[7],(0,D.useEffect)(e,t)}();let n=(0,u.c)(3),r=(0,X.b)();return n[0]!==r?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(r.showTopicPicker(!1),r.selectThread(null)):window.location.href.includes("/c/")||(r.showTopicPicker(!0),r.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},a=[r],n[0]=r,n[1]=t,n[2]=a):(t=n[1],a=n[2]),(0,D.useEffect)(t,a),!function(){let e,t,a,s,n=(0,u.c)(11),r=(0,f.y)(),{selectedThreadID:i,fetchSharedThreads:o}=(0,g.bP)("selectedThreadID","fetchSharedThreads"),l=!!o?.shareId&&i===o?.shareId;n[0]!==l||n[1]!==i||n[2]!==r?(e=()=>{i&&!l&&r.fetchAndLoadTraces(i)},t=[i,r,l],n[0]=l,n[1]=i,n[2]=r,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,D.useEffect)(e,t),n[5]!==o||n[6]!==l||n[7]!==i||n[8]!==r?(a=()=>{o?.ok&&o.originalThreadId&&l&&i&&r.fetchAndLoadTraces(o.originalThreadId,i)},s=[o,r,l,i],n[5]=o,n[6]=l,n[7]=i,n[8]=r,n[9]=a,n[10]=s):(a=n[9],s=n[10]),(0,D.useEffect)(a,s)}(),s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(ro,{}),s[0]=e):e=s[0],e}try{ru.displayName||(ru.displayName="CopilotImmersive")}catch{}try{rd.displayName||(rd.displayName="CopilotImmersiveNoRelay")}catch{}try{rm.displayName||(rm.displayName="CopilotImmersiveProviders")}catch{}try{rp.displayName||(rp.displayName="Immersive")}catch{}(0,l.o)("copilot-immersive-v1",()=>({App:d,routes:[(0,o.a)({path:"/copilot",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/c/:threadID",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/d/:docsetName",Component:ru}),(0,o.a)({path:"/copilot/r/:owner/:repository",Component:ru}),(0,o.a)({path:"/copilot/share/:threadID",Component:ru}),(0,o.a)({path:"/copilot/loops",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/l/:loopID",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/workbench",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/spark",Component:ru,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/spaces",Component:ru}),(0,o.a)({path:"/copilot/spaces/:spaceID",Component:ru}),(0,o.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:ru}),(0,o.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:ru}),(0,o.a)({path:"/copilot/spaces/:spaceID/edit",Component:ru}),(0,o.a)({path:"/copilot/spaces/new",Component:ru}),(0,o.a)({path:"/copilot/agents",Component:ru}),(0,o.a)({path:"/copilot/tasks/pull/:globalID",Component:ru})]}))},20255:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(96540),n=a(35180),r=a(90147);function i(){r.r.current||(0,n.U)();let[e]=(0,s.useState)(r.O.current);return e}},25942:(e,t,a)=>{a.d(t,{C:()=>g});var s=/(?:^\s+|\s+$)/g,n=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function r(e){var t=e.nodeType,a="";if(1===t||9===t||11===t)if("string"==typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)a+=r(e);else if(3===t||4===t)return e.nodeValue;return a}function i(e,t,a,r,i){if(e+="",a&&(e=e.trim?e.trim():e.replace(s,"")),t&&""!==t)return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var o,l,c=[],u=e.length,d=0;d<u;d++)((l=e.charAt(d)).charCodeAt(0)>=55296&&56319>=l.charCodeAt(0)||e.charCodeAt(d+1)>=65024&&65039>=e.charCodeAt(d+1))&&(o=((e.substr(d,12).split(n)||[])[1]||"").length||2,l=e.substr(d,o),c.emoji=1,d+=o-1),c.push(i?l:">"===l?"&gt;":"<"===l?"&lt;":r&&" "===l&&(" "===e.charAt(d-1)||" "===e.charAt(d+1))?"&nbsp;":l);return c}var o,l,c=function(){function e(e){this.chars=i(e),this.sets=[],this.length=50;for(var t=0;t<20;t++)this.sets[t]=m(80,this.chars)}return e.prototype.grow=function(e){for(var t=0;t<20;t++)this.sets[t]+=m(e-this.length,this.chars);this.length=e},e}(),u=function(){return o||"undefined"!=typeof window&&(o=window.gsap)&&o.registerPlugin&&o},d=/\s+/g,m=function(e,t){for(var a=t.length,s="";--e>-1;)s+=t[~~(Math.random()*a)];return s},h="ABCDEFGHIJKLMNOPQRSTUVWXYZ",p=h.toLowerCase(),_={upperCase:new c(h),lowerCase:new c(p),upperAndLowerCase:new c(h+p)},D=function(){l=o=u()},g={version:"3.13.0",name:"scrambleText",register:function(e,t,a){o=e,D()},init:function(e,t,a,s,n){if(l||D(),this.prop="innerHTML"in e?"innerHTML":"textContent"in e?"textContent":0,this.prop){this.target=e,"object"!=typeof t&&(t={text:t});var o,u,m,h,p=t.text||t.value||"",g=!1!==t.trim;return this.delimiter=o=t.delimiter||"",this.original=i(r(e).replace(d," ").split("&nbsp;").join(""),o,g),("{original}"===p||!0===p||null==p)&&(p=this.original.join(o)),this.text=i((p||"").replace(d," "),o,g),this.hasClass=!!(t.newClass||t.oldClass),this.newClass=t.newClass,this.oldClass=t.oldClass,h=""===o,this.textHasEmoji=h&&!!this.text.emoji,this.charsHaveEmoji=!!t.chars&&!!i(t.chars).emoji,this.length=h?this.original.length:this.original.join(o).length,this.lengthDif=(h?this.text.length:this.text.join(o).length)-this.length,this.fillChar=t.fillChar||t.chars&&~t.chars.indexOf(" ")?"&nbsp;":"",this.charSet=m=_[t.chars||"upperCase"]||new c(t.chars),this.speed=.05/(t.speed||1),this.prevScrambleTime=0,this.setIndex=20*Math.random()|0,(u=this.length+Math.max(this.lengthDif,0))>m.length&&m.grow(u),this.chars=m.sets[this.setIndex],this.revealDelay=t.revealDelay||0,this.tweenLength=!1!==t.tweenLength,this.tween=a,this.rightToLeft=!!t.rightToLeft,this._props.push("scrambleText","text"),1}},render:function(e,t){var a,s,n,r,o,l,c,u,d,m,h,p=t.target,_=t.prop,D=t.text,g=t.delimiter,f=t.tween,x=t.prevScrambleTime,C=t.revealDelay,y=t.setIndex,v=t.chars,b=t.charSet,j=t.length,S=t.textHasEmoji,E=t.charsHaveEmoji,N=t.lengthDif,I=t.tweenLength,w=t.oldClass,F=t.newClass,A=t.rightToLeft,T=t.fillChar,k=t.speed,R=t.original,B=t.hasClass,O=D.length,P=f._time,L=P-x;C&&(f._from&&(P=f._dur-P),e=0===P?0:P<C?1e-6:P===f._dur?1:f._ease((P-C)/(f._dur-C))),e<0?e=0:e>1&&(e=1),A&&(e=1-e),a=~~(e*O+.5),e?((L>k||L<-k)&&(t.setIndex=y=(y+(19*Math.random()|0))%20,t.chars=b.sets[y],t.prevScrambleTime+=L),r=v):r=R.join(g),h=f._from?e:1-e,m=j+(I?f._from?h*h*h:1-h*h*h:1)*N,A?1===e&&(f._from||"isFromStart"===f.data)?(n="",r=R.join(g)):(c=D.slice(a).join(g),n=E?i(r).slice(0,m-(S?i(c):c).length+.5|0).join(""):r.substr(0,m-(S?i(c):c).length+.5|0),r=c):(n=D.slice(0,a).join(g),s=(S?i(n):n).length,r=E?i(r).slice(s,m+.5|0).join(""):r.substr(s,m-s+.5|0)),B?(u=A?w:F,d=A?F:w,c=((o=u&&0!==a)?"<span class='"+u+"'>":"")+n+(o?"</span>":"")+((l=d&&a!==O)?"<span class='"+d+"'>":"")+g+r+(l?"</span>":"")):c=n+g+r,p[_]="&nbsp;"===T&&~c.indexOf("  ")?c.split("  ").join("&nbsp;&nbsp;"):c}};g.emojiSafeSplit=i,g.getText=r,u()&&o.registerPlugin(g)},37351:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}},39595:(e,t,a)=>{let s;a.d(t,{CF:()=>_,p_:()=>F,FB:()=>d,Se:()=>j,aC:()=>I,zV:()=>w});let n=new WeakSet,r=new WeakMap;function i(e=document){if(r.has(e))return r.get(e);let t=!1,a=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)u(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&o(e)});a.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let s={get closed(){return t},unsubscribe(){t=!0,r.delete(e),a.disconnect()}};return r.set(e,s),s}function o(e){for(let t of e.querySelectorAll("[data-action]"))u(t);e instanceof Element&&e.hasAttribute("data-action")&&u(e)}function l(e){let t=e.currentTarget;for(let a of c(t))if(e.type===a.type){let s=t.closest(a.tag);n.has(s)&&"function"==typeof s[a.method]&&s[a.method](e);let r=t.getRootNode();if(r instanceof ShadowRoot&&n.has(r.host)&&r.host.matches(a.tag)){let t=r.host;"function"==typeof t[a.method]&&t[a.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),a=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,a),method:t.slice(a+1)||"handleEvent"}}}function u(e){for(let t of c(e))e.addEventListener(t.type,l)}function d(e,t){let a=e.tagName.toLowerCase();if(e.shadowRoot){for(let s of e.shadowRoot.querySelectorAll(`[data-target~="${a}.${t}"]`))if(!s.closest(a))return s}for(let s of e.querySelectorAll(`[data-target~="${a}.${t}"]`))if(s.closest(a)===e)return s}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),h=(e,t="property")=>{let a=m(e);if(!a.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return a},p="attr";function _(e,t){N(e,p).add(t)}let D=new WeakSet;function g(e,t){if(D.has(e))return;D.add(e);let a=Object.getPrototypeOf(e),s=a?.constructor?.attrPrefix??"data-";for(let n of(t||(t=N(a,p)),t)){let t=e[n],a=h(`${s}${n}`),r={configurable:!0,get(){return this.getAttribute(a)||""},set(e){this.setAttribute(a,e||"")}};"number"==typeof t?r={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(e){this.setAttribute(a,e)}}:"boolean"==typeof t&&(r={configurable:!0,get(){return this.hasAttribute(a)},set(e){this.toggleAttribute(a,e)}}),Object.defineProperty(e,n,r),n in e&&!e.hasAttribute(a)&&r.set.call(e,t)}}let f=new Map,x=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),C=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let a={once:!0,passive:!0,signal:t.signal},s=()=>t.abort();document.addEventListener("mousedown",s,a),document.addEventListener("touchstart",s,a),document.addEventListener("keydown",s,a),document.addEventListener("pointerdown",s,a)}),y={ready:()=>x,firstInteraction:()=>C,visible:e=>new Promise(t=>{let a=new IntersectionObserver(e=>{for(let s of e)if(s.isIntersecting){t(),a.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))a.observe(t)})},v=new WeakMap;function b(e){cancelAnimationFrame(v.get(e)||0),v.set(e,requestAnimationFrame(()=>{for(let t of f.keys()){let a=e instanceof Element&&e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||a){let s=a?.getAttribute("data-load-on")||"ready",n=s in y?y[s]:y.ready;for(let e of f.get(t)||[])n(t).then(e);f.delete(t),v.delete(e)}}}))}function j(e,t){for(let[a,s]of("string"==typeof e&&t&&(e={[e]:t}),Object.entries(e)))f.has(a)||f.set(a,new Set),f.get(a).add(s);S(document)}function S(e){s||(s=new MutationObserver(e=>{if(f.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&b(e)})),b(e),s.observe(e,{subtree:!0,childList:!0})}let E=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){let t=this,a=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,a)};let s=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,s)};let n=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,a,s){t.attributeChangedCallback(this,e,a,s,n)};let r=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,r)},set(e){r=e}}),function(e){let t=e.observedAttributes||[],a=e.attrPrefix??"data-",s=e=>h(`${a}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[...N(e.prototype,p)].map(s).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var a,s;for(let t of(e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),e.querySelectorAll("template[data-shadowroot]")))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0));(g(e),n.add(e),e.shadowRoot&&(o(s=e.shadowRoot),i(s)),o(e),i(e.ownerDocument),t?.call(e),e.shadowRoot)&&(o(a=e.shadowRoot),i(a),S(e.shadowRoot))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,a,s,n){g(e),"data-catalyst"!==t&&n&&n.call(e,t,a,s)}};function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,E)){let t=e[E],a=e[E]=new Map;if(t)for(let[e,s]of t)a.set(e,new Set(s))}let a=e[E];return a.has(t)||a.set(t,new Set),a.get(t)}function I(e,t){N(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return d(this,t)}})}function w(e,t){N(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){let e=this.tagName.toLowerCase(),a=[];if(this.shadowRoot)for(let s of this.shadowRoot.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)||a.push(s);for(let s of this.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)===this&&a.push(s);return a}})}function F(e){new CatalystDelegate(e)}},44953:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}},56487:(e,t,a)=>{a.d(t,{F:()=>l,t:()=>c});var s=a(74848),n=a(35247),r=a(53419),i=a(5524),o=a(60429);function l({eventName:e,menuLocation:t,mode:a,action:s,text:n}){let i=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,r.BI)("dotcom_chat.activate",{target:i,text:n,category:t,action:s,mode:a})}function c({menuLocation:e,mode:t,onItemClick:a}){return Object.entries(o.A).map(([r,{name:o,url:c,icon:u}])=>(0,s.jsxs)(i.l.LinkItem,{href:c,onClick:()=>{a?.(),n.W.freeToPaidTelemetry&&l({eventName:r,menuLocation:e,mode:t,action:"menu_item_click",text:o})},children:[o,(0,s.jsx)(i.l.LeadingVisual,{children:(0,s.jsx)("img",{src:u,alt:"",height:"20",width:"20"})})]},r))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},60429:(e,t,a)=>{a.d(t,{A:()=>i});let s=a.p+"jetbrains-e16495e63a33.png",n=a.p+"neovim-3301f23c4307.png",r=a.p+"vscode-380056900de8.png",i={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:r,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:a.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:a.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:s,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:n,name:"Neovim",eventName:"NEOVIM"}}},61767:(e,t,a)=>{a.d(t,{FC:()=>l,I0:()=>i,dV:()=>o,h$:()=>u,jK:()=>c});let s=null,n=!1;function r(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);s=e,function(){if(n)return;n=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{s&&(s(e.contextRegion),s=null)},{once:!0})}()}function i(e){r(t=>t.pushCrumb(e))}function o(){r(e=>e.popCrumb())}function l(e){r(t=>t.replaceCrumbs(e))}function c(e){r(t=>t.renameCurrentCrumb(e))}function u(e){r(t=>t.replaceCurrentCrumb(e))}},75735:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(5570),n=a(37351),r=a(44953);function i(e,t,a,i){return(0,n._)(e,t),(0,r._)(a,"set"),(0,s._)(e,a,i),i}},81075:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(50894),n=a(37351),r=a(44953);function i(e,t,a){return(0,n._)(e,t),(0,r._)(a,"get"),(0,s._)(e,a)}},87419:(e,t,a)=>{a.d(t,{Y:()=>u});var s=a(21728),n=a(96540),r=a(25641),i=a(79064),o=a(2635),l=a(33592),c=a(72303);function u(e){let t,a,u,d,m,h,p,_,D,g,f=(0,s.c)(26),x=(0,o.Pk)(),C=(0,l.b)(),{currentTopic:y,messages:v,selectedThreadID:b}=x;f[0]!==x?(t=(0,c.W)(x),f[0]=x,f[1]=t):t=f[1];let j=t,S=(0,n.useRef)(null),E=e||S;return f[2]!==C||f[3]!==v.length||f[4]!==j?(a=()=>{j&&v.length>0&&C.showTopicPicker(!1)},u=[j,v.length,C],f[2]=C,f[3]=v.length,f[4]=j,f[5]=a,f[6]=u):(a=f[5],u=f[6]),(0,n.useEffect)(a,u),f[7]!==y||f[8]!==b?(d=()=>{let e=y?(0,r.P)(y)?y.name:String(y.id):null;b&&e&&i.Jt.setSelectedTopic(b,e)},m=[b,y],f[7]=y,f[8]=b,f[9]=d,f[10]=m):(d=f[9],m=f[10]),(0,n.useEffect)(d,m),f[11]!==E?(h=()=>{let e=window.setTimeout(()=>{E.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[E],f[11]=E,f[12]=h,f[13]=p):(h=f[12],p=f[13]),(0,n.useEffect)(h,p),f[14]!==C||f[15]!==x.context?.[0]||f[16]!==x.currentRepository?(_=()=>{let e=x.context?.[0]??x.currentRepository;return e&&C.generateSuggestions(e),()=>{C.clearSuggestions()}},f[14]=C,f[15]=x.context?.[0],f[16]=x.currentRepository,f[17]=_):_=f[17],f[18]!==C||f[19]!==x.context||f[20]!==x.currentRepository||f[21]!==x.currentTopic||f[22]!==x.selectedThreadID?(D=[C,x.context,x.currentTopic,x.currentRepository,x.selectedThreadID],f[18]=C,f[19]=x.context,f[20]=x.currentRepository,f[21]=x.currentTopic,f[22]=x.selectedThreadID,f[23]=D):D=f[23],(0,n.useEffect)(_,D),f[24]!==E?(g={textAreaRef:E},f[24]=E,f[25]=g):g=f[25],g}},97315:(e,t,a)=>{a.d(t,{P:()=>c});var s=a(74848),n=a(21728),r=a(97949),i=a(96540),o=a(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,a,c,d,m,h,p=(0,n.c)(14),{ambientError:_,useLargerBorderRadius:D}=e,g=(0,o.b)(),[f,x]=(0,i.useState)(0),C=void 0!==D&&D?l.largeBorderRadius:l.mediumBorderRadius,y=(0,i.useRef)(null);p[0]!==_.message?(t=()=>{if(_.message){x(u);let e=setTimeout(()=>{y.current&&y.current.focus()},250);return()=>clearTimeout(e)}},p[0]=_.message,p[1]=t):t=p[1],p[2]!==_?(a=[_],p[2]=_,p[3]=a):a=p[3],(0,i.useEffect)(t,a);let v=`${l.ambientErrorBanner} ${C}`;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},p[4]=c):c=p[4],p[5]!==_.message?(d=(0,s.jsx)("div",{ref:y,tabIndex:-1,style:c,children:_.message}),p[5]=_.message,p[6]=d):d=p[6],p[7]!==g?(m=()=>{g.dismissAmbientError()},p[7]=g,p[8]=m):m=p[8],p[9]!==f||p[10]!==v||p[11]!==d||p[12]!==m?(h=(0,s.jsx)(r.l,{"aria-atomic":"true",className:v,description:d,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},f),p[9]=f,p[10]=v,p[11]=d,p[12]=m,p[13]=h):h=p[13],h}function u(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}}},e=>{e.O(0,["primer-react","react-lib","react-core","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-2f4e04","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-825c28","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_hydro-analytics-c-c228f9","vendors-node_modules_tanstack_query-core_build_modern_mutation_js-node_modules_tanstack_query-9bf7e4","vendors-node_modules_swc_helpers_esm__class_private_method_get_js-node_modules_swc_helpers_es-d6b1a6","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-c7919d","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-5ada6e","vendors-node_modules_lodash-es_cloneDeep_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_comma-separated-tokens_index_js-node_modules_mdast-util-from-markdown_li-6db53e","vendors-node_modules_hastscript_lib_index_js-node_modules_mdast-util-gfm_lib_index_js-node_mo-2895d2","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-690142","vendors-node_modules_remark-parse_lib_index_js-node_modules_unified_lib_index_js","vendors-node_modules_lowlight_lib_all_js-node_modules_react-markdown_lib_index_js-node_module-5ac2ea","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-b54f2c","vendors-node_modules_primer_react-brand_lib_index_js","vendors-node_modules_gsap_index_js","vendors-node_modules_codemirror_language-data_dist_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_pluralize_pluralize_js-f5867b","vendors-node_modules_tanstack_react-query_build_modern_queryOptions_js-node_modules_marked_li-65af4e","vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2","vendors-node_modules_lodash_merge_index_js-node_modules_lodash_mergewith_index_js-node_module-9c5f50","vendors-node_modules_emoji-regex_index_js-node_modules_codemirror_merge_dist_index_js-node_mo-c44105","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_filter_utils_index_ts-packages_fuzzy-score_fuzzy-score_ts-packages_use-analytics_use-efa20b","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_utils_copilot-local-storage_ts","packages_copilot-chat_components_tracing_TraceProvider_tsx","packages_relay-environment_relay-environment_ts","packages_copilot-chat_utils_CopilotChatContext_tsx","packages_item-picker_components_RepositoryPicker_tsx-packages_safe-html_VerifiedHTML_tsx","packages_history_history_ts-packages_soft-nav_state_ts-packages_agent-sessions_components_new-9fc8d0","packages_copilot-markdown_MarkdownRenderer_tsx","packages_comment-box_api_file-upload_ts-packages_comment-box_api_preview_ts-packages_markdown-c95d34","packages_code-view-shared_hooks_use-repos-analytics_ts-packages_code-view-shared_hooks_use-tr-fbe81a","packages_copilot-chat_components_ModelPicker_tsx-packages_copilot-byok_providers_assets_anthr-76f86b","packages_noop_noop_ts-packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfil-9ee0de","packages_document-metadata_document-metadata_ts-packages_diff-lines_components_conversations_-95fb1a","packages_agent-sessions_utils_generate-task-path_ts-packages_agent-sessions_utils_get-leading-e06b3d","packages_signed-commit-badge_index_ts","packages_commenting_hooks_use-markdown-body_ts-packages_commenting_utils_blocked-commenting-r-21549c","packages_diff-file-header_diff-file-header_ts-packages_diff-file-tree_diff-file-tree-helpers_-b49245","packages_code-mirror_CodeMirror_tsx","packages_diff-lines_diff-lines_ts","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_nested-list-view_src_NestedListItem_LeadingContent_tsx-packages_nested-list-view_src-1f776c","packages_markdown-viewer_NewMarkdownViewer_tsx","packages_copilot-chat_hooks_use-active-plugin_ts-packages_copilot-chat_components_ChatMessage-aba353","packages_commits_shared_use-update-user-tree-preference_ts-packages_use-hide-footer_use-hide--80c91a","packages_issue-viewer_components_IssueViewer_tsx-packages_issue-viewer_contexts_IssueViewerCo-f66842","packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd","packages_dashboard-lists_components_AgentsList_tsx","packages_product-announcement_components_ProductAnnouncement_ProductAnnouncement_tsx-packages-4fe0a1","packages_agent-sessions_components_AgentsIcon_tsx-packages_agent-sessions_components_PremiumR-93ba44","packages_agent-sessions_agents-plugin_ts-packages_agent-sessions_tasks-plugin_ts-packages_cod-3f1b00","packages_app-uuid_app-uuid_ts-packages_copilot-chat_components_tracing_TraceDisplay_tsx"],()=>e(e.s=11891)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-e3e74c7d2b25.js.map