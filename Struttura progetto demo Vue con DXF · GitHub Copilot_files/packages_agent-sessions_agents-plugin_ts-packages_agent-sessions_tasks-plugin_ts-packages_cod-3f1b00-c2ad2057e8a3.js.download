"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_agent-sessions_agents-plugin_ts-packages_agent-sessions_tasks-plugin_ts-packages_cod-3f1b00","packages_global-sso-banner_GlobalSsoBanner_tsx"],{295:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(21728),i=n(97665),s=n(94747),r=n(99519),l=n(80770),o=n(99993);function c(){let e,t,n,c=(0,a.c)(7),d=(0,i.jE)(),u=(0,r.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[o.M1,t]}),d.invalidateQueries({queryKey:[l.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,s.n)(n)}},894:(e,t,n)=>{n.d(t,{L:()=>s,M:()=>i});var a=n(96540);let i=(0,a.createContext)(null);function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},1747:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>B,tZ:()=>F,wI:()=>M});var a=n(74848),i=n(21728),s=n(2635),r=n(35247),l=n(42312),o=n(33535),c=n(6551),d=n(40104),u=n(96540),m=n(93380),p=n(79064),h=n(7812),f=n(41649),g=n(33592),y=n(25641),v=n(82075),x=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],_=e=>!!e.isUserEdited,w=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,x.A)(t.get(e),n)),j=(e,t)=>!w(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),N=(e,t)=>!w(new Map(Array.from(e).filter(([,e])=>_(e))),new Map(Array.from(t).filter(([,e])=>_(e))));function k(e){return[e.id,e]}function C(e){return null!=e}function S(e){return[(0,y.Vb)(e),e]}function I(e){return null!=e}function T(e){return(0,h.PO)(e)}let E=(0,u.createContext)(void 0),L=new Map,R=[];function A(e){let t,n,d,x,w,A,B,F,M,$,V,U,q,W,H,K,G,z=(0,i.c)(55),{children:Q}=e,Y=(0,o.AI)(!1),J=(0,o.AI)(!1),X=(0,l.U)(),Z=(0,u.useRef)(null),[ee,et]=(0,u.useState)(L),[en,ea]=(0,u.useState)(R),[ei,es]=(0,u.useState)(R),[er,el]=(0,u.useState)(void 0),[eo,ec,ed]=(0,m.B)(!1),eu=(0,c.S)((0,s.pn)(P)),em=(0,s.pn)(D);z[0]!==Y||z[1]!==eu||z[2]!==em?(t=()=>{eu&&eu!==em&&(et(L),ea(R),el(void 0),null===em&&Y.setValue(!1))},n=[em,eu,Y],z[0]=Y,z[1]=eu,z[2]=em,z[3]=t,z[4]=n):(t=z[3],n=z[4]),(0,u.useEffect)(t,n),z[5]===Symbol.for("react.memo_cache_sentinel")?(d=(e,t)=>{let n=void 0===t||t;ea(t=>{if(t.includes(e))return t;let n=(0,h.oy)(e),a=t.findIndex(e=>(0,h.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),el(t=>n||void 0===t||(0,h.oy)(t)===(0,h.oy)(e)?e:t)},z[5]=d):d=z[5];let ep=d;z[6]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{et(t=>{let n=new Map(t);return n.set(e.id,e),n})},z[6]=x):x=z[6];let eh=x;z[7]!==en||z[8]!==er?(w=e=>{let t=en.indexOf(e);if(-1===t)return;let n=en.toSpliced(t,1);er===e&&el(n[t-1]??n[0]),ea(n)},z[7]=en,z[8]=er,z[9]=w):w=z[9];let ef=(0,f.K)(w);z[10]!==en||z[11]!==er?(A=e=>{if(e){let t=en;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),er===n&&el(t[e-1]??t[0]))}ea(t)}else ea(R),el(void 0)},z[10]=en,z[11]=er,z[12]=A):A=z[12];let eg=(0,f.K)(A);if(z[13]!==ee){for(let[e,t]of(B=new Map,ee)){let n=(0,h.oy)(e),a=B.get(n)??[];a.push(t.id),B.set(n,a)}for(let e of B.values())e.sort((e,t)=>{let n=ee.get(e),a=ee.get(t);return"timestamp"in n&&"timestamp"in a?n.timestamp.valueOf()-a.timestamp.valueOf():0});z[13]=ee,z[14]=B}else B=z[14];let ey=B;z[15]!==ef||z[16]!==en||z[17]!==ey?(F=e=>{if(e){for(let t of e)if(et(e=>{let n=new Map(e);return n.delete(t)?n:e}),en.includes(t)){let e=(0,h.oy)(t),n=ey.get(e),a=n?.indexOf(t)??-1,i=n?.[a-1];i?ep(i,!1):ef(t)}}else et(L),ea(R),el(void 0)},z[15]=ef,z[16]=en,z[17]=ey,z[18]=F):F=z[18];let ev=(0,f.K)(F);z[19]!==Y.value||z[20]!==en?(M=()=>Y.value?en:R,z[19]=Y.value,z[20]=en,z[21]=M):M=z[21];let ex=(0,f.K)(M);z[22]!==X||z[23]!==Y?($=e=>{Y.setValue(!0),queueMicrotask(()=>{X.current?.focus()}),void 0!==e&&(Z.current=e)},z[22]=X,z[23]=Y,z[24]=$):$=z[24];let eb=$;z[25]!==Y||z[26]!==J?(V=()=>{Y.setValue(!1),J.setValue(!1)},z[25]=Y,z[26]=J,z[27]=V):V=z[27];let e_=V;z[28]!==J?(U=()=>J.setValue(!0),z[28]=J,z[29]=U):U=z[29];let ew=U;z[30]!==J?(q=()=>J.setValue(!1),z[30]=J,z[31]=q):q=z[31];let ej=q;z[32]!==ef||z[33]!==eg||z[34]!==e_||z[35]!==ej||z[36]!==X||z[37]!==ed||z[38]!==ec||z[39]!==ex||z[40]!==Y||z[41]!==J||z[42]!==ee||z[43]!==en||z[44]!==ei||z[45]!==eb||z[46]!==ew||z[47]!==ev||z[48]!==er||z[49]!==eo||z[50]!==ey?(W={items:ee,versionedItems:ey,contentPreviewRef:X,isContentPreviewOpen:Y,isResourcePanelOpen:J,getOpenItems:ex,allOpenItems:en,openItemsBeforeSubthreadChange:ei,selectedItem:er,updateItem:eh,setOpenItemsBeforeSubthreadChange:es,openItem:ep,closeItem:ef,closeItems:eg,openPreviewPane:eb,closePreviewPane:e_,openResourcePanel:ew,closeResourcePanel:ej,removeItems:ev,showLoadingState:eo,enableLoadingState:ec,disableLoadingState:ed,returnFocusElementRef:Z},z[32]=ef,z[33]=eg,z[34]=e_,z[35]=ej,z[36]=X,z[37]=ed,z[38]=ec,z[39]=ex,z[40]=Y,z[41]=J,z[42]=ee,z[43]=en,z[44]=ei,z[45]=eb,z[46]=ew,z[47]=ev,z[48]=er,z[49]=eo,z[50]=ey,z[51]=W):W=z[51];let eN=W,ek=(0,i.c)(5),{updateItem:eC,openItem:eS,openPreviewPane:eI}=eN;return ek[0]!==eS||ek[1]!==eI||ek[2]!==eC?(K=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=p.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,h.g)(t);eC(e),eS(e.id)}eI(),p.Jt.removeCopilotDiffReferences()}},G=[eC,eS,eI],ek[0]=eS,ek[1]=eI,ek[2]=eC,ek[3]=K,ek[4]=G):(K=ek[3],G=ek[4]),(0,u.useEffect)(K,G),O(eN),!function(e){let t,n,a,l=(0,i.c)(10),{items:o,removeItems:c,updateItem:d}=e,{currentReferences:m,messages:p,selectedThreadID:f}=(0,s.Pk)(),x=(0,g.b)(),w=(0,u.useRef)(o),E=(0,u.useRef)(m);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.A)("sessionStorage"),l[0]=t):t=l[0];let L=t;l[1]!==m||l[2]!==o||l[3]!==x||l[4]!==p.length||l[5]!==c||l[6]!==f||l[7]!==d?(n=()=>{let e=N(w.current,o);w.current=o;let t=j(E.current,m);if(E.current=m,e){let e=new Map(Array.from(o.values()).filter(_).map(T).filter(I).map(S)),t=new Set;for(let n of m)if(b.includes(n.type)){let a=(0,y.Vb)(n);t.add(a);let i=e.get(a);i?j([i],[n])&&x.addReference(i,"content-preview"):x.removeReference(n)}for(let[n,a]of e)t.has(n)||x.addReference(a,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,h.oR)({ref:e,messageIndex:p.length})).filter(C).map(k)),t=new Set;for(let[n,a]of o)if(_(a)){t.add(n);let i=e.get(n);null!=i?N(new Map([[i.id,i]]),new Map([[a.id,a]]))&&d(i):(c([n]),r.W.copilotPersistEditedDraftIssues&&L.removeItem(`edited-${f}-${n}`))}for(let[n,a]of e)t.has(n)||d(a)}},a=[o,x,m,p.length,c,d,L,f],l[1]=m,l[2]=o,l[3]=x,l[4]=p.length,l[5]=c,l[6]=f,l[7]=d,l[8]=n,l[9]=a):(n=l[8],a=l[9]),(0,u.useEffect)(n,a)}(eN),z[52]!==Q||z[53]!==eN?(H=(0,a.jsx)(E.Provider,{value:eN,children:Q}),z[52]=Q,z[53]=eN,z[54]=H):H=z[54],H}function D(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let O=e=>{let t,n,a,l=(0,i.c)(8),{updateItem:o}=e,{messagesLoading:c,selectedThreadID:m}=(0,s.Pk)(),p=`edited-${m}`;if(r.W.copilotPersistEditedDraftIssues){let e;l[0]!==p?(e=(0,d.MV)(p),l[0]=p,l[1]=e):e=l[1],t=e}else{let e;l[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[2]=e):e=l[2],t=e}let h=t;l[3]!==h||l[4]!==c.state||l[5]!==o?(n=()=>{if(h&&"loaded"===c.state)for(let e of h)o(e)},a=[h,o,c.state],l[3]=h,l[4]=c.state,l[5]=o,l[6]=n,l[7]=a):(n=l[6],a=l[7]),(0,u.useEffect)(n,a)};function B(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function F(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function M(){let e=(0,u.useContext)(E);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{E.displayName||(E.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},2022:(e,t,n)=>{n.d(t,{E:()=>o,d:()=>c});var a=n(65510),i=n(20622),s=n(53885),r=n(96379),l=n(50129);function o(){let{basePageDataUrl:e}=(0,l.Yu)();return[i.u.commits,`basePageDataURL:${e}`]}function c(e){let t=(0,s.e)(i.u.commits),n=o();return(0,a.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},2691:(e,t,n)=>{n.d(t,{I:()=>d});var a=n(74848),i=n(21728),s=n(73017),r=n(27042),l=n(5524),o=n(96540),c=n(15440);function d(e){let t,n,d,u,m,p,h=(0,i.c)(21),{group:f,onEntrySelect:g}=e,[y,v]=(0,o.useState)(!1),x=(0,o.useRef)(null);h[0]!==y?(t=()=>{v(!y)},h[0]=y,h[1]=t):t=h[1];let b=t;if(h[2]!==f.color||h[3]!==f.icon||h[4]!==f.id||h[5]!==f.name||h[6]!==b||h[7]!==y?(n=(0,a.jsx)(r.W.Anchor,{children:(0,a.jsx)(c.Z,{ref:x,testId:f.id,name:f.name,icon:f.icon,color:f.color,onClick:b,dropdown:!0,open:y})}),h[2]=f.color,h[3]=f.icon,h[4]=f.id,h[5]=f.name,h[6]=b,h[7]=y,h[8]=n):n=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(d={width:"260px"},h[9]=d):d=h[9],h[10]!==f.entries||h[11]!==g){let e;h[13]!==g?(e=e=>(0,a.jsx)(l.l.Item,{onSelect:()=>g(e),children:(0,a.jsx)(s.$6,{html:e.titleHtml})},e.id),h[13]=g,h[14]=e):e=h[14],u=f.entries.map(e),h[10]=f.entries,h[11]=g,h[12]=u}else u=h[12];return h[15]!==u?(m=(0,a.jsx)(r.W.Overlay,{style:d,children:(0,a.jsx)(l.l,{children:u})}),h[15]=u,h[16]=m):m=h[16],h[17]!==y||h[18]!==n||h[19]!==m?(p=(0,a.jsx)("li",{children:(0,a.jsxs)(r.W,{open:y,onOpenChange:v,children:[n,m]})}),h[17]=y,h[18]=n,h[19]=m,h[20]=p):p=h[20],p}try{d.displayName||(d.displayName="StarterGroupWithMenu")}catch{}},2702:(e,t,n)=>{n.d(t,{X:()=>m});var a=n(74848),i=n(21728),s=n(72206),r=n(53419),l=n(88934),o=n(50393),c=n(2691),d=n(15440);let u={starters:"Starters-module__starters--L2GQo"};function m(e){let t,n,m,p,h=(0,i.c)(10),{handleStarterEntrySelect:f,taskStarterEnabled:g,style:y,startersLocationId:v}=e,x=void 0===y?u.starters:y,b=(0,s.tD)()(),_=void 0!==g&&g&&b.hasCEorCBAccess&&!b.agentsEnabled,w=(0,l.Zp)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),h[0]=t):t=h[0];let j=_&&(0,a.jsx)("li",{children:(0,a.jsx)(d.Z,{testId:"task",name:"Task",icon:"agent",color:"var(--display-gray-fgColor)",onClick:()=>{(0,r.BI)("dotcom_chat.activate",{target:`${v.toUpperCase()}_STARTER_MENU_ITEM`,topic:b.currentTopic?.name,mode:"immersive",starterId:"task-starter"}),w("/copilot/agents")}},"task-starter")});h[1]!==f?(n=e=>(0,a.jsx)(c.I,{group:e,onEntrySelect:f},e.id),h[1]=f,h[2]=n):n=h[2];let N=(0,o.M)(_).map(n);return h[3]!==x||h[4]!==j||h[5]!==N?(m=(0,a.jsxs)("ul",{className:x,children:[j,N]}),h[3]=x,h[4]=j,h[5]=N,h[6]=m):m=h[6],h[7]!==t||h[8]!==m?(p=(0,a.jsxs)(a.Fragment,{children:[t,m]}),h[7]=t,h[8]=m,h[9]=p):p=h[9],p}try{m.displayName||(m.displayName="Starters")}catch{}},3024:(e,t,n)=>{n.d(t,{U:()=>eN});var a=n(74848),i=n(21728),s=n(82595),r=n(894),l=n(75202),o=n(91747),c=n(88934),d=n(38621),u=n(27042),m=n(5524),p=n(34164),h=n(96540),f=n(2635),g=n(33592),y=n(53419),v=n(26108),x=n(81960),b=n(40090),_=n(40961),w=n(25641),j=n(40683);let N={container:"ConversationListV2-module__container--DfLLE",condensed:"ConversationListV2-module__condensed--vCbJZ",empty:"ConversationListV2-module__empty--4TgQY",list:"ConversationListV2-module__list--N8p2i",section:"ConversationListV2-module__section--G3Lm1",title:"ConversationListV2-module__title--VKD9S",item:"ConversationListV2-module__item--cPXI6",link:"ConversationListV2-module__link--J46j6",text:"ConversationListV2-module__text--IsNRP",context:"ConversationListV2-module__context--a0pCE",emptyStateHeading:"ConversationListV2-module__emptyStateHeading--KkuQU",emptyStateText:"ConversationListV2-module__emptyStateText--LsdKG"};function k({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:i}){let s=(0,g.b)(),{threads:r}=(0,f.Pk)(),l=(0,h.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let i=new Date(t);i.setDate(t.getDate()-30);let s=[],r=[],l=[],o=[];for(let c of e)c.date.toDateString()===t.toDateString()?s.push(c):c.date.toDateString()===n.toDateString()?r.push(c):c.date>a?l.push(c):c.date>i&&o.push(c);return{Today:s,Yesterday:r,"Last 7 days":l,"Last 30 days":o}}(l),c=0===l.length,d=(0,h.useId)();return(0,a.jsx)("nav",{"aria-labelledby":`${d}-conversations`,id:`${d}-conversation-list`,tabIndex:-1,className:(0,p.$)(N.container,i&&N.condensed),children:c&&("loading"===t||"pending"===t)?(0,a.jsx)(b.r,{lines:5}):c?(0,a.jsx)(S,{}):(0,a.jsxs)("div",{className:N.section,children:[(0,a.jsx)("h3",{id:`${d}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(o).map(([t,i])=>i.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{id:`${d}_${t}`,className:N.title,children:t}),(0,a.jsx)("ul",{className:N.list,children:i.map(t=>(0,a.jsx)(C,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function C({item:e,selectedItemId:t,onSelect:n,threads:i}){let s=e.id===t,[r,l]=(0,h.useState)(null),[o,p]=(0,h.useState)(!1),f=(0,h.useCallback)(()=>p(!0),[]),g=(0,h.useCallback)(()=>p(!1),[]),x=i.get(t),b=!!x?.customCopilotID,w=(0,h.useRef)(null),k=(0,h.useCallback)(()=>{(0,_.flushSync)(()=>l(null)),w.current?.focus()},[w]);return e.href&&(0,a.jsxs)("li",{className:N.item,children:[(0,a.jsx)(c.N_,{className:N.link,to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,a.jsx)("span",{className:N.text,children:e.text})}),(0,a.jsx)("span",{className:N.context,children:(0,a.jsxs)(u.W,{anchorRef:w,children:[(0,a.jsx)(u.W.Anchor,{children:(0,a.jsx)(v.K,{loading:o,icon:d.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,a.jsx)(u.W.Overlay,{children:(0,a.jsx)(m.l,{children:(0,a.jsx)(j.V,{onOpenDialog:l,isShared:!!i.get(e.id)?.sharedID,showShare:!b})})})]})}),(0,a.jsx)(j.p,{visibleDialog:r,onClose:k,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:f,onFinishLoading:g,returnFocusRef:w})]},e.id)}function S(){return(0,a.jsxs)("div",{className:N.empty,children:[(0,a.jsx)(x.A,{as:"h3",className:N.emptyStateHeading,children:"No chats yet"}),(0,a.jsx)("span",{className:N.emptyStateText,children:"Ask Copilot anything on the right to start your first chat."})]})}try{k.displayName||(k.displayName="ConversationList")}catch{}try{C.displayName||(C.displayName="ConversationListEntry")}catch{}try{S.displayName||(S.displayName="EmptyState")}catch{}var I=n(7554),T=n(11607),E=n(71205),L=n(29607),R=n(77999),A=n(59121),D=n(47789),P=n(35247);let O={compactContainer:"ActivityPanel-module__compactContainer--KLMAT",overlay:"ActivityPanel-module__overlay--OZPYs",contentContainer:"ActivityPanel-module__contentContainer--OOtsS",segmentedControl:"ActivityPanel-module__segmentedControl--GDg9m",listContainer:"ActivityPanel-module__listContainer--IIfk8",topBar:"ActivityPanel-module__topBar--Beu0F"};var B=n(84802);function F(e){let t,n,s,r=(0,i.c)(7);r[0]!==e?(t=void 0===e?{}:e,r[0]=e,r[1]=t):t=r[1];let l=t,o=(0,B.G)();r[2]!==o?(n=async()=>{await o({clearTopic:!0,includeThreads:!1})},r[2]=o,r[3]=n):n=r[3];let c=n;return r[4]!==c||r[5]!==l?(s=(0,a.jsx)(R.m,{text:"New chat",children:(0,a.jsx)(v.K,{...l,"aria-label":"New chat",icon:d.PlusIcon,onClick:c})}),r[4]=c,r[5]=l,r[6]=s):s=r[6],s}try{F.displayName||(F.displayName="CreateConversationButton")}catch{}var M=n(64475);function $({handleSidebarClick:e,title:t}){let n=(0,c.zy)().pathname.includes("/share/"),{threadsLoading:i,selectedThreadID:s,threads:r}=(0,f.bP)("threadsLoading","selectedThreadID","threads"),l=(0,g.b)(),o=(0,h.useMemo)(()=>l.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,l]),d=0===o.length,u="loading"===i.state||"pending"===i.state;return(0,a.jsx)(L.s2,{title:t,isEmpty:d,isLoading:u,emptyStateTitle:"No chats yet",emptyStateText:"Ask Copilot anything on the right to start your first chat.",children:o.map(t=>(0,a.jsx)(V,{item:t,selectedItemId:n?void 0:s??void 0,onSelect:e,threads:r},t.id))})}function V({item:e,selectedItemId:t,onSelect:n,threads:i}){let s=e.id===t,[r,l]=(0,h.useState)(null),[o,c]=(0,h.useState)(!1),p=(0,h.useCallback)(()=>c(!0),[]),f=(0,h.useCallback)(()=>c(!1),[]),g=i.get(t),x=!!g?.customCopilotID,b=(0,h.useRef)(null),w=(0,h.useCallback)(()=>{(0,_.flushSync)(()=>l(null)),b.current?.focus()},[b]),N=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.W,{anchorRef:b,children:[(0,a.jsx)(u.W.Anchor,{children:(0,a.jsx)(v.K,{loading:o,icon:d.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,a.jsx)(u.W.Overlay,{children:(0,a.jsx)(m.l,{children:(0,a.jsx)(j.V,{onOpenDialog:l,isShared:!!i.get(e.id)?.sharedID,showShare:!x})})})]}),(0,a.jsx)(j.p,{visibleDialog:r,onClose:w,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:p,onFinishLoading:f,returnFocusRef:b})]});return(0,a.jsx)(E.W,{href:e.href,text:e.text,isSelected:s,trailingAction:N,onClick:()=>{n(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}let U={TASKS:0,CHATS:1};function q({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let i=(0,c.zy)().pathname.includes("/c/"),[s,r]=(0,h.useState)(i?U.CHATS:U.TASKS),l=(0,D.qw)(),o=(0,h.useCallback)(()=>{t&&n()},[t,n]),m=(0,h.useMemo)(()=>l.flatMap(e=>e.activityItems?e.activityItems.map(e=>({component:e.Component,displayName:e.displayName,trailingAction:e.trailingAction?.()})):[]),[l]),p=(0,h.useCallback)(({omitCreateButton:t=!1})=>P.W.missionControlSidebarV2?(0,a.jsxs)("div",{className:O.contentContainer,children:[(0,a.jsxs)("div",{className:O.topBar,children:[(0,a.jsxs)(A.I,{"aria-label":"Activity panel",className:O.segmentedControl,onChange:e=>r(e),size:"small",children:[(0,a.jsx)(A.I.Button,{selected:s===U.TASKS,value:U.TASKS,children:"Tasks"}),(0,a.jsx)(A.I.Button,{selected:s===U.CHATS,value:U.CHATS,children:"Chats"})]}),!t&&(s===U.TASKS?(0,a.jsx)(M.G,{onTaskCreated:o,size:"small"}):(0,a.jsx)(F,{size:"small"}))]}),(0,a.jsx)("div",{className:O.listContainer,children:s===U.TASKS?(0,a.jsx)(I.oR,{}):(0,a.jsx)($,{handleSidebarClick:e})})]}):(0,a.jsxs)(L.jZ,{isCondensed:!1,"aria-label":"Navigation",children:[m.map(e=>(0,a.jsx)(e.component,{showTitle:!0,trailingAction:e.trailingAction},e.displayName)),(0,a.jsx)($,{title:"Chats",handleSidebarClick:e})]}),[s,o,e,m]);return t?(0,a.jsxs)("div",{className:O.compactContainer,children:[(0,a.jsxs)(u.W,{children:[(0,a.jsx)(u.W.Anchor,{children:(0,a.jsx)(R.m,{text:"Tasks and chats",children:(0,a.jsx)(T.$,{"aria-label":"Tasks and chats",icon:(0,a.jsx)(d.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,a.jsx)(u.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:O.overlay,children:(0,a.jsx)("div",{children:p({omitCreateButton:!0})})})]}),(0,a.jsx)(M.G,{className:"fgColor-muted",onTaskCreated:o,variant:"invisible"})]}):p({omitCreateButton:!1})}try{$.displayName||($.displayName="ConversationListWrapper")}catch{}try{V.displayName||(V.displayName="ConversationListEntry")}catch{}try{q.displayName||(q.displayName="ActivityPanel")}catch{}let W={quicklinks:"CopilotNavigation-module__quicklinks--y91ru",footer:"CopilotNavigation-module__footer--WE0C5",blankslateContainer:"CopilotNavigation-module__blankslateContainer--nuX9Y",ssoButton:"CopilotNavigation-module__ssoButton--cAcPq",ssoContent:"CopilotNavigation-module__ssoContent--sQStD",condensed:"CopilotNavigation-module__condensed--TzlR_"};var H=n(84646),K=n(69599),G=n(49851),z=n(26607),Q=n(27359),Y=n(23657);let J={list:"ServiceList-module__list--nR74A",section:"ServiceList-module__section--k1uLc",item:"ServiceList-module__item--fn806",link:"ServiceList-module__link--VJdHH",content:"ServiceList-module__content--k6BSj",textWrapper:"ServiceList-module__textWrapper--jtpsQ",text:"ServiceList-module__text--DxTKY",label:"ServiceList-module__label--eTRas",externalLabel:"ServiceList-module__externalLabel--P9mcb",condensed:"ServiceList-module__condensed--x5s6A",previewLabel:"ServiceList-module__previewLabel--JWC5Z",externalIcon:"ServiceList-module__externalIcon--lTFBq"};function X({"aria-current":e,"data-analytics-event":t,href:n,icon:i,onLinkClick:r,id:l,displayName:o,condensed:u,label:m,external:h}){let f={"aria-current":e,"data-analytics-event":t,className:J.link,onClick:e=>{r?.(e,l)}},g=h?(0,a.jsxs)("a",{href:n,className:J.link,"aria-label":o,rel:"noopener noreferrer",children:[(0,a.jsx)(s.I,{size:16,icon:i}),(0,a.jsxs)("div",{className:(0,p.$)(J.content,u&&J.condensed),children:[(0,a.jsx)("div",{className:J.textWrapper,children:(0,a.jsx)("div",{className:J.text,children:o})}),(0,a.jsx)("div",{className:J.label,children:(0,a.jsxs)("div",{className:J.externalLabel,children:[(0,a.jsx)("span",{className:J.previewLabel,children:m}),(0,a.jsx)(d.ArrowUpRightIcon,{className:J.externalIcon})]})})]})]}):(0,a.jsxs)(c.N_,{to:n,...f,"aria-label":o,children:[(0,a.jsx)(s.I,{size:16,icon:i}),(0,a.jsxs)("div",{className:(0,p.$)(J.content,u&&J.condensed),children:[(0,a.jsx)("div",{className:J.textWrapper,children:(0,a.jsx)("div",{className:J.text,children:o})}),(0,a.jsx)("div",{className:J.label,children:m})]})]});return(0,a.jsx)("li",{className:J.section,children:(0,a.jsx)("div",{className:J.item,children:(0,a.jsx)(R.m,{text:u?o:"",children:g})})})}let Z=JSON.stringify({source:"ServiceList"});function ee({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,f.Pk)(),i=(0,Q.v)()?.id,s=(0,D.qw)(),r=(0,B.G)(),l=(0,H.BV)(),o=(0,Y.mM)(),c=!n&&!i&&!o,d=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},u=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),m=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),p=!(0,K.G7)("copilot_spaces_ga"),g=(0,h.useMemo)(()=>[...l?[{type:"spaces",component:(0,a.jsx)(X,{"aria-current":o?"page":void 0,"data-analytics-event":Z,displayName:"Spaces",href:w.VR,icon:G.Dy,condensed:t,id:"spaces",onLinkClick:u,label:p&&(0,a.jsx)(z.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,a.jsx)(X,{"aria-current":i===e.id?"page":void 0,"data-analytics-event":Z,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:m,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[l,o,t,u,p,s,i,m]);return(0,a.jsxs)("ul",{className:J.list,children:[(0,a.jsx)(X,{"aria-current":c?"page":void 0,"data-analytics-event":Z,displayName:"New chat",href:w.Jz,icon:G.KJ,condensed:t,id:"home",onLinkClick:d}),g.map(e=>e.component)]})}try{X.displayName||(X.displayName="ServiceListItem")}catch{}try{ee.displayName||(ee.displayName="ServiceList")}catch{}var et=n(77430),en=n(51213),ea=n(98755),ei=n(71315),es=n(15220),er=n(46251),el=n(69726),eo=n(57352),ec=n(26382),ed=n(10006),eu=n(3803);let em={dialog:"ManageSharedConversationsDialog-module__dialog--_C8sX",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--iuECd",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--mA28C",footer:"ManageSharedConversationsDialog-module__footer--aTXFp",mutedText:"ManageSharedConversationsDialog-module__mutedText--_uOci",footerContent:"ManageSharedConversationsDialog-module__footerContent--yVU91",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",footerRight:"ManageSharedConversationsDialog-module__footerRight--n1XJG",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--tYQ41",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--JqMKE"};var ep=n(21373),eh=n(20139);let ef={container:"UnshareConversationDialog-module__container--Tc1R_",buttonStack:"UnshareConversationDialog-module__buttonStack--JvbNF",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--gcf6y",threadTitle:"UnshareConversationDialog-module__threadTitle--eBgrX",threadDescription:"UnshareConversationDialog-module__threadDescription--E1H0T"},eg=e=>{let t,n,s,r,l,o,c,d,u,m,p,v,x,b,_,w,j,N,k,C,S=(0,i.c)(60),{closeDialog:I,threadId:T}=e,E=(0,f.Pk)(),L=(0,g.b)(),{selectedThreadID:R,ssoOrganizations:A,apiUrl:D,threads:P}=E,[O,B]=(0,h.useState)(E.messages);S[0]!==T||S[1]!==P?(t=()=>{let e=P.get(T);return e?.sharedID||""},S[0]=T,S[1]=P,S[2]=t):t=S[2];let[F,M]=(0,h.useState)(t),$=(0,h.useRef)(""!==F),V=(0,h.useRef)("");S[3]!==O||S[4]!==F||S[5]!==E.apiUrl||S[6]!==E.ssoOrganizations||S[7]!==T?(n=()=>{let e=async()=>{if(0===O.filter(e=>e.threadID===T).length){let e=new eh.k(E.apiUrl,E.ssoOrganizations),t=await e.listSharedThreadMessages(F);t.ok&&B(t.payload.messages)}};V.current!==F&&F&&(V.current=F,e())},s=[F,T,O,E.apiUrl,E.ssoOrganizations],S[3]=O,S[4]=F,S[5]=E.apiUrl,S[6]=E.ssoOrganizations,S[7]=T,S[8]=n,S[9]=s):(n=S[8],s=S[9]),(0,h.useEffect)(n,s),S[10]!==R||S[11]!==T||S[12]!==P?(r=P.get(T||R),S[10]=R,S[11]=T,S[12]=P,S[13]=r):r=S[13];let U=r,q=O[O.length-1],W=q?.content||"";S[14]!==R||S[15]!==T||S[16]!==P?(l=()=>{let e=T||R;if(e){let t=P.get(e);M(t?.sharedID||"")}},S[14]=R,S[15]=T,S[16]=P,S[17]=l):l=S[17],S[18]!==L||S[19]!==R||S[20]!==T||S[21]!==P?(o=[L,M,R,P,T],S[18]=L,S[19]=R,S[20]=T,S[21]=P,S[22]=o):o=S[22],(0,h.useEffect)(l,o),S[23]!==D||S[24]!==I||S[25]!==L||S[26]!==R||S[27]!==F||S[28]!==A||S[29]!==T?(c=async()=>{let e=T||R,t=new eh.k(D,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:a,sharedMessageID:i}=n.payload;L.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:i}}),$.current=!1,I(),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:F})}},S[23]=D,S[24]=I,S[25]=L,S[26]=R,S[27]=F,S[28]=A,S[29]=T,S[30]=c):c=S[30];let H=c;S[31]!==I?(d=()=>{I()},S[31]=I,S[32]=d):d=S[32];let K=d;S[33]!==H||S[34]!==F?(u=()=>{if(F)return(0,a.jsx)(ep.Q,{onClick:H,variant:"danger",children:"Unshare"})},S[33]=H,S[34]=F,S[35]=u):u=S[35];let G=u;S[36]!==I?(m=()=>(0,a.jsx)(ep.Q,{onClick:I,children:"Cancel"}),S[36]=I,S[37]=m):m=S[37];let z=m;S[38]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),S[38]=p):p=S[38];let Q=U?.name||"";return S[39]!==Q?(v=(0,a.jsx)("span",{className:ef.threadTitle,children:Q}),S[39]=Q,S[40]=v):v=S[40],S[41]!==W?(x=(0,a.jsx)("span",{className:ef.threadDescription,children:W}),S[41]=W,S[42]=x):x=S[42],S[43]!==v||S[44]!==x?(b=(0,a.jsxs)(er.B,{direction:"vertical",className:ef.threadInfoStack,children:[v,x]}),S[43]=v,S[44]=x,S[45]=b):b=S[45],S[46]===Symbol.for("react.memo_cache_sentinel")?(_=(0,a.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),S[46]=_):_=S[46],S[47]!==z?(w=z(),S[47]=z,S[48]=w):w=S[48],S[49]!==G?(j=G(),S[49]=G,S[50]=j):j=S[50],S[51]!==w||S[52]!==j?(N=(0,a.jsxs)(er.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:ef.buttonStack,children:[w,j]}),S[51]=w,S[52]=j,S[53]=N):N=S[53],S[54]!==b||S[55]!==N?(k=(0,a.jsxs)("div",{className:ef.container,children:[p,b,_,N]}),S[54]=b,S[55]=N,S[56]=k):k=S[56],S[57]!==K||S[58]!==k?(C=(0,a.jsx)(es.l,{title:"Unshare conversation",onClose:K,width:"large",children:k}),S[57]=K,S[58]=k,S[59]=C):C=S[59],C};try{eg.displayName||(eg.displayName="UnshareConversationDialog")}catch{}let ey=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ev=({closeDialog:e,returnFocusRef:t})=>{let n=(0,g.b)(),i=(0,f.Pk)(),[s,r]=(0,h.useState)(0),[l,o]=(0,h.useState)([]),[c,u]=(0,h.useState)(!0),[m,p]=(0,h.useState)(!1),[x,b]=(0,h.useState)(null),[_,w]=(0,h.useState)(!1),[j,N]=(0,h.useState)(5>l.length),k=5*s,C=l.slice(k,k+5);(0,h.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:ey(e.updatedAt),sharedUrl:`${ei.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ei.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,h.useEffect)(()=>{j&&s>0&&l.length<=5*s&&r(0);let e=5<l.length;e!==j&&N(e)},[l,s,5,j]);let S=(0,h.useCallback)(()=>{e()},[e]),I=(0,h.useCallback)(async()=>{if(!_)return void w(!0);w(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{u(!1)}},[_,n]),T=async()=>{p(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:ey(e.updatedAt),sharedUrl:`${ei.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ei.fV.origin}/copilot/c/${e.id}`}))),u(!1)},E=c||"error"===i.sharedThreadsLoading.state||0===l.length,L=(0,h.useMemo)(()=>{if(!l.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{_?I():w(!0)}};return _?[{buttonType:"default",content:"Cancel",onClick:()=>w(!1)},e]:[e]},[l.length,_,I]),R=(0,h.useMemo)(()=>c?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===i.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[c,i.sharedThreadsLoading.state]);return(0,a.jsxs)(es.l,{title:"Manage shared conversations",width:"xlarge",className:em.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:S,returnFocusRef:t,renderFooter:()=>L?.length?(0,a.jsx)(es.l.Footer,{className:em.footer,children:(0,a.jsxs)("div",{className:em.footerContent,children:[(0,a.jsx)("div",{className:em.footerLeft,children:_&&(0,a.jsx)("div",{className:`${em.confirmationText} ${em.quickFadeUp}`,children:(e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`)(l.length)})}),(0,a.jsx)("div",{className:em.footerRight,children:(0,a.jsx)(es.l.Buttons,{buttons:L})})]})}):null,children:[E?(0,a.jsxs)(ec.E,{children:[(0,a.jsx)(ec.E.Visual,{children:R.isSpinner?(0,a.jsx)(er.B,{direction:"horizontal",align:"center",children:(0,a.jsx)(el.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,a.jsx)("div",{className:em.mutedText,children:"error"===R.result?(0,a.jsx)(d.AlertIcon,{size:"medium",className:em.alertIcon,"aria-label":"Error loading shared conversations"}):(0,a.jsx)(d.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,a.jsx)(ec.E.Heading,{children:R.heading}),(0,a.jsx)(ec.E.Description,{children:R.description})]}):(0,a.jsxs)(ed.X.Container,{children:[(0,a.jsx)(eu.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,a.jsx)(eo.A,{href:e.threadUrl,className:em.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,a.jsx)("span",{className:em.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,a.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:em.actionButtons,children:[(0,a.jsx)(ea.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,a.jsx)(v.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:d.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),p(!0)}})]})})}],data:C}),l.length>5&&(0,a.jsx)(ed.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:s,totalCount:l.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&x&&(0,a.jsx)(eg,{threadId:x.id,closeDialog:T})]})};try{ev.displayName||(ev.displayName="ManageSharedConversationsDialog")}catch{}var ex=n(17005),eb=n(87255);let e_={userButton:"UserMenu-module__userButton--FuXsC",condensed:"UserMenu-module__condensed--rjzRR",userContent:"UserMenu-module__userContent--jXldm",userAvatar:"UserMenu-module__userAvatar--sp40T",menuItem:"UserMenu-module__menuItem--oXBxi",userDetails:"UserMenu-module__userDetails--mes1V",username:"UserMenu-module__username--n5Tln",description:"UserMenu-module__description--FvI5s"};function ew(e){let t,n,s,r,l,o,c,g,v,x,b,_,w,j,N,k,C,S,I,T,E,L,R,A,D=(0,i.c)(51),{isCondensed:P}=e,O=void 0!==P&&P,B=(0,h.useRef)(null),F=(0,h.useRef)(null),[M,$]=(0,h.useState)(!1),[V,U]=(0,h.useState)(!1),{currentUserLogin:q,plan:W}=(0,f.bP)("currentUserLogin","plan"),H=(0,Y.mM)(),K=O&&e_.condensed;D[0]!==K?(t=(0,p.$)(e_.userButton,K),D[0]=K,D[1]=t):t=D[1];let G=O?"user":void 0,z=`/${q}.png`;D[2]!==z?(n=(0,a.jsx)("div",{className:e_.userAvatar,children:(0,a.jsx)(et.r,{src:z,size:20})}),D[2]=z,D[3]=n):n=D[3],D[4]!==q?(s=(0,a.jsx)("div",{className:e_.userContent,children:q}),D[4]=q,D[5]=s):s=D[5],D[6]!==t||D[7]!==G||D[8]!==n||D[9]!==s?(r=(0,a.jsx)(u.W.Anchor,{children:(0,a.jsxs)("button",{className:t,"aria-label":G,children:[n,s]})}),D[6]=t,D[7]=G,D[8]=n,D[9]=s,D[10]=r):r=D[10];let Q=`/${q}`,J=`/${q}.png`;return D[11]!==J?(l=(0,a.jsx)("div",{className:e_.userAvatar,children:(0,a.jsx)(et.r,{src:J,size:32})}),D[11]=J,D[12]=l):l=D[12],D[13]!==q?(o=(0,a.jsx)("div",{className:e_.username,children:q}),D[13]=q,D[14]=o):o=D[14],D[15]!==W?(c=function(e){switch(e){case en.UH.IndividualFree:return"Free";case en.UH.IndividualPro:return"Pro";case en.UH.IndividualProPlus:return"Pro+";case en.UH.Business:return"Business";case en.UH.Enterprise:return"Enterprise";default:return"Free"}}(W),D[15]=W,D[16]=c):c=D[16],D[17]!==c?(g=(0,a.jsxs)("span",{className:e_.description,children:["Copilot ",c]}),D[17]=c,D[18]=g):g=D[18],D[19]!==o||D[20]!==g?(v=(0,a.jsxs)("div",{className:e_.userDetails,children:[o,g]}),D[19]=o,D[20]=g,D[21]=v):v=D[21],D[22]!==l||D[23]!==v?(x=(0,a.jsxs)("div",{className:e_.menuItem,children:[l,v]}),D[22]=l,D[23]=v,D[24]=x):x=D[24],D[25]!==x||D[26]!==Q?(b=(0,a.jsx)(m.l.LinkItem,{href:Q,children:x}),D[25]=x,D[26]=Q,D[27]=b):b=D[27],D[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,a.jsx)(m.l.Divider,{}),D[28]=_):_=D[28],D[29]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{U(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},D[29]=w):w=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsxs)(m.l.Item,{onSelect:w,children:[(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(d.NoteIcon,{})}),"Personal instructions"]}),D[30]=j):j=D[30],D[31]!==H?(N=!H&&(0,a.jsxs)(m.l.Item,{onSelect:()=>{$(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(d.ListUnorderedIcon,{})}),"Manage shared conversations"]}),D[31]=H,D[32]=N):N=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{F.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},D[33]=k):k=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(C=(0,a.jsxs)(m.l.Item,{onSelect:k,children:[(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(d.CommentIcon,{})}),"Give feedback"]}),D[34]=C):C=D[34],D[35]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsxs)(m.l.LinkItem,{href:"/settings/copilot",onClick:ej,children:[(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(d.GearIcon,{})}),"Settings"]}),D[35]=S):S=D[35],D[36]!==b||D[37]!==N?(I=(0,a.jsx)(u.W.Overlay,{width:"small",align:"end",children:(0,a.jsxs)(m.l,{children:[b,_,j,N,C,S]})}),D[36]=b,D[37]=N,D[38]=I):I=D[38],D[39]!==I||D[40]!==r?(T=(0,a.jsxs)(u.W,{anchorRef:B,children:[r,I]}),D[39]=I,D[40]=r,D[41]=T):T=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(E=(0,a.jsx)(ex.l,{ref:F,mode:"immersive",returnFocusRef:B}),D[42]=E):E=D[42],D[43]!==M?(L=M&&(0,a.jsx)(ev,{closeDialog:()=>{$(!1)},returnFocusRef:B}),D[43]=M,D[44]=L):L=D[44],D[45]!==V?(R=V&&(0,a.jsx)(eb.Y,{onDismiss:()=>U(!1),returnFocusRef:B}),D[45]=V,D[46]=R):R=D[46],D[47]!==T||D[48]!==L||D[49]!==R?(A=(0,a.jsxs)(a.Fragment,{children:[T,E,L,R]}),D[47]=T,D[48]=L,D[49]=R,D[50]=A):A=D[50],A}function ej(){return(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{ew.displayName||(ew.displayName="UserMenu")}catch{}function eN(){let e,t=(0,i.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:l,toggleSidebar:o}=(0,r.L)();return t[0]!==l||t[1]!==n||t[2]!==s||t[3]!==o?(e=(0,a.jsx)(ek,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:l,onToggleSidebar:o}),t[0]=l,t[1]=n,t[2]=s,t[3]=o,t[4]=e):e=t[4],e}function ek(e){let t,n,r,y,v,x,b,_,w,j,N,C,S,I,T=(0,i.c)(40),{onSidebarClick:E,onToggleSidebar:L,sidebarExpanded:R,sidebarFloating:A,sidebarVisible:D}=e,P=!A&&!R,O=(0,g.b)(),{threadsLoading:B,threads:F,selectedThreadID:M,ssoOrganizations:$,agentsEnabled:V}=(0,f.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),U=(0,c.zy)(),H=U.pathname.includes("/share/");T[0]!==O||T[1]!==F.size||T[2]!==B.state?(t=()=>{0===F.size&&"pending"===B.state&&O.fetchThreads()},n=[F.size,O,B.state],T[0]=O,T[1]=F.size,T[2]=B.state,T[3]=t,T[4]=n):(t=T[3],n=T[4]),(0,h.useEffect)(t,n),T[5]!==E||T[6]!==D||T[7]!==L?(r=()=>{E?.(),D&&L()},T[5]=E,T[6]=D,T[7]=L,T[8]=r):r=T[8];let K=r,G=(0,h.useId)();T[9]!==U.hash||T[10]!==U.pathname||T[11]!==U.search?(y=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=U.pathname+U.search+U.hash;return`${t}?return_to=${encodeURIComponent(n)}`},T[9]=U.hash,T[10]=U.pathname,T[11]=U.search,T[12]=y):y=T[12];let z=y;T[13]!==z||T[14]!==P||T[15]!==$?(v=()=>{if(0===$.length)return null;if(1===$.length){let e=$[0];return(0,a.jsxs)("a",{href:z(e.login),className:W.ssoButton,children:[(0,a.jsx)(d.ShieldLockIcon,{size:16}),(0,a.jsx)("span",{className:(0,p.$)(W.ssoContent,P&&W.condensed),children:"Single sign-on"})]})}return(0,a.jsxs)(u.W,{children:[(0,a.jsx)(u.W.Anchor,{children:(0,a.jsxs)("button",{className:W.ssoButton,"aria-label":"Single sign on",children:[(0,a.jsx)(s.I,{icon:d.ShieldLockIcon,size:16}),(0,a.jsx)("div",{className:(0,p.$)(W.ssoContent,P&&W.condensed),children:"Single sign-on"})]})}),(0,a.jsx)(u.W.Overlay,{children:(0,a.jsx)(m.l,{children:$.map(e=>(0,a.jsx)(m.l.LinkItem,{href:z(e.login),children:e.login},e.login))})})]})},T[13]=z,T[14]=P,T[15]=$,T[16]=v):v=T[16];let Q=v;T[17]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(eC,{}),T[17]=x):x=T[17];let Y=`${G}-quick-links`,J=`${G}-quick-links`;T[18]!==J?(b=(0,a.jsx)("h3",{id:J,className:"sr-only",children:"Quick links"}),T[18]=J,T[19]=b):b=T[19],T[20]!==K||T[21]!==P?(_=(0,a.jsx)(ee,{isSidebarCondensed:P,toggleFloatingSidebar:K}),T[20]=K,T[21]=P,T[22]=_):_=T[22],T[23]!==_||T[24]!==Y||T[25]!==b?(w=(0,a.jsxs)("nav",{"aria-labelledby":Y,className:W.quicklinks,children:[b,_]}),T[23]=_,T[24]=Y,T[25]=b,T[26]=w):w=T[26];let X=(0,o.u)("copilot_swe_agent_progress_commands")&&V?(0,a.jsx)(q,{handleSidebarClick:K,isCondensed:P,onToggleSidebar:L}):(0,a.jsx)(k,{selectedItemID:H?null:M,loadingState:B.state,onConversationSelect:K,isSidebarCondensed:P});return T[27]!==w||T[28]!==X?(j=(0,a.jsxs)(l.t,{fallback:x,children:[w,X]}),T[27]=w,T[28]=X,T[29]=j):j=T[29],T[30]!==Q?(N=Q(),T[30]=Q,T[31]=N):N=T[31],T[32]!==P?(C=(0,a.jsx)(ew,{isCondensed:P}),T[32]=P,T[33]=C):C=T[33],T[34]!==N||T[35]!==C?(S=(0,a.jsxs)("div",{className:W.footer,children:[N,C]}),T[34]=N,T[35]=C,T[36]=S):S=T[36],T[37]!==j||T[38]!==S?(I=(0,a.jsxs)(a.Fragment,{children:[j,S]}),T[37]=j,T[38]=S,T[39]=I):I=T[39],I}function eC(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:W.blankslateContainer,children:(0,a.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{eN.displayName||(eN.displayName="CopilotNavigationWithContext")}catch{}try{ek.displayName||(ek.displayName="CopilotNavigation")}catch{}try{eC.displayName||(eC.displayName="SidebarContentsFallback")}catch{}},3482:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(24774);function i(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},5533:(e,t,n)=>{function a(e){return!!e?.startedAt&&!e?.completedAt}function i(e){return!!e&&Object.values(e.nodes).some(a)}n.d(t,{f:()=>a,y:()=>i})},6007:(e,t,n)=>{n.d(t,{x:()=>SparkPlugin});var a=n(50467),i=n(79064),s=n(38621),r=n(26607),l=n(96540),o=n(51625);let SparkPlugin=class SparkPlugin{constructor(){(0,a._)(this,"id",o.eu),(0,a._)(this,"displayName",o._x),(0,a._)(this,"navigationItems",[{id:o.eu,displayName:"Spark",href:o.cP,icon:s.SparkleIcon,label:(0,l.createElement)(r.A,{variant:"success"},"Preview"),external:!0}]),(0,a._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:s.SparkleIcon,execute:(e,t,n)=>(i.Jt.setSparkEntrypointMessage(e),n(o.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."]})}}},6551:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(96540);function i(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>i});var a=n(96540);function i(e,t,n){let i=(0,a.useRef)(n);return(0,a.useMemo)(()=>{let n=t(e);return null!=n&&(i.current=n),i.current},[e,t])}},7554:(e,t,n)=>{n.d(t,{oR:()=>j});var a=n(74848),i=n(21728),s=n(69599),r=n(53419),l=n(10422),o=n(71205),c=n(29607),d=n(88934),u=n(38621),m=n(27042),p=n(26108),h=n(5524),f=n(96540),g=n(97189),y=n(76977),v=n(93654),x=n(47723),b=n(95254),_=n(62189);let w={clockIcon:"TaskList-module__clockIcon--kx3d1",stopIcon:"TaskList-module__stopIcon--O5nlX",checkCircleIcon:"TaskList-module__checkCircleIcon--fj_E_",dotFillIcon:"TaskList-module__dotFillIcon--x5Tte",skipIcon:"TaskList-module__skipIcon--niuIE"};function j(e){let t,n=(0,i.c)(4),{viewAllLink:s,showTitle:r,trailingAction:l}=e;return n[0]!==r||n[1]!==l||n[2]!==s?(t=(0,a.jsx)(g.Fn,{children:(0,a.jsx)(N,{viewAllLink:s,showTitle:r,trailingAction:l})}),n[0]=r,n[1]=l,n[2]=s,n[3]=t):t=n[3],t}function N(e){let t,n,r,l,u,m,p,h,f,g,x,b=(0,i.c)(29),{viewAllLink:w,showTitle:j,trailingAction:N}=e,S=(0,d.zy)(),{tasks:E,isLoading:L}=(0,v.si)();if((0,y._)(),b[0]!==L||b[1]!==S||b[2]!==j||b[3]!==E||b[4]!==N){let e,i,d=E.filter(k).slice(0,5);n=0===d.length,b[14]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.G7)("copilot_immersive_task_hyperlinking"),b[14]=e):e=b[14];let g=e;t=c.s2,r=j?"Tasks":void 0,l=n,u=L,m="No tasks yet",p="You can now ask Copilot to work on a task for you in the background, creating a pull request which you can review.",h=N,b[15]!==S?(i=e=>{let t=(0,_.U)(e.resource_global_id),n=S.pathname===t;return g?(0,a.jsx)(C,{task:e,href:t,isSelected:n,secondaryText:e.nwo??e.pull?.repository_nwo??"Initializing..."},e.resource_id):(0,a.jsx)(o.W,{href:t,text:I(e)?e.problemStatement:e.pull.title,leadingVisual:()=>T(e),isSelected:n,secondaryText:e.nwo??e.pull?.repository_nwo??"Initializing..."},e.resource_id)},b[15]=S,b[16]=i):i=b[16],f=d.map(i),b[0]=L,b[1]=S,b[2]=j,b[3]=E,b[4]=N,b[5]=t,b[6]=n,b[7]=r,b[8]=l,b[9]=u,b[10]=m,b[11]=p,b[12]=h,b[13]=f}else t=b[5],n=b[6],r=b[7],l=b[8],u=b[9],m=b[10],p=b[11],h=b[12],f=b[13];b[17]!==t||b[18]!==r||b[19]!==l||b[20]!==u||b[21]!==m||b[22]!==p||b[23]!==h||b[24]!==f?(g=(0,a.jsx)(t,{title:r,isEmpty:l,isLoading:u,emptyStateTitle:m,emptyStateText:p,trailingAction:h,children:f}),b[17]=t,b[18]=r,b[19]=l,b[20]=u,b[21]=m,b[22]=p,b[23]=h,b[24]=f,b[25]=g):g=b[25];let R=!n&&w;return b[26]!==g||b[27]!==R?(x=(0,a.jsxs)(a.Fragment,{children:[g,R]}),b[26]=g,b[27]=R,b[28]=x):x=b[28],x}function k(e){var t;return!(t=e).pull||"merged"!==t.pull.state&&"closed"!==t.pull.state}function C(e){let t,n,s,l,c,d,g,y,v=(0,i.c)(22),{task:_,href:w,isSelected:j,secondaryText:N}=e,k=(0,f.useRef)(null);v[0]!==_.pull?(t=()=>{(0,r.BI)("dotcom_chat.activate",{target:"TASK_ACTION_VIEW_PR",mode:"immersive"}),_.pull?.url&&(window.location.href=_.pull.url)},v[0]=_.pull,v[1]=t):t=v[1];let C=t;v[2]!==_.event_identifiers?(n=()=>{(0,r.BI)("dotcom_chat.activate",{target:"TASK_ACTION_GO_TO_CONVERSATION",mode:"immersive"});let e=(0,b.L)(_.event_identifiers);e&&(window.location.href=`/copilot/c/${e}`)},v[2]=_.event_identifiers,v[3]=n):n=v[3];let E=n;v[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(m.W.Anchor,{children:(0,a.jsx)(p.K,{icon:u.KebabHorizontalIcon,"aria-label":"Manage task",variant:"invisible",onClick:S})}),v[4]=s):s=v[4],v[5]!==C?(l=(0,a.jsx)(h.l.Item,{onSelect:C,children:"View pull request"}),v[5]=C,v[6]=l):l=v[6],v[7]!==E||v[8]!==_.event_type?(c=_.event_type===x.qY&&(0,a.jsx)(h.l.Item,{onSelect:E,children:"Go to parent conversation"}),v[7]=E,v[8]=_.event_type,v[9]=c):c=v[9],v[10]!==l||v[11]!==c?(d=(0,a.jsxs)(m.W,{anchorRef:k,children:[s,(0,a.jsx)(m.W.Overlay,{children:(0,a.jsxs)(h.l,{children:[l,c]})})]}),v[10]=l,v[11]=c,v[12]=d):d=v[12];let L=d,R=I(_)?_.problemStatement:_.pull.title;return v[13]!==_?(g=()=>T(_),v[13]=_,v[14]=g):g=v[14],v[15]!==w||v[16]!==j||v[17]!==N||v[18]!==R||v[19]!==g||v[20]!==L?(y=(0,a.jsx)(o.W,{href:w,text:R,leadingVisual:g,isSelected:j,trailingAction:L,secondaryText:N}),v[15]=w,v[16]=j,v[17]=N,v[18]=R,v[19]=g,v[20]=L,v[21]=y):y=v[21],y}function S(){return(0,r.BI)("dotcom_chat.activate",{target:"TASK_CONTEXT_MENU",mode:"immersive"})}function I(e){return!!e.isOptimistic}function T(e){let t=e.latest_session_state,n=e.pull?.state??"unknown";if("queued"===t)return(0,a.jsx)(u.ClockIcon,{className:w.clockIcon});if("open"===n){if("waiting_for_user"===t||"completed"===t)return(0,a.jsx)(u.CheckCircleFillIcon,{className:w.checkCircleIcon});if("failed"===t||"timed_out"===t)return(0,a.jsx)(u.StopIcon,{className:w.stopIcon});if("in_progress"===t)return(0,a.jsx)(l.gX,{animated:!0});if("idle"===t)return(0,a.jsx)(u.DotFillIcon,{className:w.dotFillIcon});if("cancelled"===t)return(0,a.jsx)(u.SkipIcon,{className:w.skipIcon})}return(0,a.jsx)(u.DotFillIcon,{className:w.dotFillIcon})}try{j.displayName||(j.displayName="TasksListWrapper")}catch{}try{N.displayName||(N.displayName="TasksList")}catch{}try{C.displayName||(C.displayName="TaskListEntry")}catch{}},7812:(e,t,n)=>{n.d(t,{Bx:()=>f,LU:()=>o,PO:()=>y,SI:()=>p,SX:()=>x,by:()=>u,g:()=>m,oR:()=>v,oy:()=>l,wN:()=>h,wt:()=>d,yA:()=>g});var a=n(1631),i=n(25641),s=n(51213),r=n(35247);function l(e){return e.split("#")[0]}function o(e,t){let n=l(e),a=t.get(n)??[],i=a.indexOf(e);return a.length>1&&-1!==i?i+1:null}function c(e,t){return`file:${e.name}#${t}`}function d(e,t,n){switch(e.type){case"thread-scoped-file":return o(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return o(v({ref:e,messageIndex:t}).id,n)??void 0}}function u(e,t,n){return{type:"file",id:`file:${(0,i.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function m(e,t,n){let a=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?u(e.baseFile):a(e.headFile?.path||""),l=e.headFile?u(e.headFile):a(e.baseFile?.path||""),o=e.headFile||e.baseFile,c=o?.path||"";return{type:"file-diff",id:`file-diff:${(0,i.Vb)(e)}#0`,baseFile:r,headFile:l,name:c,language:(e.headFile?l:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function p(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function h(e,t){let{repoOwner:n,repoName:a,id:i}=e;return{type:"job-result",id:`job-result:${n}-${a}-${i}`,messageId:t??s.Wp,name:`Job #${i} in ${n}/${a}`,jobId:Number(i),workflowId:e.workflow?.id,repoOwner:n,repoName:a}}function f(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,i.Vb)(e)}`,name:(0,i.z$)(e),icon:(0,a.a_)(e,!1),messageId:t,reference:e}}function g(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function y(e){var t;switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(t=e.projects)&&0!==t.length?t.filter(e=>!!e.title).map(e=>e.title):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,a){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,a);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){var a;let i=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:i,id:`${i}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(a=e.projects)&&0!==a.length?a.filter(e=>""!==e.trim()).map(e=>({title:e})):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function x(e,t,n){let a=l(e.id),i=n.get(a),s=i?.findIndex(t=>t===e.id)??-1,r=i?.[s-1];return r&&t.get(r)}},10221:(e,t,n)=>{n.d(t,{c:()=>AgentsPlugin});var a,i=n(50467),s=n(74848),r=n(21728),l=n(3024),o=n(2635),c=n(33592),d=n(35247),u=n(17593),m=n(9910),p=n(76143),h=n(69599),f=n(26956),g=n(27912),y=n(79634),v=n(91747),x=n(46251),b=n(57352),_=n(96540),w=n(97189),j=n(76977),N=n(47865),k=n(79064);function C(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,a=n.selectedBranch||"",i=n.selectedCustomAgent||"";t.current(n.text,e,a,i)}else t.current(e,null,"","")}catch{t.current(e,null,"","")}}var S=n(93654),I=n(76186),T=n(64894),E=n(26382),L=n(55248);let R={blankslate:"AgentsBlankslate-module__blankslate--h3RJ8",banner:"AgentsBlankslate-module__banner--k7WQF",upsell:"AgentsBlankslate-module__upsell--hyyby"};var A=n(97949),D=n(25641);function P(e){let t,n,a,i,l,o,c,d=(0,r.c)(11),{hasCEorCBAccess:u}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(E.E.Visual,{children:(0,s.jsx)(L.j,{})}),n=(0,s.jsx)(E.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),a=(0,s.jsx)(E.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),i=(0,s.jsx)(E.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),d[0]=t,d[1]=n,d[2]=a,d[3]=i):(t=d[0],n=d[1],a=d[2],i=d[3]),d[4]!==u?(l=!0===u&&(0,s.jsx)(O,{}),d[4]=u,d[5]=l):l=d[5],d[6]!==u?(o=!1===u&&(0,s.jsx)(B,{}),d[6]=u,d[7]=o):o=d[7],d[8]!==l||d[9]!==o?(c=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Zf.Container,{width:"medium",children:(0,s.jsxs)(E.E,{size:"medium",className:R.blankslate,children:[t,n,a,i,l,o]})})}),d[8]=l,d[9]=o,d[10]=c):c=d[10],c}function O(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(A.l,{variant:"warning",title:"Copilot coding agent access disabled",className:R.banner,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,s.jsx)(A.l.Description,{children:"Access to Copilot coding agent has been disabled by your admin."})}),t[0]=e):e=t[0],e}function B(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(A.l.PrimaryAction,{as:"a",href:D.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(A.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${R.banner} ${R.upsell}`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,s.jsx)(A.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{P.displayName||(P.displayName="AgentsBlankslate")}catch{}try{O.displayName||(O.displayName="AccessDisabledBanner")}catch{}try{B.displayName||(B.displayName="UpgradeBanner")}catch{}let F={failedTaskCreationBanners:"AgentsView-module__failedTaskCreationBanners--bUn1A",copilotDisclosure:"AgentsView-module__copilotDisclosure--lAild",copilotDisclosureText:"AgentsView-module__copilotDisclosureText--myF9L"};function M(e){let t,n,a,i,l=(0,r.c)(10),{problemStatement:o,handleRetry:c,handleDismiss:d}=e,u=o??"";l[0]!==u?(t=function(e,t=50,n=2){let a=t*n;return e.length<=a?e:`${e.substring(0,a).trim()}...`}(u,20,1),l[0]=u,l[1]=t):t=l[1];let m=t,p=`Failed to create a task for '${m}'. Please try again.`;return l[2]!==d?(n=(0,s.jsx)(A.l.SecondaryAction,{onClick:d,children:"Dismiss"}),l[2]=d,l[3]=n):n=l[3],l[4]!==c?(a=(0,s.jsx)(A.l.PrimaryAction,{onClick:c,children:"Retry"}),l[4]=c,l[5]=a):a=l[5],l[6]!==p||l[7]!==n||l[8]!==a?(i=(0,s.jsx)(A.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:p,secondaryAction:n,primaryAction:a}),l[6]=p,l[7]=n,l[8]=a,l[9]=i):i=l[9],i}try{M.displayName||(M.displayName="TaskCreationFailedBanner")}catch{}var $=n(30388);let V={button:"TaskList-module__button--FzNZb",counter:"TaskList-module__counter--suSM7",filterButtons:"TaskList-module__filterButtons--DNyGe"};var U=n(38621),q=n(62935);let W={description:"TaskListItem-module__description--GUKJ9",iconTransition:"TaskListItem-module__iconTransition--h8TDX",fadeOut:"TaskListItem-module__fadeOut--TTRa9",fadeText:"TaskListItem-module__fadeText--giNoG",entering:"TaskListItem-module__entering--aB9fl",exiting:"TaskListItem-module__exiting--m4Koz"};var H=n(67154),K=n(82595);let G={prDiffSummary:"PullRequestDiffSummaryText-module__prDiffSummary--EzG14",added:"PullRequestDiffSummaryText-module__added--I0cdZ",deleted:"PullRequestDiffSummaryText-module__deleted--M94wu"};function z(e){let t,n,a,i,l,o,c,d=(0,r.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(d[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),d[0]=u.lines_added,d[1]=t):t=d[1],d[2]!==t?(n=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${G.prDiffSummary} ${G.added}`,children:["+",t]}),d[2]=t,d[3]=n):n=d[3],d[4]!==u.lines_deleted?(a=u.lines_deleted.toLocaleString(),d[4]=u.lines_deleted,d[5]=a):a=d[5],d[6]!==a?(i=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${G.prDiffSummary} ${G.deleted}`,children:["-",a]}),d[6]=a,d[7]=i):i=d[7],d[8]!==u.lines_added||d[9]!==u.lines_deleted?(l=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),d[8]=u.lines_added,d[9]=u.lines_deleted,d[10]=l):l=d[10],d[11]!==l?(o=(0,s.jsx)("span",{className:"sr-only",children:l}),d[11]=l,d[12]=o):o=d[12],d[13]!==n||d[14]!==i||d[15]!==o?(c=(0,s.jsxs)(x.B,{direction:"horizontal",gap:"condensed",children:[n,i,o]}),d[13]=n,d[14]=i,d[15]=o,d[16]=c):c=d[16],c):null}try{z.displayName||(z.displayName="PullRequestDiffSummaryText")}catch{}var Q=n(44334),Y=n(62189),J=n(45244);let X=e=>{let t,n,a,i=(0,r.c)(7),{text:l}=e,[o,c]=(0,_.useState)(null),[d,u]=(0,_.useState)("none");i[0]!==o||i[1]!==l?(t=()=>{if(null===o)return void c(l);if(l!==o){u("exiting");let e=setTimeout(()=>{c(l),u("entering")},400);return()=>clearTimeout(e)}},n=[l,o],i[0]=o,i[1]=l,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,_.useEffect)(t,n);let m=`${W.fadeText} ${"entering"===d?W.entering:"exiting"===d?W.exiting:null}`;return i[4]!==o||i[5]!==m?(a=(0,s.jsx)("span",{className:m,children:o}),i[4]=o,i[5]=m,i[6]=a):a=i[6],a};function Z(e){let t,n,a,i,l,o,c,d,u,m,p,h=(0,r.c)(39),{state:f,revisionCount:g,startedAt:y,prState:x,prUrl:b,prTitle:w,prNwo:j,prNumber:N,prGlobalId:k,prInMergeQueue:C,prDiffSummary:S}=e,[I,T]=(0,_.useState)(null),[E,L]=(0,_.useState)(!1);h[0]!==C||h[1]!==x||h[2]!==f?(t="merged"===x?"Merged":"closed"===x?"Closed":C?"Queued to merge":f&&(0,H.wG)(f)||"",h[0]=C,h[1]=x,h[2]=f,h[3]=t):t=h[3];let R=t;h[4]!==C||h[5]!==x||h[6]!==f?(n=(0,Q.T)(x,C,f),h[4]=C,h[5]=x,h[6]=f,h[7]=n):n=h[7];let A=n;h[8]!==I||h[9]!==A?(a=()=>{if(!I)return void T(A);if(I.icon!==A.icon){L(!0);let e=setTimeout(()=>{T(A),L(!1)},300);return()=>clearTimeout(e)}},i=[A,I],h[8]=I,h[9]=A,h[10]=a,h[11]=i):(a=h[10],i=h[11]),(0,_.useEffect)(a,i);let D=g>0?`${g} revision${g>1?"s":""} \xb7 `:null,P=b,O=(0,v.u)("copilot_swe_agent_progress_commands");if(O){let e;h[12]!==k?(e=(0,Y.U)(k),h[12]=k,h[13]=e):e=h[13],P=e}let B=!O,F=`${W.iconTransition} ${E?W.fadeOut:""}`;return h[14]!==A||h[15]!==F?(l=(0,s.jsx)($.qJ.Item.LeadingVisual,{children:(0,s.jsx)(K.I,{...A,className:F})}),h[14]=A,h[15]=F,h[16]=l):l=h[16],h[17]!==w?(o=(0,s.jsx)($.qJ.Item.Title,{children:w}),h[17]=w,h[18]=o):o=h[18],h[19]!==S||h[20]!==f?(c=f&&"in_progress"!==f&&S&&(0,s.jsx)($.qJ.Item.Actions,{children:(0,s.jsx)(z,{prDiffSummary:S})}),h[19]=S,h[20]=f,h[21]=c):c=h[21],h[22]!==y?(d=(0,s.jsx)(q.A,{format:"micro",datetime:y}),h[22]=y,h[23]=d):d=h[23],h[24]!==R?(u=(0,s.jsx)(X,{text:R}),h[24]=R,h[25]=u):u=h[25],h[26]!==N||h[27]!==j||h[28]!==D||h[29]!==d||h[30]!==u?(m=(0,s.jsx)($.qJ.Item.Description,{children:(0,s.jsxs)("span",{className:W.description,children:[j,"#",N," \xb7 started ",d," ago \xb7"," ",D,u]})}),h[26]=N,h[27]=j,h[28]=D,h[29]=d,h[30]=u,h[31]=m):m=h[31],h[32]!==m||h[33]!==B||h[34]!==l||h[35]!==o||h[36]!==c||h[37]!==P?(p=(0,s.jsxs)($.qJ.Item,{href:P,isExternalLink:B,children:[l,o,c,m]}),h[32]=m,h[33]=B,h[34]=l,h[35]=o,h[36]=c,h[37]=P,h[38]=p):p=h[38],p}function ee(e){let t,n,a,i,l=(0,r.c)(7),{repositoryNwo:o}=e,c=`Creating task in ${o}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)($.qJ.Item.LeadingVisual,{children:(0,s.jsx)(K.I,{icon:U.DotFillIcon,color:"var(--fgColor-attention)"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)($.qJ.Item.Title,{children:(0,s.jsx)(J.b,{className:"fgColor-muted",children:"Creating task"})}),l[1]=n):n=l[1],l[2]!==o?(a=(0,s.jsxs)($.qJ.Item.Description,{children:[(0,s.jsx)("span",{className:W.description,children:o})," \xb7 Initializing pull request\u2026"]}),l[2]=o,l[3]=a):a=l[3],l[4]!==c||l[5]!==a?(i=(0,s.jsxs)($.qJ.Item,{"aria-label":c,children:[t,n,a]}),l[4]=c,l[5]=a,l[6]=i):i=l[6],i}try{X.displayName||(X.displayName="FadeText")}catch{}try{Z.displayName||(Z.displayName="TaskListItem")}catch{}try{(a=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)($.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(a.displayName="LoadingTaskListItem")}catch{}try{ee.displayName||(ee.displayName="OptimisticTaskListItem")}catch{}function et(e){let t,n=(0,r.c)(3),{tasks:a,isError:i}=e;return n[0]!==i||n[1]!==a?(t=(0,s.jsx)($.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:i?(0,s.jsxs)($.qJ.EmptyState,{children:[(0,s.jsx)(U.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,s.jsx)($.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,s.jsx)(s.Fragment,{children:a.map(en)})}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function en(e){return e.isOptimistic?(0,s.jsx)(ee,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,s.jsx)(Z,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{et.displayName||(et.displayName="OpenTaskList")}catch{}function ea(e){let t,n,a=(0,r.c)(5),{tasks:i,isError:l}=e;return a[0]!==l||a[1]!==i?(t=l?(0,s.jsxs)($.qJ.EmptyState,{children:[(0,s.jsx)(U.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,s.jsx)($.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No closed tasks yet."})}):i.map(ei),a[0]=l,a[1]=i,a[2]=t):t=a[2],a[3]!==t?(n=(0,s.jsx)($.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),a[3]=t,a[4]=n):n=a[4],n}function ei(e){return(0,s.jsx)(Z,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ea.displayName||(ea.displayName="ClosedTaskList")}catch{}function es(e){let t,n,a,i,l,o,c,d,u,m,p,h=(0,r.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:v}=e;h[0]!==f?(t=f.filter(el),h[0]=f,h[1]=t):t=h[1];let x=t;h[2]!==f?(n=f.filter(er),h[2]=f,h[3]=n):n=h[3];let b=n;h[4]!==v?(a=()=>v("open"),h[4]=v,h[5]=a):a=h[5];let _="open"===y;h[6]!==x.length?(i=(0,s.jsx)("span",{className:V.counter,children:x.length}),h[6]=x.length,h[7]=i):i=h[7],h[8]!==a||h[9]!==_||h[10]!==i?(l=(0,s.jsxs)("button",{onClick:a,role:"tab","aria-selected":_,"aria-controls":"tasks-list",id:"open-tab",className:V.button,children:["Open ",i]}),h[8]=a,h[9]=_,h[10]=i,h[11]=l):l=h[11],h[12]!==v?(o=()=>v("closed"),h[12]=v,h[13]=o):o=h[13];let w="closed"===y;return h[14]!==b.length?(c=(0,s.jsx)("span",{className:V.counter,children:b.length}),h[14]=b.length,h[15]=c):c=h[15],h[16]!==o||h[17]!==w||h[18]!==c?(d=(0,s.jsxs)("button",{onClick:o,role:"tab","aria-selected":w,"aria-controls":"tasks-list",id:"closed-tab",className:V.button,children:["Closed ",c]}),h[16]=o,h[17]=w,h[18]=c,h[19]=d):d=h[19],h[20]!==d||h[21]!==l?(u=(0,s.jsx)($.qJ.Header,{children:(0,s.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:V.filterButtons,children:[l,d]})}),h[20]=d,h[21]=l,h[22]=u):u=h[22],h[23]!==y||h[24]!==b||h[25]!==g||h[26]!==x?(m="open"===y?(0,s.jsx)(et,{tasks:x,isError:g}):(0,s.jsx)(ea,{tasks:b,isError:g}),h[23]=y,h[24]=b,h[25]=g,h[26]=x,h[27]=m):m=h[27],h[28]!==u||h[29]!==m?(p=(0,s.jsxs)($.qJ,{children:[u,m]}),h[28]=u,h[29]=m,h[30]=p):p=h[30],p}function er(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function el(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{es.displayName||(es.displayName="TaskList")}catch{}function eo(){let e,t,n,a=(0,r.c)(6),{agentsEnabled:i,hasCEorCBAccess:c}=(0,o.Pk)();a[0]!==i?(e=(0,h.G7)("copilot_chat_agents_empty_state")&&!i,a[0]=i,a[1]=e):e=a[1];let d=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(g.P.Sidebar,{children:(0,s.jsx)(l.U,{})}),a[2]=t):t=a[2],a[3]!==c||a[4]!==d?(n=(0,s.jsx)(w.Fn,{children:(0,s.jsxs)(g.P,{"data-testid":"agents-layout",children:[t,(0,s.jsx)(g.P.ColumnLeft,{children:d?(0,s.jsx)(P,{hasCEorCBAccess:c}):(0,s.jsx)(ec,{})})]})}),a[3]=c,a[4]=d,a[5]=n):n=a[5],n}function ec(){let e,t,n,a,i,l,o,p,h,g,b,w,E,L,R,A,D=(0,r.c)(38),[P,O]=(0,_.useState)("open"),{sessionsPollingInterval:B,showCopilotCodingAgentPremiumRequestsBanner:$,tasks:V,pullRequestsMap:U}=(0,y.X)(),q=(0,v.u)("copilot_agent_task_list_v2"),W=d.W.paginateAgentTasks;D[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],D[0]=e):e=D[0];let[H,K]=(0,_.useState)(e);(0,j._)(),D[1]!==U||D[2]!==V||D[3]!==B?(t={sessionsPollingInterval:B,initialTasks:V,initialPullRequestsMap:U},D[1]=U,D[2]=V,D[3]=B,D[4]=t):t=D[4];let{tasks:G,isError:z}=(0,S.si)(t);D[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{K(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},D[5]=n):n=D[5];let{createTask:Q}=(0,N.Z)(n),Y=(0,c.b)();D[6]===Symbol.for("react.memo_cache_sentinel")?(a=[],D[6]=a):a=D[6],(0,_.useEffect)(ed,a),D[7]!==Y?(i=()=>{Y.selectThread(null,{includeThreads:!1,clearTopic:!0})},l=[Y],D[7]=Y,D[8]=i,D[9]=l):(i=D[8],l=D[9]),(0,_.useEffect)(i,l),D[10]!==Q||D[11]!==Y?(o=async(e,t,n,a)=>{let i=e.trim();""!==i&&n&&""!==n.trim()&&(t?(O("open"),Q({nwo:t.nameWithOwner,problemStatement:i,baseRef:n,eventType:"agents_page",eventContent:i,customAgent:a})):Y.sendChatMessage({content:i,thread:null,references:[]}))},D[10]=Q,D[11]=Y,D[12]=o):o=D[12];let J=o;!function(e){let t,n,a,i,s=(0,r.c)(5),l=(0,_.useRef)(e);s[0]!==e?(t=()=>{l.current=e},n=[e],s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,_.useEffect)(t,n),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=k.Jt.getTaskEntrypointMessage();e&&(k.Jt.setTaskEntrypointMessage(null),C(e.message,l))},i=[],s[3]=a,s[4]=i):(a=s[3],i=s[4]),(0,_.useEffect)(a,i)}(J),D[13]!==Q||D[14]!==H?(p=e=>{let t=H[e];t&&(K(t=>t.filter((t,n)=>n!==e)),Q({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},D[13]=Q,D[14]=H,D[15]=p):p=D[15];let X=p,[Z,ee]=(0,_.useState)(!1);return D[16]!==Z||D[17]!==$?(h=$&&!Z&&(0,s.jsx)(f.Zf.Banner,{children:(0,s.jsx)(T.C,{onBannerDismiss:()=>ee(!0)})}),D[16]=Z,D[17]=$,D[18]=h):h=D[18],D[19]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsxs)(f.Zf.Header,{children:[(0,s.jsx)(f.Zf.Title,{children:"Agents"}),(0,s.jsx)(f.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),D[19]=g):g=D[19],D[20]!==J?(b=(0,s.jsx)(I.Q,{handleUserSubmit:J}),D[20]=J,D[21]=b):b=D[21],D[22]!==H||D[23]!==X?(w=H.length>0&&(0,s.jsx)(x.B,{direction:"vertical",className:F.failedTaskCreationBanners,children:H.map((e,t)=>(0,s.jsx)(M,{problemStatement:e?.problemStatement,handleRetry:()=>X(t),handleDismiss:()=>{K(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),D[22]=H,D[23]=X,D[24]=w):w=D[24],D[25]!==b||D[26]!==w?(E=(0,s.jsxs)(f.Zf.Section,{children:[b,w]}),D[25]=b,D[26]=w,D[27]=E):E=D[27],D[28]!==P||D[29]!==z||D[30]!==q||D[31]!==G?(L=(0,s.jsx)(f.Zf.Section,{children:q?(0,s.jsx)(u.f,{paginated:W,title:"Recent tasks",initialResultCount:25,initialQueryQualifiers:[m.m.Open,m.m.Closed]}):(0,s.jsx)(es,{tasks:G,isError:z,activeTab:P,setActiveTab:O})}),D[28]=P,D[29]=z,D[30]=q,D[31]=G,D[32]=L):L=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(R=(0,s.jsx)(eu,{}),D[33]=R):R=D[33],D[34]!==E||D[35]!==L||D[36]!==h?(A=(0,s.jsxs)(f.Zf.Container,{noHeader:!0,width:"small",children:[h,g,E,L,R]}),D[34]=E,D[35]=L,D[36]=h,D[37]=A):A=D[37],A}function ed(){(0,p.D)("Agents \xb7 GitHub Copilot")}function eu(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:F.copilotDisclosure,children:(0,s.jsxs)("p",{className:F.copilotDisclosureText,children:[(0,s.jsx)(b.A,{href:"https://docs.github.com/copilot/responsible-use/copilot-coding-agent",target:"_blank",rel:"noopener noreferrer",muted:!0,inline:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]})}),t[0]=e):e=t[0],e}try{eo.displayName||(eo.displayName="AgentsViewWrapper")}catch{}try{ec.displayName||(ec.displayName="AgentsView")}catch{}try{eu.displayName||(eu.displayName="CopilotDisclosure")}catch{}var em=n(47723);let ep=/\/copilot\/agents/,eh=`${D.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t){(0,i._)(this,"id",em.Dv),(0,i._)(this,"displayName",em.Ff),(0,i._)(this,"createTaskFromInput",void 0),(0,i._)(this,"handleUserSubmitRef",void 0),(0,i._)(this,"skipSyncRouteToThread",!0),(0,i._)(this,"components",[{id:"agents-view",Component:eo,routes:[ep]}]),(0,i._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:U.AgentIcon,isNew:!0,order:0,execute:async(e,t,n)=>!(t.selectedThreadID&&(0,h.G7)("copilot_immersive_task_within_chat_thread"))&&(this.createTaskFromInput&&this.handleUserSubmitRef?C(e,this.handleUserSubmitRef):(k.Jt.setTaskEntrypointMessage(e),n(eh)),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"]}),(0,i._)(this,"navigationItems",[{id:em.Dv,displayName:"Agents",href:em.pr,icon:L.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t}}},11128:(e,t,n)=>{n.d(t,{n:()=>c});var a=n(74848),i=n(21728),s=n(38621),r=n(21373);let l={errorContainer:"ErrorDisplay-module__errorContainer--r2xoZ",errorNotice:"ErrorDisplay-module__errorNotice--Ey4vJ",errorIcon:"ErrorDisplay-module__errorIcon--SP3WM",errorTitle:"ErrorDisplay-module__errorTitle--P8tnN",errorText:"ErrorDisplay-module__errorText--c4NUQ",errorActions:"ErrorDisplay-module__errorActions--NW0lt"};var o=n(22053);function c(e){let t,n,c,u,m,p,h,f=(0,i.c)(17),{additionalActions:g,errors:y,onFixErrorClick:v,title:x}=e,{isReadonly:b}=(0,o.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(s.AlertIcon,{className:l.errorIcon,size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,a.jsx)("h2",{className:l.errorTitle,children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==y?(c=y.map(d),f[3]=y,f[4]=c):c=f[4],f[5]!==n||f[6]!==c?(u=(0,a.jsxs)("div",{className:l.errorNotice,children:[n,c]}),f[5]=n,f[6]=c,f[7]=u):u=f[7],f[8]!==b||f[9]!==v?(m=!b&&v&&(0,a.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:v,children:"Try to fix it"}),f[8]=b,f[9]=v,f[10]=m):m=f[10],f[11]!==g||f[12]!==m?(p=(0,a.jsxs)("div",{className:l.errorActions,children:[g,m]}),f[11]=g,f[12]=m,f[13]=p):p=f[13],f[14]!==u||f[15]!==p?(h=(0,a.jsxs)("div",{className:l.errorContainer,children:[t,u,p]}),f[14]=u,f[15]=p,f[16]=h):h=f[16],h}function d(e){return(0,a.jsx)("p",{className:l.errorText,children:e},e)}try{c.displayName||(c.displayName="ErrorDisplay")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>c});var a=n(74848),i=n(21728),s=n(34164),r=n(96540),l=n(88934);let o={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},c=(0,r.forwardRef)((e,t)=>{let n,r,c,d,u,m,p,h,f,g,y,v,x,b,_,w,j,N=(0,i.c)(65);N[0]!==e?({size:m,variant:p,condensed:h,iconOnly:f,icon:d,className:r,children:n,disabled:c,...u}=e,N[0]=e,N[1]=n,N[2]=r,N[3]=c,N[4]=d,N[5]=u,N[6]=m,N[7]=p,N[8]=h,N[9]=f):(n=N[1],r=N[2],c=N[3],d=N[4],u=N[5],m=N[6],p=N[7],h=N[8],f=N[9]);let k=void 0===p?"default":p,C=void 0!==h&&h,S=void 0!==f&&f,I=o[void 0===m?"small":m],T=o[k],E=C&&o.condensed,L=S&&o.iconOnly,R=c&&o.disabled;N[10]!==r||N[11]!==I||N[12]!==T||N[13]!==E||N[14]!==L||N[15]!==R?(g=(0,s.$)(o.button,I,T,E,L,R,r),N[10]=r,N[11]=I,N[12]=T,N[13]=E,N[14]=L,N[15]=R,N[16]=g):g=N[16];let A=g;N[17]!==d?(y=null!=d?(0,a.jsx)("span",{className:o.icon,children:d}):null,N[17]=d,N[18]=y):y=N[18],N[19]!==n||N[20]!==S?(v=!S&&n?(0,a.jsx)("span",{className:o.text,children:n}):null,N[19]=n,N[20]=S,N[21]=v):v=N[21],N[22]!==y||N[23]!==v?(x=(0,a.jsxs)(a.Fragment,{children:[y,v]}),N[22]=y,N[23]=v,N[24]=x):x=N[24];let D=x;if("to"in u){let e,n,i,s;return N[25]!==u?({to:i,onClick:e,...n}=u,N[25]=u,N[26]=e,N[27]=n,N[28]=i):(e=N[26],n=N[27],i=N[28]),N[29]!==A||N[30]!==D||N[31]!==c||N[32]!==e||N[33]!==n||N[34]!==t||N[35]!==i?(s=(0,a.jsx)(l.N_,{ref:t,to:i,className:A,"aria-disabled":c,onClick:e,...n,children:D}),N[29]=A,N[30]=D,N[31]=c,N[32]=e,N[33]=n,N[34]=t,N[35]=i,N[36]=s):s=N[36],s}if("href"in u){let e,n,i,s,r,l;return N[37]!==u?({href:e,target:r,rel:i,onClick:n,...s}=u,N[37]=u,N[38]=e,N[39]=n,N[40]=i,N[41]=s,N[42]=r):(e=N[38],n=N[39],i=N[40],s=N[41],r=N[42]),N[43]!==A||N[44]!==D||N[45]!==c||N[46]!==e||N[47]!==n||N[48]!==i||N[49]!==s||N[50]!==t||N[51]!==r?(l=(0,a.jsx)("a",{ref:t,href:e,target:r,rel:i,className:A,"aria-disabled":c,onClick:n,...s,children:D}),N[43]=A,N[44]=D,N[45]=c,N[46]=e,N[47]=n,N[48]=i,N[49]=s,N[50]=t,N[51]=r,N[52]=l):l=N[52],l}N[53]!==u?({onClick:b,type:w,..._}=u,N[53]=u,N[54]=b,N[55]=_,N[56]=w):(b=N[54],_=N[55],w=N[56]);let P=void 0===w?"button":w;return N[57]!==A||N[58]!==D||N[59]!==c||N[60]!==b||N[61]!==_||N[62]!==t||N[63]!==P?(j=(0,a.jsx)("button",{ref:t,type:P,onClick:b,disabled:c,className:A,..._,children:D}),N[57]=A,N[58]=D,N[59]=c,N[60]=b,N[61]=_,N[62]=t,N[63]=P,N[64]=j):j=N[64],j});c.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>S});var a=n(74848),i=n(21728),s=n(4817);let r={outputValue:"OutputDisplay-module__outputValue--I7SuT",jsonOutput:"OutputDisplay-module__jsonOutput--NA93D",markdownOutput:"OutputDisplay-module__markdownOutput--c47bk"};var l=n(85094),o=n(98755);let c={container:"CodeBlocks-module__container--GV7vX",copyContainer:"CodeBlocks-module__copyContainer--PlsVH",copyContent:"CodeBlocks-module__copyContent--_B0qO",copyButton:"CodeBlocks-module__copyButton--xrG5L",immersive:"CodeBlocks-module__immersive--pP6K5",code:"CodeBlocks-module__code--wvK8k",codeContainer:"CodeBlocks-module__codeContainer--wOuWu",codeWrap:"CodeBlocks-module__codeWrap--YQDq8"};var d=n(96540),u=n(57826),m=n(34164),p=n(53419);function h(e){let t,n,s,r,l,h,f,g,y,v=(0,i.c)(18),{children:x,code:b}=e,_=(0,d.useId)(),{chatMode:w,wrapCodeLines:j}=(0,d.useContext)(u.F);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)(c.container,c.immersive),v[0]=t):t=v[0],v[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)(c.copyContainer),s=(0,m.$)(c.copyContent),v[1]=n,v[2]=s):(n=v[1],s=v[2]),v[3]!==w?(r=()=>{(0,p.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:w})},v[3]=w,v[4]=r):r=v[4],v[5]!==b||v[6]!==r?(l=(0,a.jsx)("div",{className:n,children:(0,a.jsx)("div",{className:s,children:(0,a.jsx)(o.T,{textToCopy:b,ariaLabel:"Copy code",className:c.copyButton,size:"small",onCopy:r})})}),v[5]=b,v[6]=r,v[7]=l):l=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.$)(c.codeContainer),v[8]=h):h=v[8];let N=j&&c.codeWrap;return v[9]!==N?(f=(0,m.$)(N),v[9]=N,v[10]=f):f=v[10],v[11]!==x||v[12]!==f?(g=(0,a.jsx)("div",{className:h,children:(0,a.jsx)("pre",{className:c.code,tabIndex:0,children:(0,a.jsx)("code",{className:f,children:x})})}),v[11]=x,v[12]=f,v[13]=g):g=v[13],v[14]!==_||v[15]!==l||v[16]!==g?(y=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("figure",{className:t,"aria-labelledby":_,children:[l,g]})}),v[14]=_,v[15]=l,v[16]=g,v[17]=y):y=v[17],y}try{h.displayName||(h.displayName="CodeBlocksForLoop")}catch{}var f=n(47970);let g="data-codeblock-for-loop-props",y=(0,l.F)(g),v={code:(e,t)=>{let n=(0,l.k)(e,g);return n?(0,a.jsx)(h,{...n,children:e.children}):t}};var x=n(90122),b=n(76219),_=n(69726);let w={diagramContainer:"Mermaid-module__diagramContainer--YUzME",hiddenSourceCode:"Mermaid-module__hiddenSourceCode--dlgHV",loaderContainer:"Mermaid-module__loaderContainer--pyhaT"},j="data-mermaid-props",N=(0,l.F)(j);function k(e){let t,n,s,r,l,o,c,d,u=(0,i.c)(18),{code:p,identity:h,viewscreenHost:f}=e,g=`${f}/markdown/mermaid`,y=encodeURIComponent(p);u[0]!==y?(t=btoa(y),u[0]=y,u[1]=t):t=u[1];let v=t;u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)("js-render-needs-enrichment","render-needs-enrichment",w.diagramContainer),u[2]=n):n=u[2];let x=`${g}?data=${v}`;return u[3]!==p?(s=JSON.stringify({data:p}),u[3]=p,u[4]=s):s=u[4],u[5]!==p?(r=(0,a.jsx)("div",{className:w.hiddenSourceCode,children:(0,a.jsx)("pre",{lang:"mermaid",children:p})}),u[5]=p,u[6]=r):r=u[6],u[7]!==p||u[8]!==s||u[9]!==r?(l=(0,a.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":p,children:r}),u[7]=p,u[8]=s,u[9]=r,u[10]=l):l=u[10],u[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.$)("js-render-enrichment-loader",w.loaderContainer),u[11]=o):o=u[11],u[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("span",{className:o,role:"presentation",children:(0,a.jsx)(_.A,{})}),u[12]=c):c=u[12],u[13]!==f||u[14]!==h||u[15]!==x||u[16]!==l?(d=(0,a.jsxs)("section",{className:n,"data-identity":h,"data-host":f,"data-src":x,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[l,c]}),u[13]=f,u[14]=h,u[15]=x,u[16]=l,u[17]=d):d=u[17],d}let C={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,l.k)(e,j);return n?(0,a.jsx)(k,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{k.displayName||(k.displayName="MermaidRenderer")}catch{}function S(e){let t,n,l,o,c,d,u=(0,i.c)(15),{className:p,isRunning:h,nodeValue:g,renderAsJson:_}=e,w=void 0!==_&&_,{previewUrl:j}=(0,b.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,f.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[y]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&y in a.properties&&n.children.splice(t,1,a)}),reactComponents:v},u[0]=t):t=u[0],u[1]!==j){var k;n=[t],j&&n.push((k={viewscreenHost:j},{transformMarkdown:e=>(0,f.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[N]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:k.viewscreenHost})}})}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&N in a.properties&&n.children.splice(t,1,a)}),reactComponents:C})),u[1]=j,u[2]=n}else n=u[2];let S=n;u[3]!==g?(l=(0,x.DO)(g),u[3]=g,u[4]=l):l=u[4];let I=l;return u[5]!==p?(o=(0,m.$)(r.outputValue,p),u[5]=p,u[6]=o):o=u[6],u[7]!==S||u[8]!==h||u[9]!==w||u[10]!==I?(c=w?(0,a.jsx)("pre",{className:r.jsonOutput,children:I}):(0,a.jsx)(s.To,{extensions:S,className:r.markdownOutput,isStreaming:h,markdown:I}),u[7]=S,u[8]=h,u[9]=w,u[10]=I,u[11]=c):c=u[11],u[12]!==o||u[13]!==c?(d=(0,a.jsx)("div",{className:o,children:c}),u[12]=o,u[13]=c,u[14]=d):d=u[14],d}try{S.displayName||(S.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var a=n(21728),i=n(94747),s=n(97665),r=n(46747),l=n(99519),o=n(99993),c=n(33026);function d(e){let t,n,s=(0,a.c)(5),r=(0,l.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,i.n)(n)}function u(){let e,t=(0,a.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:a}=e;await n.cancelQueries({queryKey:(0,o.c_)(t,c.kj)});let i=n.getQueryData((0,o.c_)(t,c.kj)),s=i?.version?n.getQueryData((0,o.c_)(t,i.version)):null;if(i){let e=a(i);n.setQueryData((0,o.c_)(t,c.kj),e),e.version&&n.setQueryData((0,o.c_)(t,e.version),e)}return{previousDraftLoop:i,previousVersionedLoop:s,loopID:t}},onError:(e,t,a)=>{a?.previousDraftLoop&&(n.setQueryData((0,o.c_)(a.loopID,c.kj),a.previousDraftLoop),a.previousVersionedLoop&&a.previousDraftLoop.version&&n.setQueryData((0,o.c_)(a.loopID,a.previousDraftLoop.version),a.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],d(e)}function m(){let e,t,n=(0,a.c)(6),i=(0,s.jE)(),l=d(),u=(0,r.d)(l.mutate,500);n[0]!==u||n[1]!==i?(e=async(e,t)=>{let{loopID:n,updateFn:a}=e;await i.cancelQueries({queryKey:(0,o.c_)(n,c.kj)});let s=a(i.getQueryData((0,o.c_)(n,c.kj))??null);return i.setQueryData((0,o.c_)(n,c.kj),s),u({loopID:n,updateFn:a}),t?.onSuccess?.(),s},n[0]=u,n[1]=i,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==l?(t={...l,mutate:m},n[3]=m,n[4]=l,n[5]=t):t=n[5],t}},13107:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>h,wW:()=>y});var a=n(74848),i=n(73017),s=n(96379),r=n(57352),l=n(69726),o=n(96540),c=n(75202),d=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,a.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,a.jsx)(r.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function p({header:e,message:t}){return(0,a.jsxs)("div",{className:"blankslate",children:[(0,a.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,a.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function h({children:e}){return(0,a.jsx)("div",{className:"d-flex flex-justify-center",children:(0,a.jsx)(c.t,{fallback:(0,a.jsx)(p,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{className:"m-2",children:(0,a.jsx)(l.A,{})}),children:e})})})}function f({codespacesPath:e}){let{data:t}=(0,d.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,s.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,a.jsx)(i.vb,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repoPolicyInfo:n,contactPath:i,currentUserIsEnterpriseManaged:s,enterpriseManagedBusinessName:l,newCodespacePath:o,codespacesPath:c,isLoggedIn:d}=e;if(!t){if(!d)return(0,a.jsx)(p,{header:"Sign in required",message:(0,a.jsxs)("span",{children:["Please"," ",(0,a.jsx)(r.A,{inline:!0,href:o,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)if(!n?.changesWouldBeSafe)return(0,a.jsx)(p,{header:"Repository access limited",message:(0,a.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});else return(0,a.jsx)(p,{header:"Codespace access limited",message:m(i)});{let e=null;return e=!n?.canBill&&s?(0,a.jsxs)("span",{children:[(0,a.jsx)(r.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${l||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,a.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,a.jsx)(r.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"})," ","which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,a.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,a.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(i),(0,a.jsx)(p,{header:"Codespace access limited",message:e})}}return(0,a.jsx)(f,{codespacesPath:c})}function y(e){return(0,a.jsx)(h,{children:(0,a.jsx)(g,{...e})})}try{p.displayName||(p.displayName="ErrorMessage")}catch{}try{h.displayName||(h.displayName="CodespacesTabWrapper")}catch{}try{f.displayName||(f.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{y.displayName||(y.displayName="CodespacesTab")}catch{}},13647:(e,t,n)=>{n.d(t,{Ch:()=>i,PW:()=>o,V2:()=>l,Ve:()=>r,Xg:()=>c,a1:()=>s});var a=n(69599);function i(){return(0,a.G7)("copilot_pipes_code_nodes")}function s(){return(0,a.G7)("copilot_pipes_react_nodes")}function r(){return(0,a.G7)("copilot_pipes_github_graphql_nodes")}function l(){return(0,a.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,a.G7)("copilot_loops_post_staff_ship_features")}function c(){return(0,a.G7)("loops_service_graphql_execution")}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var a=n(21728),i=n(96540);function s(e){let t,n,s=(0,a.c)(4),[r,l]=(0,i.useState)(!1),o=(0,i.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(o.current=!0),e||!o.current||r||l(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,i.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var a=n(74848),i=n(21728),s=n(5524),r=n(27042),l=n(24990),o=n(96540),c=n(38621),d=n(295),u=n(53419),m=n(25641),p=n(88934),h=n(25407),f=n(64917),g=n(35247);function y(e){let t,n,y,x,b,_,w,j,N,k,C,S,I,T,E,L,R,A,D,P,O=(0,i.c)(66),{onDelete:B,onCopyLoop:F,onDuplicate:M,onShare:$,onEdit:V,onCopyOutput:U,onRename:q,loopId:W,hasOutput:H,returnFocusRef:K}=e,G=void 0!==H&&H,[z,Q]=(0,o.useState)(null),{mutate:Y}=(0,d.h)(),{ownerLogin:J,owned:X,loopURL:Z}=(0,f.I)(v);O[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},O[0]=t):t=O[0];let ee=t;O[1]!==K?(n=()=>{Q(null),setTimeout(()=>K?.current?.focus())},O[1]=K,O[2]=n):n=O[2];let et=n;O[3]!==Y||O[4]!==W||O[5]!==B?(y=async()=>{W&&(Q(null),Y(W,{onSuccess:B}))},O[3]=Y,O[4]=W,O[5]=B,O[6]=y):y=O[6];let en=y;O[7]!==W||O[8]!==M?(x=()=>{W&&M&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),M(W))},O[7]=W,O[8]=M,O[9]=x):x=O[9];let ea=x;O[10]!==$?(b=()=>{$?.()},O[10]=$,O[11]=b):b=O[11];let ei=b;O[12]!==V?(_=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),V?.()},O[12]=V,O[13]=_):_=O[13];let es=_;O[14]!==U?(w=()=>{U&&U()},O[14]=U,O[15]=w):w=O[15];let er=w;return W?(O[16]!==er||O[17]!==G||O[18]!==U?(j=U&&(0,a.jsxs)(s.l.Item,{onSelect:er,disabled:!G,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.CopyIcon,{})}),"Copy output"]}),O[16]=er,O[17]=G,O[18]=U,O[19]=j):j=O[19],O[20]!==es||O[21]!==W||O[22]!==V?(N=V&&(0,a.jsxs)(s.l.LinkItem,{as:p.N_,to:`${m.Jz}/l/${W}`,onSelect:es,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.PencilIcon,{})}),"Edit loop"]}),O[20]=es,O[21]=W,O[22]=V,O[23]=N):N=O[23],O[24]!==F||O[25]!==U||O[26]!==M||O[27]!==V||O[28]!==$?(k=(U||V)&&(M||$||F)&&(0,a.jsx)(s.l.Divider,{}),O[24]=F,O[25]=U,O[26]=M,O[27]=V,O[28]=$,O[29]=k):k=O[29],O[30]!==ea||O[31]!==M?(C=M&&(0,a.jsxs)(s.l.Item,{onSelect:ea,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.DuplicateIcon,{})}),"Duplicate"]}),O[30]=ea,O[31]=M,O[32]=C):C=O[32],O[33]!==q?(S=q&&(0,a.jsxs)(s.l.Item,{onSelect:q,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.PencilIcon,{})}),"Rename"]}),O[33]=q,O[34]=S):S=O[34],O[35]!==ei||O[36]!==$?(I=$&&(0,a.jsxs)(s.l.Item,{onSelect:ei,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.LinkIcon,{})}),"Copy link"]}),O[35]=ei,O[36]=$,O[37]=I):I=O[37],O[38]!==F?(T=F&&(0,a.jsxs)(s.l.Item,{onSelect:F,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.CopyIcon,{})}),"Copy JSON"]}),O[38]=F,O[39]=T):T=O[39],O[40]!==F||O[41]!==M||O[42]!==$?(E=(M||$||F)&&(0,a.jsx)(s.l.Divider,{}),O[40]=F,O[41]=M,O[42]=$,O[43]=E):E=O[43],O[44]===Symbol.for("react.memo_cache_sentinel")?(L=(0,a.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.TrashIcon,{})}),"Delete"]}),O[44]=L):L=O[44],O[45]!==Z||O[46]!==X||O[47]!==J?(R=g.W.loopsAbusePrevention&&J&&!X&&Z&&(0,a.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,h.YPg)({report:`${J} (User)`,contentURL:Z}),children:[(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(c.AlertIcon,{})}),"Report"]}),O[45]=Z,O[46]=X,O[47]=J,O[48]=R):R=O[48],O[49]!==N||O[50]!==k||O[51]!==C||O[52]!==S||O[53]!==I||O[54]!==T||O[55]!==E||O[56]!==R||O[57]!==j?(A=(0,a.jsx)(r.W.Overlay,{align:"end",children:(0,a.jsxs)(s.l,{children:[j,N,k,C,S,I,T,E,L,R]})}),O[49]=N,O[50]=k,O[51]=C,O[52]=S,O[53]=I,O[54]=T,O[55]=E,O[56]=R,O[57]=j,O[58]=A):A=O[58],O[59]!==et||O[60]!==en||O[61]!==z?(D="delete"===z&&(0,a.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),O[59]=et,O[60]=en,O[61]=z,O[62]=D):D=O[62],O[63]!==A||O[64]!==D?(P=(0,a.jsxs)(a.Fragment,{children:[A,D]}),O[63]=A,O[64]=D,O[65]=P):P=O[65],P):null}function v(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},15440:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(74848),i=n(21728),s=n(82595),r=n(38621),l=n(96540);let o={container:"StarterPill-module__container--d2dFs",icon:"StarterPill-module__icon--GKvj8",title:"StarterPill-module__title--Nsp36",dropdown:"StarterPill-module__dropdown--NngRn"},c=l.forwardRef((e,t)=>{let n,l,c,d,u=(0,i.c)(15),{testId:m,name:p,icon:h,color:f,onClick:g,dropdown:y,open:v}=e,x=`starter-${m}`;return u[0]!==f||u[1]!==h?(n=s.I&&(0,a.jsx)("div",{className:o.icon,children:(0,a.jsx)(s.I,{icon:h,color:f})}),u[0]=f,u[1]=h,u[2]=n):n=u[2],u[3]!==y?(l=y&&(0,a.jsx)("div",{className:o.dropdown,children:(0,a.jsx)(r.TriangleDownIcon,{})}),u[3]=y,u[4]=l):l=u[4],u[5]!==p||u[6]!==l?(c=(0,a.jsxs)("div",{className:o.title,children:[p,l]}),u[5]=p,u[6]=l,u[7]=c):c=u[7],u[8]!==g||u[9]!==v||u[10]!==t||u[11]!==x||u[12]!==n||u[13]!==c?(d=(0,a.jsxs)("button",{ref:t,className:o.container,onClick:g,"aria-expanded":v,"data-testid":x,children:[n,c]}),u[8]=g,u[9]=v,u[10]=t,u[11]=x,u[12]=n,u[13]=c,u[14]=d):d=u[14],d});c.displayName="StarterPill"},16070:(e,t,n)=>{n.d(t,{Y0:()=>B,$I:()=>O,kR:()=>F});var a=n(74848),i=n(96540),s=n(97949),r=n(38621),l=n(88934),o=n(31315),c=n(69599),d=n(51587),u=n(11083),m=n(30459),p=n(79634);let h={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx",dismissedOrgList:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",durationSelector:"GlobalSSOBanner-module__durationSelector--DOJjX"};function f({children:e,hidden:t}){let[n,s]=i.useState("visible"),r=i.useRef(null),l=i.useRef(void 0);return(i.useEffect(()=>{if(t&&"visible"===n){s("collapsing");let e=r.current;if(e){let t=e.getBoundingClientRect().height;l.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{s("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,a.jsx)("div",{ref:r,style:{height:"visible"===n?l.current??"auto":0},className:h.bannerOuterWrapper,children:(0,a.jsx)("div",{className:h.bannerInnerWrapper,style:{transform:"visible"===n?void 0:`translateY(-${l.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{f.displayName||(f.displayName="SlideDismiss")}catch{}var g=n(21728),y=n(57352),v=n(15220);function x(e){let t,n,i,s=(0,g.c)(7),{ssoOrgs:r}=e;if(1===r.length){let e,t=r[0],n=t?.name;return s[0]!==n?(e=(0,a.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",n," organization on this device."]}),s[0]=n,s[1]=e):e=s[1],e}return s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),s[2]=t):t=s[2],s[3]!==r?(n=r.map(b),s[3]=r,s[4]=n):n=s[4],s[5]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)("ul",{className:h.dismissedOrgList,children:n})]}),s[5]=n,s[6]=i):i=s[6],i}function b(e){return(0,a.jsx)("li",{children:e.name},e.id)}try{x.displayName||(x.displayName="DismissalSummary")}catch{}var _=n(27042),w=n(5524),j=n(46251);let N=30,k=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:N},{id:"one-year",text:"One year",days:365}],C=()=>k.findIndex(e=>e.days===N);function S(e){let t,n,i,s,l,o=(0,g.c)(11),{selectedDurationIndex:c,onDurationChange:d}=e,u=k[c];o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),o[0]=t):t=o[0];let m=u?.text||"Pick duration";return o[1]!==m?(n=(0,a.jsx)(_.W.Button,{trailingAction:r.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:m}),o[1]=m,o[2]=n):n=o[2],o[3]!==d||o[4]!==c?(i=k.map((e,t)=>(0,a.jsx)(w.l.Item,{role:"menuitemradio",selected:t===c,"aria-checked":t===c,onSelect:()=>d(t),children:e.text},e.id)),o[3]=d,o[4]=c,o[5]=i):i=o[5],o[6]!==i?(s=(0,a.jsx)(_.W.Overlay,{children:(0,a.jsx)(w.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:i})}),o[6]=i,o[7]=s):s=o[7],o[8]!==n||o[9]!==s?(l=(0,a.jsxs)(j.B,{align:"center",direction:"horizontal",className:h.durationSelector,children:[t,(0,a.jsxs)(_.W,{children:[n,s]})]}),o[8]=n,o[9]=s,o[10]=l):l=o[10],l}try{S.displayName||(S.displayName="DurationMenu")}catch{}function I(e){let t,n,s,r,l,o,c,d,u,m,p=(0,g.c)(23),{isOpen:h,onClose:f,onConfirm:b,ssoOrgs:_}=e,[w,j]=i.useState(C);p[0]!==h?(t=()=>{h&&j(C())},n=[h],p[0]=h,p[1]=t,p[2]=n):(t=p[1],n=p[2]),i.useEffect(t,n),p[3]!==b||p[4]!==w?(s=()=>{let e=k[w];b(e?.days??N)},p[3]=b,p[4]=w,p[5]=s):s=p[5];let I=s;return h?(p[6]!==f?(r={buttonType:"default",content:"Cancel",onClick:f},p[6]=f,p[7]=r):r=p[7],p[8]!==I?(l={buttonType:"primary",content:"Confirm",onClick:I},p[8]=I,p[9]=l):l=p[9],p[10]!==r||p[11]!==l?(o=[r,l],p[10]=r,p[11]=l,p[12]=o):o=p[12],p[13]!==_?(c=(0,a.jsx)(x,{ssoOrgs:_}),p[13]=_,p[14]=c):c=p[14],p[15]!==w?(d=(0,a.jsx)(S,{selectedDurationIndex:w,onDurationChange:j}),p[15]=w,p[16]=d):d=p[16],p[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,a.jsx)(y.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),p[17]=u):u=p[17],p[18]!==f||p[19]!==o||p[20]!==c||p[21]!==d?(m=(0,a.jsxs)(v.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:f,footerButtons:o,children:[c,d,u]}),p[18]=f,p[19]=o,p[20]=c,p[21]=d,p[22]=m):m=p[22],m):null}try{I.displayName||(I.displayName="ConfirmationDialog")}catch{}var T=n(21373),E=n(77430),L=n(79988);function R(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,a=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(a)}`}function A(e){let t,n,i,s,r,l=(0,g.c)(20),{ssoOrgs:o,redirectLocation:c}=e,{sendClickAnalyticsEvent:d}=(0,m.S)();if(0===o.length)return null;l[0]!==d?(t=()=>{d({category:L.c$,action:"click_single_sso_button",label:"sso_authentication"})},l[0]=d,l[1]=t):t=l[1];let u=t;l[2]!==d?(n=e=>{d({category:L.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},l[2]=d,l[3]=n):n=l[3];let p=n;if(1===o.length){let e,t,n=o[0];return void 0===n?null:(l[4]!==n.login||l[5]!==c?(e=R(n.login,c),l[4]=n.login,l[5]=c,l[6]=e):e=l[6],l[7]!==u||l[8]!==e?(t=(0,a.jsx)(T.Q,{as:"a",href:e,onClick:u,children:"Single sign-on"}),l[7]=u,l[8]=e,l[9]=t):t=l[9],t)}if(l[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(_.W.Button,{size:"small",children:"Single sign-on"}),l[10]=i):i=l[10],l[11]!==p||l[12]!==c||l[13]!==o){let e;l[15]!==p||l[16]!==c?(e=e=>(0,a.jsxs)(w.l.LinkItem,{href:R(e.login,c),onClick:()=>p(e.name),children:[e.avatar_url&&(0,a.jsx)(w.l.LeadingVisual,{children:(0,a.jsx)(E.r,{size:24,src:e.avatar_url})}),e.name]},e.login),l[15]=p,l[16]=c,l[17]=e):e=l[17],s=o.map(e),l[11]=p,l[12]=c,l[13]=o,l[14]=s}else s=l[14];return l[18]!==s?(r=(0,a.jsxs)(_.W,{children:[i,(0,a.jsx)(_.W.Overlay,{children:(0,a.jsx)(w.l,{children:s})})]}),l[18]=s,l[19]=r):r=l[19],r}try{A.displayName||(A.displayName="SSOActionMenu")}catch{}function D(){let e=(0,o.Ri)(L.z4);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,o.Yj)(L.z4)}return[]}function P(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function O({ssoOrgs:e}){let t=(0,l.zy)(),[n,d]=i.useState("visible"),[p,g]=i.useState(!1),y=i.useRef(!1),{sendClickAnalyticsEvent:v}=(0,m.S)(),x=(0,c.G7)("global_sso_banner_dismiss_dialog");if(i.useEffect(()=>{!y.current&&e.length>0&&((0,c.G7)("record_sso_banner_metrics")&&(0,u.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),y.current=!0)},[e]),0===e.length)return null;let b=(t=N)=>{d("hidden");let n=e.map(e=>e.id);(0,c.G7)("global_sso_banner_dismiss_dialog")&&(n=[...new Set([...D(),...n])].sort()),(0,o.Yj)(L.z4);let a=t??N,i=new Date(Date.now()+24*a*36e5).toUTCString();(0,o.TV)(L.z4,JSON.stringify(n),i)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{hidden:"visible"!==n,children:(0,a.jsx)(s.l,{title:"Single-sign on",className:h.banner,hideTitle:!0,icon:(0,a.jsx)(r.ShieldLockIcon,{}),description:(()=>{if(0===e.length)return"Single sign-on to see results";let t=e.slice(0,L.n5),n=e.length-L.n5,i=1===e.length?"organization":"organizations";return(0,a.jsxs)(a.Fragment,{children:["Single sign-on to see results in the ",(()=>{let e=t.map(e=>(0,a.jsx)("strong",{children:e.name},e.login));if(1===e.length)return e[0];{if(2===e.length)return(0,a.jsxs)(a.Fragment,{children:[e[0]," and ",e[1]]});let t=e.length-1,i=(0,a.jsxs)(a.Fragment,{children:[e[0],", ",e[1],", and ",e[t]]});return n>0?(0,a.jsxs)(a.Fragment,{children:[i,", and ",n," more"]}):i}})()," ",i]})})(),onDismiss:()=>{v({category:L.c$,action:"click_dismiss_button",label:"banner_dismissed"}),x?g(!0):b()},primaryAction:(0,a.jsx)(A,{ssoOrgs:e,redirectLocation:t}),"data-testid":"global-sso-banner"})}),(0,a.jsx)(I,{isOpen:x&&p,onClose:()=>g(!1),onConfirm:e=>{b(e),g(!1)},ssoOrgs:e})]})}function B(){let{ssoOrgs:e,suppressBanner:t}=function(){let{ssoOrgs:e,baseAvatarUrl:t}=(0,d.N)(),{current_sso_orgs_match_dismissed_cookie:n}=(0,p.X)()??{},a=i.useMemo(()=>e.filter(P).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[e,t]);return{suppressBanner:!0===n||function(e){let t=D();return e.length===t.length&&e.every(e=>t.includes(e.id))}(a),ssoOrgs:a,baseAvatarUrl:t}}();return 0===e.length||!(0,c.G7)("global_sso_banner")||t?null:(0,a.jsx)(O,{ssoOrgs:e})}let F=L.z4;try{O.displayName||(O.displayName="GlobalSsoBanner")}catch{}try{B.displayName||(B.displayName="ContextualGlobalSsoBanner")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),i=n(21728),s=n(77274),r=n(96379),l=n(96540),o=n(35247),c=n(54508);let d=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}],u=(0,l.forwardRef)(function(e,t){let n,u,m,p,h=(0,i.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,l.useRef)(null),v=(0,l.useRef)(null),x=(0,l.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{x.current=e,o.W.copilotChatInterviewSurvey?y.current?.openDialog():v.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,l.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let a={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:a})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let b=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&v.current?.openDialog(x.current)}}),h[3]=m):m=h[3],h[4]!==b||h[5]!==g?(p=(0,a.jsxs)(a.Fragment,{children:[m,(0,a.jsx)(s.NE,{ref:v,options:d,onSubmit:b,returnFocusRef:g})]}),h[4]=b,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},19199:(e,t,n)=>{n.d(t,{n:()=>w});var a=n(74848),i=n(82075),s=n(21373),r=n(1481),l=n(96540),o=n(13107),c=n(26410),d=n(20622),u=n(53885),m=n(96379),p=n(65510),h=n(91747),f=n(31604),g=n(27042),y=n(38621);let v=({isPrimary:e,children:t,size:n,onOpenChange:i})=>{let r=(0,h.u)("accessible_code_button"),[o,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{r&&i&&i(o)},[o,r]),r)?(0,a.jsx)(f.T,{align:"end",focusZoneSettings:{disabled:!0},open:o,onOpen:()=>c(!0),onClose:()=>c(!1),renderAnchor:t=>(0,a.jsx)(s.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,a.jsx)(y.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,a.jsx)(y.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,a.jsxs)(g.W,{children:[(0,a.jsx)(g.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,a.jsx)(y.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,a.jsx)(g.W.Overlay,{width:"auto",align:"end",children:t})]})};try{v.displayName||(v.displayName="CodeMenuButton")}catch{}let x={TabNav:"CodeDropdownButton-module__TabNav--zWa9N",NavItem:"CodeDropdownButton-module__NavItem--_hXZP"},b=(0,i.A)("localStorage"),_={Local:"local",Codespaces:"cloud"};function w(e){var t,n;let{primary:i,size:d,showCodespacesTab:u,isEnterprise:m,localTab:p,codespacesTab:h,localTabProps:f,codespacesPath:g}=e,y="code-button-default-tab",[w,N]=(0,l.useState)(_.Local),k=(0,l.useCallback)(e=>{N(_.Codespaces),b.setItem(y,_.Codespaces),e?.preventDefault()},[]),C=(0,l.useCallback)(e=>{N(_.Local),b.setItem(y,_.Local),e?.preventDefault()},[]);(0,l.useEffect)(()=>{b.getItem(y)===_.Codespaces&&u&&k()},[]);let S=!m&&u;return(0,a.jsxs)(v,{size:d,isPrimary:i,children:[S&&(0,a.jsxs)(r.A,{className:x.TabNav,children:[(0,a.jsx)(r.A.Link,{as:s.Q,selected:w===_.Local,onClick:C,className:x.NavItem,children:"Local"}),!m&&u&&(0,a.jsx)(r.A.Link,{as:s.Q,selected:w===_.Codespaces,onClick:k,className:x.NavItem,children:"Codespaces"})]}),(0,a.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[w===_.Local&&(p||((t=f)?(0,a.jsx)(c.F,{...t}):null)),w===_.Codespaces&&(h||((n=g)?(0,a.jsx)(o.VO,{children:(0,a.jsx)(j,{codespacesPath:n})}):null))]})]})}function j(e){let t=function(e){let t=(0,u.e)(d.u.codeButton);return(0,p.U)({queryKey:[d.u.codeButton,t],queryFn:async()=>{let e=await (0,m.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:void 0,staleTime:1/0})}().data,n=(0,h.u)("copilot_swe_agent_progress_commands"),{repositoryPolicyInfo:i,...s}=t;return n?(0,a.jsx)(o.NF,{codespacesPath:e.codespacesPath,repoPolicyInfo:i,...s}):(0,a.jsx)(o.NF,{codespacesPath:e.codespacesPath,...t})}try{w.displayName||(w.displayName="CodeDropdownButton")}catch{}try{j.displayName||(j.displayName="SuspendedCodespacesTab")}catch{}},19336:(e,t,n)=>{n.d(t,{G:()=>p});var a=n(74848),i=n(21728),s=n(34031),r=n(11128),l=n(12357),o=n(70324);let c={emptyState:"ExecutionView-module__emptyState--gD9en",emptyStateText:"ExecutionView-module__emptyStateText--awSRT",emptyStateTitle:"ExecutionView-module__emptyStateTitle--F8TRM"};var d=n(53419),u=n(38621);let m=[];function p(e){let t,n=(0,i.c)(9),{outputNodeExists:p,isRunning:h,nodeValue:f,nodeError:g,validationErrors:y,additionalActions:v,onRun:x,onStop:b}=e,_=void 0===y?m:y;return n[0]!==v||n[1]!==h||n[2]!==g||n[3]!==f||n[4]!==x||n[5]!==b||n[6]!==p||n[7]!==_?(t=(0,a.jsx)(a.Fragment,{children:p?h&&!f?(0,a.jsx)(s.M,{isRunning:h,messages:{running:"Running the loop...",waiting:"Waiting..."}}):_.length>0?(0,a.jsx)(r.n,{errors:_,title:"Oops, this loop is configured incorrectly",additionalActions:v}):g?(0,a.jsx)(r.n,{errors:[g],title:"Oops, there was an error running this loop",additionalActions:v}):f?(0,a.jsx)(l.U,{isRunning:h,nodeValue:f}):(0,a.jsxs)("div",{className:c.emptyState,children:[(0,a.jsxs)("div",{className:c.emptyStateText,children:[(0,a.jsx)("span",{className:c.emptyStateTitle,children:"No output yet"}),(0,a.jsx)("span",{children:"Run this loop to generate output"})]}),(0,a.jsx)(o.c,{onClick:()=>{x(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:h,value:f,variant:"default",leadingVisual:(0,a.jsx)(u.SyncIcon,{})})]}):(0,a.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=h,n[2]=g,n[3]=f,n[4]=x,n[5]=b,n[6]=p,n[7]=_,n[8]=t):t=n[8],t}try{p.displayName||(p.displayName="ExecutionView")}catch{}},21046:(e,t,n)=>{function a(){}function i(){}n.d(t,{FF:()=>a,vV:()=>i})},21229:(e,t,n)=>{n.d(t,{D:()=>m});var a=n(74848),i=n(21728),s=n(46747),r=n(38621),l=n(86877),o=n(26108),c=n(99511),d=n(96540);let u={searchContainer:"SearchInput-module__searchContainer--r7MLn",searchInputWrapper:"SearchInput-module__searchInputWrapper--fhRw6",searchInput:"SearchInput-module__searchInput--PKKMu"};function m(e){let t,n,m,p,h,f,g=(0,i.c)(20),{onSearch:y,placeholder:v,"aria-label":x,disabled:b,debounceDelay:_}=e,w=void 0===v?"Search...":v,j=void 0===x?"Search":x,N=void 0!==b&&b,[k,C]=(0,d.useState)(""),S=(0,s.d)(y,void 0===_?200:_);g[0]!==S||g[1]!==y?(t=e=>{let t=e.currentTarget.value;C(t),""===t.trim()?y(""):S(t)},g[0]=S,g[1]=y,g[2]=t):t=g[2];let I=t;g[3]!==y?(n=()=>{C(""),y("")},g[3]=y,g[4]=n):n=g[4];let T=n;return g[5]!==j?(m=(0,a.jsx)(l.A.Label,{visuallyHidden:!0,children:j}),g[5]=j,g[6]=m):m=g[6],g[7]!==T||g[8]!==N||g[9]!==k?(p=""!==k?(0,a.jsx)(o.K,{icon:r.XCircleFillIcon,onClick:T,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:N}):void 0,g[7]=T,g[8]=N,g[9]=k,g[10]=p):p=g[10],g[11]!==I||g[12]!==w||g[13]!==k||g[14]!==p?(h=(0,a.jsx)(c.A,{className:u.searchInput,placeholder:w,value:k,onChange:I,leadingVisual:r.SearchIcon,trailingAction:p}),g[11]=I,g[12]=w,g[13]=k,g[14]=p,g[15]=h):h=g[15],g[16]!==N||g[17]!==m||g[18]!==h?(f=(0,a.jsx)("div",{className:u.searchContainer,children:(0,a.jsxs)(l.A,{className:u.searchInputWrapper,disabled:N,children:[m,h]})}),g[16]=N,g[17]=m,g[18]=h,g[19]=f):f=g[19],f}try{m.displayName||(m.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var a=n(21728),i=n(27912),s=n(96540);function r(e){let t,n=(0,a.c)(2),r=function(e){let t,n,i,r=(0,a.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[l,o]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{o(e.matches)};return o(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},i=[e],r[2]=e,r[3]=n,r[4]=i):(n=r[3],i=r[4]),(0,s.useEffect)(n,i),l}(void 0===e?i.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>E});var a=n(74848),i=n(96540),s=n(98755),r=n(25407),l=n(69726),o=n(57352),c=n(56149),d=n(21373),u=n(62935),m=n(72579),p=n(99906),h=n(66990),f=n(79634),g=n(79431),y=n(11196),v=n(97665),x=n(33578),b=n(30923),_=n(20622),w=n(53885),j=n(96379),N=n(94747);let k={truncateBranch:"PullRequestHeaderSummary-module__truncateBranch--bdsQu",summaryContainer:"PullRequestHeaderSummary-module__summaryContainer--iNR1T"};var C=n(34261),S=n(2022),I=n(95807),T=n(99223);function E({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:m="",baseRepositoryOwnerLogin:y="",canChangeBase:E=!1,commitsCount:R,headBranch:A,headRepositoryOwnerLogin:D="",headRepositoryName:P="",isInAdvisoryRepo:O,isEditing:B=!1,mergedBy:F,mergedTime:M,pullRequestId:$,pullRequestNumber:V,repositoryId:U,setIsEditing:q,state:W}){let H=(0,v.jE)(),{refListCacheKey:K}=(0,f.X)(),[G,z]=(0,i.useState)(!1),[Q,Y]=(0,i.useState)(!1),[J,X]=(0,i.useState)(""),[Z,ee]=(0,i.useState)(""),et=(0,C.f)(),en=(0,S.E)(),{mutate:ea}=function(){let e=(0,w.e)(_.u.changeBase);return(0,N.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,j.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,b.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})}(),ei=e=>{Y(!1),X(e)},es=Q?()=>(0,a.jsx)(l.A,{size:"small"}):null,er=D&&D!==y?`${y}:${t}`:t,el=function(e,t,n,a,i){if(!t)return"unknown repository";let s=!!t&&t!==e,r=i&&!!n;switch(!0){case s&&r:return`${t}/${n}:${a}`;case s:return`${t}:${a}`;case r:return`${n}:${a}`;default:return a}}(y,D,P,A,O),eo=W===x.Q.Merged?F:e,ec=function(e,t,n){let a=`${t} ${t>1?"commits":"commit"}`;return e!==x.Q.Merged?`wants to merge ${a} into`:n?`merged ${a} into`:`${a} merged into`}(W,R,eo);return(0,a.jsxs)("span",{className:`fgColor-muted d-flex flex-items-center overflow-hidden ${k.summaryContainer}`,children:[eo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,r.dCN)({owner:eo}),href:`/${eo}`,children:eo})," "]}):null,ec,E&&B?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.PI,{cacheKey:K,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:y,repo:m,types:["branch"],onSelectItem:e=>{z(!0),ee(e)}}),(0,a.jsx)(c.ZL,{children:(0,a.jsxs)(p.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:G,onDismiss:()=>{z(!1),ee(""),X("")},children:[(0,a.jsx)(p.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),J&&(0,a.jsx)(g.v,{className:"mt-2",variant:"critical",children:J}),(0,a.jsx)("span",{className:"sr-only","aria-live":"polite",children:Q?"Base branch update in progress.":""}),(0,a.jsx)(d.Q,{alignContent:"center","aria-disabled":Q?"true":void 0,block:!0,className:"mt-3",disabled:Q,leadingVisual:es,onClick:()=>{Y(!0),ea({newBaseBranch:Z},{onError:e=>ei(e.message),onSuccess:async()=>{try{await Promise.all([H.refetchQueries({queryKey:et},{throwOnError:!0}),H.refetchQueries({queryKey:en},{throwOnError:!0})]),Y(!1),q?.(!1),z(!1)}catch{ei("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:Q?null:"Change base"})]})]})})]}):(0,a.jsx)(L,{branch:t,branchText:er,repositoryName:m,repositoryOwner:y}),(0,a.jsx)("span",{children:"from "}),(0,a.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,a.jsx)(L,{branch:A,branchText:el,repositoryName:P,repositoryOwner:D}),(0,a.jsx)(s.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:D?el:A})]}),W===x.Q.Merged&&(0,a.jsx)(u.A,{datetime:M}),W===x.Q.Open&&!(0,T.k)()&&(0,a.jsx)(I.i,{processingIndicatorUrl:(0,r.CZ9)({owner:y,repo:m,number:V}),repositoryId:U,pullRequestId:$})]})}function L({branchText:e,repositoryOwner:t,repositoryName:n,branch:i}){if(!n||!t)return(0,a.jsx)(m.A,{as:"span",className:k.truncateBranch,title:"This repository has been deleted",children:e});{let s=(0,r.WJ9)({owner:t,repo:n,branch:i});return(0,a.jsx)(y.m,{text:`${t}/${n}:${i}`,children:(0,a.jsx)(m.A,{href:s,className:k.truncateBranch,children:e})})}}try{E.displayName||(E.displayName="PullRequestHeaderSummary")}catch{}try{L.displayName||(L.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>l});var a=n(21728),i=n(50050),s=n(33026),r=n(64917);function l(){let e,t=(0,a.c)(4),n=(0,i.Ud)(c),l=(0,r.I)(o),d=n!==s.kj&&n!==s.qD;if(void 0===l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(d){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function o(e){return e?.owned}function c(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>u});var a=n(74848),i=n(21728),s=n(53419),r=n(38621),l=n(57352),o=n(26382),c=n(96540);let d={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--uGjJA"};function u(e){let t,n,u,m,p,h,f=(0,i.c)(8),{regionName:g}=e;return f[0]!==g?(t=()=>{let e=`ERROR_FALLBACK_${g.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${g} error fallback`})},n=[g],f[0]=g,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,c.useEffect)(t,n),f[3]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(o.E.Visual,{children:(0,a.jsx)(r.AlertIcon,{size:"medium"})}),m=(0,a.jsx)(o.E.Heading,{children:"Something went wrong"}),f[3]=u,f[4]=m):(u=f[3],m=f[4]),f[5]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)(l.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),f[5]=p):p=f[5],f[6]!==g?(h=(0,a.jsx)("div",{className:d.errorFallbackContainer,children:(0,a.jsxs)(o.E,{children:[u,m,(0,a.jsxs)(o.E.Description,{children:[g," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",p,"."]})]})}),f[6]=g,f[7]=h):h=f[7],h}try{u.displayName||(u.displayName="ErrorFallback")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>i});var a=n(76648);function i(){let e=(0,a.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:s,urls:r,user:l}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:s,urls:r,user:l}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(21728),i=n(23967);function s(e){let t,n,s=(0,a.c)(7),{language:r,value:l}=e;s[0]!==r||s[1]!==l?(t=function({language:e,value:t}){var n;let a=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,a),indentWithTabs:"tab"===a,lineWrapping:function(e){let t=(0,i.vL)(e);return t?.wrap??!1}(e)}}({language:r,value:l}),s[0]=r,s[1]=l,s[2]=t):t=s[2];let o=t;return s[3]!==o.indentUnit||s[4]!==o.indentWithTabs||s[5]!==o.lineWrapping?(n={indentUnit:o.indentUnit,indentWithTabs:o.indentWithTabs,lineWrapping:o.lineWrapping},s[3]=o.indentUnit,s[4]=o.indentWithTabs,s[5]=o.lineWrapping,s[6]=n):n=s[6],n}},26410:(e,t,n)=>{n.d(t,{J:()=>b,F:()=>v});var a=n(74848),i=n(96540),s=n(39111),r=n(96459),l=n(96379),o=n(57352),c=n(19579),d=n(72511),u=n(5524),m=n(81960),p=n(11196),h=n(98755),f=n(38621);let g={UnderlineNav:"LocalTab-module__UnderlineNav--epbgw",PlatformContents:"LocalTab-module__PlatformContents--rz1GK",CloneContainer:"LocalTab-module__CloneContainer--fne3C",CopyToClipboardButton:"LocalTab-module__CopyToClipboardButton--G8eJx"};var y=n(34164);function v(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:h,sshUrl:y,sshCertificatesRequired:v,sshCertificatesAvailable:_,ghCliUrl:w,newSshKeyUrl:j,setProtocolPath:N}=e.protocolInfo,{defaultProtocol:k}=e.protocolInfo,[C,S]=(0,i.useState)(k),[I,T]=(0,i.useState)(""),{cloneUrl:E,visualStudioCloneUrl:L,showVisualStudioCloneButton:R,showXcodeCloneButton:A,xcodeCloneUrl:D,zipballUrl:P}=e.platformInfo,O=(0,s.X)(["windows","mac"]),B=(0,s.X)(["mac"]),F=(0,r.Z)(),M="mt-2 fgColor-muted text-normal",$=(0,i.useCallback)(e=>{if(C!==e){S(e);let t=new FormData;t.set("protocol_selector",e),(0,l.DI)(N,{method:"post",body:t})}},[C,S,N]),V=(0,i.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>$("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>$("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>$("gh_cli")}),e},[t,$,n]),U=(0,i.useMemo)(()=>{let e=[];return O&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:E,icon:f.DesktopDownloadIcon}),O&&R&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:L}),B&&A&&e.push({name:"xcode",text:"Open with Xcode",url:D}),e.push({name:"zip",text:"Download ZIP",url:P,icon:f.FileZipIcon}),e},[E,B,O,R,A,L,D,P]);return(0,a.jsx)("div",{children:"githubDesktop"===I?(0,a.jsx)(x,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===I?(0,a.jsx)(x,{platform:"Visual Studio"}):"xcode"===I?(0,a.jsx)(x,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"m-3",children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,a.jsx)(f.TerminalIcon,{className:"mr-2"}),(0,a.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,a.jsx)(p.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,a.jsx)(o.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,a.jsx)(f.QuestionIcon,{className:"mr-1"})})})]}),(0,a.jsx)(c.O,{"aria-label":"Remote URL selector",className:g.UnderlineNav,children:V.map(e=>(0,a.jsx)(c.O.Item,{"aria-current":C===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,a.jsx)("p",{className:M,children:"Clone using the web URL."})]}):"ssh"===C?(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsxs)(d.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,a.jsx)(o.A,{inline:!0,href:j,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,a.jsx)(b,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:y}),(0,a.jsx)("p",{className:M,children:v?"Use a password-protected SSH certificate.":_?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:w}),(0,a.jsxs)("p",{className:M,children:["Work fast with our official CLI."," ",(0,a.jsx)(o.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,a.jsx)(u.l,{variant:"inset",className:"border-top",children:U.map(e=>"zip"===e.name?(0,a.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(e.icon,{})}),e.text]},e.name):(0,a.jsxs)(u.l.Item,{onSelect:t=>{T(e.name),t.preventDefault(),F(e.url)},children:[e.icon&&(0,a.jsx)(u.l.LeadingVisual,{children:(0,a.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function x({platform:e,href:t}){return(0,a.jsxs)("div",{className:(0,y.$)("p-3",g.PlatformContents),children:[(0,a.jsx)(m.A,{as:"h4",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,a.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,a.jsx)(o.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function b({buttonAriaLabel:e="Copy url to clipboard",inputId:t,inputLabel:n,url:i}){return(0,a.jsxs)("div",{className:(0,y.$)("d-flex mb-2",g.CloneContainer),children:[(0,a.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,a.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:i,readOnly:!0,style:{flexGrow:1}}),(0,a.jsx)(h.T,{className:(0,y.$)("ml-1 mr-0",g.CopyToClipboardButton),textToCopy:i,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{v.displayName||(v.displayName="LocalTab")}catch{}try{x.displayName||(x.displayName="LaunchingPlatformContents")}catch{}try{b.displayName||(b.displayName="CloneUrl")}catch{}},26956:(e,t,n)=>{n.d(t,{Zf:()=>w});var a=n(74848),i=n(21728),s=n(66565),r=n(34164),l=n(96540);let o={scrollContainer:"ContentView-module__scrollContainer--_BylN",contentContainer:"ContentView-module__contentContainer--q5UcY",noHeader:"ContentView-module__noHeader--EociJ",content:"ContentView-module__content--kzPet",medium:"ContentView-module__medium--TcCTp",small:"ContentView-module__small--r1fwP",banner:"ContentView-module__banner--rgHMe",serviceHeader:"ContentView-module__serviceHeader--DEEHs",serviceTitle:"ContentView-module__serviceTitle--PbOYe",serviceDescription:"ContentView-module__serviceDescription--ZNDZz",serviceActions:"ContentView-module__serviceActions--IucKo",section:"ContentView-module__section--avH_l",sectionTitle:"ContentView-module__sectionTitle--MkQwz",sectionGrid:"ContentView-module__sectionGrid--unHY4",sectionGridEmpty:"ContentView-module__sectionGridEmpty--oxnzj",skeletonCard:"ContentView-module__skeletonCard--e4yHy"};function c(e){let t,n,s,c,u,m,p=(0,i.c)(15),{children:h,width:f,noHeader:g}=e;if(p[0]!==h){for(let e of(t=[],n=[],l.Children.toArray(h)))l.isValidElement(e)&&e.type===d?t.push(e):n.push(e);p[0]=h,p[1]=t,p[2]=n}else t=p[1],n=p[2];p[3]!==g?(s=(0,r.$)(o.contentContainer,{[o.noHeader]:g}),p[3]=g,p[4]=s):s=p[4];let y="small"===f,v="medium"===f;return p[5]!==y||p[6]!==v?(c=(0,r.$)(o.content,{[o.small]:y,[o.medium]:v}),p[5]=y,p[6]=v,p[7]=c):c=p[7],p[8]!==t||p[9]!==n||p[10]!==c?(u=(0,a.jsxs)("div",{className:c,children:[t,n]}),p[8]=t,p[9]=n,p[10]=c,p[11]=u):u=p[11],p[12]!==s||p[13]!==u?(m=(0,a.jsx)("div",{className:o.scrollContainer,children:(0,a.jsx)("div",{className:s,children:u})}),p[12]=s,p[13]=u,p[14]=m):m=p[14],m}function d(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:o.banner,children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:o.serviceHeader,children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("section",{className:o.section,children:s}),n[0]=s,n[1]=t):t=n[1],t}function p(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("h1",{className:o.serviceTitle,children:s}),n[0]=s,n[1]=t):t=n[1],t}function h(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("p",{className:o.serviceDescription,children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:o.serviceActions,children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("h2",{className:o.sectionTitle,children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:o.sectionGridEmpty,children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(e){let t,n,s,r=(0,i.c)(8),{children:c,loading:d}=e;if(void 0!==d&&d){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:o.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(_)}),r[0]=e):e=r[0],e}if(r[1]!==c){let e=l.Children.toArray(c);t=e.find(b),n=e.filter(x),r[1]=c,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,a.jsx)(a.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,a.jsx)("div",{className:o.sectionGrid,children:u}),r[6]=u,r[7]=s):s=r[7],s}function x(e){return!(l.isValidElement(e)&&e.type===y)}function b(e){return l.isValidElement(e)&&e.type===y}function _(e,t){return(0,a.jsx)(s.f,{className:o.skeletonCard},t)}v.Empty=y,m.Title=g,m.Grid=v;let w={Title:p,Description:h,Actions:f,Container:c,Banner:d,Header:u,Section:m};w.displayName="ContentView",c.displayName="ContentView.Container",d.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",p.displayName="ContentView.Title",h.displayName="ContentView.Description",f.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",v.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},27912:(e,t,n)=>{n.d(t,{X:()=>L,P:()=>P});var a=n(74848),i=n(21728),s=n(34164),r=n(96540),l=n(57919),o=n(69599),c=n(16070);let d={container:"Layout-module__container--qlyoa",resizing:"Layout-module__resizing--rf7h4",banner:"Layout-module__banner--b14up",sidebar:"Layout-module__sidebar--r6coV",mainColumn:"Layout-module__mainColumn--OFMVb",secondaryColumn:"Layout-module__secondaryColumn--Ut9LZ",monoView:"Layout-module__monoView--z920C",sidebarCondensed:"Layout-module__sidebarCondensed--m7Zsu",panelView:"Layout-module__panelView--l6qZ7",columnLeft:"Layout-module__columnLeft--jY2aC",secondaryColumnVisible:"Layout-module__secondaryColumnVisible--RdfK7",resourcePanelOpen:"Layout-module__resourcePanelOpen--vh9_8",splitView:"Layout-module__splitView--ldg6X",columnRight:"Layout-module__columnRight--WBwz7",mainColumnRight:"Layout-module__mainColumnRight--Izd_P",verticalSecondaryColumn:"Layout-module__verticalSecondaryColumn--O2DEP",secondaryColumnHidden:"Layout-module__secondaryColumnHidden--y3gv6"},u={header:"Header-module__header--tjtIT",columnHeader:"Header-module__columnHeader--UxTKW",column:"Header-module__column--ysX1b",leftColumn:"Header-module__leftColumn--MghGY",rightColumn:"Header-module__rightColumn--AckUb"};var m=n(38621),p=n(26108),h=n(894);let f={sidebarToggleButton:"SidebarToggle-module__sidebarToggleButton--NAVdU"};function g(){let e,t=(0,i.c)(2),{toggleSidebar:n}=(0,h.L)();return t[0]!==n?(e=(0,a.jsx)("div",{className:f.sidebarToggleButton,children:(0,a.jsx)(p.K,{icon:m.ThreeBarsIcon,onClick:n,"aria-label":"Toggle sidebar"})}),t[0]=n,t[1]=e):e=t[1],e}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,r,l,o,c=(0,i.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(l=(0,s.$)(u.column,u.leftColumn,n),c[4]=n,c[5]=l):l=c[5],c[6]!==t||c[7]!==r||c[8]!==l?(o=(0,a.jsx)("div",{className:l,...r,children:t}),c[6]=t,c[7]=r,c[8]=l,c[9]=o):o=c[9],o}function v(e){let t,n,r,l,o,c=(0,i.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(l=(0,s.$)(u.column,u.rightColumn,n),c[4]=n,c[5]=l):l=c[5],c[6]!==t||c[7]!==r||c[8]!==l?(o=(0,a.jsx)("div",{className:l,...r,children:t}),c[6]=t,c[7]=r,c[8]=l,c[9]=o):o=c[9],o}function x(e){let t,n,r,o,c,d,m,p=(0,i.c)(20);p[0]!==e?({children:t,className:n,...r}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=r):(t=p[1],n=p[2],r=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(o={leftColumn:y,rightColumn:v},p[4]=o):o=p[4];let[h]=(0,l.H)(t,o);if(h.leftColumn&&h.rightColumn){let e,t,i;return p[5]!==n?(e=(0,s.$)(u.columnHeader,n),p[5]=n,p[6]=e):e=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(g,{}),p[7]=t):t=p[7],p[8]!==r||p[9]!==h.leftColumn||p[10]!==h.rightColumn||p[11]!==e?(i=(0,a.jsxs)("header",{className:e,...r,children:[t,h.leftColumn,h.rightColumn]}),p[8]=r,p[9]=h.leftColumn,p[10]=h.rightColumn,p[11]=e,p[12]=i):i=p[12],i}return p[13]!==n?(c=(0,s.$)(u.header,n),p[13]=n,p[14]=c):c=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(g,{}),p[15]=d):d=p[15],p[16]!==t||p[17]!==r||p[18]!==c?(m=(0,a.jsxs)("header",{className:c,...r,children:[d,t]}),p[16]=t,p[17]=r,p[18]=c,p[19]=m):m=p[19],m}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{v.displayName||(v.displayName="HeaderRight")}catch{}try{x.displayName||(x.displayName="Header")}catch{}let b={headerToggleOnly:"HeaderToggleOnly-module__headerToggleOnly--wC7_E"};function _(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:b.headerToggleOnly,children:(0,a.jsx)(g,{})}),t[0]=e):e=t[0],e}try{_.displayName||(_.displayName="HeaderToggleOnly")}catch{}var w=n(11607);let j={container:"Sidebar-module__container--onmDW",header:"Sidebar-module__header--rIhJd",sidebar:"Sidebar-module__sidebar--u6QU6",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--fQq3y",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--_YU5M",githubLogo:"Sidebar-module__githubLogo--qLZu3",visible:"Sidebar-module__visible--NW0KW",toggleSidebarContainer:"Sidebar-module__toggleSidebarContainer--QtdhW",iconLineTop:"Sidebar-module__iconLineTop--Ef2Ww",iconLineBottom:"Sidebar-module__iconLineBottom--QhwW5",condensed:"Sidebar-module__condensed--DvFLD",toggleIcon:"Sidebar-module__toggleIcon--MWRyj"};var N=n(36523),k=n(77999);function C(e){let t,n,l,o,c,d,u,p,h,f,g,y,v=(0,i.c)(37),{children:x,className:b,isVisible:_,isExpanded:C,sidebarRef:S,onToggle:I,"data-testid":T}=e,E=!C,L=(0,N.L)(S),R=(0,r.useId)();v[0]!==_?(t=()=>_?(0,a.jsx)(m.XIcon,{}):(0,a.jsx)(m.ThreeBarsIcon,{}),v[0]=_,v[1]=t):t=v[1];let A=t,D=`${R}-copilot-navigation`;v[2]!==b||v[3]!==E||v[4]!==_?(n=(0,s.$)(j.container,b,{[j.visible]:_,[j.condensed]:E}),v[2]=b,v[3]=E,v[4]=_,v[5]=n):n=v[5];let P=`${R}-copilot-navigation`;v[6]!==P?(l=(0,a.jsx)("h2",{id:P,className:"sr-only",children:"Copilot navigation"}),v[6]=P,v[7]=l):l=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)("a",{href:"/",target:"_self",className:j.githubLogo,"aria-label":"GitHub homepage",children:(0,a.jsx)(m.MarkGithubIcon,{size:32})}),v[8]=o):o=v[8];let O=_?"Close sidebar":"Open sidebar",B=_?"invisible":"default";v[9]!==A?(c=A(),v[9]=A,v[10]=c):c=v[10],v[11]!==I||v[12]!==O||v[13]!==B||v[14]!==c?(d=(0,a.jsx)(w.$,{className:j.toggleSidebarFloating,"aria-label":O,onClick:I,iconOnly:!0,variant:B,icon:c}),v[11]=I,v[12]=O,v[13]=B,v[14]=c,v[15]=d):d=v[15],v[16]!==d||v[17]!==l?(u=(0,a.jsxs)("div",{className:j.header,children:[l,o,d]}),v[16]=d,v[17]=l,v[18]=u):u=v[18],v[19]!==x||v[20]!==u?(p=(0,a.jsxs)("div",{className:j.sidebar,children:[u,x]}),v[19]=x,v[20]=u,v[21]=p):p=v[21];let F=_||C?"Condense":"Expand",M=C?-8:0,$=_||C?"Condense sidebar":"Expand sidebar";return v[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",className:j.toggleIcon,children:[(0,a.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineTop}),(0,a.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:j.iconLineBottom})]}),v[22]=h):h=v[22],v[23]!==I||v[24]!==$?(f=(0,a.jsx)("button",{className:j.toggleSidebarVertical,"aria-label":$,onClick:I,children:h}),v[23]=I,v[24]=$,v[25]=f):f=v[25],v[26]!==F||v[27]!==M||v[28]!==f?(g=(0,a.jsx)("div",{className:j.toggleSidebarContainer,children:(0,a.jsx)(k.m,{text:F,offset:M,children:f})}),v[26]=F,v[27]=M,v[28]=f,v[29]=g):g=v[29],v[30]!==T||v[31]!==L||v[32]!==p||v[33]!==g||v[34]!==D||v[35]!==n?(y=(0,a.jsxs)("aside",{"aria-labelledby":D,ref:L,className:n,"data-testid":T,children:[p,g]}),v[30]=T,v[31]=L,v[32]=p,v[33]=g,v[34]=D,v[35]=n,v[36]=y):y=v[36],y}try{C.displayName||(C.displayName="Sidebar")}catch{}function S(e){let t,n,r,l,o,c,u=(0,i.c)(17);if(u[0]!==e){let{children:a,className:i,onToggle:s,"data-testid":o,...c}=e;t=a,n=i,r=o,l=c,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=l}else t=u[1],n=u[2],r=u[3],l=u[4];let{sidebarExpanded:m,sidebarVisible:p,layoutBreakpoint:f,toggleSidebar:g,sidebarRef:y}=(0,h.L)();return u[5]!==n?(o=(0,s.$)(d.sidebar,n),u[5]=n,u[6]=o):o=u[6],u[7]!==t||u[8]!==r||u[9]!==f||u[10]!==l||u[11]!==m||u[12]!==y||u[13]!==p||u[14]!==o||u[15]!==g?(c=(0,a.jsx)(C,{className:o,isFloating:f,isVisible:p,isExpanded:m,onToggle:g,sidebarRef:y,"data-testid":r,...l,children:t}),u[7]=t,u[8]=r,u[9]=f,u[10]=l,u[11]=m,u[12]=y,u[13]=p,u[14]=o,u[15]=g,u[16]=c):c=u[16],c}function I(e){let t,n,r,l,o,c=(0,i.c)(11);c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]);let{mainColumn:u}=(0,h.L)(),m="left"===u?d.mainColumn:d.secondaryColumn;return c[4]!==n||c[5]!==m?(l=(0,s.$)(d.columnLeft,m,n),c[4]=n,c[5]=m,c[6]=l):l=c[6],c[7]!==t||c[8]!==r||c[9]!==l?(o=(0,a.jsx)("div",{className:l,"data-column-position":"left",...r,children:t}),c[7]=t,c[8]=r,c[9]=l,c[10]=o):o=c[10],o}function T(e){let t,n,r,l,o,c,u=(0,i.c)(13);u[0]!==e?({children:t,className:n,"data-testid":r,...l}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=l):(t=u[1],n=u[2],r=u[3],l=u[4]);let{mainColumn:m}=(0,h.L)(),p="right"===m?d.mainColumn:d.secondaryColumn;return u[5]!==n||u[6]!==p?(o=(0,s.$)(d.columnRight,p,n),u[5]=n,u[6]=p,u[7]=o):o=u[7],u[8]!==t||u[9]!==r||u[10]!==l||u[11]!==o?(c=(0,a.jsx)("div",{className:o,"data-testid":r,"data-column-position":"right",...l,children:t}),u[8]=t,u[9]=r,u[10]=l,u[11]=o,u[12]=c):c=u[12],c}function E(){let e,t=(0,i.c)(1);return(0,o.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:d.banner,children:(0,a.jsx)(c.Y0,{})}),t[0]=e):e=t[0],e):null}let L="(max-width: 1024px)",R="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function A(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(R);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function D(e){let t,n,o,c,u,m,p,f,g,b,w,j,N,k,C,D=(0,i.c)(30);D[0]!==e?({children:t,className:n,mainColumn:f,"data-testid":o,secondaryColumnState:p,resourcePanelState:m,faviconOverride:c,mobileSecondaryColumnDirection:g,...u}=e,D[0]=e,D[1]=t,D[2]=n,D[3]=o,D[4]=c,D[5]=u,D[6]=m,D[7]=p,D[8]=f,D[9]=g):(t=D[1],n=D[2],o=D[3],c=D[4],u=D[5],m=D[6],p=D[7],f=D[8],g=D[9]);let P=void 0===f?"left":f,O=void 0===g?"horizontal":g;D[10]===Symbol.for("react.memo_cache_sentinel")?(b={banner:E,header:x,sidebar:S,columnLeft:I,columnRight:T},D[10]=b):b=D[10];let[B]=(0,l.H)(t,b),F=function(e){if(!e||!(0,r.isValidElement)(e))return!1;let t=!1,n=!1,a=e.props.children;for(let e of r.Children.toArray(a))(0,r.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===v&&(n=!0));return t&&n}(B.header||null),M=!!B.columnLeft&&!B.columnRight||!B.columnLeft&&!!B.columnRight,$=!!B.columnLeft&&!!B.columnRight,V=!F&&!M,U=function(e,t,n){let a,s,l,o,c,d,u,m=(0,i.c)(27),[p,h]=(0,r.useState)(A),[f,g]=(0,r.useState)(!1),y=(0,r.useState)(!1),v=(0,r.useState)(!1),[x,b]=t??y,[_,w]=n??v;m[0]!==w||m[1]!==b?(a=e=>{e?(b(!1),w(!1)):g(!1)},m[0]=w,m[1]=b,m[2]=a):a=m[2];let j=function(e,t){let n,a,s,l=(0,i.c)(6);l[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,l[0]=e,l[1]=n):n=l[1];let[o,c]=(0,r.useState)(n);return l[2]!==t||l[3]!==e?(a=()=>{let n=window.matchMedia(e),a=e=>{c(e.matches),t&&t(e.matches)};return c(n.matches),n.addEventListener("change",a),()=>{n.removeEventListener("change",a)}},s=[e,t],l[2]=t,l[3]=e,l[4]=a,l[5]=s):(a=l[4],s=l[5]),(0,r.useEffect)(a,s),o}(L,a),N=(0,r.useRef)(null),k=(0,r.useRef)(null);m[3]!==j||m[4]!==p||m[5]!==f?(s=()=>{if(j)g(!f);else{let e=!p;h(e);if("undefined"!=typeof window)try{localStorage.setItem(R,JSON.stringify(e))}catch{}}},m[3]=j,m[4]=p,m[5]=f,m[6]=s):s=m[6];let C=s;m[7]!==x||m[8]!==w||m[9]!==b?(l=()=>{x&&w(!1),b(!x)},m[7]=x,m[8]=w,m[9]=b,m[10]=l):l=m[10];let S=l;m[11]!==_||m[12]!==w?(o=()=>{w(!_)},m[11]=_,m[12]=w,m[13]=o):o=m[13];let I=o;return m[14]!==f?(c=()=>{if(f&&k.current){let e=e=>{k.current&&!k.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},d=[f],m[14]=f,m[15]=c,m[16]=d):(c=m[15],d=m[16]),(0,r.useEffect)(c,d),m[17]!==j||m[18]!==e||m[19]!==_||m[20]!==x||m[21]!==p||m[22]!==f||m[23]!==I||m[24]!==S||m[25]!==C?(u={sidebarExpanded:p,sidebarVisible:f,toggleSidebar:C,secondaryColumnVisible:x,toggleSecondaryColumn:S,resourcePanelOpen:_,toggleResourcePanel:I,layoutBreakpoint:j,mainColumn:e,containerRef:N,sidebarRef:k},m[17]=j,m[18]=e,m[19]=_,m[20]=x,m[21]=p,m[22]=f,m[23]=I,m[24]=S,m[25]=C,m[26]=u):u=m[26],u}(P,p,m),{containerRef:q,secondaryColumnVisible:W,sidebarExpanded:H,resourcePanelOpen:K}=U,G=function(e,t){let n,a,s=(0,i.c)(6),[l,o]=(0,r.useState)(!1),c=(0,r.useRef)(void 0);return void 0!==s[0]||s[1]!==e.current?(n=()=>{if(!e.current)return;let t=new ResizeObserver(e=>{o(!0),c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{o(!1)},150)});return t.observe(e.current),()=>{t.disconnect(),c.current&&clearTimeout(c.current)}},s[0]=t,s[1]=e.current,s[2]=n):n=s[2],s[3]!==t||s[4]!==e?(a=[e,t],s[3]=t,s[4]=e,s[5]=a):a=s[5],(0,r.useEffect)(n,a),l}(q),z=h.M,Q=(0,s.$)(d.container,V&&d.panelView,F&&d.splitView,F&&"right"===P&&d.mainColumnRight,W&&d.secondaryColumnVisible,!W&&$&&d.secondaryColumnHidden,K&&d.resourcePanelOpen,M&&d.monoView,!H&&d.sidebarCondensed,G&&d.resizing,"vertical"===O&&d.verticalSecondaryColumn,n);return D[11]!==c?(w=c&&(0,a.jsx)("span",{"data-favicon-override":c,"data-testid":"favicon-override"}),D[11]=c,D[12]=w):w=D[12],D[13]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(E,{}),D[13]=j):j=D[13],D[14]!==B.header?(N=B.header||(0,a.jsx)(_,{}),D[14]=B.header,D[15]=N):N=D[15],D[16]!==q||D[17]!==o||D[18]!==u||D[19]!==B.columnLeft||D[20]!==B.columnRight||D[21]!==B.sidebar||D[22]!==Q||D[23]!==w||D[24]!==N?(k=(0,a.jsxs)("div",{className:Q,"data-testid":o,ref:q,...u,children:[w,j,N,B.sidebar,B.columnLeft,B.columnRight]}),D[16]=q,D[17]=o,D[18]=u,D[19]=B.columnLeft,D[20]=B.columnRight,D[21]=B.sidebar,D[22]=Q,D[23]=w,D[24]=N,D[25]=k):k=D[25],D[26]!==U||D[27]!==z.Provider||D[28]!==k?(C=(0,a.jsx)(z.Provider,{value:U,children:k}),D[26]=U,D[27]=z.Provider,D[28]=k,D[29]=C):C=D[29],C}let P=Object.assign(D,{Banner:E,Sidebar:S,ColumnLeft:I,ColumnRight:T,Header:x,HeaderLeft:y,HeaderRight:v});try{S.displayName||(S.displayName="LayoutSidebar")}catch{}try{I.displayName||(I.displayName="ColumnLeft")}catch{}try{T.displayName||(T.displayName="ColumnRight")}catch{}try{E.displayName||(E.displayName="Banner")}catch{}try{L.displayName||(L.displayName="LAYOUT_BREAKPOINT")}catch{}try{D.displayName||(D.displayName="LayoutRoot")}catch{}try{P.displayName||(P.displayName="Layout")}catch{}},28177:(e,t,n)=>{n.d(t,{n:()=>r});var a=n(74848),i=n(21728),s=n(38621);function r(e){let t,n=(0,i.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},29607:(e,t,n)=>{n.d(t,{jZ:()=>u,s2:()=>m});var a=n(74848),i=n(21728),s=n(81960),r=n(40090),l=n(34164),o=n(96540),c=n(69599);let d={container:"SidebarNavigation-module__container--XJoVm",condensed:"SidebarNavigation-module__condensed--FtKTo",list:"SidebarNavigation-module__list--bB1nv",section:"SidebarNavigation-module__section--IspfT",titleContainer:"SidebarNavigation-module__titleContainer--oAM2L",title:"SidebarNavigation-module__title--aV4qO",empty:"SidebarNavigation-module__empty--Bbzym",emptyV1:"SidebarNavigation-module__emptyV1--K004v",emptyV2:"SidebarNavigation-module__emptyV2--GBxB_",emptyStateHeading:"SidebarNavigation-module__emptyStateHeading--MBsqt",emptyStateText:"SidebarNavigation-module__emptyStateText--nQR_F"};function u(e){let t,n,s,r=(0,i.c)(10),{children:c,isCondensed:u,"aria-label":m,className:p}=e,h=void 0===m?"Navigation":m,f=(0,o.useId)(),g=`${f}-navigation`,y=u&&d.condensed;return r[0]!==p||r[1]!==y?(t=(0,l.$)(d.container,y,p),r[0]=p,r[1]=y,r[2]=t):t=r[2],r[3]!==c?(n=(0,a.jsx)("div",{className:d.section,children:c}),r[3]=c,r[4]=n):n=r[4],r[5]!==h||r[6]!==g||r[7]!==t||r[8]!==n?(s=(0,a.jsx)("nav",{"aria-label":h,id:g,tabIndex:-1,className:t,children:n}),r[5]=h,r[6]=g,r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function m(e){let t,n,s,l=(0,i.c)(14),{title:c,children:u,isLoading:m,isEmpty:h,emptyStateTitle:f,emptyStateText:g,viewMoreLink:y,trailingAction:v}=e,x=void 0===f?"No items":f,b=void 0===g?"No items to display.":g,_=(0,o.useId)();return l[0]!==_||l[1]!==c||l[2]!==v?(t=c&&(0,a.jsxs)("div",{className:d.titleContainer,children:[(0,a.jsx)("h4",{id:_,className:d.title,children:c}),v||null]}),l[0]=_,l[1]=c,l[2]=v,l[3]=t):t=l[3],l[4]!==u||l[5]!==b||l[6]!==x||l[7]!==h||l[8]!==m||l[9]!==y?(n=h&&m?(0,a.jsx)(r.r,{lines:5}):h?(0,a.jsx)(p,{title:x,text:b}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("ul",{className:d.list,children:u}),y]}),l[4]=u,l[5]=b,l[6]=x,l[7]=h,l[8]=m,l[9]=y,l[10]=n):n=l[10],l[11]!==t||l[12]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,n]}),l[11]=t,l[12]=n,l[13]=s):s=l[13],s}function p(e){let t,n,r,o,u=(0,i.c)(8),{title:m,text:p}=e,h=(0,c.G7)("mission_control_sidebar_v2");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.$)(d.empty,h?d.emptyV2:d.emptyV1),u[0]=t):t=u[0],u[1]!==m?(n=(0,a.jsx)(s.A,{as:"h3",className:d.emptyStateHeading,children:m}),u[1]=m,u[2]=n):n=u[2],u[3]!==p?(r=(0,a.jsx)("span",{className:d.emptyStateText,children:p}),u[3]=p,u[4]=r):r=u[4],u[5]!==n||u[6]!==r?(o=(0,a.jsxs)("div",{className:t,children:[n,r]}),u[5]=n,u[6]=r,u[7]=o):o=u[7],o}try{u.displayName||(u.displayName="SidebarNavigation")}catch{}try{m.displayName||(m.displayName="SidebarSection")}catch{}try{p.displayName||(p.displayName="EmptyState")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>w});var a=n(74848),i=n(21728),s=n(96540),r=n(34164),l=n(88934),o=n(40090);let c={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemContent:"ListBlock-module__itemContent--cacSg",actions:"ListBlock-module__actions--LfUWo",itemClickable:"ListBlock-module__itemClickable--AFcjc",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function d(e){let t,n,s=(0,i.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)(c.container,o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,a.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function u(e){let t,n,s=(0,i.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)(c.header,o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,a.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function m(e){let t,n,s,r,l=(0,i.c)(11);if(l[0]!==e?({children:t,loading:s,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=s):(t=l[1],n=l[2],s=l[3]),void 0!==s&&s){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(p),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,a.jsx)("ul",{className:c.list,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(r=(0,a.jsx)("ul",{className:c.list,...n,children:t}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r}function p(e,t){return(0,a.jsx)(g,{},t)}function h(e){let t,n,o,d=(0,i.c)(47),u=null,m=null,p=null,h=null,g=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===y?u=t:t.type===v?m=t:t.type===x?p=t:t.type===b?h=t:t.type===f&&(g=t));d[0]=e.children,d[1]=u,d[2]=m,d[3]=p,d[4]=h,d[5]=g}else u=d[1],m=d[2],p=d[3],h=d[4],g=d[5];d[6]!==p||d[7]!==u||d[8]!==h||d[9]!==m?(t=(0,a.jsxs)(a.Fragment,{children:[u,m,p,h]}),d[6]=p,d[7]=u,d[8]=h,d[9]=m,d[10]=t):t=d[10];let _=t;if("href"in e){let t,n,i,s,o,u;if(d[11]!==e?({href:t,isExternalLink:i,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=i):(t=d[12],n=d[13],i=d[14]),void 0!==i&&i){let e,i,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(c.itemContent,c.itemClickable),d[15]=e):e=d[15],d[16]!==_||d[17]!==t||d[18]!==n?(i=(0,a.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:_}),d[16]=_,d[17]=t,d[18]=n,d[19]=i):i=d[19],d[20]!==g||d[21]!==i?(s=(0,a.jsxs)("li",{className:c.item,children:[i,g]}),d[20]=g,d[21]=i,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(c.itemContent,c.itemClickable),d[23]=s):s=d[23],d[24]!==_||d[25]!==t||d[26]!==n?(o=(0,a.jsx)(l.N_,{...n,to:t,className:s,children:_}),d[24]=_,d[25]=t,d[26]=n,d[27]=o):o=d[27],d[28]!==g||d[29]!==o?(u=(0,a.jsxs)("li",{className:c.item,children:[o,g]}),d[28]=g,d[29]=o,d[30]=u):u=d[30],u}if("onClick"in e){let t,n,i,s,l;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.$)(c.itemContent,c.itemClickable),d[34]=i):i=d[34],d[35]!==_||d[36]!==t||d[37]!==n?(s=(0,a.jsx)("button",{...n,className:i,onClick:t,children:_}),d[35]=_,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==g||d[40]!==s?(l=(0,a.jsxs)("li",{className:c.item,children:[s,g]}),d[39]=g,d[40]=s,d[41]=l):l=d[41],l}return d[42]!==_?(n=(0,a.jsx)("div",{className:c.itemContent,children:_}),d[42]=_,d[43]=n):n=d[43],d[44]!==g||d[45]!==n?(o=(0,a.jsxs)("li",{className:c.item,children:[n,g]}),d[44]=g,d[45]=n,d[46]=o):o=d[46],o}function f(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:c.actions,children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("li",{className:c.item,children:(0,a.jsx)("div",{className:c.skeletonItem,children:(0,a.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function y(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:c.leadingVisual,children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("h3",{className:c.title,children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:c.description,children:s}),n[0]=s,n[1]=t):t=n[1],t}function b(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("div",{className:c.metadata,children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,i.c)(2),{children:s}=e;return n[0]!==s?(t=(0,a.jsx)("li",{className:c.emptyState,children:s}),n[0]=s,n[1]=t):t=n[1],t}h.LeadingVisual=y,h.Title=v,h.Description=x,h.SecondaryDescription=b,h.Metadata=b,h.Actions=f,h.Skeleton=g;let w=d;w.Header=u,w.List=m,w.Item=h,w.EmptyState=_,w.displayName="ListBlock",u.displayName="ListBlock.Header",m.displayName="ListBlock.List",h.displayName="ListBlock.Item",y.displayName="ListBlock.Item.LeadingVisual",v.displayName="ListBlock.Item.Title",x.displayName="ListBlock.Item.Description",b.displayName="ListBlock.Item.Metadata",f.displayName="ListBlock.Item.Actions",g.displayName="ListBlock.Item.Skeleton",_.displayName="ListBlock.EmptyState";try{d.displayName||(d.displayName="ListBlock")}catch{}},31315:(e,t,n)=>{function a(e){return i(e)[0]}function i(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,i]=n.trim().split("=");e===a&&void 0!==i&&t.push({key:a,value:i})}return t}function s(e,t,n=null,a=!1,i="lax"){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let l="https:"===location.protocol?"; secure":"",o=n?`; expires=${n}`:"";!1===a&&(r=`.${r}`);try{document.cookie=`${e}=${t}; path=/; domain=${r}${o}${l}; samesite=${i}`}catch{}}function r(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),i="https:"===location.protocol?"; secure":"",s=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${s}${i}`}catch{}}n.d(t,{OR:()=>i,Ri:()=>a,TV:()=>s,Yj:()=>r})},31629:(e,t,n)=>{function a(e){return"github-graphql"===e.type}function i(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>a,ir:()=>s,jq:()=>i})},31675:(e,t,n)=>{n.d(t,{A:()=>a});let a={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>a,qD:()=>i});let a="draft",i="latest",s=a},33195:(e,t,n)=>{n.d(t,{u:()=>c});var a=n(74848),i=n(85369),s=n(96540),r=n(34164);let l={unlisted:"PullRequestStateLabel-module__unlisted--pcrfP"};var o=n(33578);function c({className:e,state:t}){let n=(0,s.useMemo)(()=>o.a[t],[t]);return t===o.Q.Unlisted?(0,a.jsxs)("span",{className:l.unlisted,children:[(0,a.jsx)(d,{})," Unlisted"]}):(0,a.jsx)(i.A,{className:(0,r.$)("flex-self-start",e),status:n.status,children:n.description})}function d(){return(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,a.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,a.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,a.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})}try{c.displayName||(c.displayName="PullRequestStateLabel")}catch{}try{d.displayName||(d.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>a,a:()=>i});let a={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},i={[a.Open]:{description:"Open",status:"pullOpened"},[a.Closed]:{description:"Closed",status:"pullClosed"},[a.Queued]:{description:"Queued",status:"pullQueued"},[a.Merged]:{description:"Merged",status:"pullMerged"},[a.Draft]:{description:"Draft",status:"draft"},[a.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>a});let a={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>l});var a=n(74848),i=n(21728);let s={container:"RunningDisplay-module__container--dUZ8X",text:"RunningDisplay-module__text--nICc0"};var r=n(74807);function l(e){let t,n,l,o,c=(0,i.c)(8),{isRunning:d,messages:u}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},c[0]=t):t=c[0];let m=t,p=u||m,h=d?p.running:p.waiting,f=d?"thinking":"static";return c[1]!==f?(n=(0,a.jsx)(r.N,{animationType:f,loopAnimation:!0}),c[1]=f,c[2]=n):n=c[2],c[3]!==h?(l=(0,a.jsx)("div",{className:s.text,children:h}),c[3]=h,c[4]=l):l=c[4],c[5]!==n||c[6]!==l?(o=(0,a.jsxs)("div",{className:s.container,children:[n,l]}),c[5]=n,c[6]=l,c[7]=o):o=c[7],o}try{l.displayName||(l.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>c,f:()=>o});var a=n(65510),i=n(20622),s=n(53885),r=n(96379),l=n(50129);function o(){let{basePageDataUrl:e}=(0,l.Yu)();return[i.u.header,`basePageDataURL:${e}`]}function c(e){let t=(0,s.e)(i.u.header),n=o();return(0,a.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>d,Y:()=>c});var a=n(21728),i=n(2635),s=n(33592),r=n(51213),l=n(72303),o=n(53419);function c(e){let t,n,c=(0,a.c)(6),d=(0,s.b)(),u=(0,i.Pk)();c[0]!==d||c[1]!==e||c[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,l.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},a=e.repository?` in repository ${e.repository}`:"",i=`
Create a draft issue using the content of the ${e.tag} task${a}.
`;await d.sendChatMessage({thread:(0,l.W)(u),content:i,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},c[0]=d,c[1]=e,c[2]=u,c[3]=t):t=c[3];let m=t;return c[4]!==m?(n={convertToDraftIssue:m},c[4]=m,c[5]=n):n=c[5],n}function d(e){let t,n,c=(0,a.c)(6),d=(0,s.b)(),u=(0,i.Pk)();c[0]!==d||c[1]!==u||c[2]!==e?(t=async()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,l.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await d.sendChatMessage({thread:(0,l.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},c[0]=d,c[1]=u,c[2]=e,c[3]=t):t=c[3];let m=t;return c[4]!==m?(n={convertAllToDraftIssues:m},c[4]=m,c[5]=n):n=c[5],n}},37510:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(46996);function i(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},i={title:t.title,description:t.description,nodes:t.nodes};return(0,a.A)(n,i)}},37673:(e,t,n)=>{n.d(t,{K:()=>d});var a=n(74848),i=n(21728),s=n(88752),r=n(96540),l=n(62828),o=n(7812),c=n(1747);function d(e){let t,n,d,u,m,p=(0,i.c)(20),{className:h,messageId:f,messageIndex:g,messageTimestamp:y,references:v,size:x}=e;p[0]!==f||p[1]!==g||p[2]!==y?(t={messageId:f,messageIndex:g,messageTimestamp:y},p[0]=f,p[1]=g,p[2]=y,p[3]=t):t=p[3];let b=(0,l.I)(t),{updateItem:_,versionedItems:w}=(0,c.xx)();return p[4]!==f||p[5]!==g||p[6]!==y||p[7]!==v||p[8]!==_?(n=()=>{for(let e of v){let t=(0,o.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:f,timestamp:y});null!=t&&_(t)}},d=[f,g,y,v,_],p[4]=f,p[5]=g,p[6]=y,p[7]=v,p[8]=_,p[9]=n,p[10]=d):(n=p[9],d=p[10]),(0,r.useEffect)(n,d),p[11]!==g||p[12]!==w?(u=e=>(0,o.wt)(e,g,w),p[11]=g,p[12]=w,p[13]=u):u=p[13],p[14]!==h||p[15]!==b||p[16]!==v||p[17]!==x||p[18]!==u?(m=(0,a.jsx)(s.t,{references:v,onClickReference:b,size:x,className:h,getReferenceVersion:u}),p[14]=h,p[15]=b,p[16]=v,p[17]=x,p[18]=u,p[19]=m):m=p[19],m}try{d.displayName||(d.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>g,E:()=>f});var a=n(74848),i=n(21728),s=n(25641),r=n(35247),l=n(38621),o=n(96540),c=n(37673),d=n(7812),u=n(1747),m=n(80947);let p={timelineEvent:"TimelineEvents-module__timelineEvent--FV3V3",icon:"TimelineEvents-module__icon--E6IJb",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3",references:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH"};function h(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function f(e,t){return e.references?.some(e=>h(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function g(e){let t,n,s,r=(0,i.c)(10),{message:l,messageIndex:o,isViewingSharedThread:c,isSharedMessage:d,isLatestMessage:u}=e;return r[0]!==l||r[1]!==o?(t=f(l)&&(0,a.jsx)(y,{message:l,messageIndex:o}),r[0]=l,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==d||r[5]!==c?(n=(0,a.jsx)(x,{isViewingSharedThread:c,isSharedMessage:d,isLatestMessage:u}),r[3]=u,r[4]=d,r[5]=c,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function y(e){let t,n,r,h,f,g,y,x=(0,i.c)(24),{message:b,messageIndex:_}=e,{updateItem:w}=(0,u.xx)();if(x[0]!==b.createdAt||x[1]!==b.id||x[2]!==b.references||x[3]!==_||x[4]!==w?(t=()=>{if(b.references)for(let e of b.references){let t=(0,d.oR)({ref:e,messageIndex:_,messageId:b.id,timestamp:b.createdAt});null!=t&&w(t)}},n=[b.references,b.id,_,b.createdAt,w],x[0]=b.createdAt,x[1]=b.id,x[2]=b.references,x[3]=_,x[4]=w,x[5]=t,x[6]=n):(t=x[5],n=x[6]),(0,o.useEffect)(t,n),x[7]!==b.references){r=Symbol.for("react.early_return_sentinel");e:{let e=b.references?.filter(v);if(!e){r=void 0;break e}for(let t of(h=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||l.CheckIcon;h.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}x[7]=b.references,x[8]=r,x[9]=h}else r=x[8],h=x[9];return r!==Symbol.for("react.early_return_sentinel")?r:(x[10]!==b.createdAt||x[11]!==b.id||x[12]!==b.references||x[13]!==_?(f=b.references&&b.references.length>0&&(0,a.jsx)(c.K,{className:p.references,messageId:b.id,messageTimestamp:b.createdAt,messageIndex:_,references:b.references,size:"medium"}),x[10]=b.createdAt,x[11]=b.id,x[12]=b.references,x[13]=_,x[14]=f):f=x[14],x[15]!==b.content||x[16]!==b.createdAt||x[17]!==b.id||x[18]!==_||x[19]!==h?(g=h.map(e=>{let{type:t,markdownContent:n,icon:i}=e;return(0,a.jsxs)("div",{className:p.timelineEvent,children:[(0,a.jsx)(i,{className:p.icon}),(0,a.jsx)(m.G,{autoOpenPreviewPane:!1,markdown:n,messageId:b.id,messageIndex:_,messageTimestamp:b.createdAt,accessibleHeader:(0,s.hV)("Timeline",b.content??"")})]},t)}),x[15]=b.content,x[16]=b.createdAt,x[17]=b.id,x[18]=_,x[19]=h,x[20]=g):g=x[20],x[21]!==f||x[22]!==g?(y=(0,a.jsxs)(a.Fragment,{children:[f,g]}),x[21]=f,x[22]=g,x[23]=y):y=x[23],y)}function v(e){return h(e)}function x(e){let t,n,s,o=(0,i.c)(9),{isSharedMessage:c,isViewingSharedThread:d,isLatestMessage:u}=e;return o[0]!==c||o[1]!==d?(t=c&&!d&&(0,a.jsxs)("div",{className:p.situationalTimelineEvent,children:[(0,a.jsx)(l.LinkIcon,{className:p.icon})," Messages up to this point are included in shared link"]}),o[0]=c,o[1]=d,o[2]=t):t=o[2],o[3]!==u||o[4]!==d?(n=u&&r.W.copilotDuplicateThread&&d&&(0,a.jsxs)("div",{className:p.situationalTimelineEvent,children:[(0,a.jsx)(l.RepoForkedIcon,{className:p.icon})," Messages beyond this point will start a new private chat"]}),o[3]=u,o[4]=d,o[5]=n):n=o[5],o[6]!==t||o[7]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,n]}),o[6]=t,o[7]=n,o[8]=s):s=o[8],s}try{g.displayName||(g.displayName="TimelineEvents")}catch{}try{y.displayName||(y.displayName="UserMessageTimelineEvent")}catch{}try{x.displayName||(x.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>i,t:()=>a});let a=400,i="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{Zi:()=>o,og:()=>l});var a=n(40235),i=n(70170),s=n(70263),r=n(96540);function l(e,t,n,a){o(e,t,n,a)}function o(e,t,n,l){let o=(0,s.A)(),c=(0,r.useMemo)(()=>(0,i.n)(()=>{o()&&t()},l??2e3),[o,t,l]),d=(0,r.useCallback)(e=>{if(n&&e.event_updates)for(let[t,a]of Object.entries(n))!!e.event_updates[t]==!!a&&window.setTimeout(c,e.wait||0);else window.setTimeout(c,e.wait||0)},[c,n]);(0,a.x)(e,d)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var a=n(38621),i=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:i.FD},text:{name:"Text",description:"Free form text input",icon:i.md},boolean:{name:"Boolean",description:"True or false value",icon:i.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:i.wB},date:{name:"Date",description:"Date or macro",icon:a.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39111:(e,t,n)=>{n.d(t,{X:()=>i});var a=n(54571);function i(e){let t=e.join(","),[n]=(0,a.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},39344:(e,t,n)=>{n.d(t,{K:()=>N});var a=n(74848),i=n(21728),s=n(38621),r=n(67955),l=n(57352),o=n(54070),c=n(34164),d=n(96540);let u={container:"IssueTree-module__container--kYTT7",subHeader:"IssueTree-module__subHeader--BDblp",tree:"IssueTree-module__tree--GQG9_",grid:"IssueTree-module__grid--hqjkj",description:"IssueTree-module__description--b8yCi",item:"IssueTree-module__item--th4vZ",rootItem:"IssueTree-module__rootItem--hxb6j",spacer:"IssueTree-module__spacer--Z4HHo",leadingVisual:"IssueTree-module__leadingVisual--e_q3O",content:"IssueTree-module__content--Ko11D",title:"IssueTree-module__title--v0mbM",blockedBy:"IssueTree-module__blockedBy--z0s4g",trailingVisual:"IssueTree-module__trailingVisual--SewMY"},m=d.createContext({hasTrailingVisuals:void 0}),p=d.createContext({level:0});function h(e){let t,n,s,l,o,c,p=(0,i.c)(16),{subIssueCount:h,subIssueHeaderText:y,hasTrailingVisuals:v,children:x}=e,b=void 0===y?"Sub-issues":y,_=void 0!==v&&v;if(p[0]!==x){let e=d.Children.toArray(x);t=e.find(g),n=e.filter(f),p[0]=x,p[1]=t,p[2]=n}else t=p[1],n=p[2];let w=n;p[3]!==_?(s={hasTrailingVisuals:_},p[3]=_,p[4]=s):s=p[4];let j=s,N=!!_||void 0;return p[5]!==w||p[6]!==h||p[7]!==b?(l=w.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:u.subHeader,children:[b,(0,a.jsx)(r.A,{children:h})]}),(0,a.jsx)("ul",{role:"tree",className:u.tree,children:w})]}),p[5]=w,p[6]=h,p[7]=b,p[8]=l):l=p[8],p[9]!==t||p[10]!==N||p[11]!==l?(o=(0,a.jsxs)("div",{className:u.container,"data-has-trailing-visual":N,children:[t,l]}),p[9]=t,p[10]=N,p[11]=l,p[12]=o):o=p[12],p[13]!==j||p[14]!==o?(c=(0,a.jsx)(m.Provider,{value:j,children:o}),p[13]=j,p[14]=o,p[15]=c):c=p[15],c}function f(e){return d.isValidElement(e)&&e.type===v}function g(e){return d.isValidElement(e)&&e.type===y}function y(e){let t,n,s,r=(0,i.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let l=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)(u.item,u.rootItem),r[1]=n):n=r[1],r[2]!==e?(s=(0,a.jsx)(p.Provider,{value:l,children:(0,a.jsx)("div",{className:n,children:(0,a.jsx)(_,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function v(e){let t,n,s,r,l,o,c,m,h,f=(0,i.c)(19);if(f[0]!==e?({children:t,...n}=e,f[0]=e,f[1]=t,f[2]=n):(t=f[1],n=f[2]),f[3]!==t){let e=d.Children.toArray(t);s=e.filter(b),r=e.filter(x),f[3]=t,f[4]=s,f[5]=r}else s=f[4],r=f[5];let g=r,{level:y}=d.useContext(p),v=y+1;f[6]!==v?(l={level:v},f[6]=v,f[7]=l):l=f[7];let w=l;return f[8]!==g||f[9]!==n?(o=(0,a.jsx)(_,{...n,children:g}),f[8]=g,f[9]=n,f[10]=o):o=f[10],f[11]!==s?(c=s.length>0&&(0,a.jsx)("ul",{role:"group",className:u.tree,children:s}),f[11]=s,f[12]=c):c=f[12],f[13]!==o||f[14]!==c?(m=(0,a.jsxs)("li",{role:"treeitem","aria-selected":"false",className:u.item,children:[o,c]}),f[13]=o,f[14]=c,f[15]=m):m=f[15],f[16]!==w||f[17]!==m?(h=(0,a.jsx)(p.Provider,{value:w,children:m}),f[16]=w,f[17]=m,f[18]=h):h=f[18],h}function x(e){return!(d.isValidElement(e)&&e.type===v)}function b(e){return d.isValidElement(e)&&e.type===v}function _(e){let t,n,s,r,o,c,h,f,g=(0,i.c)(29),{leadingVisual:y,title:v,description:x,trailingBadge:b,trailingVisual:_,href:j,onClick:N,blockedBy:k}=e,{level:C}=d.useContext(p),{hasTrailingVisuals:S}=d.useContext(m),I=null!=k&&k.length>0;g[0]!==C?(t={"--level":C},g[0]=C,g[1]=t):t=g[1];let T=!!N||void 0;g[2]!==C?(n=C>0&&(0,a.jsx)("div",{className:u.spacer}),g[2]=C,g[3]=n):n=g[3],g[4]!==y?(s=(0,a.jsx)("div",{className:u.leadingVisual,children:y}),g[4]=y,g[5]=s):s=g[5];let E=j?"a":N?"button":"span";return g[6]!==j||g[7]!==N||g[8]!==E||g[9]!==v?(r=(0,a.jsx)(l.A,{as:E,className:u.title,href:j,onClick:N,children:v}),g[6]=j,g[7]=N,g[8]=E,g[9]=v,g[10]=r):r=g[10],g[11]!==r||g[12]!==b?(o=(0,a.jsxs)("div",{className:u.content,children:[r,b]}),g[11]=r,g[12]=b,g[13]=o):o=g[13],g[14]!==k||g[15]!==x||g[16]!==I?(c=(null!=x||I)&&(0,a.jsxs)("div",{className:u.description,children:[I&&(0,a.jsx)(w,{dependencyType:"Blocked by",blockedBy:k}),x]}),g[14]=k,g[15]=x,g[16]=I,g[17]=c):c=g[17],g[18]!==S||g[19]!==_?(h=S&&(0,a.jsx)("div",{className:u.trailingVisual,children:_}),g[18]=S,g[19]=_,g[20]=h):h=g[20],g[21]!==t||g[22]!==T||g[23]!==n||g[24]!==s||g[25]!==o||g[26]!==c||g[27]!==h?(f=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:u.grid,style:t,"data-has-onclick":T,children:[n,s,o,c,h]})}),g[21]=t,g[22]=T,g[23]=n,g[24]=s,g[25]=o,g[26]=c,g[27]=h,g[28]=f):f=g[28],f}function w(e){let t,n,s=(0,i.c)(9),{dependencyType:r,blockedBy:c}=e;if(!c.length)return null;let d=c[0]?.href?"a":c[0]?.onClick?"button":"span",m=c[0]?.href,p=c[0]?.onClick,h=c[0]?.title;s[0]!==d||s[1]!==m||s[2]!==p||s[3]!==h?(t=(0,a.jsx)(l.A,{"data-testid":"blocked-by-link",className:u.blockedBy,muted:!0,as:d,href:m,onClick:p,children:h}),s[0]=d,s[1]=m,s[2]=p,s[3]=h,s[4]=t):t=s[4];let f=t;return s[5]!==c.length||s[6]!==f||s[7]!==r?(n=(0,a.jsx)(o.A,{size:"medium",className:"mr-2",leadingVisual:j,text:c.length>1?(0,a.jsxs)(a.Fragment,{children:[r," ",c.length]}):(0,a.jsxs)(a.Fragment,{children:[r,": ",f]})}),s[5]=c.length,s[6]=f,s[7]=r,s[8]=n):n=s[8],n}function j(){return(0,a.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let N=Object.assign(h,{RootItem:y,Item:v});try{h.displayName||(h.displayName="Tree")}catch{}try{y.displayName||(y.displayName="TreeRootItem")}catch{}try{v.displayName||(v.displayName="TreeItem")}catch{}try{_.displayName||(_.displayName="TreeItemContent")}catch{}try{w.displayName||(w.displayName="IssueDependencies")}catch{}try{N.displayName||(N.displayName="IssueTree")}catch{}},40683:(e,t,n)=>{n.d(t,{p:()=>L,V:()=>E});var a=n(74848),i=n(21728),s=n(53419),r=n(79634),l=n(97286),o=n(38621),c=n(5524),d=n(24990),u=n(86877),m=n(99511),p=n(15220),h=n(96540),f=n(84802),g=n(25641),y=n(35247),v=n(2635),x=n(33592);let b={hideOnDesktop:"ConversationActions-module__hideOnDesktop--J5K5t"};var _=n(40260),w=n(71315),j=n(21373),N=n(69726),k=n(98552),C=n(46251),S=n(20139);let I={container:"ConversationSharingDialog-module__container--wNKq6",innerContainer:"ConversationSharingDialog-module__innerContainer--OaIjU",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",textInputContainer:"ConversationSharingDialog-module__textInputContainer--jHhX6",textInput:"ConversationSharingDialog-module__textInput--DymUf",success:"ConversationSharingDialog-module__success--zCOcd",spinner:"ConversationSharingDialog-module__spinner--KpY5f",successIcon:"ConversationSharingDialog-module__successIcon--z1nhd",mutedText:"ConversationSharingDialog-module__mutedText--r3ZSy",warningText:"ConversationSharingDialog-module__warningText--t4nnB",snapshotText:"ConversationSharingDialog-module__snapshotText--XNu1W",buttonStack:"ConversationSharingDialog-module__buttonStack--gWe8E",lockIcon:"ConversationSharingDialog-module__lockIcon--yCWzZ",cancelButton:"ConversationSharingDialog-module__cancelButton--CL34L",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--_qvsX"},T=e=>{let t,n,r,l,c,d,f,g,b,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H,K,G,z,Q=(0,i.c)(94),{closeDialog:Y,threadId:J,returnFocusRef:X,showThirdPartyMcpWarning:Z}=e,ee=void 0!==Z&&Z,et=(0,v.Pk)(),en=(0,x.b)(),[ea,ei]=(0,h.useState)(!1),[es,er]=(0,h.useState)(!1),[el,eo]=(0,h.useState)(!1),[ec,ed]=(0,h.useState)(!1),{selectedThreadID:eu,ssoOrganizations:em,apiUrl:ep,threads:eh}=et;Q[0]!==eu||Q[1]!==J||Q[2]!==eh?(t=eh.get(J||eu),Q[0]=eu,Q[1]=J,Q[2]=eh,Q[3]=t):t=Q[3];let ef=t;Q[4]!==ef?.sharedID?(n=()=>ef?.sharedID||"",Q[4]=ef?.sharedID,Q[5]=n):n=Q[5];let[eg,ey]=(0,h.useState)(n);Q[6]!==ef?(r=()=>ef?.sharedMessageID?ef.sharedMessageID:"",Q[6]=ef,Q[7]=r):r=Q[7];let[ev,ex]=(0,h.useState)(r),eb=w.fV.origin,e_=`${eb}/copilot/share/${eg}`;Q[8]!==ea?(l=()=>{if(ea){let e=setTimeout(()=>ei(!1),1500);return()=>clearTimeout(e)}},c=[ea],Q[8]=ea,Q[9]=l,Q[10]=c):(l=Q[9],c=Q[10]),(0,h.useEffect)(l,c),Q[11]!==el?(d=()=>{if(el){let e=setTimeout(()=>eo(!1),1500);return()=>clearTimeout(e)}},f=[el],Q[11]=el,Q[12]=d,Q[13]=f):(d=Q[12],f=Q[13]),(0,h.useEffect)(d,f),Q[14]!==e_?(g=async()=>{try{await (0,_.D)(e_),ei(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},Q[14]=e_,Q[15]=g):g=Q[15];let ew=g;Q[16]!==ef?.sharedID||Q[17]!==eu||Q[18]!==J?(b=()=>{(J||eu)&&ey(ef?.sharedID||"")},Q[16]=ef?.sharedID,Q[17]=eu,Q[18]=J,Q[19]=b):b=Q[19];let ej=ef?.sharedID;Q[20]!==eu||Q[21]!==ej||Q[22]!==J?(T=[ej,eu,J],Q[20]=eu,Q[21]=ej,Q[22]=J,Q[23]=T):T=Q[23],(0,h.useEffect)(b,T),Q[24]!==ep||Q[25]!==en||Q[26]!==eu||Q[27]!==em||Q[28]!==J?(E=async()=>{er(!0);let e=J||eu,t=new S.k(ep,em),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eu?en.FindLastMessageID():"");if(n.ok){er(!1);let{sharedAt:t,sharedID:a,sharedMessageID:i}=n.payload;ey(a),eo(!0),ex(i),en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:a,sharedAt:t,sharedMessageID:i}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:a})}else er(!1)},Q[24]=ep,Q[25]=en,Q[26]=eu,Q[27]=em,Q[28]=J,Q[29]=E):E=Q[29];let eN=E;Q[30]!==ep||Q[31]!==en||Q[32]!==eu||Q[33]!==eg||Q[34]!==ec||Q[35]!==em||Q[36]!==J?(L=async()=>{if(!ec)return void ed(!0);ed(!1),er(!0);let e=J||eu,t=new S.k(ep,em),n=await t.unshareThread(e);if(n.ok){er(!1),ex("");let{sharedID:t,sharedAt:a,sharedMessageID:i}=n.payload;en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:i}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eg})}else er(!1)},Q[30]=ep,Q[31]=en,Q[32]=eu,Q[33]=eg,Q[34]=ec,Q[35]=em,Q[36]=J,Q[37]=L):L=Q[37];let ek=L;Q[38]!==eN||Q[39]!==es||Q[40]!==eg?(R=()=>{if(!eg)return(0,a.jsx)(j.Q,{variant:"primary",disabled:es,onClick:eN,children:"Share"})},Q[38]=eN,Q[39]=es,Q[40]=eg,Q[41]=R):R=Q[41];let eC=R;Q[42]!==ew||Q[43]!==eg?(A=()=>{if(eg)return(0,a.jsx)(j.Q,{variant:"primary",autoFocus:!0,onClick:ew,children:"Copy link"})},Q[42]=ew,Q[43]=eg,Q[44]=A):A=Q[44];let eS=A;Q[45]!==ek||Q[46]!==es||Q[47]!==eg?(D=()=>{if(eg)return(0,a.jsx)(j.Q,{variant:"danger",disabled:es,onClick:ek,children:"Unshare"})},Q[45]=ek,Q[46]=es,Q[47]=eg,Q[48]=D):D=Q[48];let eI=D;Q[49]!==eg||Q[50]!==ec?(P=()=>{if(eg&&ec)return(0,a.jsx)(j.Q,{variant:"default",onClick:()=>ed(!1),className:I.cancelButton,children:"Cancel"})},Q[49]=eg,Q[50]=ec,Q[51]=P):P=Q[51];let eT=P;Q[52]!==ea||Q[53]!==es||Q[54]!==eg||Q[55]!==ec||Q[56]!==el?(O=()=>es?(0,a.jsxs)("div",{className:I.quickFadeUp,children:[(0,a.jsx)(N.A,{size:"small",className:I.spinner}),eg?"Unsharing chat...":"Sharing chat..."]}):ec?(0,a.jsx)("div",{className:I.quickFadeUp,children:(0,a.jsx)(k.A,{size:"medium",className:I.warningText,children:"Confirm unsharing this chat?"})}):ea?(0,a.jsxs)("div",{className:I.quickFadeUp,children:[(0,a.jsx)(o.CheckIcon,{className:I.successIcon}),(0,a.jsx)(k.A,{size:"medium",className:I.success,children:"Copied to clipboard"})]}):el?(0,a.jsxs)("div",{className:I.quickFadeUp,children:[(0,a.jsx)(o.CheckIcon,{className:I.successIcon}),(0,a.jsx)(k.A,{size:"medium",className:I.success,children:"Chat shared"})]}):eg?(0,a.jsxs)("div",{children:[(0,a.jsx)(o.UnlockIcon,{className:I.lockIcon}),(0,a.jsx)(k.A,{size:"medium",className:I.mutedText,children:"Visible to anyone with the link"})]}):(0,a.jsx)("div",{}),Q[52]=ea,Q[53]=es,Q[54]=eg,Q[55]=ec,Q[56]=el,Q[57]=O):O=Q[57];let eE=O,eL=eg?"Chat shared":"Share chat";return Q[58]!==ev||Q[59]!==eg||Q[60]!==ee?(B=(0,a.jsx)(C.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:ev?(0,a.jsx)("span",{children:(0,a.jsx)("span",{className:I.snapshotText,children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):eg?(0,a.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${ee?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,a.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${ee?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),Q[58]=ev,Q[59]=eg,Q[60]=ee,Q[61]=B):B=Q[61],Q[62]!==e_||Q[63]!==eg?(F=eg&&(0,a.jsx)("div",{className:I.innerContainer,children:(0,a.jsx)("div",{className:I.sharedLinkContainer,children:(0,a.jsxs)(u.A,{id:"share-link",className:I.textInputContainer,children:[(0,a.jsx)(u.A.Label,{children:"Share link"}),(0,a.jsx)(m.A,{size:"large",readOnly:!0,value:eg&&e_,className:I.textInput})]})})}),Q[62]=e_,Q[63]=eg,Q[64]=F):F=Q[64],Q[65]!==B||Q[66]!==F?(M=(0,a.jsxs)(C.B,{direction:"vertical",gap:"condensed",children:[B,F]}),Q[65]=B,Q[66]=F,Q[67]=M):M=Q[67],Q[68]!==eE?($=(0,a.jsx)("div",{role:"status",children:eE()}),Q[68]=eE,Q[69]=$):$=Q[69],Q[70]!==eC?(V=eC(),Q[70]=eC,Q[71]=V):V=Q[71],Q[72]!==eT?(U=eT(),Q[72]=eT,Q[73]=U):U=Q[73],Q[74]!==eI?(q=eI(),Q[74]=eI,Q[75]=q):q=Q[75],Q[76]!==eS?(W=eS(),Q[76]=eS,Q[77]=W):W=Q[77],Q[78]!==V||Q[79]!==U||Q[80]!==q||Q[81]!==W?(H=(0,a.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[V,U,q,W]}),Q[78]=V,Q[79]=U,Q[80]=q,Q[81]=W,Q[82]=H):H=Q[82],Q[83]!==$||Q[84]!==H?(K=(0,a.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:I.buttonStack,children:[$,H]}),Q[83]=$,Q[84]=H,Q[85]=K):K=Q[85],Q[86]!==M||Q[87]!==K?(G=(0,a.jsxs)("div",{className:I.container,children:[M,K]}),Q[86]=M,Q[87]=K,Q[88]=G):G=Q[88],Q[89]!==Y||Q[90]!==X||Q[91]!==eL||Q[92]!==G?(z=(0,a.jsx)(p.l,{title:eL,onClose:Y,width:"large",returnFocusRef:X,children:G}),Q[89]=Y,Q[90]=X,Q[91]=eL,Q[92]=G,Q[93]=z):z=Q[93],z};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}function E(e){let t,n,l,d,u,m,p,h,f,y,x=(0,i.c)(25),{onOpenDialog:_,showShare:w,hideShareOnDesktop:j,isShared:N}=e,k=void 0===w||w,C=void 0!==j&&j,S=void 0!==N&&N,{canShareThread:I}=(0,r.X)(),{isWaitingOnCopilot:T,messages:E}=(0,v.Pk)();x[0]!==E?(t=(0,g.Q7)(E),x[0]=E,x[1]=t):t=x[1];let L=t;x[2]!==E?(n=(0,g.UM)(E),x[2]=E,x[3]=n):n=x[3];let R=n,A=L.length>0||T||R;return x[4]!==_?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),_("rename")},x[4]=_,x[5]=l):l=x[5],x[6]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(o.PencilIcon,{})}),x[6]=d):d=x[6],x[7]!==l?(u=(0,a.jsxs)(c.l.Item,{onSelect:l,children:[d,"Rename"]}),x[7]=l,x[8]=u):u=x[8],x[9]!==I||x[10]!==C||x[11]!==S||x[12]!==_||x[13]!==A||x[14]!==k?(m=k&&I&&(0,a.jsxs)(c.l.Item,{className:C?b.hideOnDesktop:void 0,disabled:A,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),_("share")},children:[(0,a.jsx)(c.l.LeadingVisual,{children:S?(0,a.jsx)(o.UnlockIcon,{}):(0,a.jsx)(o.LockIcon,{})}),"Share"]}),x[9]=I,x[10]=C,x[11]=S,x[12]=_,x[13]=A,x[14]=k,x[15]=m):m=x[15],x[16]!==_?(p=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),_("delete")},x[16]=_,x[17]=p):p=x[17],x[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(o.TrashIcon,{})}),x[18]=h):h=x[18],x[19]!==p?(f=(0,a.jsxs)(c.l.Item,{variant:"danger",onSelect:p,children:[h,"Delete"]}),x[19]=p,x[20]=f):f=x[20],x[21]!==f||x[22]!==u||x[23]!==m?(y=(0,a.jsxs)(a.Fragment,{children:[u,m,f]}),x[21]=f,x[22]=u,x[23]=m,x[24]=y):y=x[24],y}function L(e){let t,n,r,o,c,d,u,m,p=(0,i.c)(35),{visibleDialog:h,onClose:g,threadName:b,threadId:_,selectedThreadId:w,onStartLoading:j,onFinishLoading:N,returnFocusRef:k}=e,{threads:C}=(0,v.Pk)(),S=(0,x.b)(),I=(0,f.G)();p[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],p[0]=t):t=p[0],p[1]!==S?(n={queryKey:t,queryFn:async()=>S.service.fetchMCPServers(),placeholderData:R},p[1]=S,p[2]=n):n=p[2];let{data:E}=(0,l.I)(n);p[3]!==E?(r=E||[],p[3]=E,p[4]=r):r=p[4];let L=r,P=y.W.copilotThirdPartyMcp&&L.length>0;p[5]!==g?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},p[5]=g,p[6]=o):o=p[6];let O=o;p[7]!==S||p[8]!==I||p[9]!==g||p[10]!==N||p[11]!==j||p[12]!==w||p[13]!==_||p[14]!==C?(c=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),j();let e=C.get(_);e&&(_===w&&await I({clearTopic:!0,includeThreads:!1}),await S.deleteThread(e)),N(),g()},p[7]=S,p[8]=I,p[9]=g,p[10]=N,p[11]=j,p[12]=w,p[13]=_,p[14]=C,p[15]=c):c=p[15];let B=c;p[16]!==S||p[17]!==g||p[18]!==N||p[19]!==j||p[20]!==_||p[21]!==C?(d=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),j();let t=C.get(_);t&&await S.renameThread(t,e),N(),g()},p[16]=S,p[17]=g,p[18]=N,p[19]=j,p[20]=_,p[21]=C,p[22]=d):d=p[22];let F=d;return p[23]!==O||p[24]!==B||p[25]!==g||p[26]!==k||p[27]!==P||p[28]!==F||p[29]!==_||p[30]!==b||p[31]!==h?(u="delete"===h?(0,a.jsx)(A,{onCancel:g,onConfirm:B,returnFocusRef:k}):"rename"===h?(0,a.jsx)(D,{onCancel:g,currentName:b,onSubmit:F,returnFocusRef:k}):"share"===h?(0,a.jsx)(T,{closeDialog:O,threadId:_,returnFocusRef:k,showThirdPartyMcpWarning:P}):null,p[23]=O,p[24]=B,p[25]=g,p[26]=k,p[27]=P,p[28]=F,p[29]=_,p[30]=b,p[31]=h,p[32]=u):u=p[32],p[33]!==u?(m=(0,a.jsx)(a.Fragment,{children:u}),p[33]=u,p[34]=m):m=p[34],m}function R(e){return e}let A=e=>{let t,n=(0,i.c)(4),{onConfirm:r,onCancel:l,returnFocusRef:o}=e;return n[0]!==l||n[1]!==r||n[2]!==o?(t=(0,a.jsx)(d.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),l(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=l,n[1]=r,n[2]=o,n[3]=t):t=n[3],t},D=e=>{let t,n,r,l,o,c,d,f,g,y,v,x,b=(0,i.c)(34),{currentName:_,onCancel:w,onSubmit:j,returnFocusRef:N}=e,[k,C]=(0,h.useState)(void 0),S=(0,h.useRef)(null),I=(0,h.useId)(),T=(0,h.useId)();b[0]!==j?(t=e=>{e.preventDefault();let t=S.current?.value?.trim()??"";t?t.length>100?(C("max_length"),S.current?.focus()):(C(void 0),j(t)):(C("required"),S.current?.focus())},b[0]=j,b[1]=t):t=b[1];let E=t;b[2]!==w?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),w()},b[2]=w,b[3]=n):n=b[3];let L=n;b[4]!==T?(r=(0,a.jsx)("span",{id:T,children:"Rename chat"}),b[4]=T,b[5]=r):r=b[5],b[6]!==L?(l={content:"Cancel",onClick:L},b[6]=L,b[7]=l):l=b[7],b[8]!==I?(o={content:"Update",buttonType:"primary",type:"submit",form:I,onClick:P},b[8]=I,b[9]=o):o=b[9],b[10]!==l||b[11]!==o?(c=[l,o],b[10]=l,b[11]=o,b[12]=c):c=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=d):d=b[13];let R=k?"error-message":void 0,A=k?"true":void 0;return b[14]!==_||b[15]!==T||b[16]!==R||b[17]!==A?(f=(0,a.jsx)(m.A,{"aria-labelledby":T,"aria-describedby":R,"aria-invalid":A,ref:S,defaultValue:_,block:!0}),b[14]=_,b[15]=T,b[16]=R,b[17]=A,b[18]=f):f=b[18],b[19]!==k?(g=k&&(0,a.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===k?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=k,b[20]=g):g=b[20],b[21]!==f||b[22]!==g?(y=(0,a.jsxs)(u.A,{required:!0,children:[d,f,g]}),b[21]=f,b[22]=g,b[23]=y):y=b[23],b[24]!==I||b[25]!==E||b[26]!==y?(v=(0,a.jsx)("form",{id:I,onSubmit:E,children:y}),b[24]=I,b[25]=E,b[26]=y,b[27]=v):v=b[27],b[28]!==L||b[29]!==N||b[30]!==v||b[31]!==r||b[32]!==c?(x=(0,a.jsx)(p.l,{title:r,onClose:L,width:"small",footerButtons:c,initialFocusRef:S,returnFocusRef:N,children:v}),b[28]=L,b[29]=N,b[30]=v,b[31]=r,b[32]=c,b[33]=x):x=b[33],x};try{E.displayName||(E.displayName="ConversationActions")}catch{}try{L.displayName||(L.displayName="ConversationActionDialogs")}catch{}try{A.displayName||(A.displayName="DeleteDialog")}catch{}try{D.displayName||(D.displayName="RenameDialog")}catch{}function P(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},41649:(e,t,n)=>{n.d(t,{K:()=>r});var a=n(21728),i=n(88431),s=n(96540);let r=e=>{let t,n,r,l=(0,a.c)(4),o=(0,s.useRef)(e);return l[0]!==e?(t=()=>{o.current=e},n=[e],l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,i.N)(t,n),l[3]===Symbol.for("react.memo_cache_sentinel")?(r=(...e)=>o.current?.(...e),l[3]=r):r=l[3],r}},41746:(e,t,n)=>{n.d(t,{V:()=>LoopsPlugin});var a,i,s=n(50467),r=n(65411),l=n(82590),o=n(74848),c=n(85094),d=n(47970),u=n(21728),m=n(21373),p=n(46665),h=n(46857),f=n(96540);let g={container:"LoopBlock-module__container--F3X80",streaming:"LoopBlock-module__streaming--kzTU_",header:"LoopBlock-module__header--Bmyfz",headerCollapsed:"LoopBlock-module__headerCollapsed--Yoo66",expandButton:"LoopBlock-module__expandButton--kYkwN",buttonText:"LoopBlock-module__buttonText--pH2DI",content:"LoopBlock-module__content--SQW7_",node:"LoopBlock-module__node--GZLd9",iconContainer:"LoopBlock-module__iconContainer--QF1t5",checkIcon:"LoopBlock-module__checkIcon--_Toxw",nodeTitle:"LoopBlock-module__nodeTitle--upYDV"};var y=n(38621),v=n(34164);function x(e){let t,n,a,i,s,r,l,c,d,p=(0,u.c)(26),{loop:h,headerButton:x,isStreaming:b}=e,[_,w]=(0,f.useState)(!0);if(!h)return null;p[0]!==_?(t=()=>w(!_),p[0]=_,p[1]=t):t=p[1];let j=t,N=b&&g.streaming;p[2]!==N?(n=(0,v.$)(g.container,N),p[2]=N,p[3]=n):n=p[3];let k=!_&&g.headerCollapsed;return p[4]!==k?(a=(0,v.$)(g.header,k),p[4]=k,p[5]=a):a=p[5],p[6]!==_?(i=_?(0,o.jsx)(y.ChevronDownIcon,{size:16}):(0,o.jsx)(y.ChevronRightIcon,{size:16}),p[6]=_,p[7]=i):i=p[7],p[8]!==h.title?(s=(0,o.jsx)("span",{className:g.buttonText,children:h.title}),p[8]=h.title,p[9]=s):s=p[9],p[10]!==i||p[11]!==s||p[12]!==j?(r=(0,o.jsx)(m.Q,{variant:"invisible",onClick:j,className:g.expandButton,leadingVisual:i,children:s}),p[10]=i,p[11]=s,p[12]=j,p[13]=r):r=p[13],p[14]!==x||p[15]!==a||p[16]!==r?(l=(0,o.jsxs)("div",{className:a,children:[r,x]}),p[14]=x,p[15]=a,p[16]=r,p[17]=l):l=p[17],p[18]!==_||p[19]!==b||p[20]!==h.nodes?(c=_&&(0,o.jsx)("div",{className:g.content,children:h.nodes.map((e,t)=>{let n=b&&t===h.nodes.length-1;return(0,o.jsxs)("div",{className:g.node,children:[(0,o.jsx)("div",{className:g.iconContainer,children:(0,o.jsx)(y.CheckCircleFillIcon,{size:16,className:g.checkIcon})}),n&&!e.title?null:(0,o.jsx)("span",{className:g.nodeTitle,children:e.title})]},e.id)})}),p[18]=_,p[19]=b,p[20]=h.nodes,p[21]=c):c=p[21],p[22]!==c||p[23]!==n||p[24]!==l?(d=(0,o.jsxs)("div",{className:n,children:[l,c]}),p[22]=c,p[23]=n,p[24]=l,p[25]=d):d=p[25],d}try{x.displayName||(x.displayName="LoopBlockContent")}catch{}var b=n(91348),_=n(12465),w=n(37510),j=n(99993);function N(e){let t,n,a,i,s=(0,u.c)(15),{isStreaming:r}=e,l=function(){let{message:e}=(0,p.V)(),t=(0,h.O)(e);return t?.pipeline??null}(),{mutate:c}=(0,_.P)(),{data:d}=(0,j._N)();s[0]!==d||s[1]!==l||s[2]!==c?(t=()=>{if(!d||!l)return;let e=(0,b.kX)({...l,id:d.id},[]);c({loopID:d.id,updateFn:()=>e})},s[0]=d,s[1]=l,s[2]=c,s[3]=t):t=s[3];let f=t;s[4]!==r||s[5]!==d||s[6]!==l?(n=d&&!r&&!(0,w.S)(d,l),s[4]=r,s[5]=d,s[6]=l,s[7]=n):n=s[7];let g=n;s[8]!==f||s[9]!==g?(a=g?(0,o.jsx)(m.Q,{variant:"invisible",onClick:f,children:"Restore"}):null,s[8]=f,s[9]=g,s[10]=a):a=s[10];let y=a;return s[11]!==r||s[12]!==l||s[13]!==y?(i=(0,o.jsx)(x,{loop:l,headerButton:y,isStreaming:r}),s[11]=r,s[12]=l,s[13]=y,s[14]=i):i=s[14],i}try{N.displayName||(N.displayName="LoopBlock")}catch{}let k="data-loop-block",C=(0,c.F)(k),S={div:(e,t)=>{let n=(0,c.k)(e,k);return n?(0,o.jsx)(N,{...n}):t}};function I(){return{transformMarkdown:e=>(0,d.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[C]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,d.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&C in a.properties&&n.children.splice(t,1,a)}),reactComponents:S}}var T=n(54908),E=n(35750),L=n(18150),R=n(85242),A=n(88243),D=n(16213),P=n(25641),O=n(46062),B=n(53419),F=new WeakMap,M=new WeakMap,$=new WeakMap,V=new WeakSet,U=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let a=(0,O.wv)(),i=t??a.id,s=await (0,E._)(this,F).getAuthToken(),r=await (0,P.p)({basePath:(0,E._)(this,M),body:{messages:e,model:i,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,E._)(this,U).integrationID,realIp:(0,E._)(this,$),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,B.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,A._)(this,V,q).call(this,r.body,n))}constructor(e,t,n=""){(0,D._)(this,V),(0,L._)(this,U,{get:W,set:void 0}),(0,L._)(this,F,{writable:!0,value:void 0}),(0,L._)(this,M,{writable:!0,value:void 0}),(0,L._)(this,$,{writable:!0,value:void 0}),(0,R._)(this,M,e),(0,R._)(this,F,t),(0,R._)(this,$,n)}};async function*q(e,t){let n=new TextDecoder("utf-8"),a=e.getReader(),i="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await a.read();if(e)break;for(i+=n.decode(s);;){if(i.startsWith("data: [DONE]"))return;let e=i.indexOf(`

`);if(-1===e)break;let t=i.slice(0,e).replace(/^data:\s+/,"");if(""===t){i=i.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",a=e.model,i=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:a}:void 0;(n||i)&&(yield{content:n,usage:i})}catch{}i=i.slice(e+2)}}}finally{a.releaseLock()}}function W(){return{integrationID:"copilot-chat"}}var H=n(96379),K=n(21046);let G=["SAML"],z={FORBIDDEN:["SAML error"]};function Q(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!G.includes(e.type)&&!z[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,B.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,K.vV)(n),(0,B.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var Y=n(13647),J=new WeakMap,X=new WeakMap,Z=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,Y.Xg)()){let n=await (0,E._)(this,Z).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${JSON.stringify(n.error)}`);if(Q(n.data))return n.data}let a={"X-Copilot-Api-Token":(await (0,E._)(this,X).getAuthToken()).value},i={query:e};i.loopId=t.loopId,i.version=t.version,i.executionId=t.executionId,i.nodeId=t.nodeId;let s=await (0,H.Sr)((0,E._)(this,J),{method:"POST",body:i,headers:a,signal:n?.signal});if(s.ok){let e=await s.json();if(Q(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,L._)(this,J,{writable:!0,value:void 0}),(0,L._)(this,X,{writable:!0,value:void 0}),(0,L._)(this,Z,{writable:!0,value:void 0}),(0,R._)(this,J,e),(0,R._)(this,X,t),(0,R._)(this,Z,n)}};var ee=n(26956),et=n(30388);let en={header:"LoopsView-module__header--ZnQDC",input:"LoopsView-module__input--HBzte",noResultsMessage:"LoopsView-module__noResultsMessage--OkrMA",searchContainer:"LoopsView-module__searchContainer--ypqMb"};var ea=n(70257),ei=n(33592),es=n(80770),er=n(21229),el=n(58615),eo=n(49912),ec=n(17005),ed=n(27042),eu=n(26108),em=n(5524);let ep={header:"LoopsViewHeader-module__header--miwmH",rightControls:"LoopsViewHeader-module__rightControls--tpwkz"};function eh(){let e,t,n,a,i=(0,u.c)(4),s=(0,f.useRef)(null),r=(0,f.useRef)(null);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ed.W.Anchor,{children:(0,o.jsx)(eu.K,{icon:y.KebabHorizontalIcon,"aria-label":"Menu",onClick:eg})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{s.current?.openDialog(),(0,B.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsxs)(em.l.Item,{onSelect:t,children:["Give feedback",(0,o.jsx)(em.l.LeadingVisual,{children:(0,o.jsx)(y.CommentIcon,{})})]}),i[2]=n):n=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)("div",{className:ep.header,children:(0,o.jsxs)("div",{className:ep.rightControls,children:[(0,o.jsxs)(ed.W,{anchorRef:r,children:[e,(0,o.jsx)(ed.W.Overlay,{width:"small",children:(0,o.jsx)(em.l,{children:(0,o.jsxs)(em.l.Group,{children:[n,(0,o.jsxs)(em.l.LinkItem,{href:"/settings/copilot",onClick:ef,children:[(0,o.jsx)(em.l.LeadingVisual,{children:(0,o.jsx)(y.GearIcon,{})}),"Settings"]})]})})})]}),(0,o.jsx)(ec.l,{ref:s,mode:"immersive",returnFocusRef:r})]})}),i[3]=a):a=i[3],a}function ef(){return(0,B.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function eg(){return(0,B.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{eh.displayName||(eh.displayName="LoopsViewHeader")}catch{}let ey=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}];var ev=n(76143),ex=n(88934),eb=n(99519),e_=n(43134);let ew=(0,f.lazy)(async()=>({default:(await Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js"),n.e("packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd"),n.e("packages_copilot-loops_components_Loop_tsx-packages_copilot-chat_components_ChatImage_module_-a090c1")]).then(n.bind(n,49522))).Loop}));try{ew.displayName||(ew.displayName="LazyLoop")}catch{}var ej=n(59121);function eN(e){let t,n,a,i,s=(0,u.c)(10),{value:r,onChange:l}=e;s[0]!==l?(t=e=>{l(0===e?"list":"output")},s[0]=l,s[1]=t):t=s[1];let c=t,d="list"===r;s[2]!==d?(n=(0,o.jsx)(ej.I.IconButton,{"aria-label":"List view",selected:d,icon:y.ThreeBarsIcon}),s[2]=d,s[3]=n):n=s[3];let m="output"===r;return s[4]!==m?(a=(0,o.jsx)(ej.I.IconButton,{"aria-label":"Output view",selected:m,icon:y.RowsIcon}),s[4]=m,s[5]=a):a=s[5],s[6]!==c||s[7]!==n||s[8]!==a?(i=(0,o.jsxs)(ej.I,{"aria-label":"Loops overview view mode",onChange:c,children:[n,a]}),s[6]=c,s[7]=n,s[8]=a,s[9]=i):i=s[9],i}try{eN.displayName||(eN.displayName="ListModeToggle")}catch{}var ek=n(70324),eC=n(14303);function eS(e){let t,n,a,i=(0,u.c)(14),{onDelete:s,onCopyLoop:r,onDuplicate:l,onShare:c,onEdit:d,onCopyOutput:m,loopId:p,variant:h,hasOutput:g}=e,v=void 0===h?"invisible":h,x=(0,f.useRef)(null);return p?(i[0]!==v?(t=(0,o.jsx)(ed.W.Anchor,{children:(0,o.jsx)(eu.K,{icon:y.KebabHorizontalIcon,"aria-label":"Manage loop",variant:v})}),i[0]=v,i[1]=t):t=i[1],i[2]!==g||i[3]!==p||i[4]!==r||i[5]!==m||i[6]!==s||i[7]!==l||i[8]!==d||i[9]!==c?(n=(0,o.jsx)(eC.r,{onDelete:s,onCopyLoop:r,onDuplicate:l,onShare:c,onEdit:d,onCopyOutput:m,hasOutput:g,loopId:p,returnFocusRef:x}),i[2]=g,i[3]=p,i[4]=r,i[5]=m,i[6]=s,i[7]=l,i[8]=d,i[9]=c,i[10]=n):n=i[10],i[11]!==t||i[12]!==n?(a=(0,o.jsxs)(ed.W,{anchorRef:x,children:[t,n]}),i[11]=t,i[12]=n,i[13]=a):a=i[13],a):null}try{eS.displayName||(eS.displayName="LoopsContextMenu")}catch{}var eI=n(97286),eT=n(33026),eE=n(5533);function eL(e,t){return["loop-execution",e,t]}var eR=n(97665),eA=n(93364),eD=n(48057),eP=n(90122);let eO={panel:"LoopOutput-module__panel--MrOXo",header:"LoopOutput-module__header--fcRKQ",title:"LoopOutput-module__title--pNloU",actions:"LoopOutput-module__actions--S7bni",body:"LoopOutput-module__body--fhlUk"};var eB=n(19336),eF=n(11607);function eM(e){let t,n,a,i,s,r,l,c,d,m,p,h,g,y=(0,u.c)(43),{loop:v}=e,{runLoop:x,stopLoop:_,isPreparing:w}=function(){let e=(0,eb.EY)(),t=(0,eR.jE)(),[n,a]=(0,f.useState)(!1);return{runLoop:(0,f.useCallback)(async n=>{a(!0);try{let i=await e.createExecution(n.id,n.version||eT.kj);if(!i.success)throw Error(`Failed to create execution: ${i.error}`);let s=i.data,r=(0,eD.wu)(n.id,n.version||eT.kj),l=eL(n.id,n.version||eT.kj);t.setQueryData(r,s),t.setQueryData(l,s),a(!1),await e.runPipeline(n,s.id,e=>{let a=(0,eD.wu)(n.id,n.version||eT.kj),i=eL(n.id,n.version||eT.kj);switch(e.type){case"UPDATE_NODE_VALUE":case"UPDATE_NODE_VALUE_PARTIAL":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],value:e.value,completedAt:"UPDATE_NODE_VALUE"===e.type?Date.now():void 0}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}break;case"UPDATE_NODE_ERROR":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],error:e.error,completedAt:Date.now()}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}break;case"SET_RUNNING":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],completedAt:void 0,startedAt:Date.now()}}}:null;t.setQueryData(a,n),t.setQueryData(i,n)}}},(e,n,a)=>{let i=(0,eD.wu)(e,n),s=t.getQueryData(i);return Promise.resolve(s?(0,eA.$j)(s):(0,eA.YD)("execution not found"))})}catch(e){throw a(!1),(0,K.vV)("Error running loop:",e),e}},[e,t]),stopLoop:(0,f.useCallback)(n=>{let a=(0,eD.wu)(n.id,n.version||eT.kj),i=t.getQueryData(a);i&&e.stopPipeline(i.id,()=>{t.invalidateQueries({queryKey:a}),t.invalidateQueries({queryKey:eL(n.id,n.version||eT.kj)})})},[e,t]),isPreparing:n}}();y[0]!==v?(t=(0,b.FT)(v),y[0]=v,y[1]=t):t=y[1];let j=t[0],{data:N}=function(e,t){let n,a,i,s,r=(0,u.c)(13),l=(0,eb.EY)(),o=e.id,c=e.version??"";return r[0]!==o||r[1]!==c?(n=eL(o,c),r[0]=o,r[1]=c,r[2]=n):n=r[2],r[3]!==o||r[4]!==c||r[5]!==l?(a=async()=>{let e=await l.getExecution(o,c,eT.qD);if(!e.success)return null;let t=e.data;return l.isExecutionRunning(t.id)!==(0,eE.y)(t)?null:t},r[3]=o,r[4]=c,r[5]=l,r[6]=a):a=r[6],void 0!==r[7]?(i=void 0,r[7]=t,r[8]=i):i=r[8],r[9]!==n||r[10]!==a||r[11]!==i?(s={queryKey:n,queryFn:a,enabled:!0,...i,staleTime:3e5},r[9]=n,r[10]=a,r[11]=i,r[12]=s):s=r[12],(0,eI.I)(s)}(v),k=j?N?.nodes[j.id]:void 0,C=k?.value??null,S=k?.error||null;y[2]!==N?(n=(0,eE.y)(N),y[2]=N,y[3]=n):n=y[3];let I=n,T=w||I;y[4]!==C?(a=(0,eP.DO)(C),y[4]=C,y[5]=a):a=y[5];let E=a;y[6]!==v||y[7]!==x?(i=async()=>{await x(v),(0,B.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},y[6]=v,y[7]=x,y[8]=i):i=y[8];let L=i;y[9]!==v||y[10]!==_?(s=()=>{_(v),(0,B.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},y[9]=v,y[10]=_,y[11]=s):s=y[11];let R=s;y[12]!==C||y[13]!==E?(r=async()=>{if(C)try{await navigator.clipboard.writeText(E),(0,B.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},y[12]=C,y[13]=E,y[14]=r):r=y[14];let A=r,D=`${P.Jz}/l/${v.id}`;y[15]!==v.title||y[16]!==D?(l=(0,o.jsx)("h3",{className:eO.title,children:(0,o.jsx)(eF.$,{variant:"invisible",condensed:!0,to:D,onClick:e$,children:v.title})}),y[15]=v.title,y[16]=D,y[17]=l):l=y[17],y[18]!==L||y[19]!==R||y[20]!==T||y[21]!==C?(c=(0,o.jsx)(ek.c,{isLoading:T,onClick:L,onStop:R,value:C,variant:"invisible",iconOnly:!0}),y[18]=L,y[19]=R,y[20]=T,y[21]=C,y[22]=c):c=y[22];let O=!!C;y[23]!==A||y[24]!==v.id||y[25]!==O?(d=(0,o.jsx)(eS,{loopId:v.id,onEdit:e$,onCopyOutput:A,hasOutput:O}),y[23]=A,y[24]=v.id,y[25]=O,y[26]=d):d=y[26],y[27]!==d||y[28]!==c?(m=(0,o.jsxs)("div",{className:eO.actions,children:[c,d]}),y[27]=d,y[28]=c,y[29]=m):m=y[29],y[30]!==m||y[31]!==l?(p=(0,o.jsxs)("div",{className:eO.header,children:[l,m]}),y[30]=m,y[31]=l,y[32]=p):p=y[32];let F=!!j;return y[33]!==L||y[34]!==R||y[35]!==T||y[36]!==S||y[37]!==C||y[38]!==F?(h=(0,o.jsx)("div",{className:eO.body,children:(0,o.jsx)(eB.G,{outputNodeExists:F,isRunning:T,nodeValue:C,nodeError:S,onRun:L,onStop:R})}),y[33]=L,y[34]=R,y[35]=T,y[36]=S,y[37]=C,y[38]=F,y[39]=h):h=y[39],y[40]!==p||y[41]!==h?(g=(0,o.jsxs)("div",{className:eO.panel,children:[p,h]}),y[40]=p,y[41]=h,y[42]=g):g=y[42],g}function e$(){(0,B.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{eM.displayName||(eM.displayName="LoopOutput")}catch{}let eV={list:"LoopsOutputList-module__list--DoC1u"};var eU=n(76219),eq=n(27912),eW=n(3024),eH=n(79064);function eK(e){let t,n,a,i,s,r,l=(0,u.c)(11),{chatState:c,plugin:d}=e;if(!d||!(0,eo.j)(d))throw Error("LoopsView can only be used with a LoopsPlugin");return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eq.P.Header,{children:(0,o.jsx)(eh,{})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(eq.P.Sidebar,{children:(0,o.jsx)(eW.U,{})}),l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(a=[],l[2]=a):a=l[2],l[3]!==c?(i=(0,o.jsx)(ez,{chatState:c}),l[3]=c,l[4]=i):i=l[4],l[5]!==d.service||l[6]!==i?(s=(0,o.jsx)(eb.qT,{value:d.service,children:i}),l[5]=d.service,l[6]=i,l[7]=s):s=l[7],l[8]!==d.previewUrl||l[9]!==s?(r=(0,o.jsxs)(eq.P,{"data-testid":"loops-layout",children:[t,n,(0,o.jsx)(eq.P.ColumnLeft,{children:(0,o.jsx)(eU.Q,{previewUrl:d.previewUrl,availableModels:a,sendChatMessage:eG,children:s})})]}),l[8]=d.previewUrl,l[9]=s,l[10]=r):r=l[10],r}function eG(){}function ez(e){let t,n,a,i,s,r,c,d,m,p,h,g,v,x,b,_,w,j,N=(0,u.c)(42),{chatState:k}=e,{data:C,isLoading:S}=(0,es.C)(),I=(0,ei.b)(),T=(0,ex.Zp)(),E=(0,eb.EY)(),L=(0,O.GF)(k.availableModels),[R,A]=(0,el.M)("loopsOverviewViewMode","output"),[D,F]=(0,f.useState)("");if(N[0]!==C||N[1]!==D){e:{if(!C){t=C;break e}let e=C.filter(eZ);if(!D.trim()){t=e;break e}let n=D.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}N[0]=C,N[1]=D,N[2]=t}else t=N[2];let M=t;N[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],N[3]=n):n=N[3],(0,f.useEffect)(eX,n),N[4]!==I?(a=()=>{I.selectThread(null,{includeThreads:!1,clearTopic:!0})},i=[I],N[4]=I,N[5]=a,N[6]=i):(a=N[5],i=N[6]),(0,f.useEffect)(a,i),N[7]!==L||N[8]!==E||N[9]!==I||N[10]!==T?(s=async e=>{let t=e.trim();if(""===t)return;(0,B.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),a={scopeId:l.S$},i=await I.createThread(a);await E.createLoop(n),(0,e_.aq)(n,i.id);let s={content:t,model:L,references:[],thread:i,mode:l.lh};I.sendChatMessage(s),T(`${P.Jz}/l/${n}`)},N[7]=L,N[8]=E,N[9]=I,N[10]=T,N[11]=s):s=N[11];let $=s,V=(0,f.useRef)($);N[12]!==$?(r=()=>{V.current=$},c=[$],N[12]=$,N[13]=r,N[14]=c):(r=N[13],c=N[14]),(0,f.useEffect)(r,c),N[15]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{let e=eH.Jt.getLoopEntrypointMessage();e&&(eH.Jt.setLoopEntrypointMessage(null),V.current(e.message))},m=[],N[15]=d,N[16]=m):(d=N[15],m=N[16]),(0,f.useEffect)(d,m),N[17]!==E||N[18]!==T?(p=async e=>{await E.createLoop(e),T(`${P.Jz}/l/${e.id}`)},N[17]=E,N[18]=T,N[19]=p):p=N[19];let U=p;N[20]!==A?(h=e=>{A(e)},N[20]=A,N[21]=h):h=N[21];let q=h;N[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{F(e),(0,B.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},N[22]=g):g=N[22];let W=g;return N[23]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsxs)(ee.Zf.Header,{children:[(0,o.jsx)(ee.Zf.Title,{children:"Loops"}),(0,o.jsx)(ee.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),N[23]=v):v=N[23],N[24]===Symbol.for("react.memo_cache_sentinel")?(x=[{name:"Loop",icon:(0,o.jsx)(y.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],N[24]=x):x=N[24],N[25]!==$?(b=(0,o.jsxs)("div",{className:en.header,children:[v,(0,o.jsx)("div",{className:en.input,children:(0,o.jsx)(ea.V,{modes:x,size:"large",onSubmit:$})})]}),N[25]=$,N[26]=b):b=N[26],N[27]!==M||N[28]!==q||N[29]!==S||N[30]!==C||N[31]!==D||N[32]!==R?(_=S||C&&C.length>0?(0,o.jsxs)(ee.Zf.Section,{children:[(0,o.jsxs)("div",{className:en.searchContainer,children:[(0,o.jsx)(er.D,{onSearch:W,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,o.jsx)(eN,{value:R,onChange:q}),(0,o.jsx)("h2",{className:"sr-only",children:"My loops"})]}),D&&M&&0===M.length?(0,o.jsxs)("div",{className:en.noResultsMessage,children:["No loops found matching \u201C",D,"\u201D"]}):"list"===R?(0,o.jsx)(et.qJ,{children:(0,o.jsx)(et.qJ.List,{loading:S,children:M?.map(eY)})}):(0,o.jsx)("div",{className:eV.list,children:(M||[]).map(eQ)})]}):null,N[27]=M,N[28]=q,N[29]=S,N[30]=C,N[31]=D,N[32]=R,N[33]=_):_=N[33],N[34]!==U||N[35]!==S||N[36]!==C?(w=!S&&(!C||0===C.length)&&(0,o.jsxs)(ee.Zf.Section,{children:[(0,o.jsx)(ee.Zf.Section.Title,{children:"Examples"}),(0,o.jsx)(et.qJ,{children:(0,o.jsx)(et.qJ.List,{loading:S,children:ey.map(e=>{let{loop:t}=e;return(0,o.jsxs)(et.qJ.Item,{onClick:()=>{(0,B.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),U({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,o.jsx)(et.qJ.Item.Title,{children:t.title}),(0,o.jsx)(et.qJ.Item.Description,{children:t.description})]},t.title)})})})]}),N[34]=U,N[35]=S,N[36]=C,N[37]=w):w=N[37],N[38]!==b||N[39]!==_||N[40]!==w?(j=(0,o.jsxs)(ee.Zf.Container,{width:"small",children:[b,_,w]}),N[38]=b,N[39]=_,N[40]=w,N[41]=j):j=N[41],j}function eQ(e){return(0,o.jsx)(eM,{loop:e},e.id)}function eY(e){return(0,o.jsxs)(et.qJ.Item,{href:`${P.Jz}/l/${e.id}`,onClick:eJ,children:[(0,o.jsx)(et.qJ.Item.Title,{children:e.title}),(0,o.jsx)(et.qJ.Item.Description,{children:e.description}),(0,o.jsx)(et.qJ.Item.Actions,{children:(0,o.jsx)(eS,{loopId:e.id})})]},e.id)}function eJ(){return(0,B.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function eX(){(0,ev.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js"),n.e("packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd"),n.e("packages_copilot-loops_components_Loop_tsx-packages_copilot-chat_components_ChatImage_module_-a090c1")]).then(n.bind(n,49522))}function eZ(e){return""!==e.title||0!==e.nodes.length}try{eK.displayName||(eK.displayName="LoopsView")}catch{}try{ez.displayName||(ez.displayName="LoopsViewInner")}catch{}var e0=n(49851),e1=new WeakMap,e2=new WeakMap,e3=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,A._)(this,e3,e4).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,A._)(this,e3,e4).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,A._)(this,e3,e4).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,A._)(this,e3,e4).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,A._)(this,e3,e4).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,A._)(this,e3,e4).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,a,i){return(0,A._)(this,e3,e4).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:a,nodes:n},shareID:i})}getExecution(e,t,n){return(0,A._)(this,e3,e4).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,a,i,s){return(0,A._)(this,e3,e4).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:a,nodeExecution:i,shareID:s})}shareLoop(e){return(0,A._)(this,e3,e4).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,A._)(this,e3,e4).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,a,i){return(0,A._)(this,e3,e4).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:a,nodeID:i})}constructor(e,t){(0,D._)(this,e3),(0,L._)(this,e1,{writable:!0,value:void 0}),(0,L._)(this,e2,{writable:!0,value:void 0}),(0,R._)(this,e1,e),(0,R._)(this,e2,t)}};async function e4(e){let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,E._)(this,e2)){let e=await (0,E._)(this,e2).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,H.DI)((0,E._)(this,e1),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,eA.YD)(JSON.parse(e),n)}catch(e){return(0,eA.YD)(e,n)}}let a=204===n.status?void 0:await n.json();return(0,eA.$j)(a)}var e5=n(18096);let e7={itemDescription:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi"};var e6=n(42518);function e8(e){let t,n,a=(0,u.c)(3),{onSelect:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(em.l.LeadingVisual,{children:(0,o.jsx)(e0.LP,{})}),a[0]=t):t=a[0],a[1]!==i?(n=(0,o.jsxs)(em.l.Item,{onSelect:i,children:[t,"Loops\u2026"]}),a[1]=i,a[2]=n):n=a[2],n}function e9(e){let t,n,a,i,s,r,l,c,d,m,p,h,g,y,v,x,b=(0,u.c)(48),{onSubmit:_,onDismiss:w,client:j}=e,N=(0,ei.b)(),{data:k,isError:C,isLoading:S}=function(e){let t,n,a=(0,u.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=["loop-execution-references"],a[0]=t):t=a[0],a[1]!==e?(n={queryKey:t,queryFn:()=>tn(e)},a[1]=e,a[2]=n):n=a[2],(0,eI.I)(n)}(j),[I,T]=(0,f.useState)("");b[0]!==N||b[1]!==_||b[2]!==k?(t=e=>{if(!k)return;let t=k.find(t=>t.executionID===e);t&&N.addReference(t,"loop-executions-select-panel"),_()},b[0]=N,b[1]=_,b[2]=k,b[3]=t):t=b[3];let E=t;if(b[4]!==I||b[5]!==C||b[6]!==S||b[7]!==w||b[8]!==E||b[9]!==_||b[10]!==k){let e,t,u=k?k.map(te).filter(e=>e.text.toLowerCase().includes(I.toLowerCase())):[];a=e5.X,m=!0,p="modal",h="large",g="instant",y="Select Loop output",i=w,s=_,b[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>T(e.currentTarget.value),b[24]=e):e=b[24],b[25]!==S?(r=(0,o.jsx)(e5.X.Header,{children:(0,o.jsx)(e5.X.SearchInput,{loading:S,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),b[25]=S,b[26]=r):r=b[26],n=em.l,b[27]!==C||b[28]!==S?(l=!S&&C&&(0,o.jsx)(e5.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),b[27]=C,b[28]=S,b[29]=l):l=b[29],c=!S&&0===u.length&&(0,o.jsx)(e5.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),b[30]!==E?(t=e=>(0,o.jsxs)(em.l.Item,{onSelect:()=>E(e.key),children:[e.text,(0,o.jsx)(em.l.Description,{variant:"block",className:e7.itemDescription,children:e.description})]},e.key),b[30]=E,b[31]=t):t=b[31],d=u.map(t),b[4]=I,b[5]=C,b[6]=S,b[7]=w,b[8]=E,b[9]=_,b[10]=k,b[11]=n,b[12]=a,b[13]=i,b[14]=s,b[15]=r,b[16]=l,b[17]=c,b[18]=d,b[19]=m,b[20]=p,b[21]=h,b[22]=g,b[23]=y}else n=b[11],a=b[12],i=b[13],s=b[14],r=b[15],l=b[16],c=b[17],d=b[18],m=b[19],p=b[20],h=b[21],g=b[22],y=b[23];return b[32]!==n||b[33]!==l||b[34]!==c||b[35]!==d?(v=(0,o.jsxs)(n,{children:[l,c,d]}),b[32]=n,b[33]=l,b[34]=c,b[35]=d,b[36]=v):v=b[36],b[37]!==a||b[38]!==i||b[39]!==s||b[40]!==r||b[41]!==v||b[42]!==m||b[43]!==p||b[44]!==h||b[45]!==g||b[46]!==y?(x=(0,o.jsxs)(a,{open:m,variant:p,width:h,selectionVariant:g,title:y,onCancel:i,onSubmit:s,children:[r,v]}),b[37]=a,b[38]=i,b[39]=s,b[40]=r,b[41]=v,b[42]=m,b[43]=p,b[44]=h,b[45]=g,b[46]=y,b[47]=x):x=b[47],x}function te(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let tt=[404,403];async function tn(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(tt.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,e6.C)(n,e):null}).filter(e=>!!e)}try{e8.displayName||(e8.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(a=LoopExecutionsSelectPanel).displayName||(a.displayName="LoopExecutionsSelectPanel")}catch{}try{e9.displayName||(e9.displayName="LoopExecutionsSelectPanelInner")}catch{}var ta=n(35247),ti=n(12357),ts=n(73077),tr=n(96459);let tl={previewContainer:"LoopExecutionPreview-module__previewContainer--RqSzv",buttonContainer:"LoopExecutionPreview-module__buttonContainer--i4KdB",contentContainer:"LoopExecutionPreview-module__contentContainer--k2ZO7"};try{(i=LoopExecutionPreview).displayName||(i.displayName="LoopExecutionPreview")}catch{}var to=new WeakMap,tc=new WeakMap,td=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e){return e?new Promise(t=>{let n=document.createElement("iframe");n.src=`${(0,E._)(this,to)}/code-node-execution.html`,n.setAttribute("sandbox",(0,E._)(this,td));let a=!1,i=e=>{a||(a=!0,s&&window.removeEventListener("message",s),document.body.contains(n)&&document.body.removeChild(n),t(e))},s=e=>{let t=new URL((0,E._)(this,to),window.location.origin).origin;e.origin===t&&(e.data?.type==="result"?i({success:!0,result:e.data.message}):e.data?.type==="error"&&i({success:!1,error:e.data.message}))},r=setTimeout(()=>{i({success:!1,error:"Timeout: No response"})},(0,E._)(this,tc));window.addEventListener("message",e=>{clearTimeout(r),s(e)}),n.onerror=()=>{clearTimeout(r),i({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(n),n.onload=()=>{try{n.contentWindow?.postMessage({type:"execute",code:e},(0,E._)(this,to))}catch(e){clearTimeout(r),i({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,L._)(this,to,{writable:!0,value:void 0}),(0,L._)(this,tc,{writable:!0,value:void 0}),(0,L._)(this,td,{writable:!0,value:void 0}),(0,R._)(this,to,e),(0,R._)(this,tc,t),(0,R._)(this,td,n)}};let tu=`${P.Jz}/loops`;let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(ta.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:e8,PanelComponent:(e=this.client,function(t){return(0,o.jsx)(e9,{...t,client:e})})}}}get previewComponents(){if(ta.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,tr.Z)(),a=(0,ei.b)();if("loop-execution"!==t.type)return null;let i=(0,P.JP)(t),s=async e=>{e.preventDefault(),await a.selectThread(null),n(i)};return(0,o.jsx)(eU.Q,{previewUrl:e,availableModels:[],sendChatMessage:()=>{},children:(0,o.jsxs)("div",{className:tl.previewContainer,children:[(0,o.jsx)("div",{className:tl.buttonContainer,children:(0,o.jsx)(ts.z,{href:i,leadingVisual:y.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,o.jsx)("div",{className:tl.contentContainer,children:(0,o.jsx)(ti.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:l.lh}}constructor(e,t,n,a,i,o,c){(0,s._)(this,"id",l.S$),(0,s._)(this,"displayName",l.Os),(0,s._)(this,"service",void 0),(0,s._)(this,"client",void 0),(0,s._)(this,"previewUrl",void 0),(0,s._)(this,"markdownExtensions",[I]),(0,s._)(this,"skipSyncRouteToThread",!0),(0,s._)(this,"components",[{id:"loops-list",Component:eK,routes:[l.qe]},{id:"loop-detail",Component:ew,routes:[l.bW]}]),(0,s._)(this,"slashCommand",{key:"loop",name:"Loop",description:"Automate recurring tasks using prompting",icon:y.LoopIcon,suggestions:[],execute:async(e,t,n)=>(eH.Jt.setLoopEntrypointMessage(e),n(tu),!0)}),(0,s._)(this,"navigationItems",[{id:l.S$,displayName:"Loops",href:l.QK,icon:e0.LP}]);let d=new r.J(i);this.client=new LoopsClient(n,d),this.service=new T.J(this.client,new GraphQLClient(t,d,this.client),new ChatCompletionsClient(e,d,c),new IFrameCodeExecutor(a)),this.previewUrl=o}}},42312:(e,t,n)=>{n.d(t,{KL:()=>o,U:()=>m});var a=n(74848),i=n(21728),s=n(71315),r=n(96540);let l=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function o(e){let t,n,o,m,p,h,f,g=(0,i.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[v,x]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{x(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{x(t=>t.filter(t=>t!==e))},g[2]=o):o=g[2];let _=o;g[3]!==v?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=v.filter(u).sort(d);if(0===t.length)return;let n=t.findIndex(c),a=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(a){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(a.tagName)&&!a.hasAttribute("tabindex")){a.setAttribute("tabindex","-1");let e=()=>{a.removeAttribute("tabindex"),a.removeEventListener("blur",e)};a.addEventListener("blur",e,{once:!0})}a.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},p=[v],g[3]=v,g[4]=m,g[5]=p):(m=g[4],p=g[5]),(0,r.useEffect)(m,p),g[6]===Symbol.for("react.memo_cache_sentinel")?(h={registerNavigableRef:b,unregisterNavigableRef:_},g[6]=h):h=g[6];let w=h;return g[7]!==y?(f=(0,a.jsx)(l.Provider,{value:w,children:y}),g[7]=y,g[8]=f):f=g[8],f}function c(e){return e.current?.contains(s.XC?.activeElement||null)}function d(e,t){let n=e.current,a=t.current;return n===a?0:n.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,i.c)(4),a=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:o}=(0,r.useContext)(l);return n[0]!==s||n[1]!==o?(e=()=>(s(a),()=>{o(a)}),t=[s,o],n[0]=s,n[1]=o,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),a}try{l.displayName||(l.displayName="NavigableRefContext")}catch{}try{o.displayName||(o.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>i});var a=n(91348);function i(e,t){let n=(0,a.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>o,qU:()=>l});var a=n(82075),i=n(21046);let s=(0,a.A)("localStorage"),r="copilot-loops-thread-";function l(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,i.FF)("Failed to read loop thread ID from localStorage:",e),null}}function o(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,i.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,i.FF)("Failed to remove loop thread ID from localStorage:",e)}}},44095:(e,t,n)=>{n.d(t,{_:()=>b,m:()=>_});var a=n(74848),i=n(21728),s=n(26100),r=n(2635),l=n(4817),o=n(53419),c=n(38621),d=n(69726),u=n(5524),m=n(96540),p=n(7812),h=n(1747),f=n(48881),g=n(13974),y=n(7026);let v={container:"PlanningSpecBlock-module__container--UW6_s",item:"PlanningSpecBlock-module__item--lxgT1",title:"PlanningSpecBlock-module__title--d0IjJ"};var x=n(20382);function b(e){let t,n,s,u,p,v,b,w,j,N,k=(0,i.c)(36),{yaml:C,isStreaming:S}=e,I=(0,g.p)(S),{selectedThreadID:T}=(0,r.Pk)(),{updateItem:E,openItem:L,openPreviewPane:R}=(0,h.xx)(),{messageId:A,messageIndex:D,messageTimestamp:P,setHasAutoOpenedPreviewPane:O}=(0,f.H)();k[0]!==T?(t=e=>((e,t)=>{try{var n;let t;return n=(0,x.Hh)(e),"object"!=typeof n||null==n?null:(t=n,"object"==typeof t&&null!==t&&"tag"in t&&"string"==typeof t.tag&&"name"in t&&"string"==typeof t.name&&"content"in t&&"string"==typeof t.content&&(!("repository"in t)||null==t.repository||"string"==typeof t.repository)&&1)?n:null}catch{return(0,o.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,T),k[0]=T,k[1]=t):t=k[1];let B=t,F=(0,y.M)(C,B,null);e:{let e,t;if(!F){n=null;break e}let a=`planning-spec:${F.tag}#${D}`;k[2]!==P?(e=new Date(P),k[2]=P,k[3]=e):e=k[3],k[4]!==a||k[5]!==S||k[6]!==A||k[7]!==F.content||k[8]!==F.name||k[9]!==F.repository||k[10]!==F.tag||k[11]!==e?(t={name:F.name,tag:F.tag,repository:F.repository,content:F.content,messageId:A,id:a,type:"planning-spec",isUserEdited:!1,isStreaming:S,timestamp:e},k[4]=a,k[5]=S,k[6]=A,k[7]=F.content,k[8]=F.name,k[9]=F.repository,k[10]=F.tag,k[11]=e,k[12]=t):t=k[12],n=t}let M=n;k[13]!==L||k[14]!==R||k[15]!==O?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;L(e.id,n),R(),O(!0)},k[13]=L,k[14]=R,k[15]=O,k[16]=s):s=k[16];let $=s;k[17]!==S||k[18]!==I||k[19]!==$||k[20]!==M||k[21]!==E?(u=()=>{M&&(E(M),(S||I)&&$(M,{selectItem:!0}))},p=[S,I,$,M,E],k[17]=S,k[18]=I,k[19]=$,k[20]=M,k[21]=E,k[22]=u,k[23]=p):(u=k[22],p=k[23]),(0,m.useEffect)(u,p),k[24]!==$||k[25]!==M?(v=()=>{M&&$(M)},k[24]=$,k[25]=M,k[26]=v):v=k[26];let V=v;k[27]!==T?(b=()=>(0,o.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:T}),w=[T],k[27]=T,k[28]=b,k[29]=w):(b=k[28],w=k[29]),(0,m.useEffect)(b,w),k[30]!==S?(j=()=>S?(0,a.jsx)(d.A,{size:"small",className:l.sX}):(0,a.jsx)(c.NoteIcon,{}),k[30]=S,k[31]=j):j=k[31];let U=j;return k[32]!==U||k[33]!==V||k[34]!==M?(N=(0,a.jsx)(_,{previewItem:M,onClick:V,getIcon:U}),k[32]=U,k[33]=V,k[34]=M,k[35]=N):N=k[35],N}function _(e){let t,n,r,l,o,d,m=(0,i.c)(16),{previewItem:f,onClick:g,getIcon:y}=e,{versionedItems:x}=(0,h.xx)();m[0]!==f||m[1]!==x?(t=f?(0,p.LU)(f.id,x):null,m[0]=f,m[1]=x,m[2]=t):t=m[2];let b=t;m[3]!==y?(n=y?.()||(0,a.jsx)(c.NoteIcon,{}),m[3]=y,m[4]=n):n=m[4],m[5]!==n?(r=(0,a.jsx)(u.l.LeadingVisual,{children:n}),m[5]=n,m[6]=r):r=m[6];let _=f?.name??"";return m[7]!==_?(l=(0,a.jsx)("div",{className:v.title,children:_}),m[7]=_,m[8]=l):l=m[8],m[9]!==b?(o=null!==b&&(0,a.jsx)(u.l.TrailingVisual,{children:(0,a.jsx)(s.g,{version:b})}),m[9]=b,m[10]=o):o=m[10],m[11]!==g||m[12]!==r||m[13]!==l||m[14]!==o?(d=(0,a.jsx)("div",{className:v.container,children:(0,a.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,a.jsxs)(u.l.Item,{onSelect:g,className:v.item,children:[r,l,o]})})}),m[11]=g,m[12]=r,m[13]=l,m[14]=o,m[15]=d):d=m[15],d}try{b.displayName||(b.displayName="PlanningSpecBlock")}catch{}try{_.displayName||(_.displayName="PlanningSpecBlockDisplay")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var a=n(35750),i=n(18150),s=n(61872),r=n(50467),l=n(38621);function o(e){return e.content}var c=n(90122),d=n(31629),u=n(39087),m=n(59370),p=n(53419),h=n(13647),f=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,p.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,a=await (0,c.Vq)(e),i="";for await(let s of t.chatClient.getChatCompletion(a,e.metadata?.model,t.signal))i+=s.content,s.usage&&(n=s.usage),t.onPartialResult?.(i);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:i}}validate(e){return[]}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>l.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},a=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return a?{value:a.data??null}:{value:null}}validate(e){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>l.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:h.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>l.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:h.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:o(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>l.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:h.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],a=void 0!==n?n:o(e);if("date"===e.metadata.inputType&&"string"==typeof a&&(0,m.nS)(a)){let e=(0,m.Qf)(a);if(e)return{value:(0,m.O2)(e)}}return{value:a}}validate(e){let t=[],n=e.metadata;if("object"!=typeof n||!n)return t.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),t;switch(n.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||t.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):t.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return t}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,d.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return f.j6;else return f.hO;return(0,u.J)(e,"icon")}return l.TypographyIcon},description:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:o(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>l.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:h.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,a._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,a._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e){let t=(0,a._)(this,g).get(e.type);return t?t.validate(e):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,a._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,a._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,a._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,i._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,a=new Set){if(!a.has(t)){for(let i of(a.add(t),n(t),t.children))e(i,n,a);for(let i of t.blockedBy)e(i,n,a);for(let i of t.isBlocking)e(i,n,a)}},YR:()=>function e(t,n){for(let a of(n(t),t.children))e(a,n)},u0:()=>l});var a=n(21728),i=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let a of(n.add(e),await t(e),e.children))await s(a,t,n);for(let a of e.blockedBy)await s(a,t,n);for(let a of e.isBlocking)await s(a,t,n)}}function r(e,t,n,a,i){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),l=n(r);if(null!=l){let t=s.get(l);t&&e&&(e.parent=t,t.children.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function l(){let e,t,n=(0,a.c)(6),{items:s,allOpenItems:l,versionedItems:h}=(0,i.xx)();n[0]!==l?(e=new Set(l),n[0]=l,n[1]=e):e=n[1];let f=e;return n[2]!==s||n[3]!==f||n[4]!==h?(t=r([...h.entries()].filter(p).map(e=>{let[,t]=e,n=t.find(e=>f.has(e));if(n)return s.get(n);let a=t.at(-1);return a?s.get(a):void 0}).filter(m),u,d,c,o),n[2]=s,n[3]=f,n[4]=h,n[5]=t):t=n[5],t}function o(e){return e.isBlockingTags}function c(e){return e.blockedByTags}function d(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function p(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var a=n(91348),i=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===i.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},i=(0,a.kX)(t,[]);return{messageId:e.id,pipeline:i}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Cv:()=>u,Qk:()=>y,vx:()=>f,wu:()=>h});var a=n(21728),i=n(97286),s=n(99519),r=n(5533),l=n(33026),o=n(50050),c=n(99993);let d=[400,401,403,404];function u(){let{data:e}=(0,c._N)(p,"latest"),t=(0,o.Ud)(m);return t===l.qD||t===l.kj?e:t}function m(e){return e.version}function p(e){return e?.version}function h(e,t){return["execution",e,t]}function f(){let e,t=(0,a.c)(3),{data:n}=(0,c._N)(g),i=u(),s=n??"",r=i??"";return t[0]!==s||t[1]!==r?(e=h(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let t,n,o,d,m=(0,a.c)(14),{data:p}=(0,c._N)(x),f=u(),g=(0,s.EY)(),y=p??"",b=f??"";m[0]!==y||m[1]!==b?(t=h(y,b),m[0]=y,m[1]=b,m[2]=t):t=m[2],m[3]!==p||m[4]!==g||m[5]!==f?(n=async()=>{if(!p||!f)return null;let e=await g.getExecution(p,f,l.qD);if(!e.success){let t=Error("Error fetching execution.");throw t.cause=e.httpStatus,t}let t=e.data;return g.isExecutionRunning(t.id)!==(0,r.y)(t)?null:t},m[3]=p,m[4]=g,m[5]=f,m[6]=n):n=m[6];let _=!!p&&!!f;return m[7]!==e?(o=e&&{select:e},m[7]=e,m[8]=o):o=m[8],m[9]!==t||m[10]!==n||m[11]!==_||m[12]!==o?(d={queryKey:t,queryFn:n,enabled:_,...o,staleTime:3e5,retry:v},m[9]=t,m[10]=n,m[11]=_,m[12]=o,m[13]=d):d=m[13],(0,i.I)(d)}function v(e,t){return!("number"==typeof t.cause&&d.includes(t.cause))&&e<3}function x(e){return e?.id}},48881:(e,t,n)=>{n.d(t,{A:()=>i,H:()=>s});var a=n(96540);let i=(0,a.createContext)(null),s=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{i.displayName||(i.displayName="ContentPreviewBlockContext")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var a=n(54908),i=n(82590);function s(e){return e.id===i.S$&&"service"in e&&e.service instanceof a.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>v,Ud:()=>y});var a=n(74848),i=n(49835),s=n(96540),r=n(33535),l=n(88431),o=n(96868),c=n(21728),d=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var p=n(53627);let h=(0,s.createContext)(new i.Lj(o.qB)),f=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,a,i=(0,c.c)(9),[r]=(0,d.o)();i[0]!==r?(e=(0,u.hW)(r),i[0]=r,i[1]=e):e=i[1];let[l,o]=(0,s.useReducer)(m,e);return i[2]!==l?(t=()=>{let e=(0,u.Ts)(l);(0,p.MM)(e)},i[2]=l,i[3]=t):t=i[3],i[4]!==r||i[5]!==l?(n=[l,r],i[4]=r,i[5]=l,i[6]=n):n=i[6],(0,s.useEffect)(t,n),i[7]!==l?(a=[l,o],i[7]=l,i[8]=a):a=i[8],a}(),i=(0,r.AI)(t);(0,l.N)(()=>{i.value=t},[t,i]);let o=(0,s.useCallback)(e=>{n(e)},[n]);return(0,a.jsx)(h.Provider,{value:i,children:(0,a.jsx)(f.Provider,{value:o,children:e})})}function y(e){let t=(0,s.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function v(){return(0,s.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},50393:(e,t,n)=>{n.d(t,{M:()=>s});let a=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),i=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');function s(e=!1){return Object.values(e?i:a)}},51587:(e,t,n)=>{n.d(t,{N:()=>s});var a=n(79634),i=n(96540);let s=()=>{let e=(0,a.X)();return(0,i.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},51625:(e,t,n)=>{n.d(t,{_x:()=>i,cP:()=>s,eu:()=>a,pI:()=>r});let a="spark",i="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>i,hW:()=>r});var a=n(96868);function i(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let i=e.get("view");i&&Object.values(a.Kh).includes(i)&&(t.view=i);let s=e.get("sidePanel");s&&Object.values(a.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==a.qB.view&&t.set("view",e.view),e.sidePanelView!==a.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==a.qB.version&&t.set("version",e.version),t}function r(e){return{...a.qB,...i(e)}}},54556:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"var(--fontStack-monospace)",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var a=n(35750),i=n(18150),s=n(85242),r=n(88243),l=n(16213),o=n(91348),c=n(45363),d=n(21046),u=n(90122),m=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let i={graphQLClient:(0,a._)(this,p),chatClient:(0,a._)(this,h),codeExecutor:(0,a._)(this,f),signal:t,onPartialResult:n,execution:e};return c.C.executeNode((0,a._)(this,m),i)}constructor(e,t,n,a){(0,i._)(this,m,{writable:!0,value:void 0}),(0,i._)(this,p,{writable:!0,value:void 0}),(0,i._)(this,h,{writable:!0,value:void 0}),(0,i._)(this,f,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,p,t),(0,s._)(this,h,n),(0,s._)(this,f,a)}};var g=n(33026),y=new WeakMap,v=new WeakMap,x=new WeakMap,b=new WeakMap,_=new WeakMap,w=new WeakMap,j=new WeakMap,N=new WeakMap,k=new WeakSet,C=new WeakSet,S=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,o.FT)((0,a._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,C,T).call(this,n,e,t)))}stop(e){(0,a._)(this,N).abort(),e((0,a._)(this,_))}constructor(e,t,n,a,r){(0,l._)(this,k),(0,l._)(this,C),(0,l._)(this,S),(0,i._)(this,y,{writable:!0,value:void 0}),(0,i._)(this,v,{writable:!0,value:void 0}),(0,i._)(this,x,{writable:!0,value:void 0}),(0,i._)(this,b,{writable:!0,value:void 0}),(0,i._)(this,_,{writable:!0,value:void 0}),(0,i._)(this,w,{writable:!0,value:void 0}),(0,i._)(this,j,{writable:!0,value:void 0}),(0,i._)(this,N,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,v,a),(0,s._)(this,x,r),(0,s._)(this,b,e),(0,s._)(this,_,t),(0,s._)(this,w,(0,o.f0)(e.nodes)),(0,s._)(this,j,new Map),(0,s._)(this,N,new AbortController)}};function I(){return(0,a._)(this,N).signal.aborted}async function T(e,t,n){let i=(0,a._)(this,j).get(e.id);if(i)return i;let s=(0,r._)(this,S,E).call(this,e,t,n);return(0,a._)(this,j).set(e.id,s),s}async function E(e,t,n){if((0,r._)(this,k,I).call(this))return null;let i=await n((0,a._)(this,b).id,(0,a._)(this,b).version||g.kj,(0,a._)(this,_));if(!i.success)throw Error("Unable to load execution");let s=i.data,l=s.nodes[e.id]?.value;if(l)return l;let o=[...new Set((0,a._)(this,w).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,a._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(o.map(async e=>[e.id,await (0,r._)(this,C,T).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,k,I).call(this))return null;let p=Object.fromEntries(m);try{let n=((e,t)=>{let n={...e},a=n.content;return"string"==typeof a&&(n.content=function(e,t,n=!1){let a=(0,u.ZP)();return e.replace(a,(e,a,i,s)=>{let r=t[a];if(void 0===r)return(0,d.vV)(`Node with ID "${a}" not found in node map`),e;let l=r;if(i){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),a=e;for(let e of n){if(null==a||"object"!=typeof a||null===a)return null;a=a[e]}return a}(e,i);if(null!==t)l=t;else throw Error(`Path "${i}" on node with ID "${a}" does not have a value`)}else throw Error(`Cannot access path "${i}" on non-object node with ID "${a}"`)}return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(a,t,c.C.requiresCodeEvaluation(e.type))),n})(e,p),i=new NodeRunner(n,(0,a._)(this,y),(0,a._)(this,v),(0,a._)(this,x));t({type:"SET_RUNNING",nodeID:e.id});let l=n=>{(0,r._)(this,k,I).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:o}=await i.run(s,(0,a._)(this,N).signal,l);return(0,r._)(this,k,I).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:o}),o}catch(n){var h;return(0,r._)(this,k,I).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(h=n)instanceof Error?h.message:"string"==typeof h?h:"object"==typeof h?JSON.stringify(h):""}),null}}var L=n(43134),R=n(76746),A=n(53419),D=new WeakMap,P=new WeakMap,O=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,a._)(this,D).getLoop(e,t)}getAllLoops(){return(0,a._)(this,D).listLoops()}getLoopVersions(e){return(0,a._)(this,D).listLoopVersions(e)}createLoop(e){return(0,a._)(this,D).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,a._)(this,D).getLoop(e,g.kj);if(!n.success)return n;let i=t(n.data);return await (0,a._)(this,D).updateLoop(e,g.kj,i)}async deleteLoop(e){return(0,L._T)(e),(0,a._)(this,D).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,a._)(this,D).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,a._)(this,D).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,a._)(this,D).getLoop(e,g.qD);return t.success?(0,a._)(this,D).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,a._)(this,D).getExecution(e,t,n)}async createExecution(e,t,n){return(0,a._)(this,D).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,i,s){return(0,a._)(this,D).updateNodeExecution(e,t,n,i,s)}async updateExecution(e,t,n,i){let s=await (0,a._)(this,D).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,l]of Object.entries(i.nodes))r.nodes[s]&&r.nodes[s].value===l.value&&r.nodes[s].error===l.error||await (0,a._)(this,D).updateNodeExecution(e,t,n,s,l);return await (0,a._)(this,D).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,a._)(this,F).get(e)}async runPipeline(e,t,n,i){if((0,R.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,a._)(this,P),(0,a._)(this,O),(0,a._)(this,B));(0,a._)(this,F).set(t,s);try{await s.run(n,i),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,a._)(this,F).delete(t)}}stopPipeline(e,t){let n=(0,a._)(this,F).get(e);n&&(n.stop(t),(0,a._)(this,F).delete(e),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,a._)(this,D).shareLoop(e)}async unshareLoop(e){return await (0,a._)(this,D).unshareLoop(e)}constructor(e,t,n,a){(0,l._)(this,M),(0,i._)(this,D,{writable:!0,value:void 0}),(0,i._)(this,P,{writable:!0,value:void 0}),(0,i._)(this,O,{writable:!0,value:void 0}),(0,i._)(this,B,{writable:!0,value:void 0}),(0,i._)(this,F,{writable:!0,value:new Map}),(0,r._)(this,M,$).call(this),(0,s._)(this,D,e),(0,s._)(this,P,t),(0,s._)(this,O,n),(0,s._)(this,B,a)}};function $(){indexedDB.deleteDatabase("copilot-pipes")}},59370:(e,t,n)=>{function a(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function i(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||l(t)===e)}function s(e){return a(e)||i(e)}function r(e){return e.startsWith("@")&&!a(e)?null:a(e)?function(e){if(!a(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,i,s,r]=n;if(!i||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let l=parseInt(s,10),o="+"===i,c=new Date(t);switch(r){case"d":c.setDate(c.getDate()+(o?l:-l));break;case"w":c.setDate(c.getDate()+(o?7*l:-(7*l)));break;case"m":c.setMonth(c.getMonth()+(o?l:-l));break;case"y":c.setFullYear(c.getFullYear()+(o?l:-l));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:c}}(e).date:i(e)?new Date(e):null}function l(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>l,Qf:()=>r,Yj:()=>s,nS:()=>a})},61872:(e,t,n)=>{n.d(t,{T:()=>a});let a={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue"}},62828:(e,t,n)=>{n.d(t,{I:()=>o});var a=n(21728),i=n(47789),s=n(35247),r=n(7812),l=n(1747);function o(e){let t,n=(0,a.c)(8),{messageId:o,messageIndex:c,messageTimestamp:d}=e,{openPreviewPane:u,openItem:m,updateItem:p}=(0,l.xx)(),h=(0,i.qw)();return n[0]!==o||n[1]!==c||n[2]!==d||n[3]!==m||n[4]!==u||n[5]!==h||n[6]!==p?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,o,d);break;case"file-diff":n=(0,r.g)(e,o,d);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:c,messageId:o,timestamp:d});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:c,messageId:o});break;case"issue":n=(0,r.SI)(e,o);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,o));break;default:for(let t of h)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,o);break}}n&&(t?.preventDefault(),p(n),m(n.id),u())},n[0]=o,n[1]=c,n[2]=d,n[3]=m,n[4]=u,n[5]=h,n[6]=p,n[7]=t):t=n[7],t}},64475:(e,t,n)=>{n.d(t,{G:()=>h});var a=n(74848),i=n(21728),s=n(97189),r=n(47865),l=n(53419),o=n(39345),c=n(77999),d=n(38621),u=n(26108),m=n(15220),p=n(96540);function h(e){let t,n,h,f,g,y,v,x,b,_,w,j=(0,i.c)(20);j[0]!==e?(t=void 0===e?{}:e,j[0]=e,j[1]=t):t=j[1],j[2]!==t?({onTaskCreated:h,...n}=t,j[2]=t,j[3]=n,j[4]=h):(n=j[3],h=j[4]);let[N,k]=(0,p.useState)(!1);j[5]===Symbol.for("react.memo_cache_sentinel")?(f={},j[5]=f):f=j[5];let{createTask:C}=(0,r.Z)(f);j[6]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{k(!0)},j[6]=g):g=j[6];let S=g;j[7]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{k(!1)},j[7]=y):y=j[7];let I=y;j[8]!==h?(v=()=>{h?.(),I()},j[8]=h,j[9]=v):v=j[9];let T=v;return j[10]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{S(),(0,l.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"})},j[10]=x):x=j[10],j[11]!==n?(b=(0,a.jsx)(c.m,{text:"Create new agent task",children:(0,a.jsx)(u.K,{...n,"aria-label":"Create new agent task",icon:d.PlusIcon,onClick:x})}),j[11]=n,j[12]=b):b=j[12],j[13]!==C||j[14]!==T||j[15]!==N?(_=N&&(0,a.jsx)(m.l,{height:"auto",onClose:I,title:"Create task",renderBody:()=>(0,a.jsx)(s.Fn,{children:(0,a.jsx)(o.T,{createTask:C,eventType:"activity_panel",isInPortal:!0,onCreate:T,showHeader:!1})})}),j[13]=C,j[14]=T,j[15]=N,j[16]=_):_=j[16],j[17]!==b||j[18]!==_?(w=(0,a.jsxs)(a.Fragment,{children:[b,_]}),j[17]=b,j[18]=_,j[19]=w):w=j[19],w}try{h.displayName||(h.displayName="CreateTaskButton")}catch{}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var a=n(21728),i=n(99993);function s(e,t){let n=(0,a.c)(2),{data:s}=(0,i._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65529:(e,t,n)=>{n.d(t,{as:()=>p,fp:()=>m,vQ:()=>u});var a=n(47865),i=n(76977),s=n(93654),r=n(2635),l=n(53419),o=n(96540);let c="copilot-chat-spec-task";function d(e,t){if(e&&t)return`${c}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=d((0,r.Pk)().selectedThreadID,e.tag),[i,s]=(0,o.useState)(null);(0,o.useEffect)(()=>{s(null)},[e.id]);let u=(0,o.useCallback)(e=>{let n;e instanceof a.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,l.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:p}=(0,a.Z)({onError:u}),h=e.name,f=(0,o.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,o.useCallback)(a=>{if(p)return;s(null),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let i=a?.nameWithOwner??e.repository;if(!i)return void u(Error("Repository is required to start a task"));let r=i.split("/");return 2===r.length&&r[0]&&r[1]?n?void m({nwo:i,baseRef:a?.branch,customAgent:a?.subAgent||void 0,problemStatement:f,title:h,eventType:c},n):void u(Error("Unable to generate task ID - thread or task tag missing")):void u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,p,f,e.repository,t,h]),isStarting:p,error:i}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>d(t.selectedThreadID,e.tag));(0,i._)();let{tasks:a,isLoading:l}=(0,s.si)({});return(0,o.useMemo)(()=>n.map(e=>!e||l||0===a.length?{isLoading:!!e&&l,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,a=t.pullRequest?.created_at;e&&(!a||new Date(e).getTime()>new Date(a).getTime())&&(t=n)}return t}(a.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,a,l])}function p(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},68605:(e,t,n)=>{n.d(t,{BE:()=>l,Cw:()=>N,I6:()=>_,Lo:()=>d,Md:()=>f,TB:()=>w,TC:()=>b,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>v,e_:()=>x,f9:()=>o,fJ:()=>k,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>j});var a=n(15874),i=n(54528),s=n(53839),r=n(24774);let l=e=>e.state.selection.main,o=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},v=(e,t,n)=>e.sliceDoc(t,n),x=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},b=(e,t)=>{let n=l(e);x(e,n.from,n.to,t)},_=(e,t)=>new i.ZX(e.state.doc,t).next(),w=(e,t,n)=>{let a=new i.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},j=(e,t,n,a,i)=>{if(void 0!==n)try{let l=h(e,t),o=h(e,n);if(l&&o){e.focus();let t=i?o.from+i:o.to;u(e,l.from+(a??0),t),e.dispatch({effects:[r.Lz.scrollIntoView(s.OF.range(l.from,o.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),o(e,n.from+(a??0)),e.dispatch({effects:[r.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function N(e){return e.state.facet(a.Xt)}function k(e,t){if(e===t)return[];let n=0,a=Math.min(e.length,t.length);for(;n<a&&e[n]===t[n];)n++;let i=e.length,s=t.length;for(;i>n&&s>n&&e[i-1]===t[s-1];)i--,s--;return[{from:n,to:i,insert:t.slice(n,s)}]}},70324:(e,t,n)=>{n.d(t,{c:()=>u});var a=n(74848),i=n(21728),s=n(38621),r=n(21373),l=n(27042),o=n(5524),c=n(73783),d=n(26108);function u(e){let t,n,u,m,p=(0,i.c)(37),{value:h,isLoading:f,onClick:g,onStop:y,variant:v,disabled:x,iconOnly:b,showPickInputsOption:_,onRunWithInputs:w,leadingVisual:j}=e,N=void 0===v?"invisible":v;p[0]!==f||p[1]!==h?(t=()=>f?"Loading...":h?"Run node":"Run loop",p[0]=f,p[1]=h,p[2]=t):t=p[2];let k=t;p[3]!==f||p[4]!==g||p[5]!==y?(n=e=>{f?y?.(e):g(e)},p[3]=f,p[4]=g,p[5]=y,p[6]=n):n=p[6];let C=n;p[7]!==w?(u=()=>{w?.()},p[7]=w,p[8]=u):u=p[8];let S=u;if(void 0!==_&&_&&!f&&!b){let e,t,n,i,d;return p[9]!==x||p[10]!==C||p[11]!==j||p[12]!==N?(e=(0,a.jsx)(r.Q,{disabled:x,variant:N,onClick:C,leadingVisual:j,children:"Run"}),p[9]=x,p[10]=C,p[11]=j,p[12]=N,p[13]=e):e=p[13],p[14]!==x||p[15]!==N?(t=(0,a.jsx)(l.W.Button,{disabled:x,variant:N,icon:s.TriangleDownIcon,"aria-label":"More run options"}),p[14]=x,p[15]=N,p[16]=t):t=p[16],p[17]!==S?(n=(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(o.l,{children:(0,a.jsx)(o.l.Item,{onSelect:S,children:"Run with custom inputs"})})}),p[17]=S,p[18]=n):n=p[18],p[19]!==t||p[20]!==n?(i=(0,a.jsxs)(l.W,{children:[t,n]}),p[19]=t,p[20]=n,p[21]=i):i=p[21],p[22]!==e||p[23]!==i?(d=(0,a.jsxs)(c.A,{children:[e,i]}),p[22]=e,p[23]=i,p[24]=d):d=p[24],d}if(!b){let e,t=f?"danger":N,n=f?"Stop":"Run";return p[25]!==x||p[26]!==C||p[27]!==j||p[28]!==t||p[29]!==n?(e=(0,a.jsx)(r.Q,{disabled:x,variant:t,onClick:C,leadingVisual:j,children:n}),p[25]=x,p[26]=C,p[27]=j,p[28]=t,p[29]=n,p[30]=e):e=p[30],e}let I=k(),T=f?s.SquareFillIcon:s.SyncIcon,E=f?"danger":N;return p[31]!==x||p[32]!==C||p[33]!==I||p[34]!==T||p[35]!==E?(m=(0,a.jsx)(d.K,{disabled:x,"aria-label":I,icon:T,onClick:C,variant:E}),p[31]=x,p[32]=C,p[33]=I,p[34]=T,p[35]=E,p[36]=m):m=p[36],m}try{u.displayName||(u.displayName="ExecuteButton")}catch{}},70840:(e,t,n)=>{n.d(t,{G:()=>x});var a=n(74848),i=n(21728),s=n(34522),r=n(73189),l=n(97286),o=n(24880),c=n(73017),d=n(96379),u=n(38621),m=n(69726),p=n(40090),h=n(34164),f=n(74022),g=n(96540),y=n(25506);let v={markdownPreview:"MarkdownPreview-module__markdownPreview--KrJBX",spinner:"MarkdownPreview-module__spinner--rHtSt",error:"MarkdownPreview-module__error--Kjmwv",errorIcon:"MarkdownPreview-module__errorIcon--msbkW",errorHeader:"MarkdownPreview-module__errorHeader--yOGh9",hideHeadingAnchors:"MarkdownPreview-module__hideHeadingAnchors--wU3US"};function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let a,s,r,l=(0,i.c)(8),[o,c]=(0,g.useState)(e),[d,u]=(0,g.useState)(t);2e3!==l[0]?(a=(0,f.A)(c,n),l[0]=n,l[1]=a):a=l[1];let m=a;return l[2]!==d||l[3]!==t||l[4]!==m||l[5]!==e?(s=()=>{t!==d?(m.cancel(),c(e),u(t)):m(e)},r=[m,e,t,d],l[2]=d,l[3]=t,l[4]=m,l[5]=e,l[6]=s,l[7]=r):(s=l[6],r=l[7]),(0,g.useEffect)(s,r),o}(e.value,e.name,2e3),{status:x,data:_}=(0,l.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,d.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:o.rX,staleTime:1/0});return(0,a.jsx)("div",{className:(0,h.$)("readme html-blob blob",v.markdownPreview,s&&v.hideHeadingAnchors,t),children:"pending"===x?r?(0,a.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(p.r,{size:e.size,lines:e.lines})},t))}):(0,a.jsx)("div",{className:v.spinner,children:(0,a.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,a.jsx)(b,{content:e}):(0,a.jsxs)("div",{className:v.error,children:[(0,a.jsx)("span",{className:v.errorIcon,children:(0,a.jsx)(u.StopIcon,{size:24})}),(0,a.jsx)("h2",{className:v.errorHeader,children:"Markdown rendering failed"}),(0,a.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,a.jsx)(c.$6,{className:"markdown-body",html:_.html})})}function b(e){let t,n,l,o,c=(0,i.c)(13),{content:d}=e,u=(0,g.useId)();c[0]!==d.value?(t={value:d.value,language:"markdown"},c[0]=d.value,c[1]=t):t=c[1];let m=(0,y.a)(t);return c[2]!==d.name||c[3]!==u?(n=(0,a.jsxs)("span",{id:u,className:"sr-only",children:[d.name," raw markdown contents"]}),c[2]=d.name,c[3]=u,c[4]=n):n=c[4],c[5]!==m||c[6]!==d.name||c[7]!==d.value||c[8]!==u?(l=(0,a.jsx)(s.default,{ariaLabelledBy:u,fileName:d.name,isReadOnly:!0,spacing:m,value:d.value,onChange:r.l,hideHelp:!0}),c[5]=m,c[6]=d.name,c[7]=d.value,c[8]=u,c[9]=l):l=c[9],c[10]!==n||c[11]!==l?(o=(0,a.jsxs)(a.Fragment,{children:[n,l]}),c[10]=n,c[11]=l,c[12]=o):o=c[12],o}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{b.displayName||(b.displayName="RawMarkdownPreview")}catch{}},71205:(e,t,n)=>{n.d(t,{W:()=>o});var a=n(74848),i=n(21728),s=n(34164),r=n(88934);let l={item:"SidebarListItem-module__item--x3BBP",link:"SidebarListItem-module__link--_g1X4",linkWithSecondaryText:"SidebarListItem-module__linkWithSecondaryText--dmh3S",statusIcon:"SidebarListItem-module__statusIcon--Oc8Sk",content:"SidebarListItem-module__content--sAGuS",topLine:"SidebarListItem-module__topLine--ATLSE",secondaryText:"SidebarListItem-module__secondaryText--ZgXnc",trailingAction:"SidebarListItem-module__trailingAction--S8yi9"};function o(e){let t,n,o,c,d,u,m,p,h,f,g=(0,i.c)(29),{href:y,text:v,isSelected:x,trailingAction:b,onClick:_,className:w,leadingVisual:j,secondaryText:N}=e,k=!!N;g[0]!==w?(t=(0,s.$)(l.item,w),g[0]=w,g[1]=t):t=g[1],g[2]!==k?(n=(0,s.$)(l.link,{[l.linkWithSecondaryText]:k}),g[2]=k,g[3]=n):n=g[3];let C=x?"page":void 0;return g[4]!==j?(o=j&&(0,a.jsx)("span",{className:(0,s.$)(l.statusIcon),children:(0,a.jsx)(j,{})}),g[4]=j,g[5]=o):o=g[5],g[6]!==v?(c=(0,a.jsx)("span",{children:v}),g[6]=v,g[7]=c):c=g[7],g[8]!==o||g[9]!==c?(d=(0,a.jsxs)("div",{className:l.topLine,children:[o,c]}),g[8]=o,g[9]=c,g[10]=d):d=g[10],g[11]!==N?(u=!!N&&(0,a.jsxs)("p",{className:l.secondaryText,children:[N," "]}),g[11]=N,g[12]=u):u=g[12],g[13]!==d||g[14]!==u?(m=(0,a.jsxs)("div",{className:l.content,children:[d,u]}),g[13]=d,g[14]=u,g[15]=m):m=g[15],g[16]!==y||g[17]!==_||g[18]!==n||g[19]!==C||g[20]!==m?(p=(0,a.jsx)(r.N_,{className:n,to:y,"aria-current":C,onClick:_,children:m}),g[16]=y,g[17]=_,g[18]=n,g[19]=C,g[20]=m,g[21]=p):p=g[21],g[22]!==b?(h=b?(0,a.jsx)("span",{className:l.trailingAction,children:b}):null,g[22]=b,g[23]=h):h=g[23],g[24]!==x||g[25]!==t||g[26]!==h||g[27]!==p?(f=(0,a.jsxs)("li",{className:t,"data-selected":x,children:[p,h]}),g[24]=x,g[25]=t,g[26]=h,g[27]=p,g[28]=f):f=g[28],f}try{o.displayName||(o.displayName="SidebarListItem")}catch{}},76219:(e,t,n)=>{n.d(t,{Q:()=>l,U:()=>o});var a=n(74848),i=n(21728),s=n(96540);let r=(0,s.createContext)(null);function l(e){let t,n,s=(0,i.c)(7),{availableModels:l,previewUrl:o,sendChatMessage:c,children:d}=e;s[0]!==l||s[1]!==o||s[2]!==c?(t={availableModels:l,previewUrl:o,sendChatMessage:c},s[0]=l,s[1]=o,s[2]=c,s[3]=t):t=s[3];let u=t;return s[4]!==d||s[5]!==u?(n=(0,a.jsx)(r.Provider,{value:u,children:d}),s[4]=d,s[5]=u,s[6]=n):n=s[6],n}function o(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var a=n(61872);n(39087);var i=n(91348),s=n(45363);function r(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:a.T.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:a.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:a.T.MissingProperty,involvedNodes:[e.id]}),t.concat(s.C.validateNode(e))}(n));return t}(e),n=(0,i.f0)(e.nodes);for(let i of n.edges){let n=e.nodes.find(e=>e.id===i.from),s=e.nodes.find(e=>e.id===i.to);n&&s||t.push({error:`Node ${i.to} references a nonexistent node {{${i.from}}}`,errorType:a.T.NonexistentNode,involvedNodes:[i.to]})}let r=function(e){let t=new Set,n=new Set,a=[],i=s=>{if(n.has(s)){let e=a.indexOf(s);return a.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),a.push(s),e.edges))if(r.from===s){let e=i(r.to);if(e)return e}return n.delete(s),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=i(n.id);if(e)return e}return null}(n);if(r&&r.length>0){let e=[...r,r[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:a.T.CycleDetected,involvedNodes:r})}let l=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,i=(t,n)=>{for(let s of(a.add(t),n.add(t),e.edges))s.from!==t||a.has(s.to)||i(s.to,n),s.to!==t||a.has(s.from)||i(s.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;i(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(n);return l.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${l.join(", ")}`,errorType:a.T.DisconnectedNode,involvedNodes:l}),t}},76977:(e,t,n)=>{n.d(t,{_:()=>o});var a=n(21728),i=n(96540),s=n(2635),r=n(34295);let l="PROTECTED_ORGS";function o(){let e,t,n,o,d=(0,a.c)(7),{ssoOrganizations:u}=(0,s.Pk)();d[0]!==u?(e=(u??[]).map(c).sort(),d[0]=u,d[1]=e):e=d[1];let m=e;d[2]!==m?(t=JSON.stringify(m),d[2]=m,d[3]=t):t=d[3];let p=t;d[4]!==p?(n=()=>{let e=sessionStorage.getItem(l);if(null===e)return void sessionStorage.setItem(l,p);p!==e&&(new r.l().removeLocalStorageAuthToken(),sessionStorage.setItem(l,p))},o=[p],d[4]=p,d[5]=n,d[6]=o):(n=d[5],o=d[6]),(0,i.useEffect)(n,o)}function c(e){return e.login}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var a=n(74848),i=n(34164),s=n(37367),r=n(34743),l=n(71988),o=n(96540);let c={tooltip:"Tooltip-module__tooltip--hAat9"},d=(0,o.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:u=8,...m},p)=>{let[h,f]=(0,o.useState)(!1),g=(0,o.useRef)(null),{refs:y,floatingStyles:v,context:x,isPositioned:b}=(0,s.we)({open:h,onOpenChange:f,placement:t,middleware:[(0,r.cY)(u),...t?[]:[(0,r.RK)()]],whileElementsMounted:l.ll}),_=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),w=(0,s.iQ)(x),j=(0,s.s9)(x),N=(0,s.It)(x,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:k,getFloatingProps:C}=(0,s.bv)([_,w,j,N]),S=k();"label"===d?m["aria-label"]=e:"description"===d&&(m["aria-describedby"]=x.floatingId);let I=(0,s.SV)([y.setReference,p]),T=(0,o.cloneElement)(n,{...S,...m,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),g.current&&(clearTimeout(g.current),g.current=null)},ref:I});return(0,a.jsxs)(a.Fragment,{children:[T,h&&(0,a.jsx)(s.XF,{children:(0,a.jsx)("div",{ref:y.setFloating,id:x.floatingId,style:{...v,visibility:b?"visible":"hidden"},className:(0,i.$)(c.tooltip),...C(),children:e})})]})});d.displayName="Tooltip"},78456:(e,t,n)=>{n.d(t,{Io:()=>a});let a=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79684:(e,t,n)=>{n.d(t,{B:()=>m});var a=n(74848),i=n(21728),s=n(96540),r=n(88934),l=n(27042),o=n(5524);let c={container:"Breadcrumbs-module__container--bnnIp",list:"Breadcrumbs-module__list--hG7n1",item:"Breadcrumbs-module__item--fekY7",textOnly:"Breadcrumbs-module__textOnly--v7ypW",link:"Breadcrumbs-module__link--A48Bt",skeleton:"Breadcrumbs-module__skeleton--_d2ba",text:"Breadcrumbs-module__text--yZS1N",icon:"Breadcrumbs-module__icon--CWnGJ",condensed:"Breadcrumbs-module__condensed--l60Z1",condensedList:"Breadcrumbs-module__condensedList--vpMXO",alwaysVisible:"Breadcrumbs-module__alwaysVisible--dK_nL",fullList:"Breadcrumbs-module__fullList--aHVvT"};var d=n(38621),u=n(40090);let m=e=>{let t,n,r,d,u,m=(0,i.c)(31),{children:y,"aria-label":v,condensed:x}=e,b=void 0===v?"Breadcrumbs":v;if(m[0]!==y){t=[];let e=(n,a)=>{let i=void 0===a?"":a;for(let[a,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${i}fragment-${a}-`):r.type===p?t.push({key:r.key?.toString()||`${i}item-${a}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===h&&t.push({key:r.key?.toString()||`${i}item-${a}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(y),m[0]=y,m[1]=t}else t=m[1];let _=t[t.length-1];m[2]!==t?(n=t.slice(0,-1),m[2]=t,m[3]=n):n=m[3];let w=n,j=t.length>=3,N=void 0!==x&&x&&j,k=s.useRef(null);if(void 0!==x)if(N){let e,t,n,i,s;return m[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(l.W.Button,{ref:k,className:c.link,children:"..."}),m[4]=e):e=m[4],m[5]!==w?(t=(0,a.jsx)("li",{className:c.item,children:(0,a.jsxs)(l.W,{children:[e,(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(o.l,{children:w.map(f)})})]})}),m[5]=w,m[6]=t):t=m[6],m[7]!==_?(n=_&&(_.hasMenu&&_.menuOverlay?(0,a.jsx)(h,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,a.jsx)(p,{href:_.href,children:_.children}):null),m[7]=_,m[8]=n):n=m[8],m[9]!==t||m[10]!==n?(i=(0,a.jsxs)("ol",{className:c.list,children:[t,n]}),m[9]=t,m[10]=n,m[11]=i):i=m[11],m[12]!==b||m[13]!==i?(s=(0,a.jsx)("nav",{className:`${c.container} ${c.condensed}`,"aria-label":b,children:i}),m[12]=b,m[13]=i,m[14]=s):s=m[14],s}else{let e,t;return m[15]!==y?(e=(0,a.jsx)("ol",{className:c.list,children:y}),m[15]=y,m[16]=e):e=m[16],m[17]!==b||m[18]!==e?(t=(0,a.jsx)("nav",{className:c.container,"aria-label":b,children:e}),m[17]=b,m[18]=e,m[19]=t):t=m[19],t}let C=`${c.list} ${j?c.fullList:c.alwaysVisible}`;return m[20]!==y||m[21]!==C?(r=(0,a.jsx)("ol",{className:C,children:y}),m[20]=y,m[21]=C,m[22]=r):r=m[22],m[23]!==j||m[24]!==_||m[25]!==w?(d=j&&(0,a.jsxs)("ol",{className:`${c.list} ${c.condensedList}`,children:[(0,a.jsx)("li",{className:c.item,children:(0,a.jsxs)(l.W,{children:[(0,a.jsx)(l.W.Button,{ref:k,className:c.link,children:"..."}),(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(o.l,{children:w.map(g)})})]})}),_&&(_.hasMenu&&_.menuOverlay?(0,a.jsx)(h,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,a.jsx)(p,{href:_.href,children:_.children}):null)]}),m[23]=j,m[24]=_,m[25]=w,m[26]=d):d=m[26],m[27]!==b||m[28]!==r||m[29]!==d?(u=(0,a.jsxs)("nav",{className:c.container,"aria-label":b,children:[r,d]}),m[27]=b,m[28]=r,m[29]=d,m[30]=u):u=m[30],u},p=e=>{let t,n,s,l,o,d=(0,i.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...l}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=l):(t=d[1],n=d[2],s=d[3],l=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("li",{className:c.item,children:(0,a.jsx)(u.r,{className:c.skeleton})}),d[5]=e):e=d[5],e}if(n){let e,i;return d[6]!==t?(e=(0,a.jsx)("span",{className:c.text,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==l||d[10]!==e?(i=(0,a.jsx)("li",{className:c.item,children:(0,a.jsx)(r.N_,{...l,to:n,className:c.link,"aria-current":"page",children:e})}),d[8]=n,d[9]=l,d[10]=e,d[11]=i):i=d[11],i}return d[12]!==t?(o=(0,a.jsx)("li",{className:c.item,children:(0,a.jsx)("span",{className:c.textOnly,children:t})}),d[12]=t,d[13]=o):o=d[13],o},h=e=>{let t,n,s,r,o=(0,i.c)(9),{buttonRef:u,children:m,menuOverlay:p}=e;return o[0]!==m?(t=(0,a.jsx)("span",{className:c.text,children:m}),o[0]=m,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("span",{className:c.icon,children:(0,a.jsx)(d.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,a.jsx)(l.W.Anchor,{children:(0,a.jsxs)("button",{className:c.link,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==u||o[6]!==p||o[7]!==s?(r=(0,a.jsx)("li",{className:c.item,children:(0,a.jsxs)(l.W,{anchorRef:u,children:[s,p]})}),o[5]=u,o[6]=p,o[7]=s,o[8]=r):r=o[8],r};m.Item=p,m.ItemWithMenu=h;try{m.displayName||(m.displayName="Breadcrumbs")}catch{}try{p.displayName||(p.displayName="Item")}catch{}try{h.displayName||(h.displayName="ItemWithMenu")}catch{}function f(e){return(0,a.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}function g(e){return(0,a.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}},79988:(e,t,n)=>{n.d(t,{c$:()=>a,n5:()=>i,z4:()=>s});let a="global_sso_banner",i=3,s="dismissed_sso_orgs"},80770:(e,t,n)=>{n.d(t,{C:()=>l,n:()=>r});var a=n(21728),i=n(97286),s=n(99519);let r="all-loops";function l(){let e,t,n=(0,a.c)(3),l=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==l?(t={queryKey:e,queryFn:async()=>{let e=await l.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(o)},refetchOnMount:!0},n[1]=l,n[2]=t):t=n[2],(0,i.I)(t)}function o(e,t){return t.updatedAt-e.updatedAt}},80947:(e,t,n)=>{n.d(t,{G:()=>tf,o:()=>tg});var a=n(74848),i=n(4817),s=n(96540),r=n(48881),l=n(85094),o=n(47970),c=n(21728),d=n(46665),u=n(26100),m=n(39876),p=n(51213),h=n(35247),f=n(23967),g=n(22072),y=n(53419),v=n(38621),x=n(69726),b=n(26108),_=n(34164),w=n(1747);function j(e){let t,n,i,s=(0,c.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,a.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(i=(0,a.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=i):i=s[3],i}try{j.displayName||(j.displayName="ExpandIcon")}catch{}let N={container:"FileBlock-module__container--Dzsqa",header:"FileBlock-module__header--AdNd3",language:"FileBlock-module__language--hjnkp",name:"FileBlock-module__name--PRLLi",previewCode:"FileBlock-module__previewCode--xp45Y",isClipped:"FileBlock-module__isClipped--g6E0E",expandIconContainer:"FileBlock-module__expandIconContainer--re33w",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--QtzBn"};function k(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function C(e){let t,n,l,o,C,I,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H=(0,c.c)(94),{language:K,name:G,url:z,code:Q,line:Y,children:J,isClipped:X,isStreaming:Z,index:ee,startOffset:et,endOffset:en}=e,{message:ea}=(0,d.V)(),{updateItem:ei,openItem:es,openPreviewPane:er,versionedItems:el,getOpenItems:eo}=(0,w.xx)(),{messageIndex:ec,messageId:ed,messageTimestamp:eu,autoOpenPreviewPane:em,markdown:ep,hasAutoOpenedPreviewPaneRef:eh,setHasAutoOpenedPreviewPane:ef}=(0,r.H)(),{name:eg}=(0,f.vL)(K),ey=`file:${G}`,ev=`${ey}#${ec}.${Y}`,ex=!!Q;H[0]!==ey||H[1]!==ev||H[2]!==el?(t=(n=el.get(ey)??[]).indexOf(ev),H[0]=ey,H[1]=ev,H[2]=el,H[3]=t,H[4]=n):(t=H[3],n=H[4]);let eb=t,e_=n.length>1&&-1!==eb?eb+1:null,ew=(0,s.useRef)(null);H[5]!==ea.references||H[6]!==z?(l=function(e,t){if(!h.W.fileBlockRefMatching||!e||!t)return;let n=k(e);return t.find(e=>k(e.url)===n)}(z,ea.references?.filter(S)),H[5]=ea.references,H[6]=z,H[7]=l):l=H[7];let ej=l;H[8]!==ej||H[9]!==eo||H[10]!==ev||H[11]!==ee||H[12]!==es||H[13]!==er?(o=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...h.W.fileBlockRefMatching?{isRepoFile:!!ej}:{}}),es(ev,void 0===t||t||eo().length<1||0===ee),e&&er(ew.current)},H[8]=ej,H[9]=eo,H[10]=ev,H[11]=ee,H[12]=es,H[13]=er,H[14]=o):o=H[14];let eN=o;H[15]!==Q||H[16]!==ej||H[17]!==ev||H[18]!==Z||H[19]!==K||H[20]!==ep||H[21]!==ed||H[22]!==eu||H[23]!==G||H[24]!==ex||H[25]!==ei?(C=()=>{let e=Q?.trimEnd();ex&&ed!==p.Wp&&-1!==ep.indexOf(e)&&(h.W.fileBlockRefMatching?ei({messageId:ed,id:ev,language:K,name:G,value:Q,type:"file",timestamp:new Date(eu),isStreaming:Z,isUserEdited:!1,reference:(()=>{if(!ej)return;let e=function(e){if(!h.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(ej.url);return{type:"file",url:k(ej.url),path:ej.path,repoID:ej.repoID,repoOwner:e?.owner??ej.repoOwner??"",repoName:e?.name??ej.repoName??"",ref:ej.ref,commitOID:ej.commitOID}})()}):ei({messageId:ed,id:ev,language:K,name:G,value:Q,type:"file",timestamp:new Date(eu),isStreaming:Z,isUserEdited:!1}))},H[15]=Q,H[16]=ej,H[17]=ev,H[18]=Z,H[19]=K,H[20]=ep,H[21]=ed,H[22]=eu,H[23]=G,H[24]=ex,H[25]=ei,H[26]=C):C=H[26],H[27]!==Q||H[28]!==ej||H[29]!==ev||H[30]!==ee||H[31]!==Z||H[32]!==K||H[33]!==ep||H[34]!==ed||H[35]!==eu||H[36]!==G||H[37]!==ex||H[38]!==ei||H[39]!==z?(I=[Q,K,ed,G,z,ei,ev,ex,eu,Z,ep,ej,ee],H[27]=Q,H[28]=ej,H[29]=ev,H[30]=ee,H[31]=Z,H[32]=K,H[33]=ep,H[34]=ed,H[35]=eu,H[36]=G,H[37]=ex,H[38]=ei,H[39]=z,H[40]=I):I=H[40],(0,s.useEffect)(C,I),H[41]!==em||H[42]!==eh||H[43]!==Z||H[44]!==ed||H[45]!==eN||H[46]!==ex||H[47]!==ef?(T=()=>{Z&&ex&&ed!==p.Wp&&(eN(em&&!eh.current,!1),ef(!0))},E=[Z,ex,eN,em,ed,eh,ef],H[41]=em,H[42]=eh,H[43]=Z,H[44]=ed,H[45]=eN,H[46]=ex,H[47]=ef,H[48]=T,H[49]=E):(T=H[48],E=H[49]),(0,s.useEffect)(T,E);let[ek,eC]=(0,s.useState)(!1),{publicCodeReferences:eS,codeVulnerabilities:eI}=(0,m.R)(ea.copilotAnnotations,et,en);H[50]!==eN?(L=()=>eN(!0),H[50]=eN,H[51]=L):L=H[51];let eT=`View file: ${G}`,eE=`chat-message-view-file-${G}`,eL=Z?(0,a.jsx)(x.A,{size:"small",className:i.sX}):f.Yr.has(eg)?(0,a.jsx)(v.MarkdownIcon,{className:i.sX}):(0,a.jsx)(v.CodeIcon,{className:i.sX});H[52]!==G?(R=(0,a.jsx)("span",{className:N.name,children:G}),H[52]=G,H[53]=R):R=H[53],H[54]!==e_?(A=null!==e_&&(0,a.jsx)(u.g,{version:e_}),H[54]=e_,H[55]=A):A=H[55],H[56]!==N.language||H[57]!==eL||H[58]!==R||H[59]!==A?(D=(0,a.jsxs)("div",{className:N.language,children:[eL,R,A]}),H[56]=N.language,H[57]=eL,H[58]=R,H[59]=A,H[60]=D):D=H[60],H[61]===Symbol.for("react.memo_cache_sentinel")?(P=(0,a.jsx)("div",{className:N.expandIconContainer,children:(0,a.jsx)(j,{})}),H[61]=P):P=H[61],H[62]!==N.header||H[63]!==D?(O=(0,a.jsxs)("div",{className:N.header,children:[D,P]}),H[62]=N.header,H[63]=D,H[64]=O):O=H[64];let eR=X&&N.isClipped;return H[65]!==eR?(B=(0,_.$)(N.previewCode,eR),H[65]=eR,H[66]=B):B=H[66],H[67]!==J?(F=(0,a.jsx)("code",{children:J}),H[67]=J,H[68]=F):F=H[68],H[69]!==B||H[70]!==F?(M=(0,a.jsx)("pre",{className:B,"aria-hidden":!0,children:F}),H[69]=B,H[70]=F,H[71]=M):M=H[71],H[72]!==L||H[73]!==eT||H[74]!==eE||H[75]!==O||H[76]!==M||H[77]!==N.container?($=(0,a.jsxs)("button",{ref:ew,className:N.container,onClick:L,"aria-label":eT,"data-testid":eE,children:[O,M]}),H[72]=L,H[73]=eT,H[74]=eE,H[75]=O,H[76]=M,H[77]=N.container,H[78]=$):$=H[78],H[79]!==eI||H[80]!==eS.length||H[81]!==eC?(V=(eS.length>0||eI.length>0)&&(0,a.jsx)("div",{className:N.insightsButtonContainer,children:(0,a.jsx)(b.K,{variant:"invisible",size:"small",icon:v.ShieldIcon,"aria-label":"Code insights",onClick:()=>eC(!0)})}),H[79]=eI,H[80]=eS.length,H[81]=eC,H[82]=V):V=H[82],H[83]!==$||H[84]!==V?(U=(0,a.jsxs)("div",{className:"position-relative",children:[$,V]}),H[83]=$,H[84]=V,H[85]=U):U=H[85],H[86]!==eI||H[87]!==ek||H[88]!==eS||H[89]!==eC?(q=ek&&(0,a.jsx)(g.t,{publicCodeReferences:eS,codeVulnerabilities:eI,onClose:()=>eC(!1)}),H[86]=eI,H[87]=ek,H[88]=eS,H[89]=eC,H[90]=q):q=H[90],H[91]!==U||H[92]!==q?(W=(0,a.jsxs)(a.Fragment,{children:[U,q]}),H[91]=U,H[92]=q,H[93]=W):W=H[93],W}function S(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{C.displayName||(C.displayName="FileBlock")}catch{}let I="data-fileblock-props",T=(0,l.F)(I),E=/^name=(?<name>[^\s]+)/,L=/^name=(?<name>[^\s]+)\n?/,R=/url=(?<url>[^\s]+)/,A={code:(e,t)=>{let n=(0,l.k)(e,I);return n?(0,a.jsx)(C,{...n,children:e.children}):t}};var D=n(50467);let P=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,l.F)(this.dataAttribute)}constructor(){(0,D._)(this,"transformMarkdown",e=>{(0,o.YR)(e,"code",e=>{let t=e.lang;if(!t)return;let n=(e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e)(P.exec(e.meta??"")?.groups?.type??"");if(!n)return;let a={lang:t,type:n,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let i=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(i)},hChildren:[]}})}),(0,D._)(this,"transformHtml",e=>{(0,o.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&this.dataProperty in a.properties&&n.children.splice(t,1,a)})}),(0,D._)(this,"reactComponents",{div:(e,t)=>{let n=(0,l.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var O=n(20382),B=n(7812),F=n(28177),M=n(39344),$=n(2635),V=n(73952);function U(e){let{messages:t}=(0,$.Pk)(),n=(0,V.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let a of n){let n=/\(image(\d+)\)/,i=parseInt(a.match(n)[1],10),s=t.length-i,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=a.replace(n,`(${r})`);e=e.replace(a,t)}}return e}(e,(0,s.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}var q=n(7026),W=n(69599),H=n(46996),K=n(99852);let G=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),z=(e,t)=>{let n=(e||[]).map(e=>G(e)),a=(t||[]).map(e=>G(e));return n.length===a.length&&(0,H.A)((0,K.A)(n),(0,K.A)(a))},Q=e=>null==e?"":G(e),Y=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?G(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?Q(e):JSON.stringify(e)},J=(e,t)=>{let n=[],a={};return Q(e.title)!==Q(t.title)&&(n.push("title"),a.title={expected:Y(t.title),actual:Y(e.title)}),Q(e.body)!==Q(t.description)&&(n.push("body"),a.body={expected:Y(t.description),actual:Y(e.body)}),Q(e.repository)!==Q(t.repository)&&(n.push("repository"),a.repository={expected:Y(t.repository),actual:Y(e.repository)}),Q(e.template)!==Q(t.template)&&(n.push("template"),a.template={expected:Y(t.template),actual:Y(e.template)}),Q(e.issueType)!==Q(t.issueType)&&(n.push("issueType"),a.issueType={expected:Y(t.issueType),actual:Y(e.issueType)}),Q(e.milestone)!==Q(t.milestone)&&(n.push("milestone"),a.milestone={expected:Y(t.milestone),actual:Y(e.milestone)}),z(e.assignees,t.assignees)||(n.push("assignees"),a.assignees={expected:Y(t.assignees),actual:Y(e.assignees)}),z(e.labels,t.labels)||(n.push("labels"),a.labels={expected:Y(t.labels),actual:Y(e.labels)}),((e,t)=>{let n=(e||[]).map(e=>G(e)),a=(t||[]).map(e=>G(e));return n.length===a.length&&(0,H.A)((0,K.A)(n),(0,K.A)(a))})(e.projects,t.projects)||(n.push("projects"),a.projects={expected:Y(t.projects),actual:Y(e.projects)}),(0,H.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),a.templateFormValues={expected:Y(t.templateFormValuesById),actual:Y(e.templateFormValues)}),z(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),a.blockedByTags={expected:Y(t.blockedByTags),actual:Y(e.blockedByTags)}),z(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),a.isBlockingTags={expected:Y(t.isBlockingTags),actual:Y(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:a}};function X(e){let t,n,a=(0,c.c)(8),{issues:i,isStreaming:l,isIssueTree:o}=e,d=void 0!==o&&o,{messages:u,threadSelectedAt:m}=(0,$.Pk)(),{messageId:p}=(0,r.H)();a[0]!==d||a[1]!==l||a[2]!==i||a[3]!==p||a[4]!==u||a[5]!==m?(t=()=>{let e=(0,V.B)(u),t=e[e.length-1],n=e.find(e=>e.id===p);if(!l&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=m&&n.references&&i.length>0){let e=n.references.filter(Z);for(let t of i)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=J(t,n);if(!e.isEqual)return void(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:p,issueTree:d,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,W.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[l,i,u,m,d,p],a[0]=d,a[1]=l,a[2]=i,a[3]=p,a[4]=u,a[5]=m,a[6]=t,a[7]=n):(t=a[6],n=a[7]),(0,s.useEffect)(t,n)}function Z(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}let ee={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t}},et=e=>{try{let t=(0,O.Hh)(e);return ee.fromUnknown(t)}catch{return null}};function en(e){let t,n,l,o,d,m,p,f,g,v,b,_,j,N,k,C,S,I,T,E,L=(0,c.c)(89),{yaml:R,isStreaming:A}=e,[D,P]=(0,s.useState)(A);L[0]!==A?(t=()=>{A&&P(!0)},n=[A],L[0]=A,L[1]=t,L[2]=n):(t=L[1],n=L[2]),(0,s.useEffect)(t,n);let{updateItem:O,openItem:$,openPreviewPane:V,closeItem:W,versionedItems:H,items:K}=(0,w.xx)(),{messageId:G,messageIndex:z,autoOpenPreviewPane:Q,hasAutoOpenedPreviewPaneRef:Y,setHasAutoOpenedPreviewPane:J}=(0,r.H)();R=U(R),L[3]===Symbol.for("react.memo_cache_sentinel")?(l={},L[3]=l):l=L[3];let Z=(0,q.M)(R,et,l);L[4]!==Z?(o=[Z],L[4]=Z,L[5]=o):o=L[5],L[6]!==A||L[7]!==o?(d={issues:o,isStreaming:A,isIssueTree:!1},L[6]=A,L[7]=o,L[8]=d):d=L[8],X(d),L[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],L[9]=m):m=L[9],(0,s.useEffect)(es,m),L[10]!==A||L[11]!==Z.type?(p="new-issue",h.W.draftUpdateIssue&&(p=null==Z.type&&A?void 0:"draft-update-issue"===Z.type?"update-issue":"new-issue"),L[10]=A,L[11]=Z.type,L[12]=p):p=L[12];let ee=null!=Z.tag&&null!=p?`${p}:${Z.tag}#${z}`:void 0;L[13]!==ee||L[14]!==H?(f=null!=ee?(0,B.LU)(ee,H):null,L[13]=ee,L[14]=H,L[15]=f):f=L[15];let en=f;L[16]!==ee||L[17]!==K?(g=null!=ee?K.get(ee):void 0,L[16]=ee,L[17]=K,L[18]=g):g=L[18];let er=g,el=Z.repository||null==p||er?.type!==p?Z.repository:er.repository||"";L[19]!==Q||L[20]!==Y||L[21]!==ee||L[22]!==$||L[23]!==V||L[24]!==J?(v=e=>{let{selectItem:t,event:n}=e;null!=ee&&($(ee,t),(t||Q&&!Y.current)&&(V(n?.currentTarget),J(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},L[19]=Q,L[20]=Y,L[21]=ee,L[22]=$,L[23]=V,L[24]=J,L[25]=v):v=L[25];let eo=v;L[26]!==Z.projects?(b=Z.projects??[],L[26]=Z.projects,L[27]=b):b=L[27],L[28]!==b?(_=b.map(ei),L[28]=b,L[29]=_):_=L[29];let ec=_;L[30]!==W||L[31]!==p||L[32]!==ee||L[33]!==A||L[34]!==Z.assignees||L[35]!==Z.body||L[36]!==Z.bodyVersion||L[37]!==Z.issueNumber||L[38]!==Z.issueType||L[39]!==Z.labels||L[40]!==Z.milestone||L[41]!==Z.parentTag||L[42]!==Z.tag||L[43]!==Z.template||L[44]!==Z.templateFormValues||L[45]!==Z.title||L[46]!==G||L[47]!==ec||L[48]!==el||L[49]!==O?(j=()=>{null!=ee&&("update-issue"===p&&el&&Z.issueNumber&&W(`issue:${el}/${Z.issueNumber}`),O({messageId:G,name:Z.title??"",body:Z.body,bodyVersion:Z.bodyVersion,repository:el,id:ee,type:p,tag:Z.tag??"",parentTag:Z.parentTag,isStreaming:A,template:Z.template,issueType:Z.issueType,milestone:Z.milestone,assignees:Z.assignees?.sort(),labels:Z.labels?.sort(),projects:ec,rawProjectsInput:ec.map(ea).sort(),isUserEdited:!1,defaultValuesById:Z.templateFormValues??{},issueNumber:Z.issueNumber}))},L[30]=W,L[31]=p,L[32]=ee,L[33]=A,L[34]=Z.assignees,L[35]=Z.body,L[36]=Z.bodyVersion,L[37]=Z.issueNumber,L[38]=Z.issueType,L[39]=Z.labels,L[40]=Z.milestone,L[41]=Z.parentTag,L[42]=Z.tag,L[43]=Z.template,L[44]=Z.templateFormValues,L[45]=Z.title,L[46]=G,L[47]=ec,L[48]=el,L[49]=O,L[50]=j):j=L[50],L[51]!==W||L[52]!==p||L[53]!==ee||L[54]!==A||L[55]!==Z.assignees||L[56]!==Z.body||L[57]!==Z.bodyVersion||L[58]!==Z.issueNumber||L[59]!==Z.issueType||L[60]!==Z.labels||L[61]!==Z.milestone||L[62]!==Z.parentTag||L[63]!==Z.projects||L[64]!==Z.tag||L[65]!==Z.template||L[66]!==Z.templateFormValues||L[67]!==Z.title||L[68]!==G||L[69]!==ec||L[70]!==el||L[71]!==O?(N=[W,p,ee,A,Z.assignees,Z.body,Z.bodyVersion,Z.issueNumber,Z.issueType,Z.labels,Z.milestone,Z.parentTag,Z.projects,Z.tag,Z.template,Z.templateFormValues,Z.title,G,ec,el,O],L[51]=W,L[52]=p,L[53]=ee,L[54]=A,L[55]=Z.assignees,L[56]=Z.body,L[57]=Z.bodyVersion,L[58]=Z.issueNumber,L[59]=Z.issueType,L[60]=Z.labels,L[61]=Z.milestone,L[62]=Z.parentTag,L[63]=Z.projects,L[64]=Z.tag,L[65]=Z.template,L[66]=Z.templateFormValues,L[67]=Z.title,L[68]=G,L[69]=ec,L[70]=el,L[71]=O,L[72]=N):N=L[72],(0,s.useEffect)(j,N),L[73]!==D||L[74]!==ee||L[75]!==eo?(k=()=>{null!=ee&&D&&eo({selectItem:!0})},C=[ee,eo,D],L[73]=D,L[74]=ee,L[75]=eo,L[76]=k,L[77]=C):(k=L[76],C=L[77]),(0,s.useEffect)(k,C);let ed=Z.title??"";return L[78]!==A?(S=A?(0,a.jsx)(x.A,{size:"small",className:i.sX}):(0,a.jsx)(F.n,{type:"new-issue"}),L[78]=A,L[79]=S):S=L[79],L[80]!==en?(I=null!=en&&(0,a.jsx)(u.g,{"data-testid":"version-label",version:en}),L[80]=en,L[81]=I):I=L[81],L[82]!==eo?(T=e=>eo({selectItem:!0,event:e}),L[82]=eo,L[83]=T):T=L[83],L[84]!==ed||L[85]!==S||L[86]!==I||L[87]!==T?(E=(0,a.jsx)(M.K,{subIssueCount:0,children:(0,a.jsx)(M.K.RootItem,{title:ed,leadingVisual:S,trailingBadge:I,onClick:T})}),L[84]=ed,L[85]=S,L[86]=I,L[87]=T,L[88]=E):E=L[88],E}function ea(e){return e.title}function ei(e){return{title:e}}function es(){return(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{en.displayName||(en.displayName="DraftIssueBlock")}catch{}let er=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(en,{...e})}};var el=n(46461),eo=n(13974);let ec={container:"DraftIssueTreeBlock-module__container--framP"},ed={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t}};function eu(e){try{let t=(0,O.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ed.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function em({data:e}){let t=(0,q.M)(e,eu,[]),{messageId:n}=(0,r.H)(),{updateItem:i,openItem:l,openPreviewPane:o}=(0,w.xx)(),c=(0,s.useMemo)(()=>Array.from((0,el.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function d(e,t){if(!e.url)return;let[a,s]=e.repository?.split("/")??[];if(!a||!s||!e.number)return;let r=`issue:${a}/${s}/${e.number}`;i({messageId:n,name:e.title??"",number:e.number,owner:a,repo:s,id:r,href:e.url,type:"issue"}),l(r),o(t?.currentTarget)}let u=e=>{if(h.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),d(e.item,t))}}))};function m(e){return(0,a.jsx)(M.K.Item,{title:e.item.title??"",leadingVisual:(0,a.jsx)(ep,{item:e.item}),trailingBadge:(0,a.jsx)(eh,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),d(e.item,t)},blockedBy:u(e),children:e.children.map(m)},e.item.tag)}return(0,a.jsx)("div",{className:ec.container,children:c.map(e=>{let t=-1;return(0,el.YR)(e,()=>t++),(0,a.jsxs)(M.K,{subIssueCount:t,children:[(0,a.jsx)(M.K.RootItem,{leadingVisual:(0,a.jsx)(ep,{item:e.item}),title:e.item.title??"",trailingBadge:(0,a.jsx)(eh,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),d(e.item,t)},blockedBy:u(e)}),e.children.map(m)]},e.item.tag)})})}function ep(e){let t=(0,c.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(v.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(v.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function eh(e){let t,n=(0,c.c)(5),{node:i}=e;if(!i.item.repository||!i.item.number)return null;if(i.item.repository===i.parent?.item.repository){let e;return n[0]!==i.item.number?(e=(0,a.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",i.item.number]}),n[0]=i.item.number,n[1]=e):e=n[1],e}return n[2]!==i.item.number||n[3]!==i.item.repository?(t=(0,a.jsxs)("span",{className:"fgColor-muted no-wrap",children:[i.item.repository,"#",i.item.number]}),n[2]=i.item.number,n[3]=i.item.repository,n[4]=t):t=n[4],t}try{em.displayName||(em.displayName="IssueTreeBlock")}catch{}try{ep.displayName||(ep.displayName="LeadingVisual")}catch{}try{eh.displayName||(eh.displayName="IssueLocation")}catch{}function ef(e){return"state"in e?"draft"===e.state:"assignees"in e||"labels"in e||"issueType"in e||"projects"in e||"milestone"in e||"template"in e||"templateFormValues"in e||"body"in e}function eg(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function ey(e){try{let t=(0,O.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return ee.fromUnknown(e);case"open":case"closed":return ed.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function ev({data:e,isStreaming:t}){e=U(e);let n=(0,q.M)(e,ey,[]),{items:i,updateItem:l,openItem:o,openPreviewPane:c,closeItem:d,versionedItems:m}=(0,w.xx)(),{messageId:p,messageIndex:f,autoOpenPreviewPane:g,hasAutoOpenedPreviewPaneRef:v,setHasAutoOpenedPreviewPane:x}=(0,r.H)(),b=(0,s.useCallback)(e=>ef(e)&&e.tag?`new-issue:${e.tag}#${f}`:eg(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[f]);X({issues:n,isStreaming:t,isIssueTree:!0}),(0,s.useEffect)(()=>{for(let e of n)e.tag&&b(e)&&(ef(e)&&l({messageId:p,type:"new-issue",id:`new-issue:${e.tag}#${f}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>({title:e})).sort((e,t)=>e.title.localeCompare(t.title)),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}),eg(e)&&e.repository&&e.number&&e.url&&(d(`issue:${e.repository}/${e.number}`),l({messageId:p,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]})))},[b,t,n,p,f,l,d]);let _=(0,s.useCallback)((e,{selectItem:t,event:n})=>{let a=b(e);a&&(o(a,t),(t||g&&!v.current)&&(c(n?.currentTarget),x(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[b,o,g,v,c,x]),j=(0,s.useCallback)(e=>{let t=[...i.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,a=(0,B.oy)(n),s=m.get(a),r=s?.at(-1);if(!r)return;let l=i.get(r);if(l)switch(l?.type){case"new-issue":return ee.fromUnknown(l);case"existing-issue":return ed.fromUnknown(l);default:return}},[i,m]),N=(0,s.useMemo)(()=>{let e=new Set(n.map(e=>e.tag)),t=new Set(n.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),a=Array.from(new Set([...t,...new Set(n.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(n.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>j(e)).filter(e=>null!=e),i=[...n,...a];return Array.from((0,el.G9)(i,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[n,j]),k=(0,eo.p)(t);(0,s.useEffect)(()=>{if(!k)return;let e=!0;for(let t of N.values()){if(ef(t.item)){_(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)ef(n.item)&&(_(n.item,{selectItem:e}),e=!1)}},[k,N,_]);let C=e=>{if(h.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:eg(e.item)?e.item.url:void 0,onClick:t=>{_(e.item,{selectItem:!0,event:t})}}))},S=e=>{let n=b(e.item),i=n?(0,B.LU)(n,m):null;return(0,a.jsx)(M.K.Item,{title:e.item.title??"",leadingVisual:(0,a.jsx)(ex,{isStreaming:t,item:e.item}),trailingBadge:null!=i?(0,a.jsx)(u.g,{version:i}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0,event:t}))},href:eg(e.item)?e.item.url:void 0,blockedBy:C(e),children:e.children.map(S)},e.item.tag)};return(0,a.jsx)("div",{className:ec.container,children:N.map(e=>{let n=b(e.item),i=n?(0,B.LU)(n,m):null,s=-1;return(0,el.YR)(e,()=>s++),(0,a.jsxs)(M.K,{subIssueHeaderText:eg(e.item)?"New sub-issues":void 0,subIssueCount:s,children:[(0,a.jsx)(M.K.RootItem,{title:e.item.title??"",leadingVisual:(0,a.jsx)(ex,{isStreaming:t,item:e.item}),trailingBadge:null!=i?(0,a.jsx)(u.g,{"data-testid":"version-label",version:i}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0,event:t}))},href:eg(e.item)?e.item.url:void 0,blockedBy:C(e)}),e.children.map(S)]},e.item.tag)})})}function ex(e){let t=(0,c.c)(4),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(x.A,{size:"small",className:`${i.sX} mt-1`}),t[0]=e):e=t[0],e}if(ef(s)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(F.n,{type:"new-issue"}),t[1]=e):e=t[1],e}if(eg(s)){let e;return t[2]!==s.state?(e=(0,a.jsx)(F.n,{type:"existing-issue",state:s.state}),t[2]=s.state,t[3]=e):e=t[3],e}}try{ev.displayName||(ev.displayName="DraftIssueTreeBlock")}catch{}try{ex.displayName||(ex.displayName="LeadingVisual")}catch{}let eb=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(ev,{...e})}};var e_=n(72534),ew=n(57352);function ej(e){let t,n,i,l,o,d,u=(0,c.c)(28),{owner:m,repo:p,issueNumber:h,href:f,children:g}=e,{updateItem:v,openItem:x,openPreviewPane:b,items:_}=(0,w.xx)(),{messageId:j}=(0,r.H)(),N=(0,$.A3)("messages"),k=(0,s.useRef)(null),C=Number(h),S=`issue:${m}/${p}/${C}`;u[0]!==S||u[1]!==_?(t=_.get(S),u[0]=S,u[1]=_,u[2]=t):t=u[2];let I=t;u[3]!==I?.name||u[4]!==j||u[5]!==N||u[6]!==C||u[7]!==m||u[8]!==p?(n=function(e,t,n,a,i){if(!n||!a||!i||isNaN(i))return;let s=e.find(e=>e.id===t),r=s?.references,l=r?.find(e=>"issue"===e.type&&e.number===i&&e.repository.name===a&&e.repository.owner===n),o=l?.title;if(o)return o;let c=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===i),d=c?.data;return d?.title}(N,j,m,p,C)??I?.name??`Issue #${C}`,u[3]=I?.name,u[4]=j,u[5]=N,u[6]=C,u[7]=m,u[8]=p,u[9]=n):n=u[9];let T=n;return u[10]!==f||u[11]!==S||u[12]!==j||u[13]!==C||u[14]!==m||u[15]!==p||u[16]!==T||u[17]!==v?(i=()=>{m&&p&&v({messageId:j,name:T,number:C,owner:m,repo:p,id:S,href:f,type:"issue"})},l=[S,j,f,C,m,p,T,v],u[10]=f,u[11]=S,u[12]=j,u[13]=C,u[14]=m,u[15]=p,u[16]=T,u[17]=v,u[18]=i,u[19]=l):(i=u[18],l=u[19]),(0,s.useEffect)(i,l),u[20]!==S||u[21]!==x||u[22]!==b?(o=e=>{e.metaKey||e.ctrlKey||(x(S),b(k.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=S,u[21]=x,u[22]=b,u[23]=o):o=u[23],u[24]!==g||u[25]!==f||u[26]!==o?(d=(0,a.jsx)(ew.A,{ref:k,href:f,onClick:o,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=f,u[26]=o,u[27]=d):d=u[27],d}try{ej.displayName||(ej.displayName="IssueLinkBlock")}catch{}let eN="data-issuelink-props",ek=(0,l.F)(eN),eC=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,eS={span:(e,t)=>{let n=(0,l.k)(e,eN);return n?(0,a.jsx)(ej,{...n}):t}};var eI=n(77430),eT=n(10422),eE=n(29731),eL=n(62935),eR=n(26607),eA=n(94602),eD=n(69497),eP=n(91865),eO=n(93654),eB=n(97286);function eF(){return{}}function eM(){return[]}let e$={list:"IssueListBlock-module__list--hU3Jz",streaming:"IssueListBlock-module__streaming--sTYSD",toggleContent:"IssueListBlock-module__toggleContent--NWbi1",item:"IssueListBlock-module__item--gmkkY",link:"IssueListBlock-module__link--fc5wy",content:"IssueListBlock-module__content--bNFq8",metadata:"IssueListBlock-module__metadata--W4tCj",header:"IssueListBlock-module__header--NtmSe",title:"IssueListBlock-module__title--Di3wj",unknownTitle:"IssueListBlock-module__unknownTitle--JszGm",number:"IssueListBlock-module__number--vsvJy",labels:"IssueListBlock-module__labels--xeeTb",label:"IssueListBlock-module__label--tGgUZ",labelIcon:"IssueListBlock-module__labelIcon--g4B1V",description:"IssueListBlock-module__description--Uf86U",icon:"IssueListBlock-module__icon--qAaLP",open:"IssueListBlock-module__open--CQmwr",draft:"IssueListBlock-module__draft--ymDJ6",done:"IssueListBlock-module__done--bWmcu",closed:"IssueListBlock-module__closed--Iuz7v",checkCircleIcon:"IssueListBlock-module__checkCircleIcon--ZHYse",stopIcon:"IssueListBlock-module__stopIcon--u2wRE",clockIcon:"IssueListBlock-module__clockIcon--yllN9",dotFillIcon:"IssueListBlock-module__dotFillIcon--jW2uo",skipIcon:"IssueListBlock-module__skipIcon--glgzv",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--RB1C7",toggleButton:"IssueListBlock-module__toggleButton--C9dbQ",shimmer:"IssueListBlock-module__shimmer--xZ0Bt",toggleIcon:"IssueListBlock-module__toggleIcon--hynWs"},eV={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t}};function eU(e){let t,n,i,s,r,l=(0,c.c)(8),{item:o,isStreaming:d}=e,u=o.author;return o.merged_at?(s=o.merged_at,r="Merged"):o.closed_at?(s=o.closed_at,r="Closed"):o.created_at&&(s=o.created_at,r="Opened"),l[0]!==s?(n=(t=s?new Date(s):null)&&isNaN(t.getTime()),l[0]=s,l[1]=t,l[2]=n):(t=l[1],n=l[2]),n&&(t=null),l[3]!==r||l[4]!==u||l[5]!==d||l[6]!==t?(i=u&&t||!d?(0,a.jsxs)("span",{className:e$.description,children:[u," ",u?r?.toLowerCase():r," ",t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eL.A,{date:t,format:"relative"})})]}):null,l[3]=r,l[4]=u,l[5]=d,l[6]=t,l[7]=i):i=l[7],i}let eq=e=>{try{let t=(0,O.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(eV.fromUnknown);return null}catch{return null}};function eW(e){let t,n,i,l,o,d,u,m=(0,c.c)(17),{data:p,type:h,isStreaming:f}=e;m[0]!==p?(t=()=>eq(p)??[],m[0]=p,m[1]=t):t=m[1];let[g,x]=(0,s.useState)(t),{updateItem:b,openItem:j,openPreviewPane:N}=(0,w.xx)(),{messageId:k}=(0,r.H)(),[C,S]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let I=n,T=(0,W.G7)("copilot_coding_agent_task_response"),E=function(){let e,t,n,a,i,s,r,l=(0,c.c)(13);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:eO.ZL,queryFn:eM,enabled:!1,notifyOnChangeProps:["data"]},l[0]=e):e=l[0];let{data:o}=(0,eB.I)(e);l[1]!==o?(t=o||[],l[1]=o,l[2]=t):t=l[2],l[3]!==t?(n=(0,eP.ms)(t),l[3]=t,l[4]=n):n=l[4];let d=n;l[5]!==d?(a=["agent-sessions-pull-requests",d],l[5]=d,l[6]=a):a=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(i=["data"],l[7]=i):i=l[7],l[8]!==a?(s={queryKey:a,queryFn:eF,enabled:!1,notifyOnChangeProps:i},l[8]=a,l[9]=s):s=l[9];let{data:u}=(0,eB.I)(s);if(l[10]!==o||l[11]!==u){if(r=new Map,o&&o.length>0)for(let e of o){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,a={state:e.latest_session_state,title:n?.title};r.set(t,a)}l[10]=o,l[11]=u,l[12]=r}else r=l[12];return r}(),L=I&&C?g.slice(0,10):g,R=I&&g.length>10;m[3]!==p?(i=()=>x(e=>eq(p)??e),l=[p],m[3]=p,m[4]=i,m[5]=l):(i=m[4],l=m[5]),(0,s.useEffect)(i,l),(0,s.useEffect)(()=>{"issue"===h?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===h?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===h&&T&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[h,T]);let A=f&&e$.streaming;m[6]!==A?(o=(0,_.$)(e$.list,A),m[6]=A,m[7]=o):o=m[7];let D=L.map((e,t)=>{let n={...e,type:h};if("task"===h&&T&&e.url){let t=E.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let i=f&&t===L.length-1,{icon:s,colorClass:r}=function(e,t){let n,i=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(i=(0,a.jsx)(v.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e$.draft):"closed"===e.state&&e.draft&&(i=(0,a.jsx)(v.SkipIcon,{"aria-label":"Closed draft issue"}),n=e$.draft):(i=(0,a.jsx)(v.IssueClosedIcon,{"aria-label":"Closed issue"}),n=e$.done):(i=(0,a.jsx)(v.IssueOpenedIcon,{"aria-label":"Open issue"}),n=e$.open);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(i=(0,a.jsx)(v.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e$.draft):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(i=(0,a.jsx)(v.GitMergeIcon,{"aria-label":"Merged pull request"}),n=e$.done):(i=(0,a.jsx)(v.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=e$.closed):(i=(0,a.jsx)(v.GitPullRequestIcon,{"aria-label":"Pull request"}),n=e$.open)}else"task"===e.type&&t&&("queued"===e.state?(i=(0,a.jsx)(v.ClockIcon,{"aria-label":"Task queued",className:e$.clockIcon}),n=e$.open):"pending"===e.state||"idle"===e.state?(i=(0,a.jsx)(v.DotFillIcon,{"aria-label":"Task pending",className:e$.dotFillIcon}),n=e$.open):"running"===e.state||"in_progress"===e.state?(i=(0,a.jsx)(eT.gX,{animated:!0}),n=e$.open):"completed"===e.state||"waiting_for_user"===e.state?(i=(0,a.jsx)(v.CheckCircleFillIcon,{"aria-label":"Task completed",className:e$.checkCircleIcon}),n=e$.done):"failed"===e.state||"timed_out"===e.state?(i=(0,a.jsx)(v.XCircleFillIcon,{"aria-label":"Task failed",className:e$.stopIcon}),n=e$.closed):"cancelled"===e.state&&(i=(0,a.jsx)(v.SkipIcon,{"aria-label":"Task cancelled",className:e$.skipIcon}),n=e$.closed));return{icon:i,colorClass:n}}(n,T);return(0,a.jsx)("li",{className:e$.item,children:(0,a.jsxs)("div",{className:e$.content,children:[(0,a.jsx)("div",{className:(0,_.$)(r,e$.icon),children:s}),(0,a.jsxs)("div",{className:e$.header,children:[i&&!n.title?null:(0,a.jsx)("a",{...(0,eE.G)("issue-list-item-link"),href:n.url??"#",className:e$.link,onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:a,repo:i,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(a&&i&&s){let r=`issue:${a}/${i}/${s}`;b({messageId:k,name:n.title??`Issue #${s}`,number:s,owner:a,repo:i,id:r,href:t,type:"issue"}),j(r),N(e.currentTarget)}}else"task"===n.type&&T?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:e$.title,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,a.jsxs)("span",{className:e$.number,children:["#",n.number]})]}):void 0!==n.number?(0,a.jsxs)("span",{className:e$.title,children:["#",n.number]}):(0,a.jsx)("span",{className:(0,_.$)(e$.title,e$.unknownTitle),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,a.jsxs)("div",{className:e$.labels,children:[n.labels?.length?n.labels.map(eK):null,0!==n.comments&&void 0!==n.comments&&(0,a.jsxs)(eR.A,{size:"small",variant:"secondary",children:[(0,a.jsx)(v.CommentIcon,{className:e$.labelIcon,size:12}),n.comments]})]})]}),"task"===n.type&&T?n.repository?(0,a.jsx)("div",{className:e$.description,children:n.repository}):null:(0,a.jsx)(eU,{item:n,isStreaming:i}),("task"!==n.type||!T)&&(0,a.jsx)("div",{className:e$.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,a.jsx)("div",{className:e$.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,a.jsx)(v.PersonIcon,{size:12})}):(0,a.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,a.jsx)(eA.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(eH)})})})]})},t)});return m[8]!==C||m[9]!==R||m[10]!==f||m[11]!==g?(d=R&&(0,a.jsx)("li",{className:e$.item,children:(0,a.jsx)("div",{className:(0,_.$)(e$.content,e$.toggleContent),children:(0,a.jsxs)("button",{type:"button",className:(0,_.$)(e$.toggleButton,f&&e$.shimmer),onClick:()=>S(!C),"aria-expanded":!C,"aria-controls":"issue-list",children:[(0,a.jsx)("span",{className:e$.toggleIcon,children:C?(0,a.jsx)(v.UnfoldIcon,{size:16}):(0,a.jsx)(v.FoldIcon,{size:16})}),C?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=C,m[9]=R,m[10]=f,m[11]=g,m[12]=d):d=m[12],m[13]!==o||m[14]!==D||m[15]!==d?(u=(0,a.jsx)("div",{children:(0,a.jsxs)("ul",{id:"issue-list",className:o,children:[D,d]})}),m[13]=o,m[14]=D,m[15]=d,m[16]=u):u=m[16],u}function eH(e){return(0,a.jsx)(eI.r,{src:e,alt:"Assignee avatar"},e)}function eK(e){return(0,a.jsx)(eR.A,{size:"small",variant:"secondary",className:e$.label,children:(0,a.jsx)(eD.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{eU.displayName||(eU.displayName="Description")}catch{}try{eW.displayName||(eW.displayName="ListBlock")}catch{}let eG=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(eW,{...e})}},ez=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,a.jsx)(em,{...e})}};var eQ=n(5524),eY=n(35104);let eJ={container:"PlanningTasklistBlock-module__container--Vl4PK"};function eX(e){let t,n=(0,c.c)(3),{children:i,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==i?(t=(0,a.jsx)(a.Fragment,{children:i}),n[1]=i,n[2]=t):t=n[2],t}try{eX.displayName||(eX.displayName="SubtasksGroup")}catch{}var eZ=n(35673),e0=n(67955),e1=n(27042);function e2(e){let t,n,i,s=(0,c.c)(10),{onConvertAllToDraftIssues:r,taskCount:l,title:o}=e;return s[0]!==l?(t=(0,a.jsx)(e0.A,{className:"ml-2 pb-1",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o?(n=l>0&&(0,a.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,a.jsxs)(e1.W,{children:[(0,a.jsx)(e1.W.Anchor,{children:(0,a.jsx)(b.K,{"aria-label":`Tasklist '${o}' options`,icon:v.KebabHorizontalIcon,variant:"invisible"})}),(0,a.jsx)(eZ.UJ,{children:(0,a.jsx)(eQ.l,{children:(0,a.jsx)(eQ.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=l,s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==o?(i=(0,a.jsxs)(eQ.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),s[6]=t,s[7]=n,s[8]=o,s[9]=i):i=s[9],i}try{e2.displayName||(e2.displayName="TasklistHeader")}catch{}var e3=n(97189),e4=n(65529);function e5(e){let t,n=(0,c.c)(4),{isStreaming:i,onClick:s,task:r}=e;return n[0]!==i||n[1]!==s||n[2]!==r?(t=(0,a.jsx)(e3.Fn,{children:(0,a.jsx)(e7,{isStreaming:i,onClick:s,task:r})}),n[0]=i,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function e7(e){let t,n,s,r,l,o,d=(0,c.c)(19),{isStreaming:m,onClick:p,task:h}=e,{pullRequest:f,isLoading:g}=(0,e4.as)(h),{versionedItems:y}=(0,w.xx)();d[0]!==h.id||d[1]!==y?(t=(0,B.LU)(h.id,y),d[0]=h.id,d[1]=y,d[2]=t):t=d[2];let b=t;d[3]!==g||d[4]!==m||d[5]!==f?(n=()=>m||g?(0,a.jsx)(x.A,{size:"small",className:i.sX}):f?.state==="merged"?(0,a.jsx)(v.CheckIcon,{}):f?(0,a.jsx)(v.GitPullRequestIcon,{}):(0,a.jsx)(v.TasklistIcon,{}),d[3]=g,d[4]=m,d[5]=f,d[6]=n):n=d[6];let _=n;return d[7]!==_?(s=(0,a.jsx)(eQ.l.LeadingVisual,{children:_()}),d[7]=_,d[8]=s):s=d[8],d[9]!==b?(r=null!=b&&(0,a.jsx)(u.g,{version:b}),d[9]=b,d[10]=r):r=d[10],d[11]!==r?(l=(0,a.jsx)(eQ.l.TrailingVisual,{children:r}),d[11]=r,d[12]=l):l=d[12],d[13]!==p||d[14]!==s||d[15]!==l||d[16]!==h.id||d[17]!==h.name?(o=(0,a.jsxs)(eQ.l.Item,{onSelect:p,children:[s,h.name,l]},h.id),d[13]=p,d[14]=s,d[15]=l,d[16]=h.id,d[17]=h.name,d[18]=o):o=d[18],o}try{e5.displayName||(e5.displayName="TasklistItem")}catch{}try{e7.displayName||(e7.displayName="TasklistItemImpl")}catch{}let e6=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function e8({yaml:e,isStreaming:t}){let n=(0,eo.p)(t),i=(0,s.useRef)(new Set),{selectedThreadID:l}=(0,$.Pk)(),{updateItem:o,openItem:c,openPreviewPane:d}=(0,w.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:p}=(0,r.H)(),h=(0,s.useRef)({name:"Tasklist",tasks:[]}),f=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,O.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&e6(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,l);return null!=t?(h.current=t,t):h.current},[e,l]),g=(0,s.useMemo)(()=>f.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:a,...i}=e;return{...i,name:a,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[f,m,u,t]),{convertAllToDraftIssues:v}=(0,eY.W)(g.map(e=>e.tag)),x=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:a}=t;c(e.id,n),d(a?.currentTarget),p(!0)},[c,d,p]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let a=g[e];o(a),(t||n)&&!i.current.has(a.id)&&(i.current.add(a.id),x(a,{selectItem:0===e}))}},[t,n,x,g,o]);let b=(0,s.useCallback)((e,t)=>x(e,{event:t}),[x]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:l}),[l]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:l})},[n,g.length,l]);let _=g.map(e=>(0,a.jsx)(e5,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,a.jsx)("div",{className:eJ.container,children:(0,a.jsxs)(eQ.l,{variant:"full",showDividers:!0,children:[(0,a.jsx)(e2,{onConvertAllToDraftIssues:v,taskCount:g.length,title:f?.name??"Tasklist"}),(0,a.jsx)(eX,{isStreaming:!!t,taskCount:g.length,children:_})]})})}try{e8.displayName||(e8.displayName="PlanningTasklistBlock")}catch{}let e9=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(e8,{...e})}};var te=n(33592),tt=n(86877),tn=n(4175),ta=n(1903),ti=n(54070),ts=n(21373),tr=n(40090);let tl={container:"PlanningQuestionsForm-module__container--Xi24c",headerContainer:"PlanningQuestionsForm-module__headerContainer--td62h",headerSection:"PlanningQuestionsForm-module__headerSection--pbytI",outlineSection:"PlanningQuestionsForm-module__outlineSection--Tx0yi",title1:"PlanningQuestionsForm-module__title1--TtN_9",title2:"PlanningQuestionsForm-module__title2--Xmt0r",outlineList:"PlanningQuestionsForm-module__outlineList--dnB7B",questionContainer:"PlanningQuestionsForm-module__questionContainer--Wr4q2",suggestionsContainer:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",suggestions:"PlanningQuestionsForm-module__suggestions--rKk1X",footerContainer:"PlanningQuestionsForm-module__footerContainer--Xpj2v"};function to({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:i,className:r}){let l=(0,s.useMemo)(()=>{let t={},n={};for(let[a,i]of e.questions.entries()){if(!i.suggestions||0===i.suggestions.length)continue;let e=i.suggestions[0];t[a]=e,n[a]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[o,c]=(0,s.useState)(l.initialAnswers),[d,u]=(0,s.useState)(l.initialSelectedSuggestions),[m,p]=(0,s.useState)(""),h=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...a}=t;return a}),c(n=>({...n,[e]:t}))},[]),f=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),c(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>o[t]?.trim())||m.trim(),[o,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,a]of e.questions.entries()){let e=o[t]?.trim();e&&n.push(`Question: ${a.question.trim()}
Answer: ${e}`)}let a=m.trim();a&&n.push(`Additional comments: ${a}`),0!==n.length&&i(n.join(`

`))},[o,e.questions,m,i]);return n?e.questions.length>0?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Open questions:"}),(0,a.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,a.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,a.jsxs)("div",{className:(0,_.$)(tl.container,r),children:[(0,a.jsx)("div",{className:tl.headerContainer,children:(0,a.jsxs)("div",{className:tl.headerSection,children:[(0,a.jsx)(tr.r,{maxWidth:"50%",size:"titleLarge"}),(0,a.jsxs)("div",{className:tl.outlineSection,children:[(0,a.jsx)(tr.r,{maxWidth:"10%",size:"subtitle"}),(0,a.jsx)(tr.r,{maxWidth:"25%"}),(0,a.jsx)(tr.r,{maxWidth:"25%"}),(0,a.jsx)(tr.r,{maxWidth:"25%"})]})]})}),(0,a.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,a.jsx)(tr.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,a.jsxs)("div",{className:tl.questionContainer,children:[(0,a.jsx)(tr.r,{maxWidth:"80%",size:"subtitle"}),(0,a.jsx)(tr.r,{maxWidth:"70%",size:"bodyLarge"}),(0,a.jsx)(tr.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,a.jsxs)("div",{className:tl.footerContainer,children:[(0,a.jsx)(tr.r,{maxWidth:"15%",size:"titleLarge"}),(0,a.jsx)(tr.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,a.jsxs)("form",{className:(0,_.$)(tl.container,r),onSubmit:y,children:[(0,a.jsx)("div",{className:tl.headerContainer,children:(0,a.jsxs)("div",{className:tl.headerSection,children:[(0,a.jsx)("div",{className:tl.title1,children:e.name}),e.outline.length>0&&(0,a.jsxs)("div",{className:tl.outlineSection,children:[(0,a.jsx)("div",{className:tl.title2,children:"Outline"}),(0,a.jsx)("ul",{className:tl.outlineList,children:e.outline.map(e=>(0,a.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsx)("div",{className:tl.title2,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),i=t.suggestions||[];return(0,a.jsx)("div",{className:tl.questionContainer,children:(0,a.jsxs)(tt.A,{className:"flex-self-stretch",children:[(0,a.jsx)(tt.A.Label,{children:t.question}),(0,a.jsx)(tn.Ay,{block:!0,onChange:e=>h(n,e.target.value),rows:1,value:o[n]||""}),i.length>0&&(0,a.jsxs)(tt.A.Caption,{className:tl.suggestionsContainer,children:["Suggestions",(0,a.jsx)(ta.A,{className:tl.suggestions,children:i.map(e=>{let t=i.indexOf(e),s=d[n]===t;return(0,a.jsx)(ti.A,{as:"button",isSelected:s,onClick:()=>f(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,a.jsxs)(tt.A,{className:"flex-self-stretch",children:[(0,a.jsx)(tt.A.Label,{children:"Additional comments"}),(0,a.jsx)(tn.Ay,{block:!0,onChange:e=>p(e.target.value),rows:3,value:m})]}),(0,a.jsx)("div",{className:tl.footerContainer,children:(0,a.jsx)(ts.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{to.displayName||(to.displayName="PlanningQuestionsForm")}catch{}let tc=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function td(e){let t,n,i,l,o,d,u=(0,c.c)(18),{yaml:m,isStreaming:p}=e,{selectedThreadID:h,messages:f,currentReferences:g}=(0,$.Pk)(),{messageIndex:v}=(0,r.H)(),x=(0,te.b)();u[0]!==h||u[1]!==m?(t=((e,t)=>{try{var n=(0,O.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&tc(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,h),u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let _=n,w=f.length>v+1;u[5]!==g||u[6]!==x||u[7]!==_.questions.length||u[8]!==h?(i=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:h,totalQuestionsCount:_.questions.length});let t=x.getThreadById(h);x.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=x,u[7]=_.questions.length,u[8]=h,u[9]=i):i=u[9];let j=i;return u[10]!==h?(l=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:h}),o=[h],u[10]=h,u[11]=l,u[12]=o):(l=u[11],o=u[12]),(0,s.useEffect)(l,o),u[13]!==j||u[14]!==w||u[15]!==p||u[16]!==_?(d=(0,a.jsx)(to,{className:"mb-3",questions:_,isStreaming:p,isReadOnly:w,onSubmitAnswers:j}),u[13]=j,u[14]=w,u[15]=p,u[16]=_,u[17]=d):d=u[17],d}try{td.displayName||(td.displayName="PlanningQuestionsBlock")}catch{}let tu=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(td,{...e})}};var tm=n(44095);let tp=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,a.jsx)(tm._,{...e})}},th={markdownOverrides:"MarkdownViewer-module__markdownOverrides--xtpOl"},tf=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:c,...d})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),p=(0,s.useMemo)(()=>[...d.extensions??[],function(e){return{transformMarkdown:t=>(0,o.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:i}=function(e,t){let n=e&&E.exec(e);if(n)return{name:n.groups?.name,code:t};let a=L.exec(t);return a?{name:a.groups?.name,code:t.replace(L,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let s=function(e){if(!e)return;let t=R.exec(e);return t?.groups?.url}(t.meta??void 0),r=i.split(`
`,6),l=6===r.length,o=l?r.join(`
`):`${r.join(`
`)}
`,c=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[T]:JSON.stringify({language:n,name:a,url:s,code:i,line:c,isStreaming:t.isStreaming??!1,isClipped:l,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,o.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&T in a.properties&&n.children.splice(t,1,a)}),reactComponents:A}}([]),{transformMarkdown:e=>(0,o.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=eC.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:i=""}=t.groups;e.data={hName:"span",hProperties:{[ek]:JSON.stringify({owner:n,repo:a,issueNumber:i,href:e.url,children:(0,e_.d)(e)})}}}),reactComponents:eS},eG,ez,er,eb,e9,tu,tp],[d.extensions]);return(0,a.jsx)(r.A.Provider,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:c,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,l,c,u,m]),children:(0,a.jsx)(i.To,{...d,markdown:c,extensions:p,chatMode:"immersive",className:th.markdownOverrides})})},tg=s.memo(tf);try{tf.displayName||(tf.displayName="MarkdownViewer")}catch{}try{tg.displayName||(tg.displayName="MemoizedMarkdownViewer")}catch{}},82590:(e,t,n)=>{n.d(t,{J1:()=>c,Os:()=>l,QK:()=>o,S$:()=>i,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>d});var a=n(25641);let i="loops",s="loops",r="loop",l="Loops",o=`${a.Jz}/loops`,c=`${a.Jz}/l`,d=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},83599:(e,t,n)=>{n.d(t,{A:()=>TasksPlugin});var a=n(50467),i=n(96540),s=n(74848),r=n(21728),l=n(76143),o=n(33592),c=n(1747),d=n(21502),u=n(42312),m=n(27912),p=n(88934),h=n(46251),f=n(53419),g=n(38621),y=n(26108);function v(e){let t,n=(0,r.c)(4),{isContentPreviewOpen:a,openPreviewPane:i}=e,l=(0,u.U)();return n[0]!==l||n[1]!==a||n[2]!==i?(t=!a&&(0,s.jsx)(y.K,{icon:g.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{i(),(0,f.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:l}),n[0]=l,n[1]=a,n[2]=i,n[3]=t):t=n[3],t}try{v.displayName||(v.displayName="PreviewPaneButton")}catch{}var x=n(5524),b=n(19199),_=n(26410),w=n(99223),j=n(13107),N=n(71315);let k={actionList:"OpenInMenu-module__actionList--jMOLM",menuItem:"OpenInMenu-module__menuItem--SS743",menuContent:"OpenInMenu-module__menuContent--dtUPD",menuIcon:"OpenInMenu-module__menuIcon--TWmG3",menuTitle:"OpenInMenu-module__menuTitle--hwhpE",cliSection:"OpenInMenu-module__cliSection--nAe4Q",cliHeader:"OpenInMenu-module__cliHeader--ggn5w",cliDescription:"OpenInMenu-module__cliDescription--TKlSI",actionListDivider:"OpenInMenu-module__actionListDivider--CEt3s"};var C=n(69599);function S(e,t){let n=`git clone https://github.com/${t}.git && code ${t.split("/")[1]}`;window.open(e,"_self"),navigator.clipboard&&navigator.clipboard.writeText(n)}let I=e=>()=>{S(`vscode://vscode.git/clone?url=https://github.com/${e}.git`,e)},T=(e,t)=>()=>{S(function(e,t){let n=N.cg?.location.origin||"https://github.com";return`x-github-client://openRepo/${n}/${e}?pr=${t}`}(e,t),e)};function E(e){let t,n,a,i,l,o,c,d,u=(0,r.c)(22),{pull:m}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,C.G7)("open_session_in_vscode_chat"),u[0]=t):t=u[0];let p=t;u[1]!==m.repository_nwo?(n=I(m.repository_nwo),u[1]=m.repository_nwo,u[2]=n):n=u[2];let h=n;if(u[3]!==m.global_relay_id||u[4]!==m.repository_nwo){let e,t;e=m.repository_nwo,t=m.global_relay_id,a=()=>{S(`vscode-insiders://GitHub.copilot-chat/openAgentSession?type=copilot&id=${t}`,e)},u[3]=m.global_relay_id,u[4]=m.repository_nwo,u[5]=a}else a=u[5];let f=a;u[6]!==m.number||u[7]!==m.repository_nwo?(i=T(m.repository_nwo,m.number),u[6]=m.number,u[7]=m.repository_nwo,u[8]=i):i=u[8];let g=i;u[9]!==m.head_ref_name||u[10]!==m.repository_id?(l=(0,j.QS)(m.repository_id,m.head_ref_name),u[9]=m.head_ref_name,u[10]=m.repository_id,u[11]=l):l=u[11];let y=l;u[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,w.k)(),u[12]=o):o=u[12];let v=o,x=!!y;return u[13]!==g||u[14]!==h||u[15]!==f||u[16]!==m.url?(c=(0,s.jsx)(L,{pullURL:m.url,onOpenInVSCode:h,onOpenInVSCodeInsiders:f,onOpenInGitHubDesktop:g,showVSCodeInsiders:p}),u[13]=g,u[14]=h,u[15]=f,u[16]=m.url,u[17]=c):c=u[17],u[18]!==y||u[19]!==x||u[20]!==c?(d=(0,s.jsx)(b.n,{primary:!1,size:"small",isEnterprise:v,showCodespacesTab:x,codespacesPath:y,localTab:c}),u[18]=y,u[19]=x,u[20]=c,u[21]=d):d=u[21],d}function L(e){let t,n,a,i,l,o,c,d,u,m,p,h,f=(0,r.c)(22),{pullURL:y,onOpenInVSCode:v,onOpenInVSCodeInsiders:b,onOpenInGitHubDesktop:w,showVSCodeInsiders:j}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:k.menuContent,children:[(0,s.jsx)(g.TerminalIcon,{className:k.menuIcon}),(0,s.jsx)("p",{className:k.menuTitle,children:"Open in VS Code"})]}),f[0]=t):t=f[0],f[1]!==v?(n=(0,s.jsx)(x.l.Item,{className:k.menuItem,onSelect:v,children:t}),f[1]=v,f[2]=n):n=f[2],f[3]!==b||f[4]!==j?(a=j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.l.Divider,{className:k.actionListDivider}),(0,s.jsx)(x.l.Item,{className:k.menuItem,onSelect:b,children:(0,s.jsxs)("div",{className:k.menuContent,children:[(0,s.jsx)(g.TerminalIcon,{className:k.menuIcon}),(0,s.jsx)("p",{className:k.menuTitle,children:"Open in VS Code Insiders"})]})})]}),f[3]=b,f[4]=j,f[5]=a):a=f[5],f[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(x.l.Divider,{className:k.actionListDivider}),f[6]=i):i=f[6],f[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsxs)("div",{className:k.menuContent,children:[(0,s.jsx)(g.DesktopDownloadIcon,{className:k.menuIcon}),(0,s.jsx)("p",{className:k.menuTitle,children:"Checkout with GitHub Desktop"})]}),f[7]=l):l=f[7],f[8]!==w?(o=(0,s.jsx)(x.l.Item,{className:k.menuItem,onSelect:w,children:l}),f[8]=w,f[9]=o):o=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(x.l.Divider,{className:k.actionListDivider}),f[10]=c):c=f[10],f[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsxs)("div",{className:k.cliHeader,children:[(0,s.jsx)(g.TerminalIcon,{className:k.menuIcon}),(0,s.jsx)("p",{className:k.menuTitle,children:"GitHub CLI"})]}),f[11]=d):d=f[11];let N=`gh pr view ${y}`;return f[12]!==N?(u=(0,s.jsx)(_.J,{buttonAriaLabel:"Copy GitHub PR CLI command to clipboard",inputId:"github-cli",inputLabel:"GitHub CLI command",url:N}),f[12]=N,f[13]=u):u=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)("p",{className:k.cliDescription,children:"View this pull request in the GitHub CLI PR view."}),f[14]=m):m=f[14],f[15]!==u?(p=(0,s.jsx)("ul",{children:(0,s.jsxs)("li",{className:k.cliSection,children:[d,u,m]})}),f[15]=u,f[16]=p):p=f[16],f[17]!==p||f[18]!==n||f[19]!==a||f[20]!==o?(h=(0,s.jsxs)(x.l,{className:k.actionList,children:[n,a,i,o,c,p]}),f[17]=p,f[18]=n,f[19]=a,f[20]=o,f[21]=h):h=f[21],h}try{E.displayName||(E.displayName="OpenInMenu")}catch{}try{L.displayName||(L.displayName="CustomLocalTab")}catch{}var R=n(21373);function A(e){let t,n,a=(0,r.c)(6),{pullUrl:i,taskId:l}=e;a[0]!==i||a[1]!==l?(t=()=>{(0,f.BI)("agent_sessions.task_view",{target:"VIEW_PULL_REQUEST_BUTTON",pull_url:i,task_id:l})},a[0]=i,a[1]=l,a[2]=t):t=a[2];let o=t;return a[3]!==o||a[4]!==i?(n=(0,s.jsx)(R.Q,{as:"a",href:i,target:"_self",leadingVisual:g.GitPullRequestIcon,variant:"primary",size:"small",onClick:o,children:"View pull request"}),a[3]=o,a[4]=i,a[5]=n):n=a[5],n}try{A.displayName||(A.displayName="ViewPullRequestButton")}catch{}var D=n(61191);function P(){let e,t,n,a,i=(0,r.c)(9),l=(0,C.G7)("copilot_swe_agent_progress_commands"),o=(0,C.G7)("copilot_mission_control_feedback"),{openFeedback:c,FeedbackDialog:d}=(0,D.f)("task-header");i[0]!==c?(e=()=>c(),i[0]=c,i[1]=e):e=i[1];let u=e;return l&&o?(i[2]!==u?(t=(0,s.jsx)(R.Q,{variant:"link",className:"f6",onClick:u,children:"Give feedback"}),i[2]=u,i[3]=t):t=i[3],i[4]!==d?(n=(0,s.jsx)(d,{}),i[4]=d,i[5]=n):n=i[5],i[6]!==t||i[7]!==n?(a=(0,s.jsxs)(s.Fragment,{children:[t,n]}),i[6]=t,i[7]=n,i[8]=a):a=i[8],a):null}try{P.displayName||(P.displayName="FeedbackButton")}catch{}var O=n(27042);function B(e){let t,n,a,i,l,o,c,d,u,m,p,h,f,v,b,_,N,k,S,E,L,R,A=(0,r.c)(46),{pull:P}=e;A[0]!==P.repository_nwo?(t=I(P.repository_nwo),A[0]=P.repository_nwo,A[1]=t):t=A[1];let B=t;A[2]!==P.number||A[3]!==P.repository_nwo?(n=T(P.repository_nwo,P.number),A[2]=P.number,A[3]=P.repository_nwo,A[4]=n):n=A[4];let F=n;if(A[5]!==P.head_ref_name||A[6]!==P.repository_id){let e,t;e=P.repository_id,t=P.head_ref_name,a=()=>{let n=(0,j.QS)(e,t);n&&window.open(n,"_self")},A[5]=P.head_ref_name,A[6]=P.repository_id,A[7]=a}else a=A[7];let M=a,{openFeedback:$,FeedbackDialog:V}=(0,D.f)("task-header");A[8]!==$?(i=()=>$(),A[8]=$,A[9]=i):i=A[9];let U=i;A[10]!==P.url?(l=()=>{window.open(P.url,"_blank")},A[10]=P.url,A[11]=l):l=A[11];let q=l;A[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,w.k)(),A[12]=o):o=A[12];let W=o;A[13]!==P.head_ref_name||A[14]!==P.repository_id?(c=(0,j.QS)(P.repository_id,P.head_ref_name),A[13]=P.head_ref_name,A[14]=P.repository_id,A[15]=c):c=A[15];let H=!!c&&!W;return A[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(y.K,{icon:g.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),A[16]=d):d=A[16],A[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(x.l.LeadingVisual,{children:(0,s.jsx)(g.GitPullRequestIcon,{})}),A[17]=u):u=A[17],A[18]!==q?(m=(0,s.jsxs)(x.l.Item,{onSelect:q,children:[u,"View pull request"]}),A[18]=q,A[19]=m):m=A[19],A[20]!==U?(p=(0,C.G7)("copilot_mission_control_feedback")&&(0,s.jsxs)(x.l.Item,{onSelect:U,children:[(0,s.jsx)(x.l.LeadingVisual,{children:(0,s.jsx)(g.CommentIcon,{})}),"Feedback"]}),A[20]=U,A[21]=p):p=A[21],A[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(x.l.Divider,{}),A[22]=h):h=A[22],A[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsx)(x.l.GroupHeading,{children:"Open in"}),A[23]=f):f=A[23],A[24]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)(x.l.LeadingVisual,{children:(0,s.jsx)(g.VscodeIcon,{})}),A[24]=v):v=A[24],A[25]!==B?(b=(0,s.jsxs)(x.l.Item,{onSelect:B,children:[v,"Open in VS Code"]}),A[25]=B,A[26]=b):b=A[26],A[27]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsx)(x.l.LeadingVisual,{children:(0,s.jsx)(g.DesktopDownloadIcon,{})}),A[27]=_):_=A[27],A[28]!==F?(N=(0,s.jsxs)(x.l.Item,{onSelect:F,children:[_,"Checkout with GitHub Desktop"]}),A[28]=F,A[29]=N):N=A[29],A[30]!==M||A[31]!==H?(k=H&&(0,s.jsxs)(x.l.Item,{onSelect:M,children:[(0,s.jsx)(x.l.LeadingVisual,{children:(0,s.jsx)(g.TerminalIcon,{})}),"Open in Codespaces"]}),A[30]=M,A[31]=H,A[32]=k):k=A[32],A[33]!==b||A[34]!==N||A[35]!==k?(S=(0,s.jsxs)(x.l.Group,{children:[f,b,N,k]}),A[33]=b,A[34]=N,A[35]=k,A[36]=S):S=A[36],A[37]!==m||A[38]!==p||A[39]!==S?(E=(0,s.jsxs)(O.W,{children:[d,(0,s.jsx)(O.W.Overlay,{align:"end",children:(0,s.jsxs)(x.l,{children:[m,p,h,S]})})]}),A[37]=m,A[38]=p,A[39]=S,A[40]=E):E=A[40],A[41]!==V?(L=(0,s.jsx)(V,{}),A[41]=V,A[42]=L):L=A[42],A[43]!==E||A[44]!==L?(R=(0,s.jsxs)(s.Fragment,{children:[E,L]}),A[43]=E,A[44]=L,A[45]=R):R=A[45],R}try{B.displayName||(B.displayName="TaskHeaderMobileMenu")}catch{}var F=n(50129),M=n(79684);function $(e){let t,n,a=(0,r.c)(4),{pull:i}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(M.B.Item,{href:"/copilot/agents",children:"Tasks"}),a[0]=t):t=a[0];let l=!i,o=i?.title;return a[1]!==l||a[2]!==o?(n=(0,s.jsxs)(M.B,{children:[t,(0,s.jsx)(M.B.Item,{loading:l,children:o})]}),a[1]=l,a[2]=o,a[3]=n):n=a[3],n}try{$.displayName||($.displayName="TaskBreadcrumbs")}catch{}var V=n(34164);let U={container:"TaskHeader-module__container--mszgP",leftControls:"TaskHeader-module__leftControls--gPjSp",rightControls:"TaskHeader-module__rightControls--ujKcE",desktopButtons:"TaskHeader-module__desktopButtons--bONYA",mobileMenu:"TaskHeader-module__mobileMenu--CAeut",largerBreakpoint:"TaskHeader-module__largerBreakpoint--Q9iqK"};function q(e){let t,n,a,i,l,o,c,d,u,m=(0,r.c)(22),{pull:p,isContentPreviewOpen:f,openPreviewPane:g}=e,y=`/${p?.repository_nwo}/pull/${p?.number}`;if(m[0]!==y){let e=(0,C.G7)("copilot_mission_control_feedback");t=F.Kg,a=y,n=(0,V.$)(U.container,e&&U.largerBreakpoint),m[0]=y,m[1]=t,m[2]=n,m[3]=a}else t=m[1],n=m[2],a=m[3];return m[4]!==p?(i=(0,s.jsx)("div",{className:U.leftControls,children:(0,s.jsx)($,{pull:p})}),m[4]=p,m[5]=i):i=m[5],m[6]!==p?(l=p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:U.desktopButtons,children:[(0,s.jsx)(P,{}),(0,s.jsx)(E,{pull:p}),(0,s.jsx)(A,{pullUrl:p.url,taskId:p.global_relay_id})]}),(0,s.jsx)("div",{className:U.mobileMenu,children:(0,s.jsx)(B,{pull:p})})]}),m[6]=p,m[7]=l):l=m[7],m[8]!==f||m[9]!==g?(o=(0,s.jsx)(v,{isContentPreviewOpen:f,openPreviewPane:g}),m[8]=f,m[9]=g,m[10]=o):o=m[10],m[11]!==l||m[12]!==o?(c=(0,s.jsx)("div",{className:U.rightControls,children:(0,s.jsxs)(h.B,{direction:"horizontal",align:"center",gap:"condensed",children:[l,o]})}),m[11]=l,m[12]=o,m[13]=c):c=m[13],m[14]!==n||m[15]!==i||m[16]!==c?(d=(0,s.jsxs)("div",{className:n,children:[i,c]}),m[14]=n,m[15]=i,m[16]=c,m[17]=d):d=m[17],m[18]!==t||m[19]!==a||m[20]!==d?(u=(0,s.jsx)(t,{basePageDataUrl:a,children:d}),m[18]=t,m[19]=a,m[20]=d,m[21]=u):u=m[21],u}try{q.displayName||(q.displayName="TaskHeader")}catch{}var W=n(76977),H=n(3024),K=n(51213),G=n(98678),z=n(7812),Q=n(67955),Y=n(97189),J=n(97286),X=n(79634);async function Z(e,t){if(!e)throw Error("No globalID provided");let n=new URL(`/copilot/tasks/pull/${e}`,window.location.origin);t&&n.searchParams.set("session_id",t);let a=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)throw Error(`Failed to fetch task payload for ${e}`);return await a.json()}let ee=["pull","sessions","currentUser","currentUserCanPush","steeringEnabled","logsPollingInterval","sessionsPollingInterval"];function et(){let e,t,n,a,i=(0,r.c)(11),s=(0,X.X)(),{globalID:l}=(0,p.g)(),[o]=(0,p.ok)();i[0]!==o?(e=o.get("session_id"),i[0]=o,i[1]=e):e=i[1];let c=e,d=s&&"object"==typeof s&&null!==s&&ee.every(e=>e in s)&&l&&s.pull&&s.pull.global_relay_id===l?s:void 0;i[2]!==l||i[3]!==c?(t=["agent-task-payload",l,c],n=()=>Z(l,c),i[2]=l,i[3]=c,i[4]=t,i[5]=n):(t=i[4],n=i[5]);let u=!!l&&!d;return i[6]!==t||i[7]!==n||i[8]!==u||i[9]!==d?(a={queryKey:t,queryFn:n,initialData:d,enabled:u,staleTime:1/0},i[6]=t,i[7]=n,i[8]=u,i[9]=d,i[10]=a):a=i[10],(0,J.I)(a)}var en=n(40235),ea=n(74022),ei=n(97665);let es=async(e,t={})=>{let{includeBody:n=!1}=t,a=new URL("/copilot/agent-sessions/pull-requests",window.location.origin);a.searchParams.set("pull_request_ids",String(e)),n&&a.searchParams.set("include_body","true");let i=await fetch(a.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw Error(`Failed to fetch pull request ${e}`);let s=(await i.json()).pull_requests[e];if(!s)throw Error(`Pull request ${e} not found`);return s};var er=n(7104),el=n(69726),eo=n(44296),ec=n(34001),ed=n(95254),eu=n(47723),em=n(67154),ep=n(74807);let eh={container:"CopilotInitialMessage-module__container--e58G3",message:"CopilotInitialMessage-module__message--w_WDE"},ef=e=>{let t,n,a=(0,r.c)(3),{message:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(ep.N,{size:32,animationType:"static",loopAnimation:!1}),a[0]=t):t=a[0],a[1]!==i?(n=(0,s.jsxs)("div",{className:eh.container,children:[t,(0,s.jsxs)("p",{className:eh.message,children:["Copilot ",i]})]}),a[1]=i,a[2]=n):n=a[2],n};try{ef.displayName||(ef.displayName="CopilotInitialMessage")}catch{}var eg=n(57352);let ey={container:"UserInitialMessage-module__container--j2mCV",markdown:"UserInitialMessage-module__markdown--adqIo",startedTaskMessage:"UserInitialMessage-module__startedTaskMessage--Llm_V",startedTaskMessageFloating:"UserInitialMessage-module__startedTaskMessageFloating--YL9w7",message:"UserInitialMessage-module__message--WKLo0",checkIcon:"UserInitialMessage-module__checkIcon--nbGA1"};var ev=n(4817);let ex=e=>{let t,n,a,i,l,o,c,d,u,m=(0,r.c)(22),{currentUser:p,threadId:h,session:y,message:v}=e;e:{if(!h){t=void 0;break e}t=`${window.location.origin}/copilot/c/${h}`}let x=t,b=y.event_content;m[0]!==b?(n=b&&(0,s.jsx)(ev.To,{className:ey.markdown,markdown:b}),m[0]=b,m[1]=n):n=m[1];let _=b&&ey.startedTaskMessageFloating;m[2]!==_?(a=(0,V.$)(ey.startedTaskMessage,_),m[2]=_,m[3]=a):a=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)("span",{className:ey.checkIcon,children:(0,s.jsx)(g.CheckIcon,{})}),m[4]=i):i=m[4];let w=p?.login??"User";return m[5]!==w?(l=(0,s.jsx)("span",{children:w}),m[5]=w,m[6]=l):l=m[6],m[7]!==x||m[8]!==y.id||m[9]!==y.resource_global_id||m[10]!==h?(o=x&&(0,s.jsxs)(s.Fragment,{children:[" ","from a"," ",(0,s.jsx)(eg.A,{href:x,inline:!0,onClick:()=>{(0,f.BI)("agent_sessions.task_view",{target:"VIEW_CONVERSATION_LINK",session_id:y.id,task_id:y.resource_global_id,thread_id:h})},children:"conversation"})]}),m[7]=x,m[8]=y.id,m[9]=y.resource_global_id,m[10]=h,m[11]=o):o=m[11],m[12]!==v||m[13]!==l||m[14]!==o?(c=(0,s.jsxs)("p",{className:ey.message,children:[l," ",v,o]}),m[12]=v,m[13]=l,m[14]=o,m[15]=c):c=m[15],m[16]!==a||m[17]!==c?(d=(0,s.jsxs)("div",{className:a,children:[i,c]}),m[16]=a,m[17]=c,m[18]=d):d=m[18],m[19]!==d||m[20]!==n?(u=(0,s.jsxs)("div",{className:ey.container,children:[n,d]}),m[19]=d,m[20]=n,m[21]=u):u=m[21],u};try{ex.displayName||(ex.displayName="UserInitialMessage")}catch{}var eb=n(56883),e_=n(27566),ew=n(62189);let ej={containerWrapper:"SessionHeader-module__containerWrapper--caacS",container:"SessionHeader-module__container--BCSgM",containerStickyToChatInput:"SessionHeader-module__containerStickyToChatInput--JE6Gj",containerStickyToTop:"SessionHeader-module__containerStickyToTop--HfwWn",toggleButton:"SessionHeader-module__toggleButton--bU9HQ",icon:"SessionHeader-module__icon--fUMu9",mainContent:"SessionHeader-module__mainContent--jyuqu",rightContent:"SessionHeader-module__rightContent--Fvqqt",sessionName:"SessionHeader-module__sessionName--eFIXs",statusIcon:"SessionHeader-module__statusIcon--qeEPF"};var eN=n(12385),ek=n(24939),eC=n(40260);function eS(e){let t,n,a=(0,r.c)(6),{containerRef:i,behavior:s,smoothThreshold:l}=e,o=void 0===s?"auto":s;a[0]!==i||a[1]!==o||a[2]!==l?(t=e=>{let t=void 0===e?o:e,{distance:n,element:a,targetTop:s}=(e=>{if(!e){let e=document.scrollingElement||document.documentElement,t=window.scrollY||window.pageYOffset,n=e.scrollHeight;return{element:null,targetTop:n,distance:Math.abs(n-t)}}return{element:e,targetTop:e.scrollHeight,distance:Math.abs(e.scrollHeight-e.scrollTop)}})(i?.current),r=t;"auto"===t&&void 0!==l&&(r=n>=l?"smooth":"auto"),a?a.scrollTo({top:s,behavior:r}):window.scrollTo({top:s,behavior:r})},a[0]=i,a[1]=o,a[2]=l,a[3]=t):t=a[3];let c=t;return a[4]!==c?(n={scrollToBottom:c},a[4]=c,a[5]=n):n=a[5],n}function eI(e){let t,n,a,l,o,c,d,u,m,p,h,v,b,_,w,j,N,k,C,S,I,T,E,L,R,A,D,P,B,F=(0,r.c)(90),{nwo:M,currentUserCanPush:$,isCollapsed:U,onModifierClick:q,scrollContainerRef:W,hideStopButton:H,contentId:K,onOpenChange:G}=e,{session:z}=(0,eo.Lg)(),Q=M??null;F[0]!==z.workflow_run_id||F[1]!==Q?(t=(0,e_.A)(Q,z.workflow_run_id),F[0]=z.workflow_run_id,F[1]=Q,F[2]=t):t=F[2];let Y=t,J=(0,ew.U)(z.resource_global_id,z.id),X=!!(Y||J),Z=(0,i.useRef)(null);F[3]!==z?(n=(0,em.v5)(z),F[3]=z,F[4]=n):n=F[4];let ee=n,et=(0,em.VY)(z),en=(0,em.K9)(z);F[5]!==z?(a=(0,em.mk)(z),F[5]=z,F[6]=a):a=F[6];let ea=a,ei=(0,em.cv)(z),[es,er]=(0,i.useState)(!1);F[7]!==W?(l={containerRef:W,behavior:"smooth"},F[7]=W,F[8]=l):l=F[8];let{scrollToBottom:el}=eS(l);F[9]!==z.id||F[10]!==z.resource_global_id?(o=e=>{e&&(er(!0),(0,f.BI)("agent_sessions.task_view",{target:"STOP_SESSION_BUTTON",session_id:z.id,task_id:z.resource_global_id}))},F[9]=z.id,F[10]=z.resource_global_id,F[11]=o):o=F[11];let ec=o;F[12]!==ea||F[13]!==es?(c=()=>{if(ea&&es){let e=setTimeout(()=>er(!1),0);return()=>clearTimeout(e)}},d=[ea,es],F[12]=ea,F[13]=es,F[14]=c,F[15]=d):(c=F[14],d=F[15]),(0,i.useEffect)(c,d),F[16]!==ee||F[17]!==W?(u={scrollContainerRef:W,elementRef:Z,enabled:ee,offset:-8},F[16]=ee,F[17]=W,F[18]=u):u=F[18];let{isLeaving:ed}=function(e){let t,n,a,s,l,o=(0,r.c)(11),{scrollContainerRef:c,elementRef:d,enabled:u,offset:m}=e,p=void 0===m?0:m,[h,f]=(0,i.useState)(!1),g=(0,i.useRef)(h);return o[0]!==h?(t=()=>{g.current=h},n=[h],o[0]=h,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,i.useEffect)(t,n),o[3]!==d||o[4]!==u||o[5]!==p||o[6]!==c?(a=()=>{let e=c.current,t=d.current;if(!u||!e||!t)return;let n=()=>{let n=e.getBoundingClientRect(),a=t.getBoundingClientRect().bottom>n.bottom+p;a!==g.current&&f(a)};n();let a=null,i=()=>{null==a&&(a=window.requestAnimationFrame(()=>{n(),a=null}))};return e.addEventListener("scroll",i),()=>{f(!1),e.removeEventListener("scroll",i)}},s=[u,c,d,p],o[3]=d,o[4]=u,o[5]=p,o[6]=c,o[7]=a,o[8]=s):(a=o[7],s=o[8]),(0,i.useEffect)(a,s),o[9]!==h?(l={isLeaving:h},o[9]=h,o[10]=l):l=o[10],l}(u);F[19]!==U||F[20]!==ed||F[21]!==q||F[22]!==G||F[23]!==el||F[24]!==z.id||F[25]!==z.resource_global_id?(m=e=>{if((e.altKey||e.metaKey)&&q)return e.preventDefault(),e.stopPropagation(),q(!!U),(0,f.BI)("agent_sessions.task_view",{target:"SESSION_HEADER_MODIFIER",action:U?"EXPAND_ALL":"COLLAPSE_ALL",session_id:z.id,task_id:z.resource_global_id}),!1;if((0,f.BI)("agent_sessions.task_view",{target:"SESSION_HEADER",action:U?"EXPAND":"COLLAPSE",session_id:z.id,task_id:z.resource_global_id}),ed){G(!0),setTimeout(()=>{el()},50);return}G(U)},F[19]=U,F[20]=ed,F[21]=q,F[22]=G,F[23]=el,F[24]=z.id,F[25]=z.resource_global_id,F[26]=m):m=F[26];let eu=m;F[27]!==z.id||F[28]!==z.resource_global_id?(p=e=>{if((0,f.BI)("agent_sessions.task_view",{target:"CLICK_WORKFLOW_LOGS_LINK",session_id:z.id,task_id:z.resource_global_id}),e.metaKey||e.ctrlKey)return void e.stopPropagation()},F[27]=z.id,F[28]=z.resource_global_id,F[29]=p):p=F[29];let ep=p;F[30]!==z.id||F[31]!==z.resource_global_id||F[32]!==J?(h=async e=>{if(J)try{let e=window.location.origin+J;await (0,eC.D)(e),(0,f.BI)("agent_sessions.task_view",{target:"COPY_SESSION_LINK",session_id:z.id,task_id:z.resource_global_id})}catch{e.preventDefault(),e.stopPropagation()}},F[30]=z.id,F[31]=z.resource_global_id,F[32]=J,F[33]=h):h=F[33];let eh=h;e:{if(et){v="New session";break e}v=z.name}let ef=v;t:{if(es||ea){let e;F[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.SkipIcon,{className:"fgColor-muted"}),F[34]=e):e=F[34],b=e;break t}if(en){let e;F[35]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.CheckIcon,{className:"fgColor-success"}),F[35]=e):e=F[35],b=e;break t}if(ei){let e;F[36]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.XCircleFillIcon,{className:"fgColor-danger"}),F[36]=e):e=F[36],b=e;break t}b=null}let eg=b;n:{if(et){_=null;break n}if(ee||en||ea||ei){let e;F[37]!==z.completed_at||F[38]!==z.created_at||F[39]!==z.state?(e=(0,s.jsx)(ek.A,{createdAt:z.created_at,completedAt:z.completed_at,state:z.state}),F[37]=z.completed_at,F[38]=z.created_at,F[39]=z.state,F[40]=e):e=F[40],_=e;break n}_=null}let ey=_;a:{if(void 0!==H&&H){w=!1;break a}w=ee}let ev=w,ex=!U,eb=!U;F[41]!==eb?(j=(0,s.jsx)(g.ChevronRightIcon,{className:ej.icon,"data-expanded":eb}),F[41]=eb,F[42]=j):j=F[42],F[43]!==K||F[44]!==eu||F[45]!==ex||F[46]!==j?(N=(0,s.jsx)("button",{onClick:eu,type:"button",className:ej.toggleButton,"aria-expanded":ex,"aria-controls":K,"aria-labelledby":"session-header-title",children:j}),F[43]=K,F[44]=eu,F[45]=ex,F[46]=j,F[47]=N):N=F[47],F[48]!==ef?(k=(0,s.jsx)("span",{className:ej.sessionName,id:"session-header-title",children:ef}),F[48]=ef,F[49]=k):k=F[49],F[50]!==N||F[51]!==k?(C=(0,s.jsxs)("div",{className:ej.mainContent,children:[N,k]}),F[50]=N,F[51]=k,F[52]=C):C=F[52],F[53]!==ey||F[54]!==eg?(S=(eg||ey)&&(0,s.jsxs)("div",{className:"d-flex align-items-center gap-1 mr-2",children:[eg&&(0,s.jsx)("span",{className:ej.statusIcon,children:eg}),ey&&(0,s.jsx)("span",{className:"text-small text-medium text-tabular-nums",children:ey})]}),F[53]=ey,F[54]=eg,F[55]=S):S=F[55],F[56]!==$||F[57]!==ec||F[58]!==es||F[59]!==M||F[60]!==ev?(I=ev&&(0,s.jsx)(eN.l,{variant:"icon-button",nwo:M,currentUserCanPush:$,onStoppingStateChange:ec,loading:es}),F[56]=$,F[57]=ec,F[58]=es,F[59]=M,F[60]=ev,F[61]=I):I=F[61],F[62]!==eh||F[63]!==ep||F[64]!==J||F[65]!==X||F[66]!==Y?(T=X&&(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(y.K,{icon:g.KebabHorizontalIcon,"aria-label":"More actions",variant:"invisible"})}),(0,s.jsx)(O.W.Overlay,{align:"end",children:(0,s.jsxs)(x.l,{children:[Y&&(0,s.jsx)(x.l.LinkItem,{href:Y,onClick:ep,children:"View verbose logs"}),J&&(0,s.jsx)(x.l.Item,{onSelect:eh,children:"Copy link"})]})})]}),F[62]=eh,F[63]=ep,F[64]=J,F[65]=X,F[66]=Y,F[67]=T):T=F[67],F[68]!==S||F[69]!==I||F[70]!==T?(E=(0,s.jsxs)("div",{className:ej.rightContent,children:[S,I,T]}),F[68]=S,F[69]=I,F[70]=T,F[71]=E):E=F[71],F[72]!==C||F[73]!==E?(L=(0,s.jsxs)(s.Fragment,{children:[C,E]}),F[72]=C,F[73]=E,F[74]=L):L=F[74];let eI=L,eT=!ed;F[75]!==eT?(R=(0,V.$)(ej.containerWrapper,{[ej.containerStickyToTop]:eT}),F[75]=eT,F[76]=R):R=F[76];let eE=!U;return F[77]!==eI||F[78]!==ee||F[79]!==eE?(A=(0,s.jsx)("div",{"data-active":ee,"data-expanded":eE,className:ej.container,children:eI}),F[77]=eI,F[78]=ee,F[79]=eE,F[80]=A):A=F[80],F[81]!==R||F[82]!==A?(D=(0,s.jsx)("div",{ref:Z,className:R,children:A}),F[81]=R,F[82]=A,F[83]=D):D=F[83],F[84]!==eI||F[85]!==ed?(P=ed&&(0,s.jsx)("div",{className:(0,V.$)(ej.container,ej.containerStickyToChatInput),children:eI}),F[84]=eI,F[85]=ed,F[86]=P):P=F[86],F[87]!==D||F[88]!==P?(B=(0,s.jsxs)(s.Fragment,{children:[D,P]}),F[87]=D,F[88]=P,F[89]=B):B=F[89],B}try{eI.displayName||(eI.displayName="SessionHeader")}catch{}var eT=n(16425);let eE={detailsContainer:"Session-module__detailsContainer--qmZLt",contentContainer:"Session-module__contentContainer--IM2G9",permalinkedSession:"Session-module__permalinkedSession--nOoTk"};var eL=n(55127),eR=n.n(eL);let eA=i.createContext(void 0);function eD(e){let t,n,a=(0,r.c)(7),{currentUser:i,currentUserIsSessionOwner:l,children:o}=e,c=!l;a[0]!==i||a[1]!==l||a[2]!==c?(t={currentUser:i,currentUserIsSessionOwner:l,isSingleSessionView:c},a[0]=i,a[1]=l,a[2]=c,a[3]=t):t=a[3];let d=t;return a[4]!==o||a[5]!==d?(n=(0,s.jsxs)(eA.Provider,{value:d,children:[" ",o," "]}),a[4]=o,a[5]=d,a[6]=n):n=a[6],n}function eP(){let e=i.useContext(eA);if(!e)throw Error("useCurrentUser must be used within a CurrentUserProvider");return e}try{eA.displayName||(eA.displayName="CurrentUserContext")}catch{}try{eD.displayName||(eD.displayName="CurrentUserProvider")}catch{}let eO="session-global-toggle";function eB(e){let t,n,a,l,o,c,d,u,m,h,f,g,y,v,x,b,_=(0,r.c)(43),{defaultOpen:w,onOpenChange:j,scrollContainerRef:N,hideStopButton:k,onToolExpand:C}=e,S=void 0!==k&&k,{session:I}=(0,eo.Lg)(),{isSingleSessionView:T,currentUser:E}=eP(),[L]=(0,p.ok)();_[0]!==L?(t=L.get("session_id"),_[0]=L,_[1]=t):t=_[1];let R=t===I.id&&!T,[A,D]=(0,i.useState)(void 0!==w&&w),{data:P}=et();_[2]!==P?(n=void 0===P?{}:P,_[2]=P,_[3]=n):n=_[3];let{currentUserCanPush:O,pull:B,logsPollingInterval:F}=n,M=(0,i.useRef)(null);_[4]===Symbol.for("react.memo_cache_sentinel")?(a={},_[4]=a):a=_[4];let $=(0,i.useRef)(a);_[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{e.detail.excludeInstance!==$.current&&D(e.detail.expand)},_[5]=l):l=_[5];let U=(0,i.useRef)(l);_[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{let e=e=>{U.current?.(e)};return document.addEventListener(eO,e),()=>{document.removeEventListener(eO,e)}},c=[],_[6]=o,_[7]=c):(o=_[6],c=_[7]),(0,i.useEffect)(o,c),_[8]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{D(e);let t=new CustomEvent(eO,{detail:{expand:e,excludeInstance:$.current}});document.dispatchEvent(t)},_[8]=d):d=_[8];let q=d;_[9]!==j?(u=e=>{D(e),j(e)},_[9]=j,_[10]=u):u=_[10];let W=u;_[11]!==I?(m=(0,em.v5)(I),_[11]=I,_[12]=m):m=_[12];let H=m,K=`session-content-${I.id}`;_[13]!==R?(h=(0,V.$)(eE.detailsContainer,{[eE.permalinkedSession]:R}),_[13]=R,_[14]=h):h=_[14];let G=B?.repository_nwo,z=!!O,Q=!A;_[15]!==K||_[16]!==W||_[17]!==S||_[18]!==N||_[19]!==G||_[20]!==z||_[21]!==Q?(f=(0,s.jsx)(eI,{nwo:G,currentUserCanPush:z,isCollapsed:Q,onModifierClick:q,scrollContainerRef:N,hideStopButton:S,contentId:K,onOpenChange:W}),_[15]=K,_[16]=W,_[17]=S,_[18]=N,_[19]=G,_[20]=z,_[21]=Q,_[22]=f):f=_[22];let Y=F??3e3,J=B?.repository_nwo;return _[23]!==E||_[24]!==Y||_[25]!==J?(g=(0,s.jsx)(eb.U,{logsPollingInterval:Y,nwo:J,currentUser:E,batchCompletedSessions:!0}),_[23]=E,_[24]=Y,_[25]=J,_[26]=g):g=_[26],_[27]!==C||_[28]!==g?(y=(0,s.jsx)(eT.$X,{variant:"mission-control",onToolExpand:C,children:g}),_[27]=C,_[28]=g,_[29]=y):y=_[29],_[30]!==I.premium_requests||_[31]!==I.state?(v=I.state===em.Yj.Completed&&I.premium_requests>0&&(0,s.jsx)("div",{className:(0,V.$)(eE.contentContainer,"border-top"),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-semibold",children:[I.premium_requests," "]}),(0,s.jsxs)("span",{className:"fgColor-muted",children:["premium ",eR()("request",I.premium_requests)]})]})}),_[30]=I.premium_requests,_[31]=I.state,_[32]=v):v=_[32],_[33]!==K||_[34]!==A||_[35]!==y||_[36]!==v?(x=(0,s.jsxs)("div",{id:K,className:eE.contentContainer,"data-expanded":A,children:[y,v]}),_[33]=K,_[34]=A,_[35]=y,_[36]=v,_[37]=x):x=_[37],_[38]!==H||_[39]!==h||_[40]!==f||_[41]!==x?(b=(0,s.jsxs)("div",{ref:M,className:h,"data-active":H,children:[f,x]}),_[38]=H,_[39]=h,_[40]=f,_[41]=x,_[42]=b):b=_[42],b}try{eB.displayName||(eB.displayName="Session")}catch{}let eF={root:"TaskChat-module__root--i8enD",container:"TaskChat-module__container--n3jVO",stickableContainer:"TaskChat-module__stickableContainer--fhutl",scrollContainer:"TaskChat-module__scrollContainer--ENR5a",content:"TaskChat-module__content--X5M4z",initialMessages:"TaskChat-module__initialMessages--zIGn9",chatInputContainer:"TaskChat-module__chatInputContainer--Z0U1_",suspenseSpinner:"TaskChat-module__suspenseSpinner--V6afj",blankSlateContainer:"TaskChat-module__blankSlateContainer--K8GiA"};var eM=n(70257),e$=n(56708),eV=n(86877),eU=n(94747),eq=n(96379);function eW({pull:e,sessions:t=[]}){let n=(0,J.I)({queryKey:["agent-mentions",e.id,t],queryFn:async()=>{let n=await fetch(`/copilot/agent-sessions/pull-requests/${e.id}/agent-mentions?${function(e){let t=e.filter(e=>"pull_request_comment"===e.event_type||"pull_request_comment_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat(),n=e.filter(e=>"pull_request_review"===e.event_type||"pull_request_review_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat(),a=new URLSearchParams;for(let e of t)null!=e&&a.append("pull_request_comment_ids[]",e.toString());for(let e of n)null!=e&&a.append("pull_request_review_ids[]",e.toString());return a}(t)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw Error("Failed to fetch pull request comments");return(await n.json()).agent_mentions},enabled:t.length>0,placeholderData:e=>e}),a=(0,eU.n)({mutationFn:async t=>{/(?:^|[^a-zA-Z0-9_])@copilot(?:[^a-zA-Z0-9_]|$)/i.test(t)||(t=`@copilot ${t.trim()}`);let n=await (0,eq.Sr)(`/${e.repository_nwo}/pull/${e.number}/page_data/create_timeline_comment`,{method:"POST",headers:{Accept:"application/json"},body:{text:t}}),a=await n.json();if(!n.ok)throw Error("Failed to submit comment");return(0,f.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_POST_SESSION",pull_id:e.id,pull_number:e.number}),a}}),i=async(e,t)=>{try{let n=await a.mutateAsync(e);return t?.onSuccess?.(n),n}catch(e){throw t?.onError?.(),e}};return{...n,createMention:i}}var eH=n(51120);let eK={formControl:"TaskChatInput-module__formControl--zRdu3",inputWrapper:"TaskChatInput-module__inputWrapper--eke62",extraToolbarText:"TaskChatInput-module__extraToolbarText--MRY2J",blockedOverlay:"TaskChatInput-module__blockedOverlay--YUGdv"};function eG(e){let t,n,a,l,o,c,d,u,m,p,h,f,y,v,x,b,_,w,j,N=(0,r.c)(59),{activeSession:k,onAddPendingSession:C,onClearPendingSession:S,payload:I,scrollToBottom:T,inputRef:E,chatInputRef:L}=e,{pull:R,steeringEnabled:A,currentUserCanPush:D}=I,[P,O]=(0,i.useState)(!1),B=!!k,F=k?.isPending===!0;N[0]!==k?.user_id||N[1]!==I.sessionOwners?(t=I.sessionOwners.find(e=>e.id===k?.user_id)||null,N[0]=k?.user_id,N[1]=I.sessionOwners,N[2]=t):t=N[2];let M=t,{currentUserIsSessionOwner:$}=eP();N[3]!==P||N[4]!==E?(n=()=>{let e,t=E.current;if(!t)return;let n=()=>{P&&(e=setTimeout(()=>{O(!1)},0))};return t.addEventListener("input",n),()=>{t.removeEventListener("input",n),e&&clearTimeout(e)}},a=[P,E],N[3]=P,N[4]=E,N[5]=n,N[6]=a):(n=N[5],a=N[6]),(0,i.useEffect)(n,a),N[7]!==R?(l={pull:R},N[7]=R,N[8]=l):l=N[8];let{createMention:V}=eW(l);N[9]!==k||N[10]!==B?(o=async e=>{if(B&&!(await (0,eH.I)({path:`/agents/sessions/${k.id}/commands`,method:"POST",body:{content:e}})).ok)throw Error("Failed to submit command")},N[9]=k,N[10]=B,N[11]=o):o=N[11];let U=o;N[12]!==V||N[13]!==U||N[14]!==C||N[15]!==S||N[16]!==T||N[17]!==B?(c=async e=>{O(!1);try{if(B){await U(e),T();return}C(e),await V(e,{onError:()=>{S()}}),T()}catch{throw O(!0),new e$.q(e)}},N[12]=V,N[13]=U,N[14]=C,N[15]=S,N[16]=T,N[17]=B,N[18]=c):c=N[18];let q=c;N[19]!==M?.login||N[20]!==D||N[21]!==$||N[22]!==R||N[23]!==B||N[24]!==A?(d=()=>A?D?"open"!==R.state?`Pull request is ${R.state}`:$?void 0:B?`Only ${M?.login??"the session owner"} can steer this session`:"Only the author of the task can ask for changes. View pull request to request more changes.":"You do not have write permission on the repository":"Steering Copilot requires an active subscription",N[19]=M?.login,N[20]=D,N[21]=$,N[22]=R,N[23]=B,N[24]=A,N[25]=d):d=N[25];let W=d,H=F?"Waiting for Copilot to start session...":B?"Steer active session while Copilot is working":"What would you like to change?";N[26]!==W?(u=W(),N[26]=W,N[27]=u):u=N[27];let K=u,G=!!K,z=!G&&!B&&!F;N[28]!==E||N[29]!==z?(p=()=>{let e=E.current;e&&(z?e.setAttribute("aria-describedby","task-chat-input-help"):e.removeAttribute("aria-describedby"))},m=["task-chat-input-help",z,E],N[28]=E,N[29]=z,N[30]=m,N[31]=p):(m=N[30],p=N[31]),(0,i.useEffect)(p,m),N[32]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(eV.A.Label,{visuallyHidden:!0,children:"New prompt"}),N[32]=h):h=N[32],N[33]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsx)(g.AgentIcon,{}),N[33]=f):f=N[33];let Q=F?"Wait for the session to be started":void 0;N[34]!==H||N[35]!==Q?(y=[{name:"Agent",supportsMCP:!1,supportsAttachments:!1,supportsModelSwitching:!1,supportsAutocompletion:!1,supportsSpaces:!1,icon:f,placeholder:H,submitLabel:Q}],N[34]=H,N[35]=Q,N[36]=y):y=N[36];let Y=F||G;return N[37]!==z?(v=z?(0,s.jsx)("p",{id:"task-chat-input-help",className:eK.extraToolbarText,children:"Submitting will post a pull request comment"}):null,N[37]=z,N[38]=v):v=N[38],N[39]!==L||N[40]!==q||N[41]!==E||N[42]!==G||N[43]!==y||N[44]!==Y||N[45]!==v?(x=(0,s.jsx)(eM.V,{onSubmit:q,textAreaRef:E,chatInputRef:L,modes:y,size:"large",isStreaming:!1,disabled:G,submitDisabled:Y,extraToolbar:v}),N[39]=L,N[40]=q,N[41]=E,N[42]=G,N[43]=y,N[44]=Y,N[45]=v,N[46]=x):x=N[46],N[47]!==K||N[48]!==G?(b=G&&(0,s.jsxs)("div",{className:eK.blockedOverlay,children:[(0,s.jsx)(g.LockIcon,{size:16}),(0,s.jsx)("span",{children:K})]}),N[47]=K,N[48]=G,N[49]=b):b=N[49],N[50]!==x||N[51]!==b?(_=(0,s.jsxs)("div",{className:eK.inputWrapper,children:[x,b]}),N[50]=x,N[51]=b,N[52]=_):_=N[52],N[53]!==P||N[54]!==G?(w=P&&!G&&(0,s.jsx)(eV.A.Validation,{variant:"error",className:"pt-2",children:"Failed to submit latest message"}),N[53]=P,N[54]=G,N[55]=w):w=N[55],N[56]!==_||N[57]!==w?(j=(0,s.jsxs)(eV.A,{className:eK.formControl,children:[h,_,w]}),N[56]=_,N[57]=w,N[58]=j):j=N[58],j}try{eG.displayName||(eG.displayName="TaskChatInput")}catch{}var ez=n(7892),eQ=n(77430),eY=n(81945);let eJ={container:"UserMessage-module__container--n_nga",messageContainer:"UserMessage-module__messageContainer--l7UxI",messageMeta:"UserMessage-module__messageMeta--zsApi",truncatedPath:"UserMessage-module__truncatedPath--IIrJ5",messageText:"UserMessage-module__messageText--Q3g30",avatarContainer:"UserMessage-module__avatarContainer--ALfST"},eX=e=>{let t,n,a,i=(0,r.c)(9),{mention:l,isLoading:o}=e,c=void 0!==o&&o;if(!l){let e;return i[0]!==c?(e=c?(0,s.jsx)(e0,{}):(0,s.jsx)(eZ,{}),i[0]=c,i[1]=e):e=i[1],e}return i[2]!==l?(t=(0,s.jsx)(e1,{mention:l}),i[2]=l,i[3]=t):t=i[3],i[4]!==l.author.avatar_url?(n=(0,s.jsx)("div",{className:eJ.avatarContainer,children:(0,s.jsx)(eQ.r,{src:l.author.avatar_url,size:24})}),i[4]=l.author.avatar_url,i[5]=n):n=i[5],i[6]!==t||i[7]!==n?(a=(0,s.jsxs)("div",{className:eJ.container,children:[t,n]}),i[6]=t,i[7]=n,i[8]=a):a=i[8],a},eZ=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:eJ.container,children:(0,s.jsx)("div",{className:eJ.messageContainer,children:(0,s.jsx)("p",{className:eJ.messageText,children:"Failed to fetch triggering comment"})})}),t[0]=e):e=t[0],e},e0=()=>{let e,t,n,a=(0,r.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{className:eJ.messageMeta,children:(0,s.jsx)(eY.O,{variant:"rounded",height:"sm",width:"80px"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:eJ.messageContainer,children:[e,(0,s.jsx)("div",{className:eJ.messageText,children:(0,s.jsx)(eY.O,{variant:"rounded",height:"sm",width:"random"})})]}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsxs)("div",{className:eJ.container,children:[t,(0,s.jsx)("div",{className:eJ.avatarContainer,children:(0,s.jsx)(eY.O,{variant:"elliptical",height:"24px",width:"24px"})})]}),a[2]=n):n=a[2],n},e1=e=>{let t,n,a,i,l=(0,r.c)(10),{mention:o}=e,c=!!o.body;return l[0]!==c||l[1]!==o?(t=c&&(0,s.jsx)(e2,{mention:o}),l[0]=c,l[1]=o,l[2]=t):t=l[2],l[3]!==o?(n=(0,s.jsx)(e3,{mention:o}),a="review"===o.type&&(0,s.jsx)(e4,{mention:o}),l[3]=o,l[4]=n,l[5]=a):(n=l[4],a=l[5]),l[6]!==t||l[7]!==n||l[8]!==a?(i=(0,s.jsxs)("div",{className:eJ.messageContainer,children:[t,n,a]}),l[6]=t,l[7]=n,l[8]=a,l[9]=i):i=l[9],i},e2=e=>{let t,n,a,i=(0,r.c)(10),{mention:l}=e,{author:o,type:c,url:d,path:u,isPending:m}=l;i[0]!==o.display_login||i[1]!==m||i[2]!==u||i[3]!==c||i[4]!==d?(t=()=>{switch(c){case"single_comment_review":return(0,s.jsxs)("span",{className:eJ.truncatedPath,children:[o.display_login," reviewed"," ",(0,s.jsx)(eg.A,{muted:!0,inline:!0,href:d,children:u})]});case"review":return`${o.display_login} reviewed`;default:if(m)return`${o.display_login} commented`;return(0,s.jsxs)(s.Fragment,{children:[o.display_login," ",(0,s.jsx)(eg.A,{muted:!0,inline:!0,href:d,children:"commented"})]})}},i[0]=o.display_login,i[1]=m,i[2]=u,i[3]=c,i[4]=d,i[5]=t):t=i[5];let p=t;return i[6]!==p?(n=p(),i[6]=p,i[7]=n):n=i[7],i[8]!==n?(a=(0,s.jsx)("span",{className:eJ.messageMeta,children:n}),i[8]=n,i[9]=a):a=i[9],a},e3=e=>{let t,n,a=(0,r.c)(4),{mention:i}=e;a[0]!==i?(t="review"!==i.type||i.body?(e=>e.body?e.body.trim().replace(/^@copilot\s*/,""):"")(i):`${i.author.display_login} requested changes`,a[0]=i,a[1]=t):t=a[1];let l=t;return a[2]!==l?(n=(0,s.jsx)("p",{className:eJ.messageText,children:l}),a[2]=l,a[3]=n):n=a[3],n},e4=e=>{let t,n,a,i=(0,r.c)(6),{mention:l}=e,o=l.child_comments??0,c=`${o} review comment${1!==o?"s":""}`;return i[0]!==c||i[1]!==l.url?(t=(0,s.jsx)(eg.A,{muted:!0,inline:!0,href:l.url,children:c}),i[0]=c,i[1]=l.url,i[2]=t):t=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(g.ArrowUpRightIcon,{size:12}),i[3]=n):n=i[3],i[4]!==t?(a=(0,s.jsxs)("span",{className:eJ.messageMeta,children:[t,n]}),i[4]=t,i[5]=a):a=i[5],a};try{eX.displayName||(eX.displayName="UserMessage")}catch{}try{eZ.displayName||(eZ.displayName="ErrorMessage")}catch{}try{e0.displayName||(e0.displayName="LoadingMessage")}catch{}try{e1.displayName||(e1.displayName="MessageContent")}catch{}try{e2.displayName||(e2.displayName="MessageMeta")}catch{}try{e3.displayName||(e3.displayName="MessageText")}catch{}try{e4.displayName||(e4.displayName="ReviewCommentText")}catch{}let e5=e=>{let t=(0,r.c)(3),{session:n}=e;if(n){let e,a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(g.LockIcon,{}),t[0]=e):e=t[0],t[1]!==n.name?(a=(0,s.jsxs)("div",{className:ey.container,children:[e,(0,s.jsxs)("p",{className:ey.message,children:["Viewing session ",(0,s.jsx)("span",{className:"text-bold",children:n.name})," only"]})]}),t[1]=n.name,t[2]=a):a=t[2],a}};try{e5.displayName||(e5.displayName="SessionInitialMessage")}catch{}var e7=n(42455);let e6=(0,i.createContext)(void 0);function e8(e){let t,n,a=(0,r.c)(5),{pull:i,children:l}=e;a[0]!==i?(t={pull:i},a[0]=i,a[1]=t):t=a[1];let o=t;return a[2]!==l||a[3]!==o?(n=(0,s.jsx)(e6.Provider,{value:o,children:l}),a[2]=l,a[3]=o,a[4]=n):n=a[4],n}try{e6.displayName||(e6.displayName="PullContext")}catch{}try{e8.displayName||(e8.displayName="PullContextProvider")}catch{}function e9(e){return e}function te(e){return e.id}function tt(e){return!["completed","failed","cancelled"].includes(e.state.toLowerCase())}var tn=n(98747);let ta={container:"CopilotMessage-module__container--hQBT6",message:"CopilotMessage-module__message--luHTt",text:"CopilotMessage-module__text--A3MHK",loadingText:"CopilotMessage-module__loadingText--qNpCH",icon:"CopilotMessage-module__icon--RahmT"};function ti(e){let t,n,a,i,l,o=(0,r.c)(13),{logsPollingInterval:c}=e,{currentUserIsSessionOwner:d}=eP();o[0]!==d||o[1]!==c?(t={logsPollingInterval:c,batchCompletedSessions:!0,currentUserIsSessionOwner:d},o[0]=d,o[1]=c,o[2]=t):t=o[2];let{data:u,isLoading:m,error:p}=(0,tn.j)(t);if(o[3]!==p||o[4]!==m||o[5]!==u){i=Symbol.for("react.early_return_sentinel");e:{let e=function(e=[]){let t=new Map;for(let n of e)if((0,em.Qx)(n)){for(let e of n.choices)if("assistant"===e.delta.role){for(let a of e.delta.tool_calls||[])if("reply_to_comment"===a.function.name)try{let e=JSON.parse(a.function.arguments);t.set(n.id,e)}catch{}}}return[...t.values()]}(u);if(m){let e;o[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(tr,{}),o[9]=e):e=o[9],i=e;break e}if(p||0===e.length){i=null;break e}n=ta.container,a=e.map(ts)}o[3]=p,o[4]=m,o[5]=u,o[6]=n,o[7]=a,o[8]=i}else n=o[6],a=o[7],i=o[8];return i!==Symbol.for("react.early_return_sentinel")?i:(o[10]!==n||o[11]!==a?(l=(0,s.jsx)("div",{className:n,children:a}),o[10]=n,o[11]=a,o[12]=l):l=o[12],l)}function ts(e,t){return(0,s.jsxs)("div",{className:ta.message,children:[(0,s.jsx)("div",{className:ta.icon,children:0===t&&(0,s.jsx)(ep.N,{size:32,animationType:"static",loopAnimation:!1})}),(0,s.jsx)(ev.To,{className:ta.text,markdown:e.reply})]},e.comment_id)}let tr=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:ta.container,children:(0,s.jsxs)("div",{className:ta.message,children:[(0,s.jsx)("div",{className:ta.icon,children:(0,s.jsx)(eY.O,{variant:"elliptical",height:"32px",width:"32px"})}),(0,s.jsxs)("div",{className:(0,V.$)(ta.text,ta.loadingText),children:[(0,s.jsx)(eY.O,{variant:"rounded",height:"sm",width:"random"}),(0,s.jsx)(eY.O,{variant:"rounded",height:"sm",width:"random"}),(0,s.jsx)(eY.O,{variant:"rounded",height:"sm",width:"random"})]})]})}),t[0]=e):e=t[0],e};try{ti.displayName||(ti.displayName="CopilotMessage")}catch{}try{tr.displayName||(tr.displayName="LoadingMessage")}catch{}var tl=n(26382),to=n(13814);function tc(){let e,t=(0,r.c)(3),{data:n,isLoading:a}=et();if(a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:eF.suspenseSpinner,children:(0,s.jsx)(el.A,{size:"medium"})}),t[0]=e):e=t[0],e}return t[1]!==n?(e=n&&(0,s.jsx)(tm,{payload:n}),t[1]=n,t[2]=e):e=t[2],e}function td(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:eF.blankSlateContainer,style:{alignItems:"center"},children:(0,s.jsx)(el.A,{})}),t[0]=e):e=t[0],e}function tu(e){let t,n,a,i,l,o,c=(0,r.c)(14),{title:d,description:u,statusLink:m,pullLink:p}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(tl.E.Visual,{children:(0,s.jsx)(g.AlertIcon,{size:24,className:"fgColor-muted"})}),c[0]=t):t=c[0],c[1]!==d?(n=(0,s.jsx)(tl.E.Heading,{children:d}),c[1]=d,c[2]=n):n=c[2],c[3]!==u?(a=(0,s.jsx)(tl.E.Description,{className:"text-center",children:u}),c[3]=u,c[4]=a):a=c[4],c[5]!==m?(i=m?(0,s.jsx)(tl.E.SecondaryAction,{href:m,children:"GitHub status"}):null,c[5]=m,c[6]=i):i=c[6],c[7]!==p?(l=p?(0,s.jsx)(tl.E.SecondaryAction,{href:p,children:"Go to pull request"}):null,c[7]=p,c[8]=l):l=c[8],c[9]!==n||c[10]!==a||c[11]!==i||c[12]!==l?(o=(0,s.jsx)("div",{className:eF.blankSlateContainer,children:(0,s.jsxs)(tl.E,{children:[t,n,a,i,l]})}),c[9]=n,c[10]=a,c[11]=i,c[12]=l,c[13]=o):o=c[13],o}function tm(e){let t,n,a,l,o,c,d,u,m,h,g,y,v,x,b=(0,r.c)(36),{payload:_}=e,{pull:w,sessions:j,logsPollingInterval:N,sessionsPollingInterval:k,sessionOwners:S}=_,[I]=(0,p.ok)();b[0]!==I?(t=I.get("session_id"),b[0]=I,b[1]=t):t=b[1];let T=t,E=(0,i.useRef)(null),L=(0,i.useRef)(null),R=(0,i.useRef)(null),{currentUser:A,currentUserIsSessionOwner:D}=eP(),P=(0,i.useRef)(null);b[2]!==w.id||b[3]!==j||b[4]!==k?(n={pullId:w.id,initialData:j,sessionsPollingInterval:k},b[2]=w.id,b[3]=j,b[4]=k,b[5]=n):n=b[5];let{data:O,isError:B,timedOut:F}=(0,ec.t)(n);b[6]!==S||b[7]!==O?(a={sessions:O,initialData:S},b[6]=S,b[7]=O,b[8]=a):a=b[8];let{data:M}=(0,ez.i)(a);b[9]!==w||b[10]!==O?(l={pull:w,sessions:O},b[9]=w,b[10]=O,b[11]=l):l=b[11];let{data:$,isFetching:V}=eW(l);b[12]!==A||b[13]!==$||b[14]!==w.id||b[15]!==O?(o={pullId:w.id,sessions:O,mentions:$,currentUser:A},b[12]=A,b[13]=$,b[14]=w.id,b[15]=O,b[16]=o):o=b[16];let{allSessions:U,allMentions:q,addPendingSession:W,clearPendingSession:H}=function(e){let t,n,a,s,l,o,c,d,u,m,p,h,f,g=(0,r.c)(32),{pullId:y,sessions:v,mentions:x,currentUser:b}=e;g[0]!==v?(t=void 0===v?[]:v,g[0]=v,g[1]=t):t=g[1];let _=t;g[2]!==x?(n=void 0===x?[]:x,g[2]=x,g[3]=n):n=g[3];let w=n,[j,N]=(0,i.useState)(null),[k,C]=(0,i.useState)(null),[S,I]=(0,i.useState)(_.length),[T,E]=(0,i.useState)(w.length),L=_.length>S,R=w.length>T;g[4]!==S||g[5]!==_.length?(a=()=>{if(_.length!==S){let e=setTimeout(()=>{I(_.length)},0);return()=>clearTimeout(e)}},s=[_.length,S],g[4]=S,g[5]=_.length,g[6]=a,g[7]=s):(a=g[6],s=g[7]),(0,i.useEffect)(a,s),g[8]!==w.length||g[9]!==T?(l=()=>{if(w.length!==T){let e=setTimeout(()=>{E(w.length)},0);return()=>clearTimeout(e)}},o=[w.length,T],g[8]=w.length,g[9]=T,g[10]=l,g[11]=o):(l=g[10],o=g[11]),(0,i.useEffect)(l,o);let A=L?null:j,D=R?null:k;g[12]!==R||g[13]!==L||g[14]!==k||g[15]!==j?(d=()=>{if(L&&null!==j||R&&null!==k){let e=setTimeout(()=>{L&&N(null),R&&C(null)},0);return()=>clearTimeout(e)}},c=[L,R,j,k],g[12]=R,g[13]=L,g[14]=k,g[15]=j,g[16]=c,g[17]=d):(c=g[16],d=g[17]),(0,i.useEffect)(d,c),g[18]!==b||g[19]!==y?(u=e=>{let t=function(e,t){let n=t?.login??"You";return{type:"timeline_comment",id:-1,global_relay_id:"",pull_request_id:0,body:e,url:"",created_at:"",updated_at:"",author:{avatar_url:t?.primaryAvatarUrl??`https://avatars.githubusercontent.com/${t?.login??"ghost"}`,display_login:n,global_relay_id:"",id:0,url:""},path:null,subject_type:null,child_comments:null,isPending:!0}}(e,b);C(t),N((0,em.s1)(y,t.id.toString()))},g[18]=b,g[19]=y,g[20]=u):u=g[20];let P=u;g[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{N(null),C(null)},g[21]=m):m=g[21];let O=m;g[22]!==A||g[23]!==_?(p=A?[..._,A]:_,g[22]=A,g[23]=_,g[24]=p):p=g[24];let B=p;g[25]!==D||g[26]!==w?(h=D?[...w,D]:w,g[25]=D,g[26]=w,g[27]=h):h=g[27];let F=h;return g[28]!==P||g[29]!==F||g[30]!==B?(f={allSessions:B,allMentions:F,addPendingSession:P,clearPendingSession:O},g[28]=P,g[29]=F,g[30]=B,g[31]=f):f=g[31],f}(o);b[17]!==O?(c=O?.every(ty)??!1,b[17]=O,b[18]=c):c=b[18];let K=c,G=U.sort(tg),{data:z,isLoading:Q}=function(e){let t,n,a,s,l=(0,r.c)(11),{sessions:o}=e,{pull:c}=function(){let e=(0,i.useContext)(e6);if(!e)throw Error("usePullContext must be used within a PullContextProvider");return e}();l[0]!==o?(t=o.filter(tt).map(te).sort().join(","),l[0]=o,l[1]=t):t=l[1];let d=t,u=c?.id;l[2]!==d||l[3]!==u?(n=["agent-inactive-session-logs",u,d],l[2]=d,l[3]=u,l[4]=n):n=l[4],l[5]!==c?.id?(a=async()=>{let e=await (0,eH.I)({path:`/agents/sessions/resource/pull/${c?.id}/inactive_logs`});if(!e.ok)throw Error(`Error fetching inactive session logs: ${e.statusText}`);let t=(await e.json()).logs,n={};for(let e in t){let a=t[e],i=[];for(let t of function(e){return e.split(`

`).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.split(`
`).filter(e=>e.startsWith("data: ")).map(e=>e.substring(6)).join(`
`)).filter(e=>"[DONE]"!==e).filter(e=>e.length>0).map(e=>JSON.parse(e))}(a)){if((0,em.X)(t))i.push(t);else throw Error(`Invalid log entry received: ${JSON.stringify(t)}`);n[e]=i}}return n},l[5]=c?.id,l[6]=a):a=l[6];let m=!!c;return l[7]!==n||l[8]!==a||l[9]!==m?(s={queryKey:n,queryFn:a,enabled:m,placeholderData:e9},l[7]=n,l[8]=a,l[9]=m,l[10]=s):s=l[10],(0,e7.b)(s)}({sessions:G});b[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,C.G7)("copilot_immersive_task_hyperlinking"),b[19]=d):d=b[19];let Y=d;b[20]!==U?(u=Y?(()=>{let e=U.find(tf);return(0,ed.L)(e?.event_identifiers)})():void 0,b[20]=U,b[21]=u):u=b[21];let J=u;b[22]!==q?(m=e=>{if(q&&e.event_identifiers)return q.find(t=>e.event_identifiers?.includes(t.id.toString()))},b[22]=q,b[23]=m):m=b[23];let X=m;b[24]===Symbol.for("react.memo_cache_sentinel")?(h={containerRef:E,behavior:"smooth"},b[24]=h):h=b[24];let{scrollToBottom:Z}=eS(h);b[25]===Symbol.for("react.memo_cache_sentinel")?(g={containerRef:E,sentinelRef:L,offset:4},b[25]=g):g=b[25];let{setIsAtBottom:ee}=function(e){let t,n,a,s,l,o,c,d,u,m,p,h,f=(0,r.c)(24),{containerRef:g,sentinelRef:y,offset:v,scrollBehavior:x}=e,b=void 0===x?"auto":x,[_,w]=(0,i.useState)(!0),j=(0,i.useRef)(!1),N=(0,i.useRef)(_);f[0]!==_?(t=()=>{N.current=_},n=[_],f[0]=_,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,i.useEffect)(t,n),f[3]!==g||f[4]!==b?(a={containerRef:g,behavior:b,smoothThreshold:500},f[3]=g,f[4]=b,f[5]=a):a=f[5];let{scrollToBottom:k}=eS(a);f[6]!==g||f[7]!==y?(s=()=>{let e=g?.current;if(!e)return{containerElement:null,contentElement:document.scrollingElement||document.documentElement};let t=y.current?.parentElement??e;return{containerElement:e,contentElement:t}},f[6]=g,f[7]=y,f[8]=s):s=f[8];let C=s;return f[9]!==g?(l=()=>{let e=g?.current||window,t=()=>{j.current=!0};return e.addEventListener("scroll",t,{once:!0}),()=>{e.removeEventListener("scroll",t)}},o=[g],f[9]=g,f[10]=l,f[11]=o):(l=f[10],o=f[11]),(0,i.useEffect)(l,o),f[12]!==C||f[13]!==v||f[14]!==y?(c=()=>{let e=y.current;if(!e)return;let{containerElement:t}=C(),n=new IntersectionObserver(e=>{let t=e[0];t&&w(t.isIntersecting)},{root:t??null,rootMargin:`0px 0px ${v}px 0px`,threshold:0});return n.observe(e),()=>n.disconnect()},d=[v,C,y],f[12]=C,f[13]=v,f[14]=y,f[15]=c,f[16]=d):(c=f[15],d=f[16]),(0,i.useEffect)(c,d),f[17]!==C||f[18]!==k?(u=()=>{let{contentElement:e}=C();if(!e)return;let t=new ResizeObserver(()=>{(!j.current||N.current)&&k()});return t.observe(e),()=>t.disconnect()},m=[C,k],f[17]=C,f[18]=k,f[19]=u,f[20]=m):(u=f[19],m=f[20]),(0,i.useEffect)(u,m),f[21]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{N.current=e,w(e)},f[21]=p):p=f[21],f[22]!==_?(h={isAtBottom:_,setIsAtBottom:p},f[22]=_,f[23]=h):h=f[23],h}(g);return b[26]!==K||b[27]!==w.global_relay_id?(y={chatInputRef:R,textAreaRef:P,isReadonly:K,taskId:w.global_relay_id},b[26]=K,b[27]=w.global_relay_id,b[28]=y):y=b[28],!function(e){let t,n,a,s,l=(0,r.c)(10),{chatInputRef:o,textAreaRef:c,isReadonly:d,taskId:u}=e,m=(0,i.useRef)(null),p=(0,i.useRef)(null);l[0]!==o||l[1]!==c?(t=e=>{o.current&&(o.current.setText(t=>t&&t.trim()?`${t}
${e}`:e),c?.current?.focus())},l[0]=o,l[1]=c,l[2]=t):t=l[2];let h=t;l[3]!==h||l[4]!==d||l[5]!==u?(n=e=>{(e instanceof to.L||e instanceof to.J)&&(d||((0,f.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_DIFF_BUTTON",file_path:e.filePath,line_number:e.endLineNumber,has_range:e.startLineNumber!==e.endLineNumber,task_id:u}),p.current=e,m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{p.current&&(h(function(e){let{filePath:t,startLineNumber:n,endLineNumber:a}=e;return n!==a&&n?`${t}:${n}-${a}`:`${t}:${a}`}(p.current)),p.current=null)},300)))},l[3]=h,l[4]=d,l[5]=u,l[6]=n):n=l[6];let g=n;l[7]!==g?(a=()=>(window.addEventListener("DiffAddCommentButtonClickedEvent",g),window.addEventListener("DiffSelectedLineEvent",g),()=>{window.removeEventListener("DiffAddCommentButtonClickedEvent",g),window.removeEventListener("DiffSelectedLineEvent",g),m.current&&clearTimeout(m.current)}),s=[g],l[7]=g,l[8]=a,l[9]=s):(a=l[8],s=l[9]),(0,i.useEffect)(a,s)}(y),b[29]!==Z||b[30]!==ee?(v=()=>{R.current&&R.current.setText(""),ee(!0),Z("instant")},b[29]=Z,b[30]=ee,b[31]=v):v=b[31],b[32]!==w.id||b[33]!==Z||b[34]!==ee?(x=[w.id,ee,Z],b[32]=w.id,b[33]=Z,b[34]=ee,b[35]=x):x=b[35],(0,i.useEffect)(v,x),O&&M?B&&F?(0,s.jsx)(tu,{title:"Activity cannot be loaded",description:"The activity on this task is temporarily unavailable due to a system error. Try reloading the page, or if the problem persists, contact support.",statusLink:"https://www.githubstatus.com/"}):O.length?(0,s.jsx)("div",{className:eF.root,children:(0,s.jsxs)("div",{className:eF.container,children:[(0,s.jsx)("div",{className:eF.stickableContainer,children:(0,s.jsx)(er.$,{containerRef:E,disabled:!1,className:eF.scrollContainer,children:(0,s.jsxs)("div",{className:eF.content,children:[G.map((e,t)=>{var n;let a=X(e),i=(0,em.VY)(e);return(0,s.jsxs)("div",{className:"d-flex flex-column",children:[0===t&&(D?(0,s.jsxs)("div",{className:eF.initialMessages,children:[(0,s.jsx)(ex,{currentUser:A,threadId:J,session:e,message:K?"requested a review":"started a task"}),(0,s.jsx)(ef,{message:K?"started a review":"started work"})]}):(0,s.jsx)(e5,{session:e})),t>0&&(0,s.jsx)(eX,{mention:a,isLoading:!a&&V},a?.id),(0,s.jsxs)(eo.PS,{session:e,sessionOwner:M.find(t=>t.id===e.user_id),logs:z?.[e.id],logsAreLoading:Q,children:[(0,s.jsx)(eB,{defaultOpen:(n=e.id,T?n===T:!!i||(O&&O.some(th)?n===O.find(tp)?.id:t===G.length-1)),scrollContainerRef:E,hideStopButton:i,onOpenChange:()=>ee(!1),onToolExpand:()=>ee(!1)}),"completed"===e.state&&(D&&0!==t||!D)&&(0,s.jsx)(ti,{logsPollingInterval:N??3e3})]})]},e.id)}),(0,s.jsx)("div",{ref:L,"aria-hidden":!0,style:{height:1}})]})})}),!K&&(0,s.jsx)("div",{className:eF.chatInputContainer,children:(0,s.jsx)(eG,{activeSession:U?.find(em.v5)??null,onAddPendingSession:W,onClearPendingSession:H,payload:_,scrollToBottom:Z,chatInputRef:R,inputRef:P})})]})}):(0,s.jsx)(tu,{title:"This task is not viewable",description:"You can't view this task because you do not have any active sessions for this pull request.",pullLink:w.url}):(0,s.jsx)(td,{})}function tp(e){return(0,em.v5)(e)}function th(e){return(0,em.v5)(e)}function tf(e){return e.event_type===eu.qY}function tg(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}function ty(e){return(0,em.SS)(e)}try{tc.displayName||(tc.displayName="TaskChatSuspended")}catch{}try{td.displayName||(td.displayName="CenteredSpinner")}catch{}try{tu.displayName||(tu.displayName="CenteredBlankSlate")}catch{}try{tm.displayName||(tm.displayName="TaskChat")}catch{}let tv={layout:"TaskView-module__layout--AFh4y",contentPreview:"TaskView-module__contentPreview--NFDAQ"};function tx(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(Y.Fn,{children:(0,s.jsx)(c.BH,{children:(0,s.jsx)(tb,{})})}),t[0]=e):e=t[0],e}function tb(){let e,t,n,a,h,f,y,v,x,b,_,w,j,N,k,C,S,I,T,E,L,R,A,D,P,O=(0,r.c)(90),{data:B}=et();O[0]!==B?(e=void 0===B?{}:B,O[0]=B,O[1]=e):e=O[1];let{pull:F,sessions:M,sessionsPollingInterval:$,currentUser:V}=e,U=F?.id??0,Y=$??0;O[2]!==M||O[3]!==U||O[4]!==Y?(t={pullId:U,initialData:M,sessionsPollingInterval:Y},O[2]=M,O[3]=U,O[4]=Y,O[5]=t):t=O[5];let{data:X}=(0,ec.t)(t),Z=(0,c.tZ)(),{openPreviewPane:ee,closePreviewPane:er,openItem:el,closeItem:eo,updateItem:ed,allOpenItems:eu}=(0,c.xx)(),[em]=(0,p.ok)(),ep=eu?.length??0,{isNarrowViewport:eh}=(0,d.B)(),ef=!!X?.length;O[6]!==em?(n=em.get("session_id"),O[6]=em,O[7]=n):n=O[7];let eg=!!n;O[8]!==X?(a=X?.toSorted(tj)[0],O[8]=X,O[9]=a):a=O[9];let ey=a,ev=X?.length??0;O[10]!==X?(h=X?.reduce(tw,0)||0,O[10]=X,O[11]=h):h=O[11];let ex=h,eb=!!(V&&V?.id===X?.[0]?.user_id);O[12]!==X?(f=X?.some(t_)??!1,O[12]=X,O[13]=f):f=O[13];let e_=f,ew=F?.id||0,ej=!!F?.id;O[14]!==F||O[15]!==ej||O[16]!==ew?(y={pullRequestId:ew,includeBody:!1,initialData:F,enabled:ej},O[14]=F,O[15]=ej,O[16]=ew,O[17]=y):y=O[17];let{data:eN,refetchBody:ek,refetchPullRequest:eC}=function(e){let t,n,a,i,s,l,o=(0,r.c)(25),{pullRequestId:c,includeBody:d,initialData:u,enabled:m}=e,p=void 0!==d&&d,h=void 0===m||m,f=(0,ei.jE)();o[0]!==p||o[1]!==c?(t=["pull-request",c,p],o[0]=p,o[1]=c,o[2]=t):t=o[2];let g=t;o[3]!==p||o[4]!==c?(n=()=>es(c,{includeBody:p}),o[3]=p,o[4]=c,o[5]=n):n=o[5];let y=n,v=3e5*!!u;o[6]!==h||o[7]!==u||o[8]!==y||o[9]!==g||o[10]!==v?(a={queryKey:g,queryFn:y,initialData:u,staleTime:v,enabled:h},o[6]=h,o[7]=u,o[8]=y,o[9]=g,o[10]=v,o[11]=a):a=o[11];let{data:x,refetch:b}=(0,J.I)(a);o[12]!==c||o[13]!==f||o[14]!==g?(i=async()=>{let e=await es(c,{includeBody:!0});f.setQueryData(g,t=>t?{...t,body:e.body,body_revision_count:e.body_revision_count}:e)},o[12]=c,o[13]=f,o[14]=g,o[15]=i):i=o[15];let _=i;o[16]!==c||o[17]!==f||o[18]!==g?(s=async()=>{let e=await es(c,{includeBody:!1});f.setQueryData(g,t=>t?{...t,title:e.title,head_sha:e.head_sha,changed_files:e.changed_files,commit_alive_channel:e.commit_alive_channel}:e)},o[16]=c,o[17]=f,o[18]=g,o[19]=s):s=o[19];let w=s;return o[20]!==x||o[21]!==b||o[22]!==_||o[23]!==w?(l={data:x,refetch:b,refetchBody:_,refetchPullRequest:w},o[20]=x,o[21]=b,o[22]=_,o[23]=w,o[24]=l):l=o[24],l}(y);!function(e,t,n){let a,i,s,l=(0,r.c)(7);l[0]!==t?(a=(0,ea.A)(t,2e3,{leading:!1,trailing:!0}),l[0]=t,l[1]=a):a=l[1];let o=a;l[2]!==n?(i=(0,ea.A)(n,2e3,{leading:!1,trailing:!0}),l[2]=n,l[3]=i):i=l[3];let c=i;l[4]!==c||l[5]!==o?(s=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&o(),e.event_updates?.body_updated&&c()},l[4]=c,l[5]=o,l[6]=s):s=l[6];let d=s;(0,en.x)(e,d)}(eN?.aliveChannel,eC,ek),O[18]===Symbol.for("react.memo_cache_sentinel")?(v=new Set,O[18]=v):v=O[18];let eS=(0,i.useRef)(v),eI=(0,i.useRef)(void 0),eT=(0,i.useRef)(void 0);O[19]!==ep?(x=()=>{0===ep&&eS.current.clear()},b=[ep],O[19]=ep,O[20]=x,O[21]=b):(x=O[20],b=O[21]),(0,i.useEffect)(x,b),O[22]!==eu||O[23]!==eo||O[24]!==eb||O[25]!==eN||O[26]!==eg||O[27]!==e_||O[28]!==eh||O[29]!==ey?.last_updated_at||O[30]!==ey?.state||O[31]!==el||O[32]!==ee||O[33]!==ex||O[34]!==F||O[35]!==ev||O[36]!==ed?(_=()=>{if(!eN)return;void 0!==eN.id&&void 0!==eI.current&&eI.current!==eN.id&&(eS.current.clear(),eT.current=void 0),eI.current=eN?.id;let e=eN.changed_files??0,t=eN.head_sha,n=ev>0&&e>0,a={...(0,z.Bx)({body:eN?.body??"",title:eN.title,number:eN.number,type:"pr-overview",repositoryNwo:eN.repository_nwo,baseRef:eN.base_ref_name,headRef:eN.head_ref_name,headSha:t,sessionState:ey?.state,sessionUpdatedAt:ey?.last_updated_at,sessionCount:ev,premiumRequestCount:ex,isSingleSessionView:!eb,commitAliveChannel:eN.commit_alive_channel},K.Wp),disableCloseButton:!0,icon:g.NoteIcon},i=F&&n?{...(0,z.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${eN.repository_nwo}/pull/${eN.number}`,isSessionRunning:e_},K.Wp),disableCloseButton:!0,trailingComponent:(0,s.jsx)(Q.A,{children:e}),icon:g.FileIcon}:null;for(let e of(ed(a),i&&ed(i),eu))e.includes("pr-files-changed:")&&!n&&eo(e);let r=eu.includes(a.id),l=i&&eu.includes(i.id),o=!eS.current.has(a.id)&&!r,c=i&&!eS.current.has(i.id)&&!l;o&&(el(a.id,!eg),eh||ee()),c&&(el(i.id,eg),eg&&!eh&&ee()),eS.current.add(a.id),i&&eS.current.add(i.id)},O[22]=eu,O[23]=eo,O[24]=eb,O[25]=eN,O[26]=eg,O[27]=e_,O[28]=eh,O[29]=ey?.last_updated_at,O[30]=ey?.state,O[31]=el,O[32]=ee,O[33]=ex,O[34]=F,O[35]=ev,O[36]=ed,O[37]=_):_=O[37];let eE=ey?.state,eL=ey?.last_updated_at;O[38]!==eu||O[39]!==eo||O[40]!==er||O[41]!==eb||O[42]!==eN||O[43]!==eg||O[44]!==e_||O[45]!==eh||O[46]!==el||O[47]!==ep||O[48]!==ee||O[49]!==ex||O[50]!==F||O[51]!==ev||O[52]!==eE||O[53]!==eL||O[54]!==ed?(w=[eN,ed,el,eo,ee,er,eg,F,ep,eE,eL,ev,ex,eu,eh,eb,e_],O[38]=eu,O[39]=eo,O[40]=er,O[41]=eb,O[42]=eN,O[43]=eg,O[44]=e_,O[45]=eh,O[46]=el,O[47]=ep,O[48]=ee,O[49]=ex,O[50]=F,O[51]=ev,O[52]=eE,O[53]=eL,O[54]=ed,O[55]=w):w=O[55],(0,i.useEffect)(_,w);let eR=(0,o.b)(),eA=(0,u.U)();O[56]!==er||O[57]!==ee?(j=e=>{e?ee():er()},O[56]=er,O[57]=ee,O[58]=j):j=O[58];let eP=j;O[59]!==eN?.title?(N=()=>{let e=eN?.title;e?(0,l.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,l.D)("Task \xb7 GitHub Copilot")},O[59]=eN?.title,O[60]=N):N=O[60];let eO=eN?.title;return O[61]!==eO?(k=[eO],O[61]=eO,O[62]=k):k=O[62],(0,i.useEffect)(N,k),O[63]!==eR?(C=()=>{eR.selectThread(null,{includeThreads:!1,clearTopic:!0})},S=[eR],O[63]=eR,O[64]=C,O[65]=S):(C=O[64],S=O[65]),(0,i.useEffect)(C,S),(0,W._)(),O[66]!==Z||O[67]!==eP?(I=[Z,eP],O[66]=Z,O[67]=eP,O[68]=I):I=O[68],O[69]!==Z||O[70]!==ef||O[71]!==ee||O[72]!==F?(T=ef&&(0,s.jsx)(m.P.Header,{children:(0,s.jsx)(q,{pull:F,isContentPreviewOpen:Z,openPreviewPane:ee})}),O[69]=Z,O[70]=ef,O[71]=ee,O[72]=F,O[73]=T):T=O[73],O[74]===Symbol.for("react.memo_cache_sentinel")?(E=(0,s.jsx)(m.P.Sidebar,{children:(0,s.jsx)(H.U,{})}),O[74]=E):E=O[74],O[75]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsx)(m.P.ColumnLeft,{children:(0,s.jsx)(tc,{})}),O[75]=L):L=O[75],O[76]!==ef||O[77]!==eA?(R=ef&&(0,s.jsx)(m.P.ColumnRight,{children:(0,s.jsx)(G.U,{returnFocusRef:eA,disableActionsMenu:!0,disableResourcePanel:!0,useXCloseButton:!0,className:tv.contentPreview})}),O[76]=ef,O[77]=eA,O[78]=R):R=O[78],O[79]!==I||O[80]!==T||O[81]!==R?(A=(0,s.jsxs)(m.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:I,className:tv.layout,children:[T,E,L,R]}),O[79]=I,O[80]=T,O[81]=R,O[82]=A):A=O[82],O[83]!==eN||O[84]!==A?(D=(0,s.jsx)(e8,{pull:eN,children:A}),O[83]=eN,O[84]=A,O[85]=D):D=O[85],O[86]!==V||O[87]!==eb||O[88]!==D?(P=(0,s.jsx)(eD,{currentUser:V,currentUserIsSessionOwner:eb,children:D}),O[86]=V,O[87]=eb,O[88]=D,O[89]=P):P=O[89],P}function t_(e){return"in_progress"===e.state}function tw(e,t){return e+t.premium_requests}function tj(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{tx.displayName||(tx.displayName="TaskViewWrapper")}catch{}try{tb.displayName||(tb.displayName="TaskView")}catch{}var tN=n(7554),tk=n(64475),tC=n(35247),tS=n(70840),tI=n(62935),tT=n(72579),tE=n(56833),tL=n(81960),tR=n(98755),tA=n(99896),tD=n(10422),tP=n(25407);let tO={container:"PullRequestOverviewPreview-module__container--BrFOa",titleContainer:"PullRequestOverviewPreview-module__titleContainer--lTxTc",pullNumber:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",sessionStatus:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",sessionStatusWrapper:"PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",separator:"PullRequestOverviewPreview-module__separator--EAqT5",iconCompleted:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",iconFailed:"PullRequestOverviewPreview-module__iconFailed--bZUms",summaryBox:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",summaryHeading:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",summaryHeader:"PullRequestOverviewPreview-module__summaryHeader--KeZPa",summaryMetadata:"PullRequestOverviewPreview-module__summaryMetadata--R418e",summaryContent:"PullRequestOverviewPreview-module__summaryContent--YREy7",repositoryName:"PullRequestOverviewPreview-module__repositoryName--O0p8d",branchComparison:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",branchWrapper:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",copyButtonWrapper:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",checksButton:"PullRequestOverviewPreview-module__checksButton--yqdFS",emptyDescription:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t"};function tB(e){let t,n,a,l,o,c,d,u,m=(0,r.c)(22),{headSha:p,repositoryNwo:h,commitAliveChannel:f}=e;m[0]!==h?(t=h?.split("/")??[],m[0]=h,m[1]=t):t=m[1];let[g,y]=t,v=void 0===g?"":g,x=void 0===y?"":y;m[2]!==x||m[3]!==v?(n={ownerLogin:v,name:x},m[2]=x,m[3]=v,m[4]=n):n=m[4];let[b,_]=function(e,t){let n,a,s=(0,r.c)(6),[l,o]=(0,i.useState)();s[0]!==e||s[1]!==t?(n=async()=>{if(!e||!t)return void o(void 0);let n=(0,tP.vki)(t,e),a=await (0,eq.lS)(n);a.ok&&o(await a.json())},s[0]=e,s[1]=t,s[2]=n):n=s[2];let c=n;return s[3]!==l||s[4]!==c?(a=[l,c],s[3]=l,s[4]=c,s[5]=a):a=s[5],a}(p,n);m[5]!==f?(a={stateChannel:f,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},m[5]=f,m[6]=a):a=m[6];let w=a;if(m[7]!==w||m[8]!==_?(l={channels:w,refetchQuery:_},m[7]=w,m[8]=_,m[9]=l):l=m[9],(0,tD.cY)(l),m[10]!==_||m[11]!==p||m[12]!==h?(o=()=>{p&&h&&_()},c=[p,h,_],m[10]=_,m[11]=p,m[12]=h,m[13]=o,m[14]=c):(o=m[13],c=m[14]),(0,i.useEffect)(o,c),!p||!h||!b||0===b.checkRuns.length)return null;m[15]!==b?(d=()=>{if(!b?.checkRuns)return"";let e=b.checkRuns.length,t=b.checkRuns.filter(tF).length;return`${t}/${e}`},m[15]=b,m[16]=d):d=m[16];let j=d,N=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(b?.checksHeaderState||""),k=j();return m[17]!==b||m[18]!==_||m[19]!==N||m[20]!==k?(u=(0,s.jsx)("span",{className:tO.checksButton,children:(0,s.jsx)(tA.B6,{statusRollup:N,combinedStatus:b,onWillOpenPopup:_,size:"small",variant:"default",descriptionText:k})}),m[17]=b,m[18]=_,m[19]=N,m[20]=k,m[21]=u):u=m[21],u}function tF(e){return"success"===e.state}try{tB.displayName||(tB.displayName="ChecksStatusButton")}catch{}var tM=n(88984);function t$(e){let t,n,a,i,l,o,c,d,u,m,p,h,f,y,v,x,b,_,w,j,N=(0,r.c)(57),{title:k,number:C,body:S,repositoryNwo:I,baseRef:T,headRef:E,headSha:L,sessionState:R,sessionUpdatedAt:A,sessionCount:D,premiumRequestCount:P,isSingleSessionView:O,commitAliveChannel:B}=e;N[0]!==R?(t=()=>{if(!R)return null;switch(R){case"completed":return(0,s.jsx)(g.CheckCircleFillIcon,{className:tO.iconCompleted,size:16});case"failed":case"timed_out":return(0,s.jsx)(g.XCircleFillIcon,{className:tO.iconFailed,size:16});case"in_progress":return(0,s.jsx)(tM.w,{});default:return null}},N[0]=R,N[1]=t):t=N[1];let F=t;N[2]!==R||N[3]!==A?(n=()=>(0,s.jsxs)("span",{className:tO.sessionStatusWrapper,children:["completed"===R&&(0,s.jsx)("span",{children:"Completed"}),"failed"===R&&(0,s.jsx)("span",{children:"Failed"}),"timed_out"===R&&(0,s.jsx)("span",{children:"Timed out"}),"in_progress"===R&&(0,s.jsx)("span",{children:"Started"}),A&&(0,s.jsx)(tI.A,{date:new Date(A),tense:"past"})]}),N[2]=R,N[3]=A,N[4]=n):n=N[4];let M=n;N[5]!==T||N[6]!==E||N[7]!==I?(a=()=>(0,s.jsxs)(s.Fragment,{children:[I&&(0,s.jsx)(eg.A,{href:`/${I}`,className:tO.repositoryName,children:I}),T&&E&&(0,s.jsxs)("span",{className:tO.branchWrapper,children:[(0,s.jsxs)("span",{className:tO.branchComparison,children:[(0,s.jsx)(tT.A,{href:`/${I}/tree/${T}`,children:T}),(0,s.jsx)(g.ArrowLeftIcon,{}),(0,s.jsx)(tT.A,{href:`/${I}/tree/${E}`,children:E})]}),(0,s.jsx)("span",{className:tO.copyButtonWrapper,children:(0,s.jsx)(tR.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:E})})]})]}),N[5]=T,N[6]=E,N[7]=I,N[8]=a):a=N[8];let $=a;N[9]!==k?(i=(0,s.jsx)("span",{children:k}),N[9]=k,N[10]=i):i=N[10];let V=`/${I}/pull/${C}`;N[11]!==C||N[12]!==V?(l=(0,s.jsxs)(eg.A,{className:tO.pullNumber,href:V,children:["#",C]}),N[11]=C,N[12]=V,N[13]=l):l=N[13],N[14]!==i||N[15]!==l?(o=(0,s.jsx)(tE.z.TitleArea,{children:(0,s.jsx)(tE.z.Title,{className:tO.titleContainer,as:"h1",children:(0,s.jsxs)("span",{children:[i," ",l]})})}),N[14]=i,N[15]=l,N[16]=o):o=N[16],N[17]!==F?(c=F(),N[17]=F,N[18]=c):c=N[18],N[19]!==M?(d=M(),N[19]=M,N[20]=d):d=N[20],N[21]!==c||N[22]!==d?(u=(0,s.jsxs)("span",{className:tO.sessionStatusWrapper,children:[c,d]}),N[21]=c,N[22]=d,N[23]=u):u=N[23],N[24]!==I||N[25]!==A?(m=A&&I&&(0,s.jsx)("span",{className:tO.separator,children:" \xb7 "}),N[24]=I,N[25]=A,N[26]=m):m=N[26],N[27]!==$?(p=$(),N[27]=$,N[28]=p):p=N[28];let U=L||"",q=I||"";return N[29]!==B||N[30]!==U||N[31]!==q?(h=(0,s.jsx)(tB,{headSha:U,repositoryNwo:q,commitAliveChannel:B}),N[29]=B,N[30]=U,N[31]=q,N[32]=h):h=N[32],N[33]!==u||N[34]!==m||N[35]!==p||N[36]!==h?(f=(0,s.jsx)(tE.z.Description,{children:(0,s.jsxs)("div",{className:tO.sessionStatus,children:[u,m,p,h]})}),N[33]=u,N[34]=m,N[35]=p,N[36]=h,N[37]=f):f=N[37],N[38]!==f||N[39]!==o?(y=(0,s.jsxs)(tE.z,{children:[o,f]}),N[38]=f,N[39]=o,N[40]=y):y=N[40],N[41]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)(tL.A,{as:"h2",className:tO.summaryHeading,children:"Summary"}),N[41]=v):v=N[41],N[42]!==O||N[43]!==P||N[44]!==D||N[45]!==A?(x=!O&&P>0&&void 0!==D&&D>0&&(0,s.jsxs)(s.Fragment,{children:[D," ",eR()("session",D),P&&(0,s.jsxs)("span",{children:[" ","\xb7 ",P," premium ",eR()("request",P)]}),A&&(0,s.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,s.jsx)(tI.A,{date:new Date(A),tense:"past"})]})]}),N[42]=O,N[43]=P,N[44]=D,N[45]=A,N[46]=x):x=N[46],N[47]!==x?(b=(0,s.jsxs)("div",{className:tO.summaryHeader,children:[v,(0,s.jsx)("div",{className:tO.summaryMetadata,children:x})]}),N[47]=x,N[48]=b):b=N[48],N[49]!==S?(_=(0,s.jsx)("div",{className:tO.summaryContent,children:S?(0,s.jsx)(tS.G,{content:{value:S,name:"pull-request-body.md"},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,s.jsx)("p",{className:tO.emptyDescription,children:"No description provided."})}),N[49]=S,N[50]=_):_=N[50],N[51]!==b||N[52]!==_?(w=(0,s.jsxs)("div",{className:tO.summaryBox,children:[b,_]}),N[51]=b,N[52]=_,N[53]=w):w=N[53],N[54]!==y||N[55]!==w?(j=(0,s.jsxs)("div",{className:tO.container,children:[y,w]}),N[54]=y,N[55]=w,N[56]=j):j=N[56],j}try{t$.displayName||(t$.displayName="PullRequestOverviewPreview")}catch{}function tV(e){let t,n=(0,r.c)(2),{reference:a}=e;return"pr-overview"!==a.type?null:(n[0]!==a?(t=(0,s.jsx)(t$,{...a}),n[0]=a,n[1]=t):t=n[1],t)}try{tV.displayName||(tV.displayName="PullRequestOverviewPluginPreview")}catch{}var tU=n(99430),tq=n(97949);let tW={container:"PullRequestFilesChangedPreview-module__container--mKeOB",banner:"PullRequestFilesChangedPreview-module__banner--KQCNJ"};function tH(e){let t,n,a,i=(0,r.c)(8),{headSha:l,basePath:o,isSessionRunning:c}=e;return i[0]!==c?(t=c&&(0,s.jsx)(tq.l,{variant:"info",title:"Copilot is working",description:"Copilot is still working. Changes will automatically appear once they have been committed to the branch.",hideTitle:!0,icon:(0,s.jsx)(g.InfoIcon,{}),className:tW.banner}),i[0]=c,i[1]=t):t=i[1],i[2]!==o||i[3]!==l?(n=(0,s.jsx)(tU.b.Container,{children:(0,s.jsx)(tU.b.Viewer,{headSha:l,basePath:o,forceUnifiedView:!0,treeCollapsedByDefault:!0,useFileTree:!0,useBasicToolbar:!0},o)}),i[2]=o,i[3]=l,i[4]=n):n=i[4],i[5]!==t||i[6]!==n?(a=(0,s.jsxs)("div",{className:tW.container,children:[t,n]}),i[5]=t,i[6]=n,i[7]=a):a=i[7],a}try{tH.displayName||(tH.displayName="PullRequestFilesChangedPreview")}catch{}function tK(e){let t,n=(0,r.c)(4),{reference:a}=e,{headSha:i,basePath:l,isSessionRunning:o}=a;return n[0]!==l||n[1]!==i||n[2]!==o?(t=(0,s.jsx)(tH,{headSha:i,basePath:l,isSessionRunning:o}),n[0]=l,n[1]=i,n[2]=o,n[3]=t):t=n[3],t}try{tK.displayName||(tK.displayName="PullRequestFilesChangedPluginPreview")}catch{}let tG=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":tV,"pr-files-changed":tK}}constructor(){(0,a._)(this,"id",eu.v),(0,a._)(this,"displayName",eu.Ns),(0,a._)(this,"activityItems",[{displayName:"Tasks",Component:tN.oR,trailingAction:()=>tC.W.missionControlSidebarV2?null:(0,i.createElement)(tk.G,{className:"fgColor-muted",size:"small",variant:"invisible"})}]),(0,a._)(this,"skipSyncRouteToThread",!0),(0,a._)(this,"components",[{id:eu.kF,Component:tx,routes:[tG]}])}}},84802:(e,t,n)=>{n.d(t,{G:()=>l});var a=n(21728),i=n(96459),s=n(25641),r=n(33592);function l(){let e,t=(0,a.c)(3),n=(0,r.b)(),l=(0,i.Z)();return t[0]!==n||t[1]!==l?(e=async e=>{window.location.pathname!==s.Jz&&(l(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=l,t[2]=e):e=t[2],e}},87255:(e,t,n)=>{n.d(t,{Y:()=>C});var a,i=n(74848),s=n(21728),r=n(70170),l=n(53419),o=n(29731),c=n(83494),d=n(88431),u=n(96379),m=n(56149),p=n(86877),h=n(4175),f=n(21373),g=n(15220),y=n(96540),v=n(40961),x=n(2635),b=n(33592);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--T9wxr"};var w=n(38621),j=n(5524);let N={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},k=(0,y.forwardRef)(function(e,t){let n,a,r,l,o,c,d,u,m=(0,s.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(a={marginBottom:"1px"},m[2]=a):a=m[2],m[3]!==p||m[4]!==h?(r=h&&Object.entries(N)?.map(e=>{let[t,n]=e;return(0,i.jsxs)(j.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,i.jsx)(w.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=r):r=m[5],m[6]!==r?(l=(0,i.jsx)(j.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=l):l=m[7];let v=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid transparent"},m[8]=o):o=m[8],m[9]!==h?(c=h?(0,i.jsx)(w.XIcon,{}):(0,i.jsx)(w.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==v||m[12]!==c||m[13]!==g?(d=(0,i.jsx)(j.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(j.l.Item,{"aria-label":v,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:o,onSelect:g,children:c})}),m[11]=v,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==l||m[17]!==d?(u=(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:a,children:[l,d]}),m[15]=t,m[16]=l,m[17]=d,m[18]=u):u=m[18],u});try{k.displayName||(k.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let C=({onDismiss:e,returnFocusRef:t})=>{let n=(0,x.Pk)(),a=(0,b.b)(),[w,j]=(0,y.useState)(n.personalInstructions??""),[N,C]=(0,y.useState)(void 0),[I,T]=(0,y.useState)(!1),E=(0,y.useRef)(null),L=(0,y.useRef)(null),[R,A]=(0,y.useState)(""),D=((e,t)=>{let n,a,i=(0,s.c)(4),[l,o]=(0,y.useState)(48);return i[0]!==e||500!==i[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},a=[e,500],i[0]=e,i[1]=500,i[2]=n,i[3]=a):(n=i[2],a=i[3]),(0,y.useEffect)(n,a),l})(L);(0,d.N)(()=>{E?.current&&(E.current.scrollTop=E.current.scrollHeight)},[w]);let P=(0,y.useCallback)(async()=>{if(!I){T(!0),R&&(0,l.BI)("copilot_personal_instruction_template_usage",{content:R});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:w}});if(t.ok)(0,l.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),a.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:w}),(0,v.flushSync)(()=>e());else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{T(!1)}}},[I,w,a,e,R]),O=(e,t)=>{t&&(j(w?`${w}
${t}`:t),A(e),E?.current?.focus())},B=()=>{P()},F=(0,y.useCallback)(()=>{(0,l.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,v.flushSync)(()=>e())},[e]);return(0,i.jsx)(m.ZL,{children:(0,i.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,i.jsx)(g.l.Body,{children:(0,i.jsx)("form",{onSubmit:P,children:(0,i.jsxs)(p.A,{children:[(0,i.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(c.tL,{commands:{"github:submit-form":B},children:[(0,i.jsx)(h.Ay,{ref:E,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:w,validationStatus:N||w.length>4e3?"error":void 0,...(0,o.G)("prompt-input"),onChange:e=>{j(e.target.value),C(void 0)}}),(0,i.jsx)(k,{ref:L,onSelect:O})]})}),(0,i.jsx)(S,{text:w,promptCharLimit:4e3}),N&&(0,i.jsx)(p.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,o.G)("error-message"),children:N})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:_.footerContainer,children:[(0,i.jsx)(f.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,i.jsx)(f.Q,{loading:I,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function S(e){let t,n,a,r,l=(0,s.c)(10),{text:c,promptCharLimit:d}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G)("current-character-count"),l[0]=t):t=l[0],l[1]!==c.length?(n=(0,i.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),l[1]=c.length,l[2]=n):n=l[2],l[3]!==d||l[4]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[n," ","/ ",d," characters"]}),l[3]=d,l[4]=n,l[5]=a):a=l[5];let u=a;return l[6]!==u||l[7]!==d||l[8]!==c.length?(r=(0,i.jsx)(i.Fragment,{children:c.length>d?(0,i.jsx)(p.A.Validation,{variant:"error",children:u}):(0,i.jsx)(p.A.Caption,{children:u})}),l[6]=u,l[7]=d,l[8]=c.length,l[9]=r):r=l[9],r}try{C.displayName||(C.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},89155:(e,t,n)=>{n.d(t,{F:()=>s});var a=n(39029),i=n(34261);function s(e){let{refetch:t}=(0,i.W)();(0,a.og)(e,t,{git_updated:!0,title_updated:!0})}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>a});let a=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,i=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:i},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90756:(e,t,n)=>{n.d(t,{R:()=>i,j:()=>LoopError});var a=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,a._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function i(e){return e instanceof LoopError}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>o,kX:()=>p,nT:()=>d});var a=n(31629),i=n(21046),s=n(90122),r=n(39087),l=n(45363);function o(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of c(n)){let a=u(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,i.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let l=e.nodes.get(s);if(!l)return t[s]=0,0;let o=c(l);if(o&&0!==o.size){let e=[...o].map(e=>{let t=u(e);return a(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){(0,i.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[a]||(r[a]=[]),r[a].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return new Set([...c(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:l.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,a.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,a.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,a.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},p=(e,t)=>{let n=function(e){return{...e,nodes:e.nodes.map(h)}}(e);return{...n,nodes:(n.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function h(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=o(e.nodes);return e.nodes.filter(e=>v(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,a]of e.nodes)t.nodes.set(n,a);let n=[...e.nodes].filter(([,t])=>v(t,e));if(n.length>0){let e="virtual-output";for(let[,a]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:a.id,to:e})}return t}function y(e){return"virtual-output"===e}function v(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93364:(e,t,n)=>{function a(e){return{success:!0,data:e}}function i(e,t){var n,a;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"===n.error?n.error:a??s:a??s,httpStatus:t?.status}}n.d(t,{$j:()=>a,YD:()=>i});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var a=n(21728),i=n(96540);function s(e){let t,n,s,r=(0,a.c)(4),[l,o]=(0,i.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>o(!0),r[0]=t):t=r[0];let c=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>o(!1),r[1]=n):n=r[1];let d=n;return r[2]!==l?(s=[l,c,d],r[2]=l,r[3]=s):s=r[3],s}},95254:(e,t,n)=>{n.d(t,{L:()=>i});var a=n(47723);function i(e){if(e&&0!==e.length)for(let t of e){let e=function(e){let t=`${a.qY}::`;if(!e.startsWith(t))return;let n=e.slice(t.length),i=n.indexOf("::");if(-1!==i)return n.slice(0,i)||void 0}(t);if(e)return e}}},95772:(e,t,n)=>{n.d(t,{A:()=>x});var a=n(74848),i=n(21728),s=n(47789),r=n(17925),l=n(67475),o=n(53419),c=n(26607);let d={button:"CommandPill-module__button--dwT_a",text:"CommandPill-module__text--ggGhT"},u=e=>{let t,n,s,r,l,o,u,m,p=(0,i.c)(16);p[0]!==e?({children:s,icon:t,isNew:r,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=s,p[4]=r):(t=p[1],n=p[2],s=p[3],r=p[4]);let h=void 0!==r&&r;return p[5]!==t?(l=(0,a.jsx)(t,{}),p[5]=t,p[6]=l):l=p[6],p[7]!==s?(o=(0,a.jsx)("span",{className:d.text,children:s}),p[7]=s,p[8]=o):o=p[8],p[9]!==h?(u=h&&(0,a.jsx)(c.A,{size:"small",variant:"accent",children:"New"}),p[9]=h,p[10]=u):u=p[10],p[11]!==n||p[12]!==l||p[13]!==o||p[14]!==u?(m=(0,a.jsxs)("button",{className:d.button,...n,children:[l,o,u]}),p[11]=n,p[12]=l,p[13]=o,p[14]=u,p[15]=m):m=p[15],m};try{u.displayName||(u.displayName="CommandPill")}catch{}let m={container:"CommandStarters-module__container--y1QAx",list:"CommandStarters-module__list--sK_4w"},p=e=>{let t,n,r,o,c,d,p=(0,i.c)(14),{onSelect:h}=e,f=(0,s.qw)();if(p[0]!==h||p[1]!==f){o=Symbol.for("react.early_return_sentinel");e:{let e,i=(0,l.K)(f);if(0===i.length){o=null;break e}r=m.container,t=m.list,p[6]!==h?(e=e=>(0,a.jsx)("li",{children:(0,a.jsx)(u,{icon:e.icon,onClick:()=>h(e.key),isNew:e.isNew,children:e.name})},e.key),p[6]=h,p[7]=e):e=p[7],n=i.map(e)}p[0]=h,p[1]=f,p[2]=t,p[3]=n,p[4]=r,p[5]=o}else t=p[2],n=p[3],r=p[4],o=p[5];return o!==Symbol.for("react.early_return_sentinel")?o:(p[8]!==t||p[9]!==n?(c=(0,a.jsx)("ul",{className:t,children:n}),p[8]=t,p[9]=n,p[10]=c):c=p[10],p[11]!==r||p[12]!==c?(d=(0,a.jsx)("div",{className:r,children:c}),p[11]=r,p[12]=c,p[13]=d):d=p[13],d)};try{p.displayName||(p.displayName="CommandStarters")}catch{}var h=n(11683),f=n(5524),g=n(63307),y=n(96540);let v=e=>{let t,n,s,r,l,o,c,d,u,m,p,v,x,b,_,w,j,N,k,C,S,I,T,E,L=(0,i.c)(67),{chatCommand:R,suggestions:A,onSelect:D,anchorRef:P,textAreaRef:O}=e,[B,F]=(0,y.useState)(0),[M,$]=(0,y.useState)(0),[V,U]=(0,y.useState)(!1),[q,W]=(0,y.useState)(void 0),[H,K]=(0,y.useState)(-1),[G,z]=(0,y.useState)(""),Q=(0,y.useRef)(null),Y=(0,y.useRef)(null);if(L[0]!==R||L[1]!==A||L[2]!==G){let e;L[4]!==R||L[5]!==G?(e=e=>{let t=`/${R} ${e}`.toLowerCase(),n=G.toLowerCase().trim();return t.includes(n)&&t!==n},L[4]=R,L[5]=G,L[6]=e):e=L[6],t=A.filter(e),L[0]=R,L[1]=A,L[2]=G,L[3]=t}else t=L[3];let J=t,X=V&&J.length>0;L[7]!==P?(n=()=>{if(Y.current&&P.current){let{top:e,left:t}=(0,h.uG)(Y.current,P.current,{align:"start",side:"outside-bottom",anchorOffset:4});F(e),$(t)}},L[7]=P,L[8]=n):n=L[8];let Z=n;L[9]!==O?(s=()=>{O.current===document.activeElement&&U(!0)},r=[O],L[9]=O,L[10]=s,L[11]=r):(s=L[10],r=L[11]),(0,y.useEffect)(s,r),L[12]!==O?(l=()=>{let e=O.current;if(!e)return;let t=()=>{z(e.value)};return z(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},o=[O],L[12]=O,L[13]=l,L[14]=o):(l=L[13],o=L[14]),(0,y.useEffect)(l,o),L[15]!==P||L[16]!==X||L[17]!==Z?(c=()=>{let e=P.current;if(!X||!e)return;let t=()=>{P.current&&(W(P.current.getBoundingClientRect().width),Z())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},d=[X,P,Z],L[15]=P,L[16]=X,L[17]=Z,L[18]=c,L[19]=d):(c=L[18],d=L[19]),(0,y.useEffect)(c,d),L[20]!==O?(u=e=>!!e&&((O.current?.contains(e)??!1)||(Y.current?.contains(e)??!1)),L[20]=O,L[21]=u):u=L[21];let ee=u;L[22]!==ee||L[23]!==O?(m=()=>{let e=O.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},p=[O,ee],L[22]=ee,L[23]=O,L[24]=m,L[25]=p):(m=L[24],p=L[25]),(0,y.useEffect)(m,p),L[26]!==R||L[27]!==O?(v=()=>{let e=O.current;if(!e)return;let t=()=>{R&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},x=[O,R],L[26]=R,L[27]=O,L[28]=v,L[29]=x):(v=L[28],x=L[29]),(0,y.useEffect)(v,x),L[30]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{U(!1),K(-1)},L[30]=b):b=L[30];let et=b;L[31]!==X||L[32]!==O?(_=()=>{let e=O.current;if(!e||!X)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||K(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},w=[O,X],L[31]=X,L[32]=O,L[33]=_,L[34]=w):(_=L[33],w=L[34]),(0,y.useEffect)(_,w),L[35]!==R||L[36]!==X||L[37]!==D||L[38]!==O||L[39]!==J?(j=()=>{let e=O.current;if(!e||!X)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";K(e=>((e,t)=>{let n="down"===e?-1===t?0:Math.min(t+1,J.length-1):-1===t?J.length-1:Math.max(t-1,0),a=J[n];return a&&D(R,a),n})(t,e))}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},N=[O,X,J,R,D],L[35]=R,L[36]=X,L[37]=D,L[38]=O,L[39]=J,L[40]=j,L[41]=N):(j=L[40],N=L[41]),(0,y.useEffect)(j,N),L[42]!==ee?(k=e=>{e.target instanceof Node&&ee(e.target)||et()},L[42]=ee,L[43]=k):k=L[43];let en=k;L[44]!==R||L[45]!==D?(C=e=>{D(R,e),K(-1)},L[44]=R,L[45]=D,L[46]=C):C=L[46];let ea=C;if(!X)return null;if(L[47]!==q?(S=q?{width:`${q}px`}:void 0,L[47]=q,L[48]=S):S=L[48],L[49]!==R||L[50]!==ea||L[51]!==H||L[52]!==J){let e;L[54]!==R||L[55]!==ea||L[56]!==H?(e=(e,t)=>(0,a.jsxs)(f.l.Item,{size:"large",onSelect:()=>ea(e),active:t===H,children:[(0,a.jsx)(f.l.LeadingVisual,{children:(0,a.jsxs)("span",{className:"fgColor-muted",children:["/",R]})}),e]},e),L[54]=R,L[55]=ea,L[56]=H,L[57]=e):e=L[57],I=J.map(e),L[49]=R,L[50]=ea,L[51]=H,L[52]=J,L[53]=I}else I=L[53];return L[58]!==I?(T=(0,a.jsx)(f.l,{children:I}),L[58]=I,L[59]=T):T=L[59],L[60]!==P||L[61]!==M||L[62]!==en||L[63]!==S||L[64]!==T||L[65]!==B?(E=(0,a.jsx)(g.Ay,{top:B,left:M,onClickOutside:en,onEscape:et,returnFocusRef:P,"aria-label":"Command suggestions",style:S,"data-testid":"command-suggestions-overlay",ref:Y,preventFocusOnOpen:!0,children:T}),L[60]=P,L[61]=M,L[62]=en,L[63]=S,L[64]=T,L[65]=B,L[66]=E):E=L[66],E};try{v.displayName||(v.displayName="CommandSuggestions")}catch{}function x(e){let t,n,c,d,u,m,h,f=(0,i.c)(23),{chatCommand:g,chatInputRef:y,containerRef:x,textAreaRef:b}=e,_=(0,s.qw)();f[0]!==y||f[1]!==_||f[2]!==b?(t=e=>{(0,o.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e}),y.current?.setText(t=>{let n=(0,r.V)(t,_);return n?t.replace(`/${n}`,`/${e}`):`/${e} ${t}`}),b.current?.focus()},f[0]=y,f[1]=_,f[2]=b,f[3]=t):t=f[3];let w=t;f[4]!==y||f[5]!==b?(n=(e,t)=>{(0,o.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t}),y.current?.setText(`/${e} ${t}`.trim()),b.current?.focus()},f[4]=y,f[5]=b,f[6]=n):n=f[6];let j=n;if(f[7]!==g||f[8]!==_){let e=(0,l.K)(_);c=g?e.find(e=>e.key===g)?.suggestions:null,f[7]=g,f[8]=_,f[9]=c}else c=f[9];let N=c,k=N&&N.length>0;return f[10]!==g||f[11]!==x||f[12]!==j||f[13]!==k||f[14]!==N||f[15]!==b?(d=g&&k&&(0,a.jsx)(v,{chatCommand:g,suggestions:N,onSelect:j,anchorRef:x,textAreaRef:b},g),f[10]=g,f[11]=x,f[12]=j,f[13]=k,f[14]=N,f[15]=b,f[16]=d):d=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),f[17]=u):u=f[17],f[18]!==w?(m=(0,a.jsxs)(a.Fragment,{children:[u,(0,a.jsx)(p,{onSelect:w})]}),f[18]=w,f[19]=m):m=f[19],f[20]!==d||f[21]!==m?(h=(0,a.jsxs)(a.Fragment,{children:[d,m]}),f[20]=d,f[21]=m,f[22]=h):h=f[22],h}try{x.displayName||(x.displayName="CommandStartersAndSuggestions")}catch{}},95807:(e,t,n)=>{n.d(t,{i:()=>h});var a=n(74848),i=n(96379),s=n(21373),r=n(69726),l=n(11196),o=n(96540),c=n(30459),d=n(57224),u=n(70263);let m={button:"PullRequestsProcessingIndicator-module__button--IKkby",indicator:"PullRequestsProcessingIndicator-module__indicator--iNiwb",text:"PullRequestsProcessingIndicator-module__text--JUMXg"},p={stale:!1,latest_unsynced_push_to_head_ref_at:null};function h({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[s,r]=(0,o.useState)(p),l=(0,u.A)(),c=(0,o.useCallback)(async()=>{try{let t=await (0,i.lS)(e);if(t.ok){let e=await t.json();l()&&r(e)}}catch{l()&&r(p)}},[l,e]);(0,o.useEffect)(()=>{c()},[]);let{stale:m,latest_unsynced_push_to_head_ref_at:h}=s;return(0,a.jsx)("div",{className:"border-left pl-1",children:(0,a.jsx)(d.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,a.jsx)(f,{pullRequestId:n,repositoryId:t,stale:m,latest_unsynced_push_to_head_ref_at:h})})})}function f({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:i}){let{sendAnalyticsEvent:o}=(0,c.s)();if(!n||!i)return null;let d=new Date,u=new Date(i),p=Math.round(d.getTime()-u.getTime())/1e3;return p<20||p>=86400?null:(o("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:p}),(0,a.jsx)(l.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,a.jsx)(s.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:m.button,children:(0,a.jsxs)("div",{className:m.indicator,children:[(0,a.jsx)(r.A,{size:"small"}),(0,a.jsx)("span",{className:m.text,children:"Processing updates"})]})})}))}try{h.displayName||(h.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{f.displayName||(f.displayName="PullRequestsProcessingIndicator")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>i,qB:()=>r});var a=n(33026);let i={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:i.CANVAS,sidePanelView:s.CHAT,version:a.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},98678:(e,t,n)=>{n.d(t,{U:()=>iV});var a=n(74848),i=n(21728),s=n(2635),r=n(7730),l=n(35247),o=n(53419),c=n(11607),d=n(77999),u=n(75202),m=n(6551),p=n(11683),h=n(38621),f=n(45800),g=n(26108),y=n(27042),v=n(5524),x=n(71941),b=n(34164),_=n(96540),w=n(22116);let j={container:"ContentPreview-module__container--y5_MG",resourcePanelOpen:"ContentPreview-module__resourcePanelOpen--YIQql",toolbar:"ContentPreview-module__toolbar--_XWuB",rightActions:"ContentPreview-module__rightActions--Ed1c0",actions:"ContentPreview-module__actions--o_YRg",tabsContainer:"ContentPreview-module__tabsContainer--t0I1P",tabs:"ContentPreview-module__tabs--X2Pn9",rightDivider:"ContentPreview-module__rightDivider--LY__Z",leftDivider:"ContentPreview-module__leftDivider--FCyvC",content:"ContentPreview-module__content--FgZZL"};var N=n(1747),k=n(47789),C=n(90651),S=n(49246),I=n(66827),T=n(29731),E=n(46251),L=n(97949),R=n(43715),A=n(38598);let D={container:"FailureState-module__container--EliAz",icon:"FailureState-module__icon--TP632",heading:"FailureState-module__heading--ohXqD",subtitle:"FailureState-module__subtitle--VM7x1"};function P(e){let t,n,s,r,l,o=(0,i.c)(11),{title:c,description:d,icon:u}=e;return o[0]!==u?(t=(0,a.jsx)(u,{size:24,className:D.icon}),o[0]=u,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o[2]=n):n=o[2],o[3]!==c?(s=(0,a.jsx)("h2",{className:D.heading,children:c}),o[3]=c,o[4]=s):s=o[4],o[5]!==d?(r=(0,a.jsx)("p",{className:D.subtitle,children:d}),o[5]=d,o[6]=r):r=o[6],o[7]!==t||o[8]!==s||o[9]!==r?(l=(0,a.jsxs)("div",{className:D.container,children:[t,n,s,r]}),o[7]=t,o[8]=s,o[9]=r,o[10]=l):l=o[10],l}try{P.displayName||(P.displayName="FailureState")}catch{}var O=n(26100),B=n(7812);let F={anchor:"VersionSelector-module__anchor--Tx_UX"};function M(e){let t,n,s,r,l,o=(0,i.c)(16),{item:c,onVersionSelect:d}=e,{versionedItems:u,openItem:m}=(0,N.xx)(),p=(0,B.oy)(c.id),h=u.get(p)??[],f=h.indexOf(c.id);if((0,_.useEffect)(()=>{d&&h.length>1&&d(`Version${f+1}`)},[f,d,h.length]),h.length<=1)return null;let g=y.W,x=f+1;o[0]!==x?(t=(0,a.jsx)(y.W.Button,{variant:"invisible",className:F.anchor,children:(0,a.jsx)(O.g,{version:x,"data-testid":"version-selector"})}),o[0]=x,o[1]=t):t=o[1];let b=y.W,w=v.l;o[2]!==c.id||o[3]!==d||o[4]!==m?(n=(e,t)=>(0,a.jsxs)(v.l.Item,{onSelect:()=>{m(e),d&&d(`Version${t+1}`)},selected:e===c.id,children:[(0,a.jsx)(v.l.LeadingVisual,{children:(0,a.jsx)(O.g,{version:t+1})}),"Version ",t+1]},e),o[2]=c.id,o[3]=d,o[4]=m,o[5]=n):n=o[5];let j=h.map(n);return o[6]!==w||o[7]!==j?(s=(0,a.jsx)(w,{selectionVariant:"single",children:j}),o[6]=w,o[7]=j,o[8]=s):s=o[8],o[9]!==b.Overlay||o[10]!==s?(r=(0,a.jsx)(b.Overlay,{children:s}),o[9]=b.Overlay,o[10]=s,o[11]=r):r=o[11],o[12]!==g||o[13]!==t||o[14]!==r?(l=(0,a.jsxs)(g,{children:[t,r]}),o[12]=g,o[13]=t,o[14]=r,o[15]=l):l=o[15],l}try{M.displayName||(M.displayName="VersionSelector")}catch{}var $=n(58335),V=n(17831),U=n(83494),q=n(15220),W=n(69726),H=n(21373),K=n(79431);let G={dialogFooter:"BulkCreateDialog-module__dialogFooter--aWAd9",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--BvuR4",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--sRZcS"};var z=n(28177),Q=n(39344),Y=n(62559),J=n(81724),X=n(977),Z=n(16654),ee=n(18501),et=n(40961),en=n(5338),ea=n(18312),ei=n(46461);let es={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};es.hash="a175c12fb4b38762491470789bca7dee";let er=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"number"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"number",variableName:"number"}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},p=[m],h={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},g=[u],y=[{kind:"Literal",name:"first",value:20}],v={alias:null,args:y,concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[s,o],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},x={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},b=[u,s];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[s,r,l,o,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:p,storageKey:null},h,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:g,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:p,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:g,storageKey:null},v,x],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[s,r,l,o,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m,s],storageKey:null},h,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:b,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[m,s],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:b,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[o,s],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:b,storageKey:null},v,x],storageKey:null},s],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}}}();async function el(e,t,n,a,i=!1){try{var s;let r=await (0,ea.fetchQuery)(e,er,{owner:t,name:n,number:a},{fetchPolicy:i?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,ea.readInlineData)(es,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}er.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var eo=n(72767),ec=n(93997),ed=n(97286);function eu(e){let t,n,a,s,r=(0,i.c)(13),{repoId:l,filename:o}=e,c=(0,ea.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==o||r[3]!==l||r[4]!==t?(n=["copilot-immersive-template-payload",t,l,o],r[2]=o,r[3]=l,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==o||r[8]!==l?(a=async()=>l&&o?await em(c,l,o):null,r[6]=c,r[7]=o,r[8]=l,r[9]=a):a=r[9],r[10]!==n||r[11]!==a?(s={queryKey:n,queryFn:a},r[10]=n,r[11]=a,r[12]=s):s=r[12],(0,ed.I)(s)}async function em(e,t,n){let a=await (0,ea.fetchQuery)(e,eo.F,{repoId:t,filename:n}).toPromise();return a&&a.node?(0,ec.EV)(a.node)??null:null}let ep=crypto.randomUUID();async function eh(e,t,n){let i={},s=new Map;if((0,ei.YR)(n,e=>s.set(e.item.tag,e)),s.size>60)return i[ep]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let a of t.children)if(e(a,n+1))return!0;return!1}(n))return i[ep]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,r]of s){let l=r.item;if(i[n]={errorMessages:[]},"new-issue"===l.type&&(!l.repository&&l.parentTag&&(l.repository=s.get(l.parentTag)?.item?.repository),!l.repository)){i[n].errorMessages.push("Repository is required");continue}let[o,c]=l.repository?.split("/")||[];if(!o||!c){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,Z.tZ)(e,o,c);if(!d){i[n].errorMessages.push("Repository not found");continue}if(d.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(r.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===l.type){if(!l.number){i[n].errorMessages.push("Issue number is required");continue}let t=await el(e,o,c,l.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(r.children.length>0){let e=t.subIssues?.totalCount??0,a=r.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let u=l.template?.split("/").findLast(Boolean),m=u?await em(e,d.id,u):void 0;if(l.template&&!m){i[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!m){i[n].errorMessages.push("Issue template is required");continue}let p=(0,Y.O_)(l.name);if(p.isValid||i[n].errorMessages.push(p.errorMessage||"Issue title is invalid"),m&&(0,J.GQ)(m.data)){t.current=null;let s=document.createElement("div"),r=(0,en.H)(s);if((0,et.flushSync)(()=>{r.render((0,a.jsx)(ee.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,a.jsx)(ea.RelayEnvironmentProvider,{environment:e,children:(0,a.jsx)(ef,{repository:d,draftIssue:l,template:m,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let o=t.current;try{if(o.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}l.body=o.markdown()}finally{o.clearSessionStorage(),r.unmount(),s.remove()}}let h=(0,Y.QK)(l.body??"");h.isValid||i[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return i}function ef(e){let t,n,s=(0,i.c)(10),{repository:r,draftIssue:l,template:o,outputRef:c}=e,d=`${r.owner.login}/${r.name}`;s[0]!==r.databaseId||s[1]!==r.slashCommandsEnabled||s[2]!==d?(t={type:"issue",repository:{databaseId:r.databaseId,nwo:d,slashCommandsEnabled:r.slashCommandsEnabled}},s[0]=r.databaseId,s[1]=r.slashCommandsEnabled,s[2]=d,s[3]=t):t=s[3];let u=t;if(!(0,J.GQ)(o.data))return;let m=`copilot-creates-issues:${l.tag}`;return s[4]!==l.defaultValuesById||s[5]!==c||s[6]!==u||s[7]!==m||s[8]!==o.data?(n=(0,a.jsx)(X.Z,{outputRef:c,issueFormRef:o.data,subject:u,sessionStorageKey:m,defaultValuesById:l.defaultValuesById}),s[4]=l.defaultValuesById,s[5]=c,s[6]=u,s[7]=m,s[8]=o.data,s[9]=n):n=s[9],n}try{ep.displayName||(ep.displayName="TREE_ERROR_KEY")}catch{}try{ef.displayName||(ef.displayName="IssueFormWrapper")}catch{}var eg=n(50467),ey=n(94747),ev=n(96379),ex=n(16049),eb=n(73952);function e_(){let e,t,n=(0,i.c)(4),{messages:a}=(0,s.Pk)();n[0]!==a?(e=(0,eb.B)(a),n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t=(e,t)=>null==e?Promise.resolve(t):ew(t,e.databaseId,r[0]?.threadID),n[2]=r,n[3]=t):t=n[3],t}async function ew(e,t,n){let a=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),i=new Set;for(let e of a||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&i.add(t)}if(i.size>0){let a=Array.from(i).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],i=`copilot-image.${a}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],i,{type:n.type}),url:e,width:r}}),s=await Promise.all(a);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,ex.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:a,width:i}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${i}" src="${s}" />`)}}(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:i.size,threadId:n})}return e}function ej(e){return e.item.tag}function eN(e){return!!e}function ek(e){return e.title}function eC(e){return e.item.tag}function eS(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var eI=n(17855),eT=n(33592),eE=n(51213),eL=n(72303),eR=n(20382);let eA={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function eD(){let e,t=(0,i.c)(8),n=(0,eT.b)(),a=(0,s.Pk)(),{closeItems:r,openItem:c,openPreviewPane:d,versionedItems:u,updateItem:m}=(0,N.xx)();return t[0]!==r||t[1]!==n||t[2]!==c||t[3]!==d||t[4]!==a||t[5]!==m||t[6]!==u?(e=async e=>{if(0===e.length)return;let t=e.find(eq)??e[0];(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,eL.W)(a)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(eV).length,savedIssuesCount:e.length});let i=[],s=[],p=[];for(let t of e){let n=t.repository.owner.login,a=t.repository.name,r=t.number;m({type:"issue",id:eK(t),messageId:eE.Wp,name:t.title,owner:n,repo:a,number:r,href:t.url});let o=e.find(e=>e.tag===t.parentTag),c=l.W.draftIssuesWithDependencies?t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(e$):void 0,d=l.W.draftIssuesWithDependencies?t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(eM):void 0;s.push({tag:`${n}/${a}#${r}`,parentTag:o?eH(o):void 0,blockedByTags:c?.map(eF),isBlockingTags:d?.map(eB),title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),i.push(eW(t)),p.push(t.tag)}r(e.map(eO).flatMap(e=>u.get(e)??[])),c(eK(t)),d();let h=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=eW(t),a="new-issue"===t.draftType?"Created":"Updated";return`${a} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,eR.Bh)({data:s},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${p.join(", ")}`},...a.currentReferences],f=e.flatMap(eP);f.length&&h.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=eA[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(f)}`});let g=i.length>1?`Saved the issues: ${i.join(", ")}`:`Saved the issue: ${i[0]}`;await n.sendChatMessage({thread:(0,eL.W)(a),content:g,references:h,topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=r,t[1]=n,t[2]=c,t[3]=d,t[4]=a,t[5]=m,t[6]=u,t[7]=e):e=t[7],e}function eP(e){return e.errors||[]}function eO(e){return`${e.draftType}:${e.tag}`}function eB(e){return eH(e)}function eF(e){return eH(e)}function eM(e){return null!=e}function e$(e){return null!=e}function eV(e){return e.assignees.some(eU)}function eU(e){return(0,eI.v)(e)}function eq(e){return!e.parentTag}function eW(e){return`[${eH(e)}](${e.url})`}function eH(e){let t=e.repository.owner.login,n=e.repository.name,a=e.number;return`${t}/${n}#${a}`}function eK(e){let t=e.repository.owner.login,n=e.repository.name,a=e.number;return`issue:${t}/${n}/${a}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,eg._)(this,"type",void 0),(0,eg._)(this,"bannerTitle",void 0),(0,eg._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,eg._)(this,"type",void 0),(0,eg._)(this,"bannerTitle",void 0),(0,eg._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function eG(e){let t,n,a,s,r,l,o,c,d=(0,i.c)(34),{issueNode:u,onComplete:m,onError:p,issueFormRef:h,issueTemplate:f}=e;d[0]!==h||d[1]!==u||d[2]!==f?(t={issueNode:u,issueFormRef:h,issueTemplate:f},d[0]=h,d[1]=u,d[2]=f,d[3]=t):t=d[3];let{mutate:g,isLoading:y,data:v,isComplete:x,isError:b,error:w}=function(e){let t,n,a,s=(0,i.c)(15),{issueNode:r,issueFormRef:l,issueTemplate:o}=e;s[0]!==l||s[1]!==r||s[2]!==o?(t={issueNode:r,issueFormRef:l,issueTemplate:o},s[0]=l,s[1]=r,s[2]=o,s[3]=t):t=s[3];let c=function(e){let t,n,a,s=(0,i.c)(12),{issueNode:r,issueFormRef:l,issueTemplate:o}=e,c=(0,ea.useRelayEnvironment)(),d=e_(),u=!r.parent&&0===r.children.length;return s[0]!==r.item.tag?(t=["copilot-issues-bulk-create",r.item.tag],s[0]=r.item.tag,s[1]=t):t=s[1],s[2]!==c||s[3]!==u||s[4]!==l||s[5]!==r||s[6]!==o||s[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,ei.Pq)(r,async n=>{let a=n.item;if("existing-issue"===a.type)return void e.push({tag:a.tag,parent_tag:a.parentTag,repository_nwo:a.repository,number:a.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(eC):void 0});let i=a.body;if(u&&o&&(0,J.GQ)(o.data)&&l?.current&&(i=l.current.markdown()??a.body),i&&a.repository){let e=t.get(a.repository);if(!e){let[n,i]=a.repository.split("/");null!=n&&null!=i&&(e=await (0,Z.tZ)(c,n,i),t.set(a.repository,e))}i=await d(e,i)}e.push({title:a.name,tag:a.tag,repository_nwo:a.repository,body:i,parent_tag:a.parentTag,labels:a.labels,assignees:a.assignees,milestone:a.milestone,issue_type:a.issueType,template:o?.fileName,projects:a.projects?.map(ek).filter(eN),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(ej):void 0})});let n=await (0,ev.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},s[2]=c,s[3]=u,s[4]=l,s[5]=r,s[6]=o,s[7]=d,s[8]=n):n=s[8],s[9]!==t||s[10]!==n?(a={mutationKey:t,mutationFn:n},s[9]=t,s[10]=n,s[11]=a):a=s[11],(0,ey.n)(a)}(t),d=function(e){let t,n,a,s=(0,i.c)(7),r=!!e;return s[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async t=>{let n=await (0,ev.Sr)(e);if(!n.ok){let e=await n.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==r||s[4]!==t||s[5]!==n?(a={enabled:r,queryKey:t,queryFn:n,refetchInterval:eS},s[3]=r,s[4]=t,s[5]=n,s[6]=a):a=s[6],(0,ed.I)(a)}(c.data?.jobStatusUrl),u=c.error||d.error,m=c.isError||d.isError;s[4]!==c.isPending||s[5]!==d.data?.job.state||s[6]!==d.isLoading?(n=c.isPending||d.isLoading||["pending","queued","started"].includes(d.data?.job.state||""),s[4]=c.isPending,s[5]=d.data?.job.state,s[6]=d.isLoading,s[7]=n):n=s[7];let p=d.data?.job.state==="success";return s[8]!==c.mutate||s[9]!==d.data||s[10]!==u||s[11]!==m||s[12]!==n||s[13]!==p?(a={mutate:c.mutate,data:d.data,error:u,isError:m,isLoading:n,isComplete:p},s[8]=c.mutate,s[9]=d.data,s[10]=u,s[11]=m,s[12]=n,s[13]=p,s[14]=a):a=s[14],a}(t),j=eD();d[4]!==h||d[5]!==u||d[6]!==f||d[7]!==p?(n=()=>{let e;if(!u)return!1;let t=u.item;if("new-issue"!==t.type)return!0;let n=t.name||"",a=(0,Y.O_)(n);if(!a.isValid)return p?.(new ValidationError(a.errorMessage||"Issue title is invalid")),!1;let i=(0,Y.QK)(t.body||"");if(!i.isValid)return p?.(new ValidationError(i.errorMessage||"Issue body is invalid")),!1;if(f&&(0,J.GQ)(f.data)&&h.current){let t=h.current.getInvalidInputs();if(t.length>0)return e=t[0],p?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=h,d[5]=u,d[6]=f,d[7]=p,d[8]=n):n=d[8];let N=n;d[9]!==x||d[10]!==y||d[11]!==u||d[12]!==g||d[13]!==N?(a=()=>{!y&&!x&&(u.parent||0!==u.children.length||N())&&g()},d[9]=x,d[10]=y,d[11]=u,d[12]=g,d[13]=N,d[14]=a):a=d[14];let k=a,C=ez;return d[15]!==w||d[16]!==b||d[17]!==p?(s=()=>{b&&w&&p?.(new CreateError(w.message))},r=[b,w,p],d[15]=w,d[16]=b,d[17]=p,d[18]=s,d[19]=r):(s=d[18],r=d[19]),(0,_.useEffect)(s,r),d[20]!==v||d[21]!==x||d[22]!==u||d[23]!==m||d[24]!==j?(l=()=>{if(!v||!x)return;let e=C(v,u);m(),j(e)},o=[v,x,u,m,j,C],d[20]=v,d[21]=x,d[22]=u,d[23]=m,d[24]=j,d[25]=l,d[26]=o):(l=d[25],o=d[26]),(0,_.useEffect)(l,o),d[27]!==v||d[28]!==w||d[29]!==k||d[30]!==x||d[31]!==b||d[32]!==y?(c={handleCreate:k,isLoading:y,isComplete:x,isError:b,error:w,data:v},d[27]=v,d[28]=w,d[29]=k,d[30]=x,d[31]=b,d[32]=y,d[33]=c):c=d[33],c}function ez(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,ei.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[a,i]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:i,owner:{login:a}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function eQ({issueNode:e,onComplete:t,onCancel:n}){let s=(0,_.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),r=(0,_.useMemo)(()=>{let e=0;return(0,ei.YR)(s,t=>{"new-issue"===t.item.type&&e++}),e},[s]),{handleCreate:l,isLoading:o,isComplete:c,isError:d,error:u,data:m}=eG({issueNode:s,onComplete:t}),{loading:p,result:f}=function(e){let t,n,a,s,r=(0,i.c)(8),[l,o]=(0,_.useState)(!1);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={},r[0]=t):t=r[0];let[c,d]=(0,_.useState)(t),u=(0,ea.useRelayEnvironment)(),m=(0,_.useRef)(null);return r[1]!==u||r[2]!==e?(n=()=>{!async function(){o(!0),d(await eh(u,m,e)),o(!1)}()},a=[u,e],r[1]=u,r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,_.useEffect)(n,a),r[5]!==l||r[6]!==c?(s={loading:l,result:c},r[5]=l,r[6]=c,r[7]=s):s=r[7],s}(s),g=(0,_.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]),y=(0,_.useCallback)(()=>{o||c||n()},[o,c,n]),v=(0,_.useMemo)(()=>{let e=new Set;return((0,ei.YR)(s,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===s.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===s.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===r?"Create 1 issue":`Create ${r} issues`}:e.size>1&&"new-issue"===s.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===r?"Create 1 issue":`Create ${r} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===r?"Create 1 issue":`Create ${r} issues`}},[s,r]),{openItem:x,openPreviewPane:b}=(0,N.xx)(),w=(0,_.useCallback)(e=>{o||c||(x(e.item.id,!0),b(),n())},[c,o,n,x,b]),j=(0,_.useMemo)(()=>f[ep]?f[ep]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[f]);return(0,a.jsx)(q.l,{title:v.title,onClose:y,renderFooter:()=>p?null:(0,a.jsxs)(q.l.Footer,{className:G.dialogFooter,children:[(0,a.jsx)("div",{className:G.dialogFooterStatus,children:d&&(0,a.jsx)(K.v,{variant:"critical",children:u?.message})}),(0,a.jsxs)("div",{className:G.dialogFooterActions,children:[(0,a.jsx)(H.Q,{variant:"default",onClick:y,inactive:o||c,children:"Cancel"}),(0,a.jsx)(H.Q,{variant:"primary",onClick:l,loading:o||c,disabled:g||d,children:v.button})]})]}),children:p?(0,a.jsx)("div",{className:G.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,a.jsx)(W.A,{})}):g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:j,className:"mb-3"}),(0,a.jsx)(eY,{issueNode:s,onNodeClick:w,statusSelector:e=>{let t=f[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,a.jsx)(h.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,a.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:v.description}),(0,a.jsx)(eY,{issueNode:s,onNodeClick:w,statusSelector:e=>({trailingVisual:m?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,a.jsx)(h.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function eY({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i}=(0,N.xx)(),s=(0,_.useMemo)(()=>{let t=0;return(0,ei.YR)(e,e=>{e.parent&&t++}),t},[e]),r=e=>{if(l.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}}))},o=e=>{let s=(0,B.LU)(e.item.id,i),l=n?.(e);return(0,a.jsx)(Q.K.Item,{title:e.item.name,leadingVisual:(0,a.jsx)(z.n,{...e.item}),trailingBadge:(0,a.jsxs)(a.Fragment,{children:[null!=s?(0,a.jsx)(O.g,{version:s}):void 0,(0,a.jsx)(eJ,{node:e})]}),trailingVisual:l?.trailingVisual,description:l?.description,onClick:()=>t(e),blockedBy:r(e),children:e.children.map(o)},e.item.tag)},c=(0,B.LU)(e.item.id,i),d=n?.(e);return(0,a.jsxs)(Q.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:s,hasTrailingVisuals:!0,children:[(0,a.jsx)(Q.K.RootItem,{title:e.item.name,leadingVisual:(0,a.jsx)(z.n,{...e.item}),trailingBadge:(0,a.jsxs)(a.Fragment,{children:[null!=c?(0,a.jsx)(O.g,{version:c}):void 0,(0,a.jsx)(eJ,{node:e})]}),trailingVisual:d?.trailingVisual,description:d?.description,onClick:()=>t(e),blockedBy:r(e)}),e.children.map(o)]})}function eJ(e){let t,n=(0,i.c)(2),{node:s}=e;if(s.item.repository&&s.item.repository!==s.parent?.item.repository)return n[0]!==s.item.repository?(t=(0,a.jsx)("span",{className:"fgColor-muted no-wrap",children:s.item.repository}),n[0]=s.item.repository,n[1]=t):t=n[1],t}try{eQ.displayName||(eQ.displayName="BulkCreateDialog")}catch{}try{eY.displayName||(eY.displayName="IssueTree")}catch{}try{eJ.displayName||(eJ.displayName="IssueLocation")}catch{}function eX(e){let t,n,s,r,l,o=(0,i.c)(11),{issueNode:c,disabled:d,onSuccess:u}=e,m=void 0!==d&&d,[p,h]=(0,_.useState)(!1),f=c;for(;f?.parent;)f=f.parent;let g=f,y=new Set;(0,ei.YR)(g,e=>y.add(e.item.type));e:{if(1===y.size&&y.has("existing-issue")){t="Review and update";break e}t="Review and create"}let v=t;return y.size>1&&"existing-issue"===c.item.type?null:(o[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),h(!0)},o[0]=n):n=o[0],o[1]!==v||o[2]!==m?(s=(0,a.jsx)(U.cQ,{commandId:"github:submit-form",variant:"primary",disabled:m,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:v}),o[1]=v,o[2]=m,o[3]=s):s=o[3],o[4]!==u||o[5]!==g||o[6]!==p?(r=p&&(0,a.jsx)(eQ,{issueNode:g,onComplete:()=>{h(!1),u()},onCancel:()=>{h(!1)}}),o[4]=u,o[5]=g,o[6]=p,o[7]=r):r=o[7],o[8]!==s||o[9]!==r?(l=(0,a.jsxs)(a.Fragment,{children:[s,r]}),o[8]=s,o[9]=r,o[10]=l):l=o[10],l)}try{eX.displayName||(eX.displayName="BulkCreateButton")}catch{}function eZ(e){let t,n,s,r,o,c=(0,i.c)(30),{issueTemplate:d,issueNode:u,issueFormRef:m,noRepoAccess:p,onClose:h,onError:f,onClearError:g}=e,y=void 0!==p&&p,[v,x]=_.useState(!1),b=_.useRef(null),[w,j]=_.useState(!1),{repository:N}=(0,V.u)(),k=N&&!d&&!N.isBlankIssuesEnabled,{clearSessionData:C}=(0,V.u)();c[0]!==C||c[1]!==m?(t=()=>{C(),m.current?.clearSessionStorage()},c[0]=C,c[1]=m,c[2]=t):t=c[2];let S=t;c[3]!==S||c[4]!==h?(n=()=>{S(),h?.(),j(!1)},c[3]=S,c[4]=h,c[5]=n):n=c[5];let I=n;c[6]!==f?(s=e=>{f?.(e),j(!1)},c[6]=f,c[7]=s):s=c[7];let T=s;c[8]!==I||c[9]!==T||c[10]!==m||c[11]!==u||c[12]!==d?(r={issueNode:u,onComplete:I,onError:T,issueFormRef:m,issueTemplate:d},c[8]=I,c[9]=T,c[10]=m,c[11]=u,c[12]=d,c[13]=r):r=c[13];let{handleCreate:E}=eG(r);if(u?.parent||u?.children.length){let e;return c[14]!==I||c[15]!==u||c[16]!==y?(e=(0,a.jsx)(eX,{issueNode:u,disabled:y,onSuccess:I}),c[14]=I,c[15]=u,c[16]=y,c[17]=e):e=c[17],e}if(!N||!N.hasIssuesEnabled)return null;if(k){let e,t,n;return c[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(U.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:b,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),x(!0)},children:"Create"}),c[18]=e):e=c[18],c[19]!==v?(t=v&&(0,a.jsx)(q.l,{title:"Select a template",onClose:()=>x(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>x(!1)}],returnFocusRef:b,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),c[19]=v,c[20]=t):t=c[20],c[21]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),c[21]=t,c[22]=n):n=c[22],n}if(l.W.singleIssueCreateWithBulkJob){let e,t;return c[23]!==E||c[24]!==g?(e=e=>{e.preventDefault(),g?.(),j(!0),E()},c[23]=E,c[24]=g,c[25]=e):e=c[25],c[26]!==w||c[27]!==e?(t=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(U.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-dialog-button",ref:b,inactive:w,showKeybindingHint:!0,onClick:e,children:"Create"})}),c[26]=w,c[27]=e,c[28]=t):t=c[28],t}return c[29]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)($.l,{hideCreateMore:!0,className:"width-auto"}),c[29]=o):o=c[29],o}try{eZ.displayName||(eZ.displayName="CreateIssueButton")}catch{}var e0=n(99726),e1=n(73189),e2=n(38447),e3=n(15106),e4=n(66457),e5=n(58321),e7=n(921),e6=n(85391),e8=n(97764),e9=n(46036),te=n(43063),tt=n(67955);let tn={container:"RelationshipList-module__container--djndN"};function ta(e){let t,n,s,r,l,o,c,d,u,m,p=(0,i.c)(32),{listItem:h,actions:f}=e,{openItem:g,versionedItems:y}=(0,N.xx)(),{item:x}=h;p[0]!==x.id||p[1]!==y?(t=(0,B.LU)(x.id,y),p[0]=x.id,p[1]=y,p[2]=t):t=p[2];let b=t,_=x.tag;if(p[3]!==x.id||p[4]!==g?(n=()=>g(x.id,!0),p[3]=x.id,p[4]=g,p[5]=n):n=p[5],p[6]!==x.tag||p[7]!==b?(s=null!=b?[(0,a.jsx)(O.g,{version:b},`${x.tag}#${b}`)]:void 0,p[6]=x.tag,p[7]=b,p[8]=s):s=p[8],p[9]!==x.name||p[10]!==n||p[11]!==s?(r=(0,a.jsx)(e8.T,{value:x.name,onClick:n,trailingBadges:s}),p[9]=x.name,p[10]=n,p[11]=s,p[12]=r):r=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(l=[],p[13]=l):l=p[13],p[14]!==f||p[15]!==x){let e;p[17]!==x?(e=e=>({key:e.key,render:()=>(0,a.jsxs)(v.l.Item,{onSelect:()=>e.onSelect(x),children:[(0,a.jsx)(v.l.LeadingVisual,{children:e.icon}),e.label]},`${x.tag}-${e.key}`)}),p[17]=x,p[18]=e):e=p[18],o=f.map(e),p[14]=f,p[15]=x,p[16]=o}else o=p[16];return p[19]!==o?(c=(0,a.jsx)(e5.o,{actions:l,staticMenuActions:o}),p[19]=o,p[20]=c):c=p[20],p[21]!==f||p[22]!==h.children?(d=h.children?.length?h.children?.map(e=>(0,a.jsx)(ta,{listItem:e,actions:f},e.item.tag)):void 0,p[21]=f,p[22]=h.children,p[23]=d):d=p[23],p[24]!==x?(u=(0,a.jsx)(e7.Q,{children:(0,a.jsx)(e6.D,{children:(0,a.jsx)(z.n,{...x})})}),p[24]=x,p[25]=u):u=p[25],p[26]!==x.tag||p[27]!==u||p[28]!==r||p[29]!==c||p[30]!==d?(m=(0,a.jsx)(e4.r,{title:r,secondaryActions:c,subItems:d,defaultExpanded:!0,children:u},_),p[26]=x.tag,p[27]=u,p[28]=r,p[29]=c,p[30]=d,p[31]=m):m=p[31],m}function ti(e){let t,n,s,r,l,o=(0,i.c)(15),{title:c,items:d,totalCount:u,actions:m}=e;if(0===d.length)return null;if(o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.$)(tn.container,"mt-2 pb-1 border rounded-2"),o[0]=t):t=o[0],o[1]!==u?(n=(0,a.jsx)(tt.A,{children:u}),o[1]=u,o[2]=n):n=o[2],o[3]!==n||o[4]!==c?(s=(0,a.jsx)(e9.s,{title:(0,a.jsx)(te.c,{title:c,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),o[3]=n,o[4]=c,o[5]=s):s=o[5],o[6]!==m||o[7]!==d){let e;o[9]!==m?(e=e=>(0,a.jsx)(ta,{listItem:e,actions:m},e.item.tag),o[9]=m,o[10]=e):e=o[10],r=d.map(e),o[6]=m,o[7]=d,o[8]=r}else r=o[8];return o[11]!==s||o[12]!==r||o[13]!==c?(l=(0,a.jsx)("div",{className:t,children:(0,a.jsx)(e3.v,{title:c,header:s,children:r})}),o[11]=s,o[12]=r,o[13]=c,o[14]=l):l=o[14],l}try{ta.displayName||(ta.displayName="RelationshipListItemComponent")}catch{}try{ti.displayName||(ti.displayName="RelationshipList")}catch{}function ts(){let e,t=(0,i.c)(4),n=(0,eT.b)(),a=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async(e,t)=>{(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,eL.W)(a)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let i={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},s={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};r(s);let l={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};r(l);let c=[s,l].map(tr);await n.sendChatMessage({thread:(0,eL.W)(a),content:"Remove the blocking dependency from the issue",references:[i,...c],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}function tr(e){return"existing-issue"===e.type?(0,B.yA)(e):(0,B.PO)(e)}function tl(e){let t,n,s,r,o,c=(0,i.c)(11),{issueNode:d}=e,u=ts();e:{if("existing-issue"===d.item.type){t="Newly blocked by";break e}t="Blocked by"}let m=t;return l.W.draftIssuesWithDependencies?(c[0]!==d.blockedBy?(n=d.blockedBy.map(to),c[0]=d.blockedBy,c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(h.UnlinkIcon,{}),c[2]=s):s=c[2],c[3]!==d.item||c[4]!==u?(r=[{key:"unlink",label:"Remove dependency",icon:s,onSelect:e=>{u(d.item,e)}}],c[3]=d.item,c[4]=u,c[5]=r):r=c[5],c[6]!==d.blockedBy.length||c[7]!==n||c[8]!==r||c[9]!==m?(o=(0,a.jsx)(ti,{title:m,items:n,totalCount:d.blockedBy.length,actions:r}),c[6]=d.blockedBy.length,c[7]=n,c[8]=r,c[9]=m,c[10]=o):o=c[10],o):null}function to(e){return{item:e.item}}try{tl.displayName||(tl.displayName="BlockedByList")}catch{}function tc(e){let t,n,s,r,o,c=(0,i.c)(11),{issueNode:d}=e,u=ts();e:{if("existing-issue"===d.item.type){t="Newly blocking";break e}t="Is blocking"}let m=t;return l.W.draftIssuesWithDependencies?(c[0]!==d.isBlocking?(n=d.isBlocking.map(td),c[0]=d.isBlocking,c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(h.UnlinkIcon,{}),c[2]=s):s=c[2],c[3]!==d.item||c[4]!==u?(r=[{key:"unlink",label:"Remove dependency",icon:s,onSelect:e=>{u(e,d.item)}}],c[3]=d.item,c[4]=u,c[5]=r):r=c[5],c[6]!==d.isBlocking.length||c[7]!==n||c[8]!==r||c[9]!==m?(o=(0,a.jsx)(ti,{title:m,items:n,totalCount:d.isBlocking.length,actions:r}),c[6]=d.isBlocking.length,c[7]=n,c[8]=r,c[9]=m,c[10]=o):o=c[10],o):null}function td(e){return{item:e.item}}try{tc.displayName||(tc.displayName="BlockingList")}catch{}function tu({issueNode:e}){let t=function(){let e,t=(0,i.c)(4),n=(0,eT.b)(),a=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async e=>{(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,eL.W)(a)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},i={...e,parentTag:void 0,isUserEdited:!1};r(i);let s="existing-issue"===i.type?(0,B.yA)(i):(0,B.PO)(i);await n.sendChatMessage({thread:(0,eL.W)(a),content:"Unlink the sub-issue from its parent issue",references:[t,s],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}(),n=(0,_.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),r=(0,_.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,ei.YR)(e,()=>t++),t},[e]);return(0,a.jsx)(ti,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:r,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,a.jsx)(h.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{tu.displayName||(tu.displayName="SubissuesList")}catch{}function tm(e){let t,n=(0,i.c)(2),{issueNode:s}=e;return n[0]!==s?(t=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tu,{issueNode:s}),(0,a.jsx)(tl,{issueNode:s}),(0,a.jsx)(tc,{issueNode:s})]}),n[0]=s,n[1]=t):t=n[1],t}try{tm.displayName||(tm.displayName="RelationshipsSection")}catch{}var tp=n(33987),th=n(46996),tf=n(19720);function tg(e,t){let n,a,s,r,l,o,c,d,u,m,p,h=(0,i.c)(45),{draftValue:f,formValue:g,setFormValue:y,onChange:v,resolverResult:x,hasPermission:b,isEqual:w,defaultValue:j}=t,{repository:N}=(0,V.u)(),k=(0,_.useRef)(!0),C=(0,_.useRef)(void 0),S=(0,_.useRef)(e.id);h[0]!==e.id?(n=()=>{S.current!==e.id&&(k.current=!0,C.current=void 0,S.current=e.id)},h[0]=e.id,h[1]=n):n=h[1],h[2]!==e.id||h[3]!==g?(a=[e.id,g],h[2]=e.id,h[3]=g,h[4]=a):a=h[4],(0,_.useEffect)(n,a),N?.nameWithOwner;let I=e.repository&&N?.nameWithOwner===e.repository,{isLoading:T,data:E}=x,L=(null!=f||!e.isStreaming)&&!T;h[5]!==I||h[6]!==L?(s=()=>{I&&!L&&(k.current=!0)},r=[I,L],h[5]=I,h[6]=L,h[7]=s,h[8]=r):(s=h[7],r=h[8]),(0,_.useEffect)(s,r),h[9]!==w||h[10]!==v?(l=(e,t)=>{void 0!==C.current&&w(C.current,e)||(v(e,t),C.current=e)},h[9]=w,h[10]=v,h[11]=l):l=h[11];let R=l;h[12]!==j||h[13]!==I||h[14]!==b||h[15]!==L||h[16]!==R||h[17]!==N||h[18]!==E||h[19]!==y?(o=()=>{I&&L&&(b(N)?(y(E),R(E,!0)):null!=N&&(y(j),R(j,!0)))},c=[I,L,R,N,E,y,b,j],h[12]=j,h[13]=I,h[14]=b,h[15]=L,h[16]=R,h[17]=N,h[18]=E,h[19]=y,h[20]=o,h[21]=c):(o=h[20],c=h[21]),(0,_.useEffect)(o,c),h[22]!==j||h[23]!==g||h[24]!==I||h[25]!==b||h[26]!==w||h[27]!==L||h[28]!==N||h[29]!==E?(d=()=>{if(!k.current||void 0===C.current||!I||!L||!N)return;let e=b(N);e&&g===E?k.current=!1:!e&&w(g,j)&&(k.current=!1)},h[22]=j,h[23]=g,h[24]=I,h[25]=b,h[26]=w,h[27]=L,h[28]=N,h[29]=E,h[30]=d):d=h[30],h[31]!==j||h[32]!==e.id||h[33]!==g||h[34]!==I||h[35]!==b||h[36]!==w||h[37]!==L||h[38]!==N||h[39]!==E?(u=[e.id,I,L,E,N,g,b,j,w],h[31]=j,h[32]=e.id,h[33]=g,h[34]=I,h[35]=b,h[36]=w,h[37]=L,h[38]=N,h[39]=E,h[40]=u):u=h[40],(0,_.useEffect)(d,u),h[41]!==g||h[42]!==R?(p=()=>{k.current||R(g,!1)},m=[g,R],h[41]=g,h[42]=R,h[43]=m,h[44]=p):(m=h[43],p=h[44]),(0,_.useEffect)(p,m)}var ty=n(40104);function tv(e){let{openItem:t,updateItem:n}=(0,N.xx)(),{selectedThreadID:a}=(0,s.Pk)(),i=function(e){let{messages:t}=(0,s.Pk)(),{tag:n,issueNumber:a}=e,i=a&&l.W.draftUpdateIssue?"update-issue":"new-issue";return`${i}:${n}#${t.length}`}(e),r=`edited-${a}-${i}`,[c,d]=(0,ty.Fo)(r,void 0);return(0,_.useCallback)((s,r=!1)=>{let c,u=!1;for(c in s)(0,th.A)(s[c],e[c])||(u=!0,"name"!==c&&"body"!==c&&"defaultValuesById"!==c&&(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:a,repository:e.repository,issueTag:e.tag,userChangedField:c,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[c])}));if(!u)return;let m={...e,...s};!r&&(m.id=i,m.isUserEdited=!0,l.W.copilotPersistEditedDraftIssues&&d(m)),n(m),t(m.id)},[e,n,t,a,i,d])}function tx(e){return e?.viewerIssueCreationPermissions?.assignable}function tb(e){return(0,tp.i)(e)}let t_=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a={defaultValue:null,kind:"LocalArgument",name:"repo"},i=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],s=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l=[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,a],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:l,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:l,storageKey:null}],storageKey:null},r],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();t_.hash="e88ca04244b8cb67aad293081213c7ad";var tw=n(32050),tj=n(30721);function tN(e){return(0,tw.P5)(e)}function tk(e){return!!e}function tC(e){return e?.viewerIssueCreationPermissions?.labelable}function tS(e){return e.name}var tI=n(90921),tT=n(97665);function tE(e,t){var n,a;return n=e?.title,a=t?.title,n?.toLowerCase()===a?.toLowerCase()}function tL(e){return e?.viewerIssueCreationPermissions?.milestoneable}var tR=n(84172);function tA(e){return!1===e.hasReachedItemsLimit}function tD(e){return!1===e.closed}function tP(e,t){return e.set(t.id,t),e}function tO(e){return e.toLowerCase()}function tB(e){return!!e}function tF(e){return e.title}function tM(e){return e.id}function t$(e){return!!e.id}function tV(e){return e?.viewerIssueCreationPermissions?.triageable}function tU(e){return{id:e.id,title:e.title}}var tq=n(69599),tW=n(36202),tH=n(83001);function tK(e,t){return e?.toLowerCase()===t?.toLowerCase()}function tG(e,t){return tK(e?.name,t?.name)}function tz(e){return e?.viewerIssueCreationPermissions?.typeable}function tQ(e){let t,n,r,l,c,d,u,m,p,f,g,y=(0,i.c)(47),{draftIssue:v,issueNode:x,template:b,issueFormRef:w,loadingDraftIssueRepo:j,onCreate:N,onChange:k,onClose:C,onBeforeCreate:S,onFieldChange:T}=e,{name:E,body:L,defaultValuesById:R}=v,A=void 0===L?"":L,{repository:D,clearSessionData:O}=(0,V.u)(),[B,F]=(0,_.useState)(E),[M,$]=(0,_.useState)(A),U=function(){let e,t=(0,i.c)(3),n=(0,eT.b)(),a=(0,s.Pk)();return t[0]!==n||t[1]!==a?(e=async(e,t,i)=>{let s;if(e.parentMessageID&&(s=a.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!s||!s.content)return;(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,eL.W)(a)?.id,customMessage:t});let r={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:i,icon:h.XIcon};await n.sendChatMessage({thread:(0,eL.W)(a),content:s.content,references:[...s.references??[],r],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model,parentMessageId:e.id})},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}(),q=(0,s.Pk)();y[0]!==O||y[1]!==w?(t=()=>{O(),w.current?.clearSessionStorage()},y[0]=O,y[1]=w,y[2]=t):t=y[2];let W=t;y[3]!==W||y[4]!==C?(n=()=>{W(),C?.()},y[3]=W,y[4]=C,y[5]=n):n=y[5];let H=n;if(y[6]!==A||y[7]!==E?(r=()=>{F(E),$(A)},l=[A,E],y[6]=A,y[7]=E,y[8]=r,y[9]=l):(r=y[8],l=y[9]),(0,_.useEffect)(r,l),!function(e){let t,n,a,s,r,l=(0,i.c)(15),{repository:o,assignees:c,setAssignees:d}=(0,V.u)(),u=tv(e),m=e.assignees;l[0]!==u?(t=(e,t)=>u({assignees:e.map(tb)},t),l[0]=u,l[1]=t):t=l[1];let p=o?.owner.login,h=o?.name;l[2]!==e.assignees?(n=e.assignees??[],l[2]=e.assignees,l[3]=n):n=l[3],l[4]!==p||l[5]!==h||l[6]!==n?(a={owner:p,repo:h,assignees:n},l[4]=p,l[5]=h,l[6]=n,l[7]=a):a=l[7];let f=function(e){let t,n,a,s,r,l=(0,i.c)(16),{owner:o,repo:c,assignees:d}=e,u=(0,ea.useRelayEnvironment)();l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tp.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),l[0]=t):t=l[0];let m=t;return l[1]!==u?(n=JSON.stringify(u),l[1]=u,l[2]=n):n=l[2],l[3]!==d||l[4]!==o||l[5]!==c||l[6]!==n?(a=["copilot-immersive-assignees",n,m,o,c,d],l[3]=d,l[4]=o,l[5]=c,l[6]=n,l[7]=a):a=l[7],l[8]!==d||l[9]!==u||l[10]!==o||l[11]!==c?(s=async()=>o&&c&&d?await (0,tf.fH)(u,{owner:o,repo:c,assignees:d,capabilities:m}):[],l[8]=d,l[9]=u,l[10]=o,l[11]=c,l[12]=s):s=l[12],l[13]!==a||l[14]!==s?(r={queryKey:a,queryFn:s},l[13]=a,l[14]=s,l[15]=r):r=l[15],(0,ed.I)(r)}(a);l[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],l[8]=s):s=l[8],l[9]!==e.assignees||l[10]!==c||l[11]!==d||l[12]!==t||l[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:tx,isEqual:th.A,defaultValue:s},l[9]=e.assignees,l[10]=c,l[11]=d,l[12]=t,l[13]=f,l[14]=r):r=l[14],tg(e,r)}(v),!function(e){let t,n,a,s,r,l=(0,i.c)(15),{repository:o,labels:c,setLabels:d}=(0,V.u)(),u=tv(e),m=e.labels;l[0]!==u?(t=(e,t)=>u({labels:e.map(tS)},t),l[0]=u,l[1]=t):t=l[1];let p=o?.owner.login,h=o?.name;l[2]!==e.labels?(n=e.labels??[],l[2]=e.labels,l[3]=n):n=l[3],l[4]!==p||l[5]!==h||l[6]!==n?(a={owner:p,repo:h,labels:n},l[4]=p,l[5]=h,l[6]=n,l[7]=a):a=l[7];let f=function(e){let t,n,a,s,r=(0,i.c)(15),{owner:l,repo:o,labels:c}=e,d=(0,ea.useRelayEnvironment)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==c||r[3]!==l||r[4]!==o||r[5]!==t?(n=["copilot-immersive-labels",t,l,o,c],r[2]=c,r[3]=l,r[4]=o,r[5]=t,r[6]=n):n=r[6],r[7]!==d||r[8]!==c||r[9]!==l||r[10]!==o?(a=async()=>{if(!l||!o||!c)return[];let e=await (0,tj.SD)({environment:d,query:t_,variables:{owner:l,repo:o,labelNames:c.join(","),count:c.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(tk).map(tN)},r[7]=d,r[8]=c,r[9]=l,r[10]=o,r[11]=a):a=r[11],r[12]!==n||r[13]!==a?(s={queryKey:n,queryFn:a},r[12]=n,r[13]=a,r[14]=s):s=r[14],(0,ed.I)(s)}(a);l[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],l[8]=s):s=l[8],l[9]!==e.labels||l[10]!==c||l[11]!==d||l[12]!==t||l[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:tC,isEqual:th.A,defaultValue:s},l[9]=e.labels,l[10]=c,l[11]=d,l[12]=t,l[13]=f,l[14]=r):r=l[14],tg(e,r)}(v),!function(e){let t,n,a,s,r,l=(0,i.c)(17),{repository:o,issueType:c,setIssueType:d}=(0,V.u)(),u=tv(e),m=o?.owner.login,p=o?.name;l[0]!==m||l[1]!==p?(t={owner:m,repo:p},l[0]=m,l[1]=p,l[2]=t):t=l[2];let h=function(e){let t,n,a,s,r=(0,i.c)(14),{owner:l,repo:o}=e,c=(0,ea.useRelayEnvironment)(),d=(0,tT.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tq.G7)("item_picker_issue_type_tsq_migration"),r[0]=t):t=r[0];let u=t;r[1]!==c||r[2]!==l||r[3]!==d||r[4]!==o?(n=u?["copilot-immersive-issue-types",JSON.stringify(d),l,o]:["copilot-immersive-issue-types",JSON.stringify(c),l,o],r[1]=c,r[2]=l,r[3]=d,r[4]=o,r[5]=n):n=r[5];let m=n;r[6]!==c||r[7]!==l||r[8]!==d||r[9]!==o?(a=async()=>l&&o?u?(await (0,tH.R)(d,{owner:l,repo:o,query:"",count:25})).issueTypes:await (0,tW.RX)(c,{owner:l,repo:o,pageSize:25}):[],r[6]=c,r[7]=l,r[8]=d,r[9]=o,r[10]=a):a=r[10];let p=a;return r[11]!==p||r[12]!==m?(s={queryKey:m,queryFn:p},r[11]=p,r[12]=m,r[13]=s):s=r[13],(0,ed.I)(s)}(t);e:{let t;if(h.isLoading||!e.issueType){n=null;break e}l[3]!==e.issueType||l[4]!==h.data?(t=h.data?.find(t=>tK(t.name,e.issueType))||null,l[3]=e.issueType,l[4]=h.data,l[5]=t):t=l[5],n=t}let f=n;l[6]!==u?(a=(e,t)=>u({issueType:e?.name},t),l[6]=u,l[7]=a):a=l[7],l[8]!==f||l[9]!==h.isLoading?(s={isLoading:h.isLoading,data:f},l[8]=f,l[9]=h.isLoading,l[10]=s):s=l[10],l[11]!==e.issueType||l[12]!==c||l[13]!==d||l[14]!==a||l[15]!==s?(r={draftValue:e.issueType,formValue:c,setFormValue:d,onChange:a,resolverResult:s,hasPermission:tz,isEqual:tG,defaultValue:null},l[11]=e.issueType,l[12]=c,l[13]=d,l[14]=a,l[15]=s,l[16]=r):r=l[16],tg(e,r)}(v),!function(e){let t,n,a,s,r=(0,i.c)(15),{repository:l,milestone:o,setMilestone:c}=(0,V.u)(),d=tv(e),u=l?.owner.login,m=l?.name;r[0]!==e.milestone||r[1]!==u||r[2]!==m?(t={owner:u,repo:m,milestone:e.milestone},r[0]=e.milestone,r[1]=u,r[2]=m,r[3]=t):t=r[3];let p=function(e){let t,n,a,s,r=(0,i.c)(15),{owner:l,repo:o,milestone:c}=e,d=(0,tT.jE)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==c||r[3]!==l||r[4]!==o||r[5]!==t?(n=["copilot-immersive-milestones",t,l,o,c],r[2]=c,r[3]=l,r[4]=o,r[5]=t,r[6]=n):n=r[6],r[7]!==c||r[8]!==l||r[9]!==d||r[10]!==o?(a=async()=>l&&o&&c?(await (0,tI.U)(d,{owner:l,repo:o,query:c,count:1})).milestones:[],r[7]=c,r[8]=l,r[9]=d,r[10]=o,r[11]=a):a=r[11],r[12]!==n||r[13]!==a?(s={queryKey:n,queryFn:a},r[12]=n,r[13]=a,r[14]=s):s=r[14],(0,ed.I)(s)}(t),h=p.data?.[0]??null;r[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),r[4]=d,r[5]=n):n=r[5],r[6]!==h||r[7]!==p.isLoading?(a={isLoading:p.isLoading,data:h},r[6]=h,r[7]=p.isLoading,r[8]=a):a=r[8],r[9]!==e.milestone||r[10]!==o||r[11]!==c||r[12]!==n||r[13]!==a?(s={draftValue:e.milestone,formValue:o,setFormValue:c,onChange:n,resolverResult:a,hasPermission:tL,isEqual:tE,defaultValue:null},r[9]=e.milestone,r[10]=o,r[11]=c,r[12]=n,r[13]=a,r[14]=s):s=r[14],tg(e,s)}(v),!function(e){let t,n,a,s,r,l=(0,i.c)(15),{repository:o,projects:c,setProjects:d}=(0,V.u)(),u=tv(e),m=e.projects;l[0]!==u?(t=(e,t)=>u({projects:e.map(tU)},t),l[0]=u,l[1]=t):t=l[1];let p=o?.owner.login,h=o?.name;l[2]!==e.projects?(n=e.projects??[],l[2]=e.projects,l[3]=n):n=l[3],l[4]!==p||l[5]!==h||l[6]!==n?(a={owner:p,repo:h,projects:n},l[4]=p,l[5]=h,l[6]=n,l[7]=a):a=l[7];let f=function(e){let t,n,a,s,r=(0,i.c)(15),{owner:l,repo:o,projects:c}=e,d=(0,ea.useRelayEnvironment)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==l||r[3]!==c||r[4]!==o||r[5]!==t?(n=["copilot-immersive-projects",t,l,o,c],r[2]=l,r[3]=c,r[4]=o,r[5]=t,r[6]=n):n=r[6],r[7]!==d||r[8]!==l||r[9]!==c||r[10]!==o?(a=async()=>{if(!l||!o||!c||!c.length)return[];let e=new Set(c.filter(t$).map(tM)),t=c.map(tF).filter(tB),n=new Set(t.map(tO)),a=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:i,recentRepositoryProjects:s,ownerProjects:r,recentOwnerProjects:u}=await (0,tR.vj)(d,{owner:l,repo:o,query:a}),m=[...[...i,...s,...r,...u].reduce(tP,new Map).values()].filter(tD).filter(tA).filter(t=>!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase())),p=new Set;return m.sort((t,n)=>{let a=e.has(t.id),i=e.has(n.id);return a&&!i?-1:!a&&i?1:0}).filter(e=>{let t=e.title.toLowerCase();return!p.has(t)&&(p.add(t),!0)})},r[7]=d,r[8]=l,r[9]=c,r[10]=o,r[11]=a):a=r[11],r[12]!==n||r[13]!==a?(s={queryKey:n,queryFn:a},r[12]=n,r[13]=a,r[14]=s):s=r[14],(0,ed.I)(s)}(a);l[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],l[8]=s):s=l[8],l[9]!==e.projects||l[10]!==c||l[11]!==d||l[12]!==t||l[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:tV,isEqual:th.A,defaultValue:s},l[9]=e.projects,l[10]=c,l[11]=d,l[12]=t,l[13]=f,l[14]=r):r=l[14],tg(e,r)}(v),null==D){let e;if(void 0===v.repository&&v.isStreaming||j){let e;return y[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),y[10]=e):e=y[10],e}return y[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(P,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:h.IssueDraftIcon}),y[11]=e):e=y[11],e}let K=q.messages.at(-1);if(K&&(0,e2.E)(K,["switch-issue-template","switch-issue-repo"])){let e;return y[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),y[12]=e):e=y[12],e}let G=q.messages;if(y[13]!==R||y[14]!==v.messageId||y[15]!==U||y[16]!==q.isWaitingOnCopilot||y[17]!==q.messages||y[18]!==b){c=Symbol.for("react.early_return_sentinel");e:{let e=G.find(e=>e.id===v.messageId),t=e?.parentMessageIndex!==void 0?q.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=b&&(0,J.GQ)(b.data),i=0===Object.keys(R||{}).length,s=!q.isWaitingOnCopilot,r=e.messageIndex===q.messages.length-1,l="assistant"===e.role,o=(0,e2.E)(t,["automatic-retry"]);if(n&&i)if(s)if(r&&l&&!o){let t;U(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),y[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),y[21]=t):t=y[21],c=t;break e}else{let e;y[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(P,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:h.IssueDraftIcon}),y[22]=e):e=y[22],c=e;break e}else{let e;y[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),y[20]=e):e=y[20],c=e;break e}}}y[13]=R,y[14]=v.messageId,y[15]=U,y[16]=q.isWaitingOnCopilot,y[17]=q.messages,y[18]=b,y[19]=c}else c=y[19];return c!==Symbol.for("react.early_return_sentinel")?c:(y[23]!==k?(d=e=>{F(e),k?.({name:e})},u=e=>{$(e),k?.({body:e})},y[23]=k,y[24]=d,y[25]=u):(d=y[24],u=y[25]),y[26]!==N?(m=e=>{let{issue:t}=e;return N?.(t)},y[26]=N,y[27]=m):m=y[27],y[28]!==R||y[29]!==M||y[30]!==v.messageId||y[31]!==w||y[32]!==S||y[33]!==H||y[34]!==T||y[35]!==D||y[36]!==m||y[37]!==d||y[38]!==u||y[39]!==b||y[40]!==B?(p=(0,a.jsx)(e0.e,{repository:D,title:B,body:M,setTitle:d,setBody:u,clearOnCreate:H,issueFormRef:w,onCreateSuccess:m,onCreateError:e1.l,onCancel:H,onBeforeCreate:S,defaultValuesById:R,selectedTemplate:b,onFieldChange:T,clientMutationId:v.messageId}),y[28]=R,y[29]=M,y[30]=v.messageId,y[31]=w,y[32]=S,y[33]=H,y[34]=T,y[35]=D,y[36]=m,y[37]=d,y[38]=u,y[39]=b,y[40]=B,y[41]=p):p=y[41],y[42]!==x?(f=x&&(0,a.jsx)(tm,{issueNode:x}),y[42]=x,y[43]=f):f=y[43],y[44]!==p||y[45]!==f?(g=(0,a.jsxs)(a.Fragment,{children:[p,f]}),y[44]=p,y[45]=f,y[46]=g):g=y[46],g)}try{tQ.displayName||(tQ.displayName="CreateIssueForm")}catch{}let tY={container:"CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",truncateText:"CreateIssuePreview-module__truncateText--Cyrbf",form:"CreateIssuePreview-module__form--X4Vwp"};var tJ=n(87448);function tX({node:e,onItemSelected:t}){let n=(0,_.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,a.jsxs)(y.W,{children:[(0,a.jsxs)(y.W.Button,{variant:"invisible",className:tY.parentSelectorAnchor,children:[(0,a.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,a.jsx)(y.W.Overlay,{width:"large",children:(0,a.jsx)(tJ.lF,{children:n.map((n,i)=>(0,a.jsxs)(tJ.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,a.jsx)(tJ.lF.LeadingVisual,{children:(0,a.jsx)(z.n,{...n.item})}),(0,a.jsx)("div",{className:tY.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{tX.displayName||(tX.displayName="ParentSelector")}catch{}let tZ=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},c=[n,a,i,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[r,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[o],storageKey:null}],storageKey:null}],d=[n,a,i,s,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[r,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o,n],storageKey:null},n],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"addBlockedByMutationMutation",selections:[{alias:null,args:t,concreteType:"AddBlockedByPayload",kind:"LinkedField",name:"addBlockedBy",plural:!1,selections:[{alias:"blockedIssue",args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"blockingIssue",plural:!1,selections:c,storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"addBlockedByMutationMutation",selections:[{alias:null,args:t,concreteType:"AddBlockedByPayload",kind:"LinkedField",name:"addBlockedBy",plural:!1,selections:[{alias:"blockedIssue",args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"blockingIssue",plural:!1,selections:d,storageKey:null}],storageKey:null}]},params:{id:"85d6aca0fda73df868502edfef193ec6",metadata:{},name:"addBlockedByMutationMutation",operationKind:"mutation",text:null}}}();tZ.hash="41775f78ca715d37a0e9b033efd651fe";var t0=n(69487);function t1({environment:e,input:{blockedIssueId:t,blockingIssueId:n},onCompleted:a,onError:i}){(0,t0.commitMutation)(e,{mutation:tZ,variables:{input:{issueId:t,blockingIssueId:n}},onCompleted:e=>a?.(e.addBlockedBy),onError:e=>i?.(e)})}async function t2(e,t){if("existing-issue"!==t.type)return;let[n,a]=t.repository.split("/");if(n&&a&&t.number)return await el(e,n,a,t.number)}function t3(e,t,n){return null==t?{savedIssue:void 0,errors:[{message:n||"An unknown error occurred while adding an issue relationship",type:"dependency"}]}:{savedIssue:{draftType:e.type,tag:e.tag,parentTag:e.parentTag,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags,repository:{databaseId:t.repository.databaseId||0,name:t.repository.name,owner:{login:t.repository.owner.login}},number:t.number,title:t.title,url:t.url,template:void 0,assignees:[]},errors:[]}}var t4=n(3398),t5=n(33544);let t7={container:"RepositoryPicker-module__container--codNO",label:"RepositoryPicker-module__label--WplGo",ssoBanner:"RepositoryPicker-module__ssoBanner--TbTWl"};function t6(e){let t,n,r,l,o,c,d,u,m=(0,i.c)(21),{draftIssue:p,resolvedDraftIssueRepo:h,loadingDraftIssueRepo:f,topRepos:g}=e,[y,v]=(0,_.useState)(void 0),{repository:x}=(0,V.u)(),w=function(e){let t,n=(0,i.c)(5),a=(0,eT.b)(),r=(0,s.Pk)(),{updateItem:l}=(0,N.xx)();return n[0]!==e||n[1]!==a||n[2]!==r||n[3]!==l?(t=async(t,n)=>{let i=`${n}/${t}`,s=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${i}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${i}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...i&&{repository:i},isUserEdited:!1};l(t),s.push((0,B.PO)(t))}await a.sendChatMessage({thread:(0,eL.W)(r),content:`Use the ${i} repository`,references:[...s,...r.currentReferences],topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},n[0]=e,n[1]=a,n[2]=r,n[3]=l,n[4]=t):t=n[4],t}(p);m[0]!==w?(t=e=>{null!=e&&w(e.name,e.owner.login)},m[0]=w,m[1]=t):t=m[1];let j=t;!function(e,t,n,a){let s,r,l,o,c,d,u,m,p,h,f,g=(0,i.c)(32),{repository:y,setRepository:v}=(0,V.u)(),x=(0,_.useRef)(!0),b=(0,_.useRef)(null),w=(0,_.useRef)(void 0),j=tv(e);g[0]!==e.id?(s=()=>{b.current!==e.id&&(x.current=!0,w.current=void 0,b.current=e.id)},g[0]=e.id,g[1]=s):s=g[1],g[2]!==e.id||g[3]!==y?(r=[e.id,y],g[2]=e.id,g[3]=y,g[4]=r):r=g[4],(0,_.useEffect)(s,r);let N=(null!=e.repository||!e.isStreaming)&&!n;g[5]!==N?(l=()=>{N||(x.current=!0)},o=[N],g[5]=N,g[6]=l,g[7]=o):(l=g[6],o=g[7]),(0,_.useEffect)(l,o),g[8]!==j?(c=(e,t)=>{var n,a;(void 0===w.current||(n=w.current?.nameWithOwner,a=e?.nameWithOwner,n?.toLowerCase()!==a?.toLowerCase()))&&(j({repository:e?.nameWithOwner},t),w.current=e??null)},g[8]=j,g[9]=c):c=g[9];let k=c;g[10]!==N||g[11]!==k||g[12]!==t||g[13]!==v||g[14]!==a?(d=()=>{N&&(null!=t?(v(t),k(t,!0)):a.length>0?(v(a[0]),k(a[0],!0)):(v(void 0),k(void 0,!0)))},u=[N,k,t,v,a],g[10]=N,g[11]=k,g[12]=t,g[13]=v,g[14]=a,g[15]=d,g[16]=u):(d=g[15],u=g[16]),(0,_.useEffect)(d,u),g[17]!==y||g[18]!==N||g[19]!==t||g[20]!==a?(m=()=>{x.current&&void 0!==w.current&&N&&(null!=t&&t===y||null==t&&a.length>0&&y===a[0]?x.current=!1:null==t&&a.length<=0&&void 0===y&&(x.current=!1))},g[17]=y,g[18]=N,g[19]=t,g[20]=a,g[21]=m):m=g[21],g[22]!==e.id||g[23]!==y||g[24]!==N||g[25]!==t||g[26]!==a?(p=[e.id,N,t,a,y],g[22]=e.id,g[23]=y,g[24]=N,g[25]=t,g[26]=a,g[27]=p):p=g[27],(0,_.useEffect)(m,p),g[28]!==y||g[29]!==k?(f=()=>{x.current||k(y,!1)},h=[y,k],g[28]=y,g[29]=k,g[30]=h,g[31]=f):(h=g[30],f=g[31]),(0,_.useEffect)(f,h)}(p,h,f,g),m[2]!==x||m[3]!==f||m[4]!==g?(n=()=>{f||null==x||null==g||g.find(e=>e.id===x.id)||v(x.id)},r=[x,f,g],m[2]=x,m[3]=f,m[4]=g,m[5]=n,m[6]=r):(n=m[5],r=m[6]),(0,_.useEffect)(n,r);let{ssoOrganizations:k}=(0,s.Pk)();m[7]!==k?(l=k?.map(t9)??[],m[7]=k,m[8]=l):l=m[8];let C=l,S=x??g?.[0],I=p.isStreaming||f;return m[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(t4.A,{className:(0,b.$)(t7.label,"sr-only"),required:!0,children:"Repository"}),m[9]=o):o=m[9],m[10]!==I?(c={hasIssuesEnabled:!0,readonly:I},m[10]=I,m[11]=c):c=m[11],m[12]!==C?(d=(0,tq.G7)("global_sso_banner")?void 0:(0,a.jsx)(t5.x,{className:t7.ssoBanner,forceWrap:!0,protectedOrgs:C,maxVisibleOrgNames:0,redirectURI:t8}),m[12]=C,m[13]=d):d=m[13],m[14]!==y||m[15]!==j||m[16]!==S||m[17]!==c||m[18]!==d||m[19]!==g?(u=(0,a.jsxs)("div",{className:t7.container,children:[o,(0,a.jsx)(Z.f0,{initialRepository:S,onSelect:j,options:c,topRepositories:g,enforceAtleastOneSelected:!0,subtitle:d},y)]}),m[14]=y,m[15]=j,m[16]=S,m[17]=c,m[18]=d,m[19]=g,m[20]=u):u=m[20],u}function t8(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function t9(e){return e.login}try{t6.displayName||(t6.displayName="RepositoryPicker")}catch{}let ne=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],r=[n,a,i,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:s,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:r,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:s,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();ne.hash="582a468668cd62a5a95ad0f91f7ea5e5";let nt={kind:"InlineDataFragment",name:"TemplatePickerForm"};nt.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let nn={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};nn.hash="fa6038bb9389af7bff23ba3491dd0507";var na=n(86391);function ni(e,t){return e.filename.localeCompare(t.filename)}function ns(e){return(0,t0.readInlineData)(nt,e)}function nr(e){return(0,t0.readInlineData)(nn,e)}function nl(e){let t,n,s,r,l=(0,i.c)(10),{draftIssue:o}=e,{repository:c}=(0,V.u)(),d=c?.owner.login,u=c?.name;l[0]!==d||l[1]!==u?(t={owner:d,repo:u},l[0]=d,l[1]=u,l[2]=t):t=l[2];let{data:m}=function(e){let t,n,a,s,r=(0,i.c)(13),{owner:l,repo:o}=e,c=(0,ea.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==l||r[3]!==o||r[4]!==t?(n=["copilot-immersive-templates",t,l,o],r[2]=l,r[3]=o,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==l||r[8]!==o?(a=async()=>{if(!l||!o)return[];let e=await (0,t0.fetchQuery)(c,ne,{owner:l,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nr),...(e?.repository?.issueForms||[]).map(ns)].sort(ni)},r[6]=c,r[7]=l,r[8]=o,r[9]=a):a=r[9],r[10]!==n||r[11]!==a?(s={queryKey:n,queryFn:a},r[10]=n,r[11]=a,r[12]=s):s=r[12],(0,ed.I)(s)}(t);if(null==m||0===m.length)return null;l[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("span",{children:"/"}),l[3]=n):n=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(t4.A,{className:(0,b.$)(t7.label,"sr-only"),children:"Template"}),l[4]=s):s=l[4];let p=c?.nameWithOwner,h=c?.isBlankIssuesEnabled;return l[5]!==o||l[6]!==p||l[7]!==h||l[8]!==m?(r=(0,a.jsxs)(a.Fragment,{children:[n,(0,a.jsxs)("div",{className:t7.container,children:[s,(0,a.jsx)(no,{templates:m,draftIssue:o,repositoryNwo:p,isBlankIssuesEnabled:h})]})]}),l[5]=o,l[6]=p,l[7]=h,l[8]=m,l[9]=r):r=l[9],r}function no(e){let t,n,r,l,o,c,d,u,m=(0,i.c)(23),{templates:p,draftIssue:f,isBlankIssuesEnabled:g,repositoryNwo:y}=e,[v,x]=(0,_.useState)("");e:{let e;if(!v){t=p;break e}m[0]!==v||m[1]!==p?(e=p?.filter(e=>e.name?.toLowerCase().includes(v.toLowerCase())),m[0]=v,m[1]=p,m[2]=e):e=m[2],t=e}let b=t,[w,j]=(0,_.useState)(void 0);m[3]!==f.template||m[4]!==p?(n=()=>{if(!f.template)return void j(void 0);let e=f.template.split("/").findLast(Boolean);j(p?.find(t=>t.filename===e||t.name===e))},r=[p,f.template],m[3]=f.template,m[4]=p,m[5]=n,m[6]=r):(n=m[5],r=m[6]),(0,_.useEffect)(n,r);let k=function(){let e,t=(0,i.c)(4),n=(0,eT.b)(),a=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async(e,t,i)=>{let s=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${i?` in the \`${i}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...i&&{repository:i},isUserEdited:!1};r(t),s.push((0,B.PO)(t))}await n.sendChatMessage({thread:(0,eL.W)(a),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...s,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}(),C=(0,_.useRef)(null),S="new-issue"===f.type&&null!=g&&!g;return m[7]!==b?(l=b??[],m[7]=b,m[8]=l):l=m[8],m[9]!==w?(o=w?[w]:[],m[9]=w,m[10]=o):o=m[10],m[11]!==w||m[12]!==S?(c=e=>(0,a.jsxs)(H.Q,{trailingVisual:h.TriangleDownIcon,...e,ref:C,children:[w?(0,a.jsx)("span",{children:w.name}):"Select a template",S&&(0,a.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),m[11]=w,m[12]=S,m[13]=c):c=m[13],m[14]!==f||m[15]!==k||m[16]!==y?(d=async e=>{let[t]=e;j(t),await k(f,t,y)},m[14]=f,m[15]=k,m[16]=y,m[17]=d):d=m[17],m[18]!==l||m[19]!==o||m[20]!==c||m[21]!==d?(u=(0,a.jsx)(na.O,{items:l,initialSelectedItems:o,placeholderText:"Search",selectionVariant:"single",filterItems:x,title:"Select a template",renderAnchor:c,getItemKey:nd,convertToItemProps:nc,onSelectionChange:d,selectPanelRef:C,height:"large",width:"medium"}),m[18]=l,m[19]=o,m[20]=c,m[21]=d,m[22]=u):u=m[22],u}function nc(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function nd(e){return e.filename}try{nl.displayName||(nl.displayName="TemplatePicker")}catch{}try{no.displayName||(no.displayName="TemplatePickerInternal")}catch{}var nu=n(10286);function nm(e,t){return(0,_.useCallback)((n,a,i)=>{let s=n||`${nu.y}-${a}`;if(e.defaultValuesById&&e.defaultValuesById[s]===i)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=i,t(r,!1)},[e,t])}function np(e){let t,n,a,s,r=(0,i.c)(13),{owner:l,repo:o}=e,c=(0,ea.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==l||r[3]!==o||r[4]!==t?(n=["copilot-immersive-current-repo",t,l,o],r[2]=l,r[3]=o,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==l||r[8]!==o?(a=async()=>l&&o?await (0,Z.tZ)(c,l,o):null,r[6]=c,r[7]=l,r[8]=o,r[9]=a):a=r[9],r[10]!==n||r[11]!==a?(s={queryKey:n,queryFn:a},r[10]=n,r[11]=a,r[12]=s):s=r[12],(0,ed.I)(s)}function nh(e){var t;let n,r,o,c,d,u,m,p,f,g,y,v,x,b,w,j,k,D,O,B,F,$,V,U,q,W,H,K,G,z,Q,Y=(0,i.c)(97),{isPreviewOpening:J,issue:X,onClose:ee}=e,{openItem:et}=(0,N.xx)(),en=(0,ei.u0)();Y[0]!==X.tag||Y[1]!==en?(n=en.get(X.tag),Y[0]=X.tag,Y[1]=en,Y[2]=n):n=Y[2];let es=n,[er,el]=(0,_.useState)(J);Y[3]!==er?(r=()=>{if(er){let e=setTimeout(()=>el(!1),A.t);return()=>clearTimeout(e)}},o=[er],Y[3]=er,Y[4]=r,Y[5]=o):(r=Y[4],o=Y[5]),(0,_.useEffect)(r,o);let[eo,ec]=(0,_.useState)(null),em=(0,_.useRef)(null),{selectedThreadID:ep}=(0,s.Pk)(),{isLoading:eh,data:ef}=function(){let e,t,n,a,s=(0,i.c)(9),r=(0,ea.useRelayEnvironment)();return s[0]!==r?(e=JSON.stringify(r),s[0]=r,s[1]=e):e=s[1],s[2]!==e?(t=["copilot-immersive-top-repos",e],s[2]=e,s[3]=t):t=s[3],s[4]!==r?(n=async()=>await (0,Z.St)(r,{first:10,hasIssuesEnabled:!0}),s[4]=r,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(a={queryKey:t,queryFn:n},s[6]=t,s[7]=n,s[8]=a):a=s[8],(0,ed.I)(a)}();Y[6]!==X.repository?(c=X.repository?.split("/")??[],Y[6]=X.repository,Y[7]=c):c=Y[7];let[eg,ey]=c;Y[8]!==eg||Y[9]!==ey?(d={owner:eg,repo:ey},Y[8]=eg,Y[9]=ey,Y[10]=d):d=Y[10];let{isLoading:ev,data:ex}=np(d),[eb,ew]=(0,_.useState)(ex);Y[11]!==ex?(u=()=>{ex&&ew(ex)},m=[ex],Y[11]=ex,Y[12]=u,Y[13]=m):(u=Y[12],m=Y[13]),(0,_.useEffect)(u,m);let ej=null!=eb&&(!eb.hasIssuesEnabled||null!=eb.viewerInteractionLimitReasonHTML&&eb.viewerInteractionLimitReasonHTML?.length>0),eN=e_(),ek=eD(),eC=function(e){let t,n=(0,i.c)(3),a=(0,ea.useRelayEnvironment)();return n[0]!==a||n[1]!==e?(t=async t=>{if(!l.W.draftIssuesWithDependencies)return Promise.resolve([]);let n=new Map;for(let i of e.blockedBy){let e=await t2(a,i.item);e&&(n.has(i.item.tag)||n.set(i.item.tag,new Promise(n=>{t1({environment:a,input:{blockedIssueId:t.id,blockingIssueId:e.id},onCompleted:e=>n(t3(i.item,e?.blockingIssue)),onError:e=>n(t3(i.item,void 0,e?.message||"Unknown error"))})})))}for(let i of e.isBlocking){let e=await t2(a,i.item);e&&(n.has(i.item.tag)||n.set(i.item.tag,new Promise(n=>{t1({environment:a,input:{blockedIssueId:e.id,blockingIssueId:t.id},onCompleted:e=>n(t3(i.item,e?.blockedIssue)),onError:e=>n(t3(i.item,void 0,e?.message||"Unknown error"))})})))}return await Promise.all(n.values())},n[0]=a,n[1]=e,n[2]=t):t=n[2],t}(es);Y[14]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{ec(e)},Y[14]=p):p=Y[14];let eS=p;Y[15]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{ec(null)},Y[15]=f):f=Y[15];let eI=f;Y[16]!==eo?(g=()=>{eo&&em?.current&&em.current.focus()},y=[eo],Y[16]=eo,Y[17]=g,Y[18]=y):(g=Y[17],y=Y[18]),(0,_.useEffect)(g,y),Y[19]!==X.assignees||Y[20]!==X.blockedByTags||Y[21]!==X.isBlockingTags||Y[22]!==X.parentTag||Y[23]!==X.tag||Y[24]!==X.template||Y[25]!==X.type||Y[26]!==ek||Y[27]!==eC?(v=async e=>{let t=await eC(e);await ek([{draftType:X.type,tag:X.tag,parentTag:X.parentTag,blockedByTags:X.blockedByTags,isBlockingTags:X.isBlockingTags,template:X.template,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url,assignees:X.assignees??[],errors:t.flatMap(ny)},...t.map(ng).filter(nf)])},Y[19]=X.assignees,Y[20]=X.blockedByTags,Y[21]=X.isBlockingTags,Y[22]=X.parentTag,Y[23]=X.tag,Y[24]=X.template,Y[25]=X.type,Y[26]=ek,Y[27]=eC,Y[28]=v):v=Y[28];let eT=v,eE=tv(X),eL=nm(X,eE),eR=(0,_.useRef)(null),eA=function(e){let t,n=(0,i.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let a=t;return(0,_.useSyncExternalStore)(nv,a)}(eR),eP=es?.parent!=null,eO=(0,_.useRef)(null),eB=ex?.id??"",eF=X.template||"";Y[29]!==eB||Y[30]!==eF?(x={repoId:eB,filename:eF},Y[29]=eB,Y[30]=eF,Y[31]=x):x=Y[31];let{isLoading:eM,data:e$}=eu(x),eV=ex??void 0;Y[32]!==eV?(b={repository:eV},Y[32]=eV,Y[33]=b):b=Y[33];let eU=b;if(er||eh||eM){let e;return Y[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),Y[34]=e):e=Y[34],e}let eq=`${X.id}@${ep}`;return Y[35]!==eA||Y[36]!==eq?(w=(0,C.S)({storageKeyPrefix:eq,insidePortal:eA}),Y[35]=eA,Y[36]=eq,Y[37]=w):w=Y[37],Y[38]===Symbol.for("react.memo_cache_sentinel")?(j=(0,T.G)("create-issue-preview"),Y[38]=j):j=Y[38],Y[39]!==X?(k=(0,a.jsx)("div",{children:(0,a.jsx)(M,{item:X})}),Y[39]=X,Y[40]=k):k=Y[40],Y[41]!==es||Y[42]!==et||Y[43]!==eP?(D=eP&&(0,a.jsx)("div",{children:(0,a.jsx)(tX,{node:es,onItemSelected:e=>et(e.item.id,!0)})}),Y[41]=es,Y[42]=et,Y[43]=eP,Y[44]=D):D=Y[44],Y[45]!==k||Y[46]!==D?(O=(0,a.jsxs)("div",{className:tY.toolbarLeft,children:[k,D]}),Y[45]=k,Y[46]=D,Y[47]=O):O=Y[47],Y[48]!==es||Y[49]!==ej||Y[50]!==ee||Y[51]!==e$?(B=(0,a.jsx)("div",{className:tY.toolbarActions,children:(0,a.jsx)(eZ,{issueTemplate:e$,issueNode:es,issueFormRef:eO,noRepoAccess:ej,onClose:ee,onError:eS,onClearError:eI})}),Y[48]=es,Y[49]=ej,Y[50]=ee,Y[51]=e$,Y[52]=B):B=Y[52],Y[53]!==O||Y[54]!==B?(F=(0,a.jsxs)("div",{className:tY.toolbar,children:[O,B]}),Y[53]=O,Y[54]=B,Y[55]=F):F=Y[55],Y[56]!==ef?($=ef||[],Y[56]=ef,Y[57]=$):$=Y[57],Y[58]!==X||Y[59]!==ex||Y[60]!==ev||Y[61]!==$?(V=(0,a.jsx)(t6,{draftIssue:X,resolvedDraftIssueRepo:ex,loadingDraftIssueRepo:ev,topRepos:$}),Y[58]=X,Y[59]=ex,Y[60]=ev,Y[61]=$,Y[62]=V):V=Y[62],Y[63]!==X?(U=(0,a.jsx)(nl,{draftIssue:X}),Y[63]=X,Y[64]=U):U=Y[64],Y[65]!==V||Y[66]!==U?(q=(0,a.jsxs)(E.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[V,U]}),Y[65]=V,Y[66]=U,Y[67]=q):q=Y[67],Y[68]!==eo?(W=eo&&l.W.singleIssueCreateWithBulkJob&&(0,a.jsx)(L.l,{ref:em,hideTitle:!0,title:eo.bannerTitle,description:(0,a.jsx)(R.o,{children:eo.message}),variant:eo.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),Y[68]=eo,Y[69]=W):W=Y[69],Y[70]!==ex||Y[71]!==ej?(H=ej&&((t=ex)&&!t.hasIssuesEnabled?(0,a.jsx)(P,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:h.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,a.jsx)(P,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:h.IssueDraftIcon}):void 0),Y[70]=ex,Y[71]=ej,Y[72]=H):H=Y[72],Y[73]!==es||Y[74]!==X||Y[75]!==ex||Y[76]!==ev||Y[77]!==ej||Y[78]!==eE||Y[79]!==ee||Y[80]!==eT||Y[81]!==eL||Y[82]!==e$||Y[83]!==eN?(K=!ej&&(0,a.jsx)(tQ,{draftIssue:X,issueNode:es,template:e$??void 0,issueFormRef:eO,loadingDraftIssueRepo:ev,onCreate:eT,onChange:eE,onClose:ee,onBeforeCreate:e=>eN(ex,e),onFieldChange:eL}),Y[73]=es,Y[74]=X,Y[75]=ex,Y[76]=ev,Y[77]=ej,Y[78]=eE,Y[79]=ee,Y[80]=eT,Y[81]=eL,Y[82]=e$,Y[83]=eN,Y[84]=K):K=Y[84],Y[85]!==q||Y[86]!==W||Y[87]!==H||Y[88]!==K?(G=(0,a.jsxs)("div",{className:tY.form,children:[q,W,H,K]}),Y[85]=q,Y[86]=W,Y[87]=H,Y[88]=K,Y[89]=G):G=Y[89],Y[90]!==F||Y[91]!==G?(z=(0,a.jsxs)("div",{className:tY.container,ref:eR,children:[F,G]}),Y[90]=F,Y[91]=G,Y[92]=z):z=Y[92],Y[93]!==eU||Y[94]!==w||Y[95]!==z?(Q=(0,a.jsx)(S.S,{optionConfig:w,preselectedData:eU,...j,children:z}),Y[93]=eU,Y[94]=w,Y[95]=z,Y[96]=Q):Q=Y[96],Q}function nf(e){return null!=e}function ng(e){return e.savedIssue}function ny(e){return e.errors}function nv(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{nh.displayName||(nh.displayName="CreateIssuePreview")}catch{}var nx=n(54486),nb=n(76158);let n_={container:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",viewerContainer:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",relationshipsContainer:"ExistingIssuePreview-module__relationshipsContainer--CHUGP"};function nw({isPreviewOpening:e,issue:t,onClose:n}){let[i,s]=(0,_.useState)(e),{openItem:r}=(0,N.xx)(),l=(0,ei.u0)().get(t.tag);(0,_.useEffect)(()=>{if(i){let e=setTimeout(()=>s(!1),A.t);return()=>clearTimeout(e)}},[i]);let o=(0,_.useMemo)(()=>(0,a.jsx)(g.K,{icon:h.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),c=(0,tq.G7)("copilot_immersive_issues_readonly_viewer"),d=(0,tq.G7)("copilot_immersive_issues_show_relationships"),u=(0,_.useMemo)(()=>({isReadonly:c,hideTimeline:c,navigate:e1.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,additionalHeaderActions:o,showRepositoryPill:!0}),[n,o,c]),m=(0,_.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!m?(0,a.jsx)(I.Q,{optionConfig:u}):(0,a.jsxs)("div",{className:n_.container,children:[(0,a.jsxs)("div",{className:n_.toolbar,children:[(0,a.jsx)("div",{className:n_.toolbarLeft,children:l.parent&&(0,a.jsx)(tX,{node:l,onItemSelected:e=>r(e.item.id,!0)})}),(0,a.jsx)("div",{className:n_.toolbarActions,children:(0,a.jsx)(eX,{issueNode:l,onSuccess:n})})]}),(0,a.jsxs)("div",{className:n_.viewerContainer,children:[(0,a.jsx)(nb.e,{children:(0,a.jsx)(nx.cI,{itemIdentifier:m,optionConfig:u})}),d&&(0,a.jsx)("div",{className:n_.relationshipsContainer,children:(0,a.jsx)(tm,{issueNode:l})})]})]})}try{nw.displayName||(nw.displayName="ExistingIssuePreview")}catch{}let nj=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:t},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}}}();nj.hash="470cf4272c31ec8565dec1240c55030a";let nN=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:t},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}}}();nN.hash="f03ef95aad392077538992e2c84a9752";var nk=n(61491),nC=n(75908),nS=n(1667),nI=n(5547),nT=n(21052),nE=n(25779),nL=n(99892);async function nR({environment:e,currentIssue:t,draftIssue:n,proposedChanges:a,canUseCopilotAssignment:i,onCompleted:s}){let r=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],l=a.labels?.map(e=>e.name)||[],o=void 0!==a.labels&&!(0,th.A)(r.sort(),l.sort()),c=void 0!==a.milestone&&(a.milestone?.title||null)!==(t.milestone?.title||null),d=void 0!==a.issueType&&a.issueType?.name!==t.issueType?.name,u=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],m=a.projects?.map(e=>e.id)||[],p=void 0!==a.projects&&!(0,th.A)(u.sort(),m.sort()),h=n.name!==t.title,f=void 0!==a.body&&a.body!==(t.body||""),g=[];if(o){let i=new Promise((i,s)=>{(0,nT.N)({environment:e,input:{labelableId:t.id,labels:a.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{i()},onError:e=>{s(e)}})});g.push({operation:"labels",promise:i})}let y=t.assignees?.nodes?.filter(e=>null!=e),v=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:a,environment:i,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,eI.v)(e.login))??[],l=a?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(l,t??[]))return new Promise((t,n)=>{(0,nS.j)({environment:i,input:{issueId:e.id,assignedActors:l,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:y,selectedAssignees:a.assignees,canUseCopilotAssignment:i,environment:e,messageId:n.messageId});if(v&&g.push({operation:"assignees",promise:v}),c){let i=new Promise((i,s)=>{(0,nE.v)({environment:e,input:{issueId:t.id,milestone:a.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{i()},onError:e=>{s(e)}})});g.push({operation:"milestone",promise:i})}if(d){let i=new Promise((i,s)=>{(0,nI._)({environment:e,input:{issueId:t.id,issueTypeId:a.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{i()},onError:e=>{s(e)}})});g.push({operation:"issueType",promise:i})}if(p){let i=new Promise((i,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await nD(t.id,a.projects||[],r,e,n.messageId,a.hasInaccessibleProject),i()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});g.push({operation:"projects",promise:i})}if(h||f){let i=new Promise((i,s)=>{(0,ea.commitMutation)(e,{mutation:nj,variables:{input:{id:t.id,clientMutationId:n.messageId,...h&&{title:n.name},...f&&{body:a.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{i()},onError:e=>{s(e)}})});g.push({operation:"content",promise:i})}let x=[],b=[];if(g.length>0)for(let[e,t]of(await Promise.allSettled(g.map(e=>e.promise))).entries()){let n=g[e]?.operation;n&&("fulfilled"===t.status?x.push(n):b.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let _="assignCopilot";try{await nA({currentIssue:t,selectedAssignees:a.assignees,canUseCopilotAssignment:i,hasOtherUpdateErrors:b.length>0,onCompleted:()=>x.push(_)})}catch(e){b.push({operation:_,error:e instanceof Error?e:Error("Unknown error")})}if(0===x.length&&0===b.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let w=(e=>{let i=e.includes("content")?n.name:t.title,s=e.includes("assignees")&&void 0!==a.assignees?a.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[];return{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:i,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:s}})(x);s&&s({result:{successful:x,failed:b,issue:w}})}async function nA({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:a,onCompleted:i}){if(void 0!==t&&n&&t?.some(e=>(0,eI.v)(e.login)))return(async()=>{if(a)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,nk.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,nC.v0)(n,"Assignment failed");throw Error(e)}i?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function nD(e,t,n,a,i,s){let r=n.filter(e=>null!=e&&null!=e.project),l=t.filter(e=>!r.some(t=>t?.project.id===e.id)),o=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===l.length&&0===o.length)return;let c=[],d=[];for(let t of l){let n=new Promise(n=>{(0,nL.Z)({environment:a,projectId:t.id,issueId:e,clientMutationId:i,onCompleted:()=>{n()},onError:e=>{c.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});d.push(n)}for(let e of o){let t=new Promise(t=>{(0,ea.commitMutation)(a,{mutation:nN,variables:{input:{clientMutationId:i,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{c.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});d.push(t)}if(await Promise.all(d),c.length>0){let e=`Failed to update ${c.length} project(s): ${c.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=c,t.detailedMessage=e,t}}function nP({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:s,onUpdateError:r,onClose:l}){let o=(0,ea.useRelayEnvironment)(),[c,d]=(0,_.useState)(!1),{clearSessionData:u,assignees:m,labels:p,milestone:h,issueType:f,projects:g}=(0,V.u)(),y=(0,_.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?m:void 0,labels:n?.labelable?p:void 0,milestone:n?.milestoneable?h:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?g:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[m,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,p,h,g]),v=(0,_.useCallback)(()=>{u(),i.current?.clearSessionStorage()},[u,i]),x=(0,_.useCallback)(()=>{v(),l?.()},[v,l]),b=e_(),w=(0,_.useCallback)(async a=>{a.preventDefault(),d(!0);try{let[a,c]=t.repository?.split("/")??[];if(!a||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",r?.(e),d(!1);return}let u=await el(o,a,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",r?.(e),d(!1);return}let m=(0,Y.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",r?.(e);return}let p=t.body??"";if(n&&(0,J.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",r?.(t),e[0]?.focus();return}p=i.current.markdown()??""}p=await b(e,p);let h=(0,tq.G7)("issues_copilot_cross_repo_assign"),f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,eI.v)(e.login)),g=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&h&&!f,v=y(),_={body:p,assignees:v.assignees,labels:v.labels,milestone:v.milestone,issueType:v.issueType,projects:v.projects,hasInaccessibleProject:v.hasInaccessibleProject};await nR({environment:o,currentIssue:u,draftIssue:t,proposedChanges:_,canUseCopilotAssignment:g,onCompleted:e=>{e.result.failed.length>0?r?.(e):e.result.successful.length>0&&e.result.issue?(x(),l(),s?.(e.result.issue)):(x(),l())}})}catch{let e=Error("Update failed");e.name="OTHER",r?.(e)}finally{d(!1)}},[x,t,o,y,i,e,l,s,r,n,b]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(H.Q,{variant:"primary","data-testid":"update-issue-button",onClick:w,disabled:c||!t.bodyVersion,children:c?"Updating...":"Update"})})}try{nP.displayName||(nP.displayName="UpdateIssueButton")}catch{}function nO(e){var t,n;let r,l,c,d,u,m,p,f,g,y,v,x,b,w,j,N,k,L,R,D,O,B,F,$=(0,i.c)(72),{isPreviewOpening:V,issue:U,onClose:q}=e,[W,H]=(0,_.useState)(V),[K,G]=(0,_.useState)(null),[z,Q]=(0,_.useState)(U.id);$[0]!==W?(r=()=>{if(W){let e=setTimeout(()=>H(!1),A.t);return()=>clearTimeout(e)}},l=[W],$[0]=W,$[1]=r,$[2]=l):(r=$[1],l=$[2]),(0,_.useEffect)(r,l),z!==U.id&&(Q(U.id),G(null));let{selectedThreadID:Y}=(0,s.Pk)(),J=null!=U.repository||!U.isStreaming,X=(null!=U.bodyVersion||!U.isStreaming)&&!U.bodyVersion;$[3]!==U.repository?(c=U.repository?.split("/")??[],$[3]=U.repository,$[4]=c):c=$[4];let[Z,ee]=c;$[5]!==Z||$[6]!==ee?(d={owner:Z,repo:ee},$[5]=Z,$[6]=ee,$[7]=d):d=$[7];let{isLoading:et,data:en}=np(d),ea=en?.id??"",ei=U.template||"";$[8]!==ea||$[9]!==ei?(u={repoId:ea,filename:ei},$[8]=ea,$[9]=ei,$[10]=u):u=$[10];let{isLoading:es,data:er}=eu(u),el=null!=en&&(!en.hasIssuesEnabled||null!=en.viewerInteractionLimitReasonHTML&&en.viewerInteractionLimitReasonHTML?.length>0),eo=e_(),ec=eD();$[11]!==ec?(m=async e=>{await ec([e])},$[11]=ec,$[12]=m):m=$[12];let ed=m;$[13]!==ec||$[14]!==U.id||$[15]!==U.repository?(p=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",G([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,o.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:U.id,sourceIssueId:n,repository:U.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(nK))}),G(t.failed.map(nH));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(nW).join(", ");t.issue.errors=t.failed.map(nq);let a=t.successful.join(", ");(0,o.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${a}`,draftIssueId:U.id,sourceIssueId:n,repository:U.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(nU)),successfulOperations:JSON.stringify(t.successful)});try{await ec([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",G([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,o.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:U.id,errorType:"OTHER"}),G([t])}},$[13]=ec,$[14]=U.id,$[15]=U.repository,$[16]=p):p=$[16];let em=p,ep=tv(U),eh=nm(U,ep),ef=(0,_.useRef)(null),eg=function(e){let t,n=(0,i.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let a=t;return(0,_.useSyncExternalStore)(nG,a)}(ef),ey=(0,_.useRef)(null);e:{let e;if(!K||0===K.length){f=null;break e}$[17]!==K?(e=K.map(nB),$[17]=K,$[18]=e):e=$[18],f=e}let ev=f,ex=en??void 0;$[19]!==ex?(g={repository:ex},$[19]=ex,$[20]=g):g=$[20];let eb=g;if(W||!J||et||es){let e;return $[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),$[21]=e):e=$[21],e}if(!en){let e;return $[22]!==U.repository?(e=(t=U.repository)?(0,a.jsx)(P,{title:`${t} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:h.IssueDraftIcon}):(0,a.jsx)(P,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:h.IssueDraftIcon}),$[22]=U.repository,$[23]=e):e=$[23],e}if(el){let e;return $[24]!==en?(e=(n=en).hasIssuesEnabled?n.viewerInteractionLimitReasonHTML?(0,a.jsx)(P,{title:"You cannot update issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:h.IssueDraftIcon}):void 0:(0,a.jsx)(P,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:h.IssueDraftIcon}),$[24]=en,$[25]=e):e=$[25],e}if(X){let e;return $[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(P,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:h.IssueDraftIcon}),$[26]=e):e=$[26],e}let ew=`${U.id}@${Y}`;$[27]!==eg||$[28]!==ew?(y=(0,C.S)({storageKeyPrefix:ew,insidePortal:eg}),$[27]=eg,$[28]=ew,$[29]=y):y=$[29],$[30]===Symbol.for("react.memo_cache_sentinel")?(v=(0,T.G)("update-issue-preview"),$[30]=v):v=$[30],$[31]!==U?(x=(0,a.jsx)("div",{className:tY.toolbarLeft,children:(0,a.jsx)(M,{item:U})}),$[31]=U,$[32]=x):x=$[32];let ej=er??void 0;$[33]!==en||$[34]!==q||$[35]!==ed||$[36]!==em||$[37]!==ej||$[38]!==U?(b=(0,a.jsx)("div",{className:tY.toolbarActions,children:(0,a.jsx)(nP,{issueRepo:en,draftIssue:U,template:ej,issueFormRef:ey,onUpdate:ed,onUpdateError:em,onClose:q})}),$[33]=en,$[34]=q,$[35]=ed,$[36]=em,$[37]=ej,$[38]=U,$[39]=b):b=$[39],$[40]!==x||$[41]!==b?(w=(0,a.jsxs)("div",{className:tY.toolbar,children:[x,b]}),$[40]=x,$[41]=b,$[42]=w):w=$[42];let eN=K&&ev;$[43]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(h.RepoIcon,{}),$[43]=j):j=$[43];let ek=`${en.owner.login}/${en.name}`;$[44]!==ek?(N=(0,a.jsx)("b",{children:ek}),$[44]=ek,$[45]=N):N=$[45],$[46]!==U?(k=(0,a.jsx)(nl,{draftIssue:U}),$[46]=U,$[47]=k):k=$[47],$[48]!==N||$[49]!==k?(L=(0,a.jsxs)(E.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[j,N,k]}),$[48]=N,$[49]=k,$[50]=L):L=$[50];let eC=er??void 0;return $[51]!==en||$[52]!==eo?(R=e=>eo(en,e),$[51]=en,$[52]=eo,$[53]=R):R=$[53],$[54]!==ep||$[55]!==q||$[56]!==eh||$[57]!==eC||$[58]!==R||$[59]!==U?(D=(0,a.jsx)(tQ,{draftIssue:U,template:eC,issueFormRef:ey,onChange:ep,onClose:q,onBeforeCreate:R,onFieldChange:eh}),$[54]=ep,$[55]=q,$[56]=eh,$[57]=eC,$[58]=R,$[59]=U,$[60]=D):D=$[60],$[61]!==eN||$[62]!==L||$[63]!==D?(O=(0,a.jsxs)("div",{className:tY.form,children:[eN,L,D]}),$[61]=eN,$[62]=L,$[63]=D,$[64]=O):O=$[64],$[65]!==w||$[66]!==O?(B=(0,a.jsxs)("div",{className:tY.container,ref:ef,children:[w,O]}),$[65]=w,$[66]=O,$[67]=B):B=$[67],$[68]!==eb||$[69]!==y||$[70]!==B?(F=(0,a.jsx)(S.S,{optionConfig:y,preselectedData:eb,...v,children:B}),$[68]=eb,$[69]=y,$[70]=B,$[71]=F):F=$[71],F}function nB(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let a=e.projectErrors??[];if(a.length>0){let e=a.filter(nV),t=a.filter(n$),i=[];e.length>0&&i.push(`Failed to add to ${e.length} project(s): ${e.map(nM).join(", ")}`),t.length>0&&i.push(`Failed to remove ${t.length} project(s): ${t.map(nF).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${i.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,a.jsx)(L.l,{variant:i,title:t,description:n},`error-${e.name}`)}function nF(e){return`"${e.projectTitle}"`}function nM(e){return`"${e.projectTitle}"`}function n$(e){return"remove"===e.operation}function nV(e){return"add"===e.operation}function nU(e){return{operation:e.operation,error:e.error.message}}function nq(e){return{message:e.error.message,type:"update"}}function nW(e){return e.operation}function nH(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function nK(e){return{operation:e.operation,error:e.error.message}}function nG(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{nO.displayName||(nO.displayName="UpdateIssuePreview")}catch{}var nz=n(98755),nQ=n(25641);function nY(e,t,n){let a="head"===n?e.headFile:e.baseFile,i=a.reference,s=(0,eT.b)(),{isLoading:r,isError:l,data:o}=(0,ed.I)({queryKey:["copilot-reference-preview","copilot","references","file",i?(0,nQ.Vb)(i):void 0,n],queryFn:async()=>{if(!i||"file"!==i.type||""!==a.value)return null;let r=await s.service.hydrateReference(i);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...a,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,_.useEffect)(()=>{o?.contents&&a.value!==o.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...a,value:o.contents,isStreaming:!1}})},[o?.contents,e,t,a,n]),{isLoading:r,isError:l,data:o}}function nJ(e){let t,n,a,s,r=(0,i.c)(12);if(r[0]!==e.language||r[1]!==e.value){let i,s,l=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),r[5]=i):i=r[5];let o=i;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=o.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(l),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=a}else t=r[2],n=r[3],a=r[4];return r[8]!==t||r[9]!==n||r[10]!==a?(s={linesOfCode:t,isPreviewable:n,size:a},r[8]=t,r[9]=n,r[10]=a,r[11]=s):s=r[11],s}let nX={container:"DiffPreview-module__container--BN04s",toolbar:"DiffPreview-module__toolbar--RiBuK",toolbarLeft:"DiffPreview-module__toolbarLeft--o4LQ6",toolbarLoC:"DiffPreview-module__toolbarLoC--xR8Qi",toolbarActions:"DiffPreview-module__toolbarActions--EAoyT"};var nZ=n(83510),n0=n(34522);let n1={container:"CodeMirrorDiff-module__container--RCtmx",newFile:"CodeMirrorDiff-module__newFile--vX9DQ",deletedFile:"CodeMirrorDiff-module__deletedFile--_w4wx"};var n2=n(53839),n3=n(63133),n4=n(98325),n5=n(71381),n7=n(74713),n6=n(11636),n8=n(18351),n9=n(24774),ae=n(41185);function at(e){return e.left&&e.right?"split"===e.view?(0,a.jsx)(an,{...e}):(0,a.jsx)(aa,{...e}):(0,a.jsx)(ai,{...e})}function an(e){let t=(0,_.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:n,parentRef:a,right:i,rightLabelledBy:s,spacing:r}){let l=(0,_.useRef)(null),o=(0,_.useMemo)(()=>new n2.xx,[]),c=(0,_.useMemo)(()=>new n2.xx,[]),d=(0,_.useMemo)(()=>new n2.xx,[]),[u,m]=(0,_.useMemo)(()=>{let e=[...n4.o,...(0,n5.u)(r),(0,n7.h)(),c.of([]),o.of([]),d.of([(0,n6.O)()]),(0,ae.T)()],t=[(0,n8.I)(n),n9.Lz.contentAttributes.of({"aria-labelledby":n})],a=[(0,n8.I)(s),n9.Lz.contentAttributes.of({"aria-labelledby":s})];return[e.concat(t),e.concat(a)]},[r,c,o,d,n,s]);(0,_.useEffect)(()=>{let n=a.current;if(n)return l.current=new nZ.SV({a:{doc:t,extensions:u},b:{doc:i,extensions:m},parent:n,gutter:!1}),(0,n3.r)({autoCompleteCompartment:o,fileName:e,languageCompartment:c,managedExtensions:[],themeCompartment:d,view:l.current?.a,viewB:l.current?.b}),()=>l.current?.destroy()},[])}({...e,parentRef:t}),(0,a.jsx)("div",{ref:t,className:n1.container})}function aa(e){let t=(0,_.useMemo)(()=>[(0,nZ.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,a.jsx)(n0.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:n1.container,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:e1.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}function ai(e){let t=""===e.left?n1.newFile:n1.deletedFile,n=e.right||e.left;return(0,a.jsx)(n0.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:t,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:n,onChange:e1.l,placeholder:"Loading...",hideHelp:!0})}try{at.displayName||(at.displayName="CodeMirrorDiff")}catch{}try{an.displayName||(an.displayName="CodeMirrorDiffSplit")}catch{}try{aa.displayName||(aa.displayName="CodeMirrorDiffUnified")}catch{}try{ai.displayName||(ai.displayName="CodeMirrorDiffNewOrDeletedFile")}catch{}var as=n(25506);function ar(e){let t,n,s,r,l,o=(0,i.c)(24),{left:c,right:d,view:u}=e,m=(0,_.useId)(),p=(0,_.useId)(),h=(0,_.useId)(),f=(0,as.a)(c);return o[0]!==c.name||o[1]!==m?(t=(0,a.jsxs)("span",{id:m,className:"sr-only",children:[c.name," original file contents"]}),o[0]=c.name,o[1]=m,o[2]=t):t=o[2],o[3]!==d.name||o[4]!==p?(n=(0,a.jsxs)("span",{id:p,className:"sr-only",children:[d.name," modified file contents"]}),o[3]=d.name,o[4]=p,o[5]=n):n=o[5],o[6]!==c.name||o[7]!==d.name||o[8]!==h?(s=(0,a.jsxs)("span",{id:h,className:"sr-only",children:[c.name," and ",d.name," unified diff view"]}),o[6]=c.name,o[7]=d.name,o[8]=h,o[9]=s):s=o[9],o[10]!==f||o[11]!==c.name||o[12]!==c.value||o[13]!==m||o[14]!==d.value||o[15]!==p||o[16]!==h||o[17]!==u?(r=(0,a.jsx)(at,{fileName:c.name,left:c.value,leftLabelledBy:m,right:d.value,rightLabelledBy:p,spacing:f,unifiedLabelledBy:h,view:u}),o[10]=f,o[11]=c.name,o[12]=c.value,o[13]=m,o[14]=d.value,o[15]=p,o[16]=h,o[17]=u,o[18]=r):r=o[18],o[19]!==t||o[20]!==n||o[21]!==s||o[22]!==r?(l=(0,a.jsxs)("div",{children:[t,n,s,r]}),o[19]=t,o[20]=n,o[21]=s,o[22]=r,o[23]=l):l=o[23],l}try{ar.displayName||(ar.displayName="DiffView")}catch{}function al(e){let t,n,s,r,l,o,c,d=(0,i.c)(15),{isUnifiedDiff:u,setIsUnifiedDiff:m}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(y.W.Anchor,{children:(0,a.jsx)(g.K,{icon:h.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(v.l.GroupHeading,{children:"Layout"}),d[1]=n):n=d[1],d[2]!==m?(s=()=>m(!0),d[2]=m,d[3]=s):s=d[3],d[4]!==u||d[5]!==s?(r=(0,a.jsx)(v.l.Item,{selected:u,onSelect:s,children:"Unified"}),d[4]=u,d[5]=s,d[6]=r):r=d[6];let p=!u;return d[7]!==m?(l=()=>m(!1),d[7]=m,d[8]=l):l=d[8],d[9]!==p||d[10]!==l?(o=(0,a.jsx)(v.l.Item,{selected:p,onSelect:l,children:"Split"}),d[9]=p,d[10]=l,d[11]=o):o=d[11],d[12]!==r||d[13]!==o?(c=(0,a.jsxs)(y.W,{children:[t,(0,a.jsx)(y.W.Overlay,{children:(0,a.jsx)(v.l,{children:(0,a.jsxs)(v.l.Group,{selectionVariant:"single",children:[n,r,o]})})})]}),d[12]=r,d[13]=o,d[14]=c):c=d[14],c}try{al.displayName||(al.displayName="DiffViewSettings")}catch{}let ao=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function ac(e){let t,n,s,r,l,c,d,u,m,p=(0,i.c)(29),{fileDiff:f}=e,{updateItem:y}=(0,N.xx)(),v=f.baseFile,x=f.headFile,[b,w]=(0,_.useState)(!0),j=v.value&&x.value,k=!v.value&&x.value,C=v.value&&!x.value,{linesOfCode:S,size:I}=nJ(k||j?x:v),T=`${k?"Added: ":C?"Deleted: ":""} ${S} `;nY(f,y,"base"),nY(f,y,"head");let E=1===S?"line":"lines";p[0]!==T||p[1]!==I||p[2]!==E?(t=(0,a.jsx)("div",{className:nX.toolbarLeft,children:(0,a.jsxs)("p",{className:nX.toolbarLoC,children:[T," ",E," \xb7 ",I]})}),p[0]=T,p[1]=I,p[2]=E,p[3]=t):t=p[3],p[4]!==v.reference?(n=v.reference&&"url"in v.reference&&(0,a.jsx)(g.K,{as:"a","aria-label":"Go to the file",icon:h.LinkExternalIcon,variant:"invisible",href:v.reference.url}),p[4]=v.reference,p[5]=n):n=p[5],p[6]!==x.value?(s=(0,a.jsx)(nz.T,{textToCopy:x.value,ariaLabel:"Copy code",onCopy:ad}),p[6]=x.value,p[7]=s):s=p[7],p[8]!==x.name||p[9]!==x.value?(r=(0,a.jsx)(g.K,{"aria-label":"Download code",icon:h.DownloadIcon,variant:"invisible",onClick:()=>{let e=x.name;ao(new File([x.value],e)),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),p[8]=x.name,p[9]=x.value,p[10]=r):r=p[10],p[11]!==j||p[12]!==b?(l=j&&(0,a.jsx)(al,{setIsUnifiedDiff:w,isUnifiedDiff:b}),p[11]=j,p[12]=b,p[13]=l):l=p[13],p[14]!==n||p[15]!==s||p[16]!==r||p[17]!==l?(c=(0,a.jsxs)("div",{className:nX.toolbarActions,children:[n,s,r,l]}),p[14]=n,p[15]=s,p[16]=r,p[17]=l,p[18]=c):c=p[18],p[19]!==t||p[20]!==c?(d=(0,a.jsxs)("div",{className:nX.toolbar,children:[t,c]}),p[19]=t,p[20]=c,p[21]=d):d=p[21];let L=b?"unified":"split";return p[22]!==v||p[23]!==x||p[24]!==L?(u=(0,a.jsx)(ar,{left:v,right:x,view:L}),p[22]=v,p[23]=x,p[24]=L,p[25]=u):u=p[25],p[26]!==u||p[27]!==d?(m=(0,a.jsxs)("div",{className:nX.container,children:[d,u]}),p[26]=u,p[27]=d,p[28]=m):m=p[28],m}function ad(){return(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{ac.displayName||(ac.displayName="DiffPreview")}catch{}var au=n(72439),am=n(59121),ap=n(23125),ah=n(41649);let af={container:"FilePreview-module__container--P2h3J",previewContainer:"FilePreview-module__previewContainer--KRQup",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--lxGn_",toolbar:"FilePreview-module__toolbar--ZZWN1",toolbarLeft:"FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"FilePreview-module__toolbarActions--h04aW",content:"FilePreview-module__content--HoIot",footer:"FilePreview-module__footer--o2xcM"};var ag=n(74807),ay=n(79634);let av={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function ax(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var ab=n(71315);let a_={container:"SandboxView-module__container--PAb4m",iframe:"SandboxView-module__iframe--r6S4N"},aw={error:"ErrorMessage-module__error--xol56",errorIcon:"ErrorMessage-module__errorIcon--ODD8l",errorHeader:"ErrorMessage-module__errorHeader--hmJF7"};function aj(e){let t,n=(0,i.c)(4),{error:s}=e;if(n[0]!==s){let e,i,r=s?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{className:aw.errorIcon,children:(0,a.jsx)(h.StopIcon,{size:24})}),i=(0,a.jsx)("h2",{className:aw.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=i):(e=n[2],i=n[3]),t=(0,a.jsxs)("div",{className:aw.error,children:[e,i,r.length>0?(0,a.jsx)("p",{children:r.map(aN)}):(0,a.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=s,n[1]=t}else t=n[1];return t}function aN(e){return(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)("br",{})]},`error-line-${e}}`)}try{aj.displayName||(aj.displayName="ErrorMessage")}catch{}function ak(e){let t,n,s,r,l=(0,i.c)(14),{content:c,inlineScripts:d,inlineStyles:u,headScripts:m,bodyScripts:p,styles:h,viewscreenUrl:f}=e,g=(0,tq.G7)("viewscreen_sandbox");l[0]!==f?(n=new URL("view/sandbox?url=client://sandbox",f).toString(),t=new URL(n,ab.fV.origin),l[0]=f,l[1]=t,l[2]=n):(t=l[1],n=l[2]);let y=t.origin,v=(0,_.useRef)(null),x=(0,_.useRef)(null);l[3]!==p||l[4]!==c||l[5]!==m||l[6]!==d||l[7]!==u||l[8]!==h?(s={content:c,headScripts:m,bodyScripts:p,inlineScripts:d,inlineStyles:u,styles:h},l[3]=p,l[4]=c,l[5]=m,l[6]=d,l[7]=u,l[8]=h,l[9]=s):s=l[9];let{renderState:b,errorMessage:w}=function(e,t,n,a){let s,r,l,o,c,d,u=(0,i.c)(16),[m,p]=(0,_.useState)(av.LOADING),[h,f]=(0,_.useState)();u[0]!==t||u[1]!==e||u[2]!==a?(s=n=>(function(e,t,n,a,i,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let l=r.body,o=n.current?.contentWindow;switch(l){case"hello":ax(o,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),ax(o,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(av.ERROR),r.payload?.error&&i(r.payload.error);break;case"loading":s(av.LOADING);break;case"loaded":if(!n.current||!a.current)return;s(av.LOADED);break;case"ready":if(!n.current||!a.current)return;s(av.READY)}})(n,0,e,t,f,p),u[0]=t,u[1]=e,u[2]=a,u[3]=s):s=u[3];let g=s;return u[4]!==g?(r=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),l=[g],u[4]=g,u[5]=r,u[6]=l):(r=u[5],l=u[6]),(0,_.useEffect)(r,l),u[7]!==t||u[8]!==e||u[9]!==n||u[10]!==m?(o=()=>{m===av.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};ax(e.contentWindow,a)}(e.current,t.current,n)},c=[t,e,n,m],u[7]=t,u[8]=e,u[9]=n,u[10]=m,u[11]=o,u[12]=c):(o=u[11],c=u[12]),(0,_.useEffect)(o,c),u[13]!==h||u[14]!==m?(d={renderState:m,errorMessage:h},u[13]=h,u[14]=m,u[15]=d):d=u[15],d}(v,x,s,y);if(!g)return null;for(let e of((0,o.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:g}),Array.from(new Set([...m||[],...p||[],...h||[]].map(e=>{try{return new URL(e,y).origin}catch{return null}}).filter(Boolean)))))(0,o.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return l[10]!==w||l[11]!==b||l[12]!==n?(r=(0,a.jsx)("div",{ref:x,className:a_.container,children:b===av.ERROR?(0,a.jsx)(aj,{error:w}):(0,a.jsx)("iframe",{ref:v,className:a_.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),l[10]=w,l[11]=b,l[12]=n,l[13]=r):r=l[13],r}try{ak.displayName||(ak.displayName="SandboxView")}catch{}let aC={loadingContainer:"HtmlPreview-module__loadingContainer--t3YC7",loadingHead:"HtmlPreview-module__loadingHead--XAabR",loadingText:"HtmlPreview-module__loadingText--WYn1B"};function aS(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let i=n.get(a)??[],s=i[i.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function aI(e){let t,n,s=(0,i.c)(15),{file:r}=e,{previewUrl:l}=(0,ay.X)(),{items:o,versionedItems:c}=(0,N.xx)(),{scripts:d,styles:u,files:m}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>aS(e,t,n)),i=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>aS(e,t,n)),s=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...s,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:i.map(e=>e?.value??"").join(`
`),files:a.concat(i)}}(r.value,o,c),[p,h]=(0,_.useState)(!1),f=(r.isStreaming||m.some(aT))&&!p;s[0]!==f||s[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},s[0]=f,s[1]=h,s[2]=t):t=s[2],(0,_.useEffect)(t),s[3]!==r.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],a=[];for(let i of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(i)?n.push(i):a.push(i);return{headScripts:n,bodyScripts:a,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(r.value),s[3]=r.value,s[4]=n):n=s[4];let{headScripts:g,bodyScripts:y,styles:v}=n;if(f){let e;return s[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:aC.loadingContainer,children:[(0,a.jsx)("div",{className:aC.loadingHead,children:(0,a.jsx)(ag.N,{animationType:"thinking",loopAnimation:!0})}),(0,a.jsx)("p",{className:aC.loadingText,children:"Preparing your preview\u2026"})]}),s[5]=e):e=s[5],e}{let e;return s[6]!==y||s[7]!==v||s[8]!==r.id||s[9]!==r.value||s[10]!==g||s[11]!==l||s[12]!==d||s[13]!==u?(e=(0,a.jsx)(ak,{inlineScripts:d,inlineStyles:u,headScripts:g,bodyScripts:y,styles:v,content:r.value,viewscreenUrl:l},r.id),s[6]=y,s[7]=v,s[8]=r.id,s[9]=r.value,s[10]=g,s[11]=l,s[12]=d,s[13]=u,s[14]=e):e=s[14],e}}function aT(e){return!e||e.isStreaming}try{aI.displayName||(aI.displayName="HtmlPreview")}catch{}var aE=n(70840);function aL({isPreviewOpening:e,file:t,onClose:n}){var r;let{updateItem:l,items:c,versionedItems:d}=(0,N.xx)(),u=(0,s.Pk)(),m=t.isStreaming?u.messages[u.messages.length-1]:u.messages.find(e=>e.id===t.messageId),{linesOfCode:p,isPreviewable:f,size:y}=nJ(t);!function(e,t){let n,a,s,r,l,o,c,d=(0,i.c)(25),{reference:u}=e,m=(0,eT.b)(),p=u?.type;d[0]!==u?(n=u?(0,nQ.Vb)(u):void 0,d[0]=u,d[1]=n):n=d[1],d[2]!==p||d[3]!==n?(a=["copilot-reference-preview","copilot","references",p,n],d[2]=p,d[3]=n,d[4]=a):a=d[4],d[5]!==e||d[6]!==m||d[7]!==u||d[8]!==t?(s=async()=>{if(!u||"file"!==u.type||e.value)return null;let n=await m.service.hydrateReference(u);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=m,d[7]=u,d[8]=t,d[9]=s):s=d[9],d[10]!==a||d[11]!==s?(r={queryKey:a,queryFn:s,staleTime:1/0},d[10]=a,d[11]=s,d[12]=r):r=d[12];let{isLoading:h,isError:f,data:g}=(0,ed.I)(r);d[13]!==g||d[14]!==e||d[15]!==t?(l=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},d[13]=g,d[14]=e,d[15]=t,d[16]=l):l=d[16];let y=g?.contents;d[17]!==e||d[18]!==y||d[19]!==t?(o=[y,e,t],d[17]=e,d[18]=y,d[19]=t,d[20]=o):o=d[20],(0,_.useEffect)(l,o),d[21]!==g||d[22]!==f||d[23]!==h?(c={isLoading:h,isError:f,data:g},d[21]=g,d[22]=f,d[23]=h,d[24]=c):c=d[24]}(t,l);let[v,x]=(0,_.useState)("code"),[b,w]=(0,_.useState)(!0),[j,k]=(0,_.useState)(void 0),C=(0,_.useCallback)(e=>{k(e)},[]),S=(0,B.SX)(t,c,d),I=!!S;(0,_.useEffect)(()=>{(m?.error?.type==="publicCode"||m?.error?.type==="filtered")&&n()},[m?.error,n]);let T=[["code","Code"]],E="code";f&&(T.unshift(["preview","Preview"]),E="preview"===v?"preview":E),I&&(T.push(["diff","Diff"]),E="diff"===v?"diff":E);let L="object"==typeof(r=t.reference)&&null!==r&&"repoOwner"in r&&"repoName"in r&&"string"==typeof r.repoOwner&&"string"==typeof r.repoName?`${t.reference.repoOwner}/${t.reference.repoName}/${t.name}`:t.name;return(0,a.jsxs)("div",{className:af.container,children:[(0,a.jsxs)("div",{className:af.toolbar,children:[(0,a.jsxs)("div",{className:af.toolbarLeft,children:[(f||I)&&(0,a.jsx)(am.I,{"aria-label":"File view",onChange:e=>{let t=T[e]?.[0]||"code";x(t),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:T.map(([e,t])=>(0,a.jsx)(am.I.Button,{selected:v===e,children:t},e))}),(0,a.jsx)(M,{item:t,onVersionSelect:C}),(0,a.jsxs)("p",{className:af.toolbarLoC,children:[p," ",1===p?"line":"lines"," \xb7 ",y]})]}),(0,a.jsxs)("div",{className:af.toolbarActions,children:[t.reference&&"url"in t.reference&&(0,a.jsx)(g.K,{as:"a","aria-label":"Go to the file",icon:h.LinkExternalIcon,variant:"invisible",href:t?.reference?.url}),(0,a.jsx)(nz.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,a.jsx)(g.K,{"aria-label":"Download code",icon:h.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),a=t.name.substring(e);return void 0!==j?`${n}_${j}${a}`:t.name}return void 0!==j?`${t.name}_${j}`:t.name})();ao(new File([t.value],e)),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),"diff"===E&&(0,a.jsx)(al,{isUnifiedDiff:b,setIsUnifiedDiff:w})]})]}),(0,a.jsx)("div",{className:af.content,children:"preview"===E?(0,a.jsx)(aD,{file:t}):"diff"===E?(0,a.jsx)(ar,{left:S,right:t,view:b?"unified":"split"}):(0,a.jsx)(aA,{file:t,isPreviewOpening:e})}),(0,a.jsx)("footer",{className:af.footer,children:(0,a.jsx)("span",{"aria-live":"polite",children:L})})]})}let aR=(0,ap.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function aA({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:i,versionedItems:r}=(0,N.xx)(),o=(0,eT.b)(),c=(0,_.useRef)(!1),d=function(e,t){let n=e.get((0,B.oy)(t.id))??[];return n[n.length-1]===t.id}(r,e),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&d,p=(0,_.useId)(),h=(0,as.a)(e),[f,g]=(0,_.useState)(),y=f?.id===e.id?f.value:e.value,[v,x]=(0,_.useState)(!0),{messages:b,currentReferences:w}=(0,s.Pk)(),j=(0,_.useRef)(""),k=(0,_.useRef)(null),[C,S]=(0,_.useState)(void 0);(0,_.useEffect)(()=>{w&&(w.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||S(null))},[w,e.name]);let I=(0,_.useMemo)(()=>{if(!l.W.selectionAttachments)return;let t=au.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:a,fromLine:i,toLine:s})=>{if(!a||""===a.trim()||!o)return;let r=n.state.doc.line(i),l=n.state.doc.line(s),c=r.from,d=l.to,u=n.state.doc.sliceString(c,d),m=`${e.id}:${c}-${d}:${e.value.length}`;if(j.current===m||new Blob([u]).size>t)return;let p={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:i,end:s}};k.current?o.replaceReference(k.current,p):o.addReference(p,"immersive-selection"),k.current=p,S({from:c,to:d}),j.current=m},onClear:()=>{j.current&&(o&&k.current&&o.removeReference(k.current),j.current="",k.current=null,S(null))}}},[e.id,e.name,e.value,e.language,o]);(0,_.useEffect)(()=>{o&&k.current&&o.removeReference(k.current),k.current=null,j.current="",S(null)},[e.id,o]),(0,_.useEffect)(()=>()=>{o&&k.current&&o.removeReference(k.current),k.current=null,j.current=""},[o]),(0,_.useEffect)(()=>{x(!1)},[]),(0,_.useEffect)(()=>{t&&(c.current=!0)},[t]);let T=(0,ah.K)((0,_.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),aR(e,t,i);else{let a={...e,messageId:eE.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};i(a),n(a.id),g({value:t,id:a.id})}},[e,m,b.length,n,i]));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{id:p,className:"sr-only",children:[e.name," file contents"]}),(0,a.jsx)(n0.default,{ariaLabelledBy:p,containerClassName:af.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!m,spacing:h,value:v?"":y,onChange:T,focusNextRenderRef:c,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:I,selectionAttachmentRange:C}),u&&!d&&(0,a.jsx)("div",{className:af.footer,children:"Switch to the latest version to edit this file."})]})}function aD({file:e}){return"markdown"===e.language?(0,a.jsx)("div",{className:af.previewContainer,children:(0,a.jsx)(aE.G,{content:e})}):"html"===e.language?(0,a.jsx)("div",{className:af.previewContainer,children:(0,a.jsx)(aI,{file:e})}):null}try{aL.displayName||(aL.displayName="FilePreview")}catch{}try{aA.displayName||(aA.displayName="CodeMirrorView")}catch{}try{aD.displayName||(aD.displayName="PreviewComponent")}catch{}let aP={container:"ImagePreview-module__container--lxQZb",imageElement:"ImagePreview-module__imageElement--WTRgY"};function aO(e){let t,n=(0,i.c)(3),{image:s}=e;return n[0]!==s.altText||n[1]!==s.url?(t=(0,a.jsx)("div",{className:aP.container,children:(0,a.jsx)("img",{className:aP.imageElement,src:s.url,alt:s.altText})}),n[0]=s.altText,n[1]=s.url,n[2]=t):t=n[2],t}try{aO.displayName||(aO.displayName="ImagePreview")}catch{}let aB={container:"IssuePreview-module__container--O4xBI"},aF=(0,_.memo)(function(e){let t,n,s,r,l,o,c=(0,i.c)(17),{isPreviewOpening:d,issue:u,onClose:m}=e,[p,f]=(0,_.useState)(d);c[0]!==p?(t=()=>{if(p){let e=setTimeout(()=>f(!1),A.t);return()=>clearTimeout(e)}},n=[p],c[0]=p,c[1]=t,c[2]=n):(t=c[1],n=c[2]),(0,_.useEffect)(t,n),c[3]!==u.href?(s=(0,a.jsx)(g.K,{icon:h.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(u.href,"_blank")}}),c[3]=u.href,c[4]=s):s=c[4];let y=s;c[5]!==m||c[6]!==y?(r={navigate:e1.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:m,additionalHeaderActions:y,showRepositoryPill:!0},c[5]=m,c[6]=y,c[7]=r):r=c[7];let v=r;c[8]!==u.number||c[9]!==u.owner||c[10]!==u.repo?(l={owner:u.owner,repo:u.repo,number:u.number,type:"Issue"},c[8]=u.number,c[9]=u.owner,c[10]=u.repo,c[11]=l):l=c[11];let x=l;if(p){let e;return c[12]!==v?(e=(0,a.jsx)(I.Q,{optionConfig:v}),c[12]=v,c[13]=e):e=c[13],e}return c[14]!==x||c[15]!==v?(o=(0,a.jsx)("div",{className:aB.container,children:(0,a.jsx)(nb.e,{children:(0,a.jsx)(nx.cI,{itemIdentifier:x,optionConfig:v})})}),c[14]=x,c[15]=v,c[16]=o):o=c[16],o});try{aF.displayName||(aF.displayName="IssuePreview")}catch{}let aM={container:"JobResultPreview-module__container--ITPQp",spinner:"JobResultPreview-module__spinner--NGGeF",error:"JobResultPreview-module__error--UiqJQ",errorIcon:"JobResultPreview-module__errorIcon--Gr5_m",errorHeader:"JobResultPreview-module__errorHeader--u1d_F"};function a$(e){e.stopPropagation()}function aV(e){let t,n,s,r,l=(0,i.c)(7),{jobResult:o}=e,c=_.useRef(null),[d,u]=(0,_.useState)(null),[m,p]=(0,_.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(p("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},l[0]=t):t=l[0];let f=t;return l[1]!==o?(n=()=>{if(c.current){let e=c.current;return e.addEventListener("turbo:before-fetch-request",a$),e.addEventListener("turbo:before-fetch-response",f),u(function(e){let t=[e.repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin);return n.searchParams.set("partial","true"),n.toString()}(o)),()=>{e.removeEventListener("turbo:before-fetch-request",a$),e.removeEventListener("turbo:before-fetch-response",f)}}},s=[f,o],l[1]=o,l[2]=n,l[3]=s):(n=l[2],s=l[3]),(0,_.useEffect)(n,s),l[4]!==m||l[5]!==d?(r=(0,a.jsx)("div",{className:aM.container,children:m?(0,a.jsxs)("div",{className:aM.error,children:[(0,a.jsx)("span",{className:aM.errorIcon,children:(0,a.jsx)(h.StopIcon,{size:24})}),(0,a.jsx)("h2",{className:aM.errorHeader,children:"Failed to load job results"})]}):(0,a.jsx)("turbo-frame",{src:d,ref:c,id:"workflow_run_content",target:"_top",children:(0,a.jsx)("div",{className:aM.spinner,children:(0,a.jsx)(W.A,{srText:"Loading Markdown preview\u2026"})})})}),l[4]=m,l[5]=d,l[6]=r):r=l[6],r}try{aV.displayName||(aV.displayName="JobResultPreview")}catch{}var aU=n(97189);let aq={container:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",content:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot"};var aW=n(73783);let aH={footer:"SpecPreviewFooter-module__footer--M1fJw",footerText:"SpecPreviewFooter-module__footerText--NBYrK",button:"SpecPreviewFooter-module__button--jMuoa",buttonGroup:"SpecPreviewFooter-module__buttonGroup--ZKWsL",divider:"SpecPreviewFooter-module__divider--U_nTw",menuButton:"SpecPreviewFooter-module__menuButton--r_s5t"};function aK(e){let t,n,r,l,c,d,u,m,p=(0,i.c)(18),{spec:f}=e,[x,b]=(0,_.useState)(!1),{createBreakdown:w}=function(e){let t,n,a=(0,i.c)(6),r=(0,eT.b)(),l=(0,s.Pk)();a[0]!==r||a[1]!==e||a[2]!==l?(t=async t=>{let n=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${t.toUpperCase()}`,mode:"immersive",threadId:(0,eL.W)(l)?.id,messageId:e.messageId});let a={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${n}' into ${t}s..."}`},i="task"===t?`
Break down the ${e.tag} spec into tasks.
`:`
Break down the ${e.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${e.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await r.sendChatMessage({thread:(0,eL.W)(l),content:i,references:[a],topic:l.currentTopic,context:l.context,customInstructions:l.customInstructions,model:l.model,intent:eE.wh.planningAgent})},a[0]=r,a[1]=e,a[2]=l,a[3]=t):t=a[3];let c=t;return a[4]!==c?(n={createBreakdown:c},a[4]=c,a[5]=n):n=a[5],n}(f),j=f.isStreaming||!f.content;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("div",{className:aH.footerText,children:"Consider breaking this up into multiple tasks"}),p[0]=t):t=p[0],p[1]!==w?(n=()=>w("task"),p[1]=w,p[2]=n):n=p[2],p[3]!==j||p[4]!==n?(r=(0,a.jsx)(H.Q,{className:aH.button,leadingVisual:h.TasklistIcon,onClick:n,disabled:j,inactive:j,children:"Break down into smaller tasks"}),p[3]=j,p[4]=n,p[5]=r):r=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("div",{className:aH.divider}),p[6]=l):l=p[6],p[7]!==j?(c=(0,a.jsx)(y.W.Anchor,{children:(0,a.jsx)(g.K,{"aria-label":"Task break down options\u2026",className:aH.menuButton,icon:h.TriangleDownIcon,disabled:j,inactive:j})}),p[7]=j,p[8]=c):c=p[8],p[9]!==w?(d=(0,a.jsx)(y.W.Overlay,{children:(0,a.jsx)(v.l,{children:(0,a.jsx)(v.l.Item,{onSelect:()=>w("issue"),children:"Break down into issues"})})}),p[9]=w,p[10]=d):d=p[10],p[11]!==x||p[12]!==c||p[13]!==d?(u=(0,a.jsxs)(y.W,{open:x,onOpenChange:b,children:[c,d]}),p[11]=x,p[12]=c,p[13]=d,p[14]=u):u=p[14],p[15]!==r||p[16]!==u?(m=(0,a.jsxs)("div",{className:aH.footer,children:[t,(0,a.jsxs)(aW.A,{className:aH.buttonGroup,children:[r,l,u]})]}),p[15]=r,p[16]=u,p[17]=m):m=p[17],m}try{aK.displayName||(aK.displayName="SpecPreviewFooter")}catch{}function aG(e){let t,n,s,r=(0,i.c)(7),{error:l,onDismiss:o}=e,[c,d]=(0,_.useState)(0);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{d(az)},r[0]=t):t=r[0],r[1]!==l?(n=[l],r[1]=l,r[2]=n):n=r[2],(0,_.useEffect)(t,n),r[3]!==c||r[4]!==l.message||r[5]!==o?(s=(0,a.jsx)(L.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:l.message,onDismiss:o},c),r[3]=c,r[4]=l.message,r[5]=o,r[6]=s):s=r[6],s}function az(e){return e+1}try{aG.displayName||(aG.displayName="TaskErrorBanner")}catch{}var aQ=n(62189),aY=n(91747);let aJ={button:"TaskActions-module__button--mfKv1",buttonGroup:"TaskActions-module__buttonGroup--HfUFm",divider:"TaskActions-module__divider--mfTun",menuButton:"TaskActions-module__menuButton--KexmI"},aX=(0,_.forwardRef)((e,t)=>{let n,s,r,l,o,c,d,u=(0,i.c)(23),{children:m,inactive:p,isLoading:f,isMenuOpen:x,loadingAnnouncement:b,menuItems:_,onMenuOpenChange:w,onStartClick:j,primaryButtonText:N}=e,k=void 0===b?"Starting task\u2026":b,C=void 0===N?"Start agent task":N;return u[0]!==p||u[1]!==f||u[2]!==k||u[3]!==j||u[4]!==C||u[5]!==t?(n=(0,a.jsx)(H.Q,{className:aJ.button,inactive:p,leadingVisual:h.AgentIcon,loading:f,loadingAnnouncement:k,onClick:j,ref:t,variant:"primary",children:C}),u[0]=p,u[1]=f,u[2]=k,u[3]=j,u[4]=C,u[5]=t,u[6]=n):n=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("div",{className:aJ.divider}),u[7]=s):s=u[7],u[8]!==f?(r=(0,a.jsx)(y.W.Anchor,{"aria-label":"Task options",children:(0,a.jsx)(g.K,{"aria-label":"Task options\u2026",className:aJ.menuButton,disabled:f,icon:h.TriangleDownIcon,variant:"primary"})}),u[8]=f,u[9]=r):r=u[9],u[10]!==_?(l=_.map(aZ),u[10]=_,u[11]=l):l=u[11],u[12]!==l?(o=(0,a.jsx)(y.W.Overlay,{children:(0,a.jsx)(v.l,{children:l})}),u[12]=l,u[13]=o):o=u[13],u[14]!==x||u[15]!==w||u[16]!==r||u[17]!==o?(c=(0,a.jsxs)(y.W,{open:x,onOpenChange:w,children:[r,o]}),u[14]=x,u[15]=w,u[16]=r,u[17]=o,u[18]=c):c=u[18],u[19]!==m||u[20]!==n||u[21]!==c?(d=(0,a.jsxs)(aW.A,{className:aJ.buttonGroup,children:[n,m,s,c]}),u[19]=m,u[20]=n,u[21]=c,u[22]=d):d=u[22],d});function aZ(e){return(0,a.jsx)(v.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}aX.displayName="TaskActions";var a0=n(65529),a1=n(91779),a2=n(66990),a3=n(86877),a4=n(66565),a5=n(44095);let a7={formContainer:"StartTaskDialog-module__formContainer--fvFyc",selectorsRow:"StartTaskDialog-module__selectorsRow--t23fd",taskContainer:"StartTaskDialog-module__taskContainer--jUtk2"},a6=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"owner"},n=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:n,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:n,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[a,i],storageKey:null},i],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}}}();function a8(e){let t,n,s,r,l,o,c,d,u,m,p,h,f,g,y,v,x,b,w,j,N=(0,i.c)(51),{previewItem:k,initialRepo:C,topRepos:S,onStart:I,onCancel:T}=e,[E,L]=(0,_.useState)(C),[R,A]=(0,_.useState)(""),[D,P]=(0,_.useState)(""),[O,B]=(0,_.useState)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tq.G7)("copilot_swe_agent_use_subagents"),N[0]=t):t=N[0];let F=t&&D,{data:M,isLoading:$}=function(e,t){let n,a,s,r,l=(0,i.c)(13),o=(0,ea.useRelayEnvironment)();return l[0]!==o?(n=JSON.stringify(o),l[0]=o,l[1]=n):n=l[1],l[2]!==t||l[3]!==e||l[4]!==n?(a=["repository-default-branch",n,e,t],l[2]=t,l[3]=e,l[4]=n,l[5]=a):a=l[5],l[6]!==o||l[7]!==t||l[8]!==e?(s=async()=>{if(!e||!t)return null;let n=await (0,t0.fetchQuery)(o,a6,{owner:e,name:t},{fetchPolicy:"store-or-network"}).toPromise();return n?.repository?.defaultBranchRef?.name||null},l[6]=o,l[7]=t,l[8]=e,l[9]=s):s=l[9],l[10]!==a||l[11]!==s?(r={queryKey:a,queryFn:s},l[10]=a,l[11]=s,l[12]=r):r=l[12],(0,ed.I)(r)}(E?.owner?.login,E?.name);N[1]!==M?(n=()=>{null!=M?(A(M),P(M)):A("")},s=[M],N[1]=M,N[2]=n,N[3]=s):(n=N[2],s=N[3]),(0,_.useEffect)(n,s),N[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{P(e)},N[4]=r):r=N[4];let V=r;N[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{L(e)},N[5]=l):l=N[5];let U=l;N[6]!==I||N[7]!==D||N[8]!==E||N[9]!==O?(o=()=>{I(E,D,O)},N[6]=I,N[7]=D,N[8]=E,N[9]=O,N[10]=o):o=N[10];let W=o,H=!!E&&!!D;N[11]!==T?(c={buttonType:"default",content:"Cancel",onClick:T},N[11]=T,N[12]=c):c=N[12];let K=!H;N[13]!==W||N[14]!==K?(d={buttonType:"primary",content:"Start",onClick:W,disabled:K},N[13]=W,N[14]=K,N[15]=d):d=N[15],N[16]!==c||N[17]!==d?(u=[c,d],N[16]=c,N[17]=d,N[18]=u):u=N[18],N[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(a3.A.Label,{children:"Target repository"}),N[19]=m):m=N[19];let G=E||void 0;if(N[20]===Symbol.for("react.memo_cache_sentinel")?(p={includeForks:!0},N[20]=p):p=N[20],N[21]!==G||N[22]!==S?(h=(0,a.jsxs)(a3.A,{children:[m,(0,a.jsx)(Z.f0,{initialRepository:G,onSelect:U,topRepositories:S,enforceAtleastOneSelected:!0,options:p,preventDefault:!0,responsiveOnNarrow:!0})]}),N[21]=G,N[22]=S,N[23]=h):h=N[23],N[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(a3.A.Label,{children:"Base branch"}),N[24]=f):f=N[24],N[25]!==$||N[26]!==R||N[27]!==D||N[28]!==E?(g=(0,a.jsxs)(a3.A,{children:[f,E||D?(0,a.jsx)(a2.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:R?D:"None available",defaultBranch:R,owner:E?.owner?.login||"",repo:E?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:$,onSelectItem:V,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,a.jsx)(a4.f,{height:"32px",width:"100px"})]}),N[25]=$,N[26]=R,N[27]=D,N[28]=E,N[29]=g):g=N[29],N[30]!==$||N[31]!==R||N[32]!==D||N[33]!==E||N[34]!==O||N[35]!==F)y=F&&E&&(0,a.jsxs)(a3.A,{children:[(0,a.jsx)(a3.A.Label,{children:"Custom agent"}),(0,a.jsx)(a1.p,{repo:{id:E.databaseId||0,graphQLId:E.id,name:E.nameWithOwner,nameWithOwner:E.nameWithOwner,nameOnly:E.name,owner:E.owner.login,private:E.isPrivate||!1,defaultBranch:R||"",isEmpty:!1,enabled:!0},branch:D,selectedAgent:O,onSelect:B,iconOnly:!1,disabled:$})]}),N[30]=$,N[31]=R,N[32]=D,N[33]=E,N[34]=O,N[35]=F,N[36]=y;else y=N[36];return N[37]!==h||N[38]!==g||N[39]!==y?(v=(0,a.jsxs)("div",{className:a7.selectorsRow,children:[h,g,y]}),N[37]=h,N[38]=g,N[39]=y,N[40]=v):v=N[40],N[41]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(a3.A.Label,{children:"Task"}),N[41]=x):x=N[41],N[42]!==k?(b=(0,a.jsx)("div",{className:a7.taskContainer,children:(0,a.jsxs)(a3.A,{children:[x,(0,a.jsx)(a5.m,{previewItem:k})]})}),N[42]=k,N[43]=b):b=N[43],N[44]!==v||N[45]!==b?(w=(0,a.jsxs)("div",{className:a7.formContainer,children:[v,b]}),N[44]=v,N[45]=b,N[46]=w):w=N[46],N[47]!==T||N[48]!==u||N[49]!==w?(j=(0,a.jsx)(q.l,{width:"xlarge",title:"Start task",onClose:T,footerButtons:u,children:w}),N[47]=T,N[48]=u,N[49]=w,N[50]=j):j=N[50],j}a6.hash="606cda456dcdccbb61e31c769c1ea96c";try{a8.displayName||(a8.displayName="StartTaskDialog")}catch{}function a9(e){let t,n,r,l,c,d,u,m,p,h,f,g,y,v=(0,i.c)(37),{spec:x,onError:b}=e,[w,j]=(0,_.useState)(!1),[N,k]=(0,_.useState)(!1);if(v[0]!==x)t={messageId:x.messageId,name:x.name,isUserEdited:x.isUserEdited,tag:x.tag,repository:x.repository,type:"planning-task",id:x.id.replace("planning-spec:","planning-task:"),description:x.content,isStreaming:x.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},v[0]=x,v[1]=t;else t=v[1];let C=t,{repositoryData:S,isLoading:I}=function(e){let t,n,a,s,r,l,o=(0,i.c)(18);o[0]!==e.repository?(t=e.repository?.split("/")??[],o[0]=e.repository,o[1]=t):t=o[1];let[c,d]=t,u=(0,ea.useRelayEnvironment)();o[2]!==u?(n=JSON.stringify(u),o[2]=u,o[3]=n):n=o[3],o[4]!==c||o[5]!==d||o[6]!==n?(a=["copilot-immersive-spec-repo",n,c,d],o[4]=c,o[5]=d,o[6]=n,o[7]=a):a=o[7],o[8]!==u||o[9]!==c||o[10]!==d?(s=async()=>c&&d?await (0,Z.tZ)(u,c,d):null,o[8]=u,o[9]=c,o[10]=d,o[11]=s):s=o[11],o[12]!==a||o[13]!==s?(r={queryKey:a,queryFn:s},o[12]=a,o[13]=s,o[14]=r):r=o[14];let{data:m,isLoading:p}=(0,ed.I)(r);return o[15]!==p||o[16]!==m?(l={repositoryData:m,isLoading:p},o[15]=p,o[16]=m,o[17]=l):l=o[17],l}(x),{isLoading:T,data:E}=function(){let e,t,n,a,s=(0,i.c)(9),r=(0,ea.useRelayEnvironment)();return s[0]!==r?(e=JSON.stringify(r),s[0]=r,s[1]=e):e=s[1],s[2]!==e?(t=["copilot-immersive-spec-top-repos",e],s[2]=e,s[3]=t):t=s[3],s[4]!==r?(n=async()=>await (0,Z.St)(r,{first:10,hasIssuesEnabled:!0}),s[4]=r,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(a={queryKey:t,queryFn:n},s[6]=t,s[7]=n,s[8]=a):a=s[8],(0,ed.I)(a)}(),{start:L,error:R}=(0,a0.vQ)(C),{pullRequest:A,isLoading:D}=(0,a0.as)(C),{createIssue:P}=function(e){let t,n,a=(0,i.c)(6),r=(0,eT.b)(),l=(0,s.Pk)();a[0]!==r||a[1]!==e||a[2]!==l?(t=async()=>{let t=e.name||e.tag,n=(0,eL.W)(l);(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:n?.id,messageId:e.messageId});let a={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${t}' spec as an issue..."}`},i=`
Create an issue based on the ${e.tag} spec${e.repository?` in the ${e.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await r.sendChatMessage({thread:n,content:i,references:[a],topic:l.currentTopic,context:l.context,customInstructions:l.customInstructions,model:l.model,intent:eE.wh.planningAgent})},a[0]=r,a[1]=e,a[2]=l,a[3]=t):t=a[3];let c=t;return a[4]!==c?(n={createIssue:c},a[4]=c,a[5]=n):n=a[5],n}(x);v[2]!==R||v[3]!==b?(n=()=>{b?.(R)},r=[R,b],v[2]=R,v[3]=b,v[4]=n,v[5]=r):(n=v[4],r=v[5]),(0,_.useEffect)(n,r);let O=(0,aY.u)("copilot_swe_agent_progress_commands");v[6]!==O||v[7]!==A?(l=A?O?(0,aQ.U)(A.global_relay_id):`/${A.repository_nwo}/pull/${A.number}`:void 0,v[6]=O,v[7]=A,v[8]=l):l=v[8];let B=l,F=O?"View task":"View pull request",M=x.isStreaming??!1;v[9]!==x.content?(c=x.content?.trim(),v[9]=x.content,v[10]=c):c=v[10];let $=M||I||T||D,V=!c||$;v[11]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{k(!0)},v[11]=d):d=v[11];let U=d;v[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{k(!1)},v[12]=u):u=v[12];let q=u;v[13]!==L?(m=(e,t,n)=>{L({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),k(!1)},v[13]=L,v[14]=m):m=v[14];let W=m;v[15]!==P?(p=()=>{P()},v[15]=P,v[16]=p):p=v[16];let K=p;if(A){let e;return v[17]!==B||v[18]!==F?(e=(0,a.jsx)(H.Q,{as:"a",href:B,variant:"primary",size:"small",children:F}),v[17]=B,v[18]=F,v[19]=e):e=v[19],e}let G=V||S?.hasIssuesEnabled===!1;return v[20]!==K||v[21]!==G?(h=[{label:"Create issue",onSelect:K,disabled:G}],v[20]=K,v[21]=G,v[22]=h):h=v[22],v[23]!==V||v[24]!==$||v[25]!==w||v[26]!==h?(f=(0,a.jsx)(aX,{inactive:V,isLoading:$,isMenuOpen:w,loadingAnnouncement:"Loading spec\u2026",menuItems:h,onMenuOpenChange:j,onStartClick:U,primaryButtonText:"Start task"}),v[23]=V,v[24]=$,v[25]=w,v[26]=h,v[27]=f):f=v[27],v[28]!==W||v[29]!==N||v[30]!==S||v[31]!==x||v[32]!==E?(g=N&&(0,a.jsx)(a8,{previewItem:x,initialRepo:S,topRepos:E||[],onStart:W,onCancel:q}),v[28]=W,v[29]=N,v[30]=S,v[31]=x,v[32]=E,v[33]=g):g=v[33],v[34]!==f||v[35]!==g?(y=(0,a.jsxs)(a.Fragment,{children:[f,g]}),v[34]=f,v[35]=g,v[36]=y):y=v[36],y}try{a9.displayName||(a9.displayName="SpecActions")}catch{}let ie={toolbar:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",toolbarLeft:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW"};function it(e){let t,n,r,l,c,d,u,m,p,f,y,v,x,b,w,j,N,k,C,S,I,T=(0,i.c)(60),{spec:E,linesOfCode:L,size:R,isDiffable:A,onViewModeChange:D}=e,{selectedThreadID:P}=(0,s.Pk)(),[O,B]=(0,_.useState)("preview"),[F,$]=(0,_.useState)(void 0),[V,U]=(0,_.useState)(null),[q,W]=(0,_.useState)(null),H=V&&V!==q;T[0]!==V?(t=()=>{W(V)},T[0]=V,T[1]=t):t=T[1];let K=t;T[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{U(e)},T[2]=n):n=T[2];let G=n;if(T[3]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{W(null)},T[3]=r):r=T[3],T[4]!==E.id?(l=[E.id],T[4]=E.id,T[5]=l):l=T[5],(0,_.useEffect)(r,l),T[6]===Symbol.for("react.memo_cache_sentinel")?(c=["preview","Preview"],T[6]=c):c=T[6],T[7]!==A){if(d=[c],A){let e;T[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],T[9]=e):e=T[9],d.push(e)}T[7]=A,T[8]=d}else d=T[8];let z=d;T[10]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{$(e)},T[10]=u):u=T[10];let Q=u;T[11]!==z||T[12]!==D||T[13]!==E.messageId||T[14]!==P?(m=e=>{let t=z[e]?.[0]||"preview";B(t),D(t),(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:P,messageId:E.messageId})},T[11]=z,T[12]=D,T[13]=E.messageId,T[14]=P,T[15]=m):m=T[15];let Y=m;T[16]!==F||T[17]!==E.content||T[18]!==E.messageId||T[19]!==E.tag||T[20]!==P?(p=()=>{let e=(()=>{let e=E.tag;return void 0!==F?`${e}_${F}.md`:`${e}.md`})();ao(new File([E.content],e)),(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:P,messageId:E.messageId})},T[16]=F,T[17]=E.content,T[18]=E.messageId,T[19]=E.tag,T[20]=P,T[21]=p):p=T[21];let J=p;T[22]!==E.messageId||T[23]!==P?(f=()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:P,messageId:E.messageId})},T[22]=E.messageId,T[23]=P,T[24]=f):f=T[24];let X=f;T[25]!==V||T[26]!==K||T[27]!==H?(y=H&&(0,a.jsx)(aG,{error:V,onDismiss:K}),T[25]=V,T[26]=K,T[27]=H,T[28]=y):y=T[28],T[29]!==z||T[30]!==Y||T[31]!==O?(v=z.length>1&&(0,a.jsx)(am.I,{"aria-label":"Spec view",onChange:Y,children:z.map(e=>{let[t,n]=e;return(0,a.jsx)(am.I.Button,{selected:O===t,children:n},t)})}),T[29]=z,T[30]=Y,T[31]=O,T[32]=v):v=T[32],T[33]!==E?(x=(0,a.jsx)(M,{item:E,onVersionSelect:Q}),T[33]=E,T[34]=x):x=T[34];let Z=1===L?"line":"lines";return T[35]!==L||T[36]!==R||T[37]!==Z?(b=(0,a.jsxs)("p",{className:ie.toolbarLoC,children:[L," ",Z," \xb7 ",R]}),T[35]=L,T[36]=R,T[37]=Z,T[38]=b):b=T[38],T[39]!==v||T[40]!==x||T[41]!==b?(w=(0,a.jsxs)("div",{className:ie.toolbarLeft,children:[v,x,b]}),T[39]=v,T[40]=x,T[41]=b,T[42]=w):w=T[42],T[43]!==X||T[44]!==E.content?(j=(0,a.jsx)(nz.T,{textToCopy:E.content,ariaLabel:"Copy spec content",onCopy:X}),T[43]=X,T[44]=E.content,T[45]=j):j=T[45],T[46]!==J?(N=(0,a.jsx)(g.K,{"aria-label":"Download spec",icon:h.DownloadIcon,variant:"invisible",onClick:J}),T[46]=J,T[47]=N):N=T[47],T[48]!==E?(k=(0,a.jsx)(a9,{spec:E,onError:G}),T[48]=E,T[49]=k):k=T[49],T[50]!==j||T[51]!==N||T[52]!==k?(C=(0,a.jsxs)("div",{className:ie.toolbarActions,children:[j,N,k]}),T[50]=j,T[51]=N,T[52]=k,T[53]=C):C=T[53],T[54]!==w||T[55]!==C?(S=(0,a.jsxs)("div",{className:ie.toolbar,children:[w,C]}),T[54]=w,T[55]=C,T[56]=S):S=T[56],T[57]!==y||T[58]!==S?(I=(0,a.jsxs)(a.Fragment,{children:[y,S]}),T[57]=y,T[58]=S,T[59]=I):I=T[59],I}try{it.displayName||(it.displayName="SpecToolbar")}catch{}function ia(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function ii(e){let t,n,s,r,l,o,c,d,u=(0,i.c)(23),{spec:m}=e,{items:p,versionedItems:h}=(0,N.xx)(),[f,g]=(0,_.useState)("preview");u[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{g(e)},u[0]=t):t=u[0];let y=t;if(u[1]!==p||u[2]!==m||u[3]!==h){let e=(0,B.SX)(m,p,h);n=!!e,s=e?ia(e):null,u[1]=p,u[2]=m,u[3]=h,u[4]=n,u[5]=s}else n=u[4],s=u[5];let v=s;u[6]!==m?(r=ia(m),u[6]=m,u[7]=r):r=u[7];let x=r,{linesOfCode:b,size:w}=nJ(x);return u[8]!==n||u[9]!==b||u[10]!==w||u[11]!==m?(l=(0,a.jsx)(it,{spec:m,linesOfCode:b,size:w,isDiffable:n,onViewModeChange:y}),u[8]=n,u[9]=b,u[10]=w,u[11]=m,u[12]=l):l=u[12],u[13]!==v||u[14]!==x||u[15]!==f?(o=(0,a.jsx)("div",{className:aq.content,children:"preview"===f?(0,a.jsx)(aE.G,{content:{value:x.value,name:x.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,a.jsx)(ar,{left:v,right:x,view:"unified"})}),u[13]=v,u[14]=x,u[15]=f,u[16]=o):o=u[16],u[17]!==m?(c=(0,a.jsx)(aK,{spec:m}),u[17]=m,u[18]=c):c=u[18],u[19]!==l||u[20]!==o||u[21]!==c?(d=(0,a.jsx)(aU.Fn,{children:(0,a.jsxs)("div",{className:aq.container,children:[l,o,c]})}),u[19]=l,u[20]=o,u[21]=c,u[22]=d):d=u[22],d}try{ii.displayName||(ii.displayName="SpecPreview")}catch{}let is={container:"TaskPreview-module__container--RZnMV"};function ir(e){let t,n,s,r,l=(0,i.c)(14),{title:o,description:c,onClose:d,onSubmit:u,buttonRef:m}=e;return l[0]!==d?(t={buttonType:"default",content:"Cancel",onClick:d},l[0]=d,l[1]=t):t=l[1],l[2]!==d||l[3]!==u?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{u(),d()}},l[2]=d,l[3]=u,l[4]=n):n=l[4],l[5]!==t||l[6]!==n?(s=[t,n],l[5]=t,l[6]=n,l[7]=s):s=l[7],l[8]!==m||l[9]!==c||l[10]!==d||l[11]!==s||l[12]!==o?(r=(0,a.jsx)(q.l,{title:o,onClose:d,returnFocusRef:m,footerButtons:s,children:c}),l[8]=m,l[9]=c,l[10]=d,l[11]=s,l[12]=o,l[13]=r):r=l[13],r}try{ir.displayName||(ir.displayName="StartTaskWarningDialog")}catch{}function il(e){let t,n=(0,i.c)(4),{buttonRef:s,onClose:r,onSubmit:l}=e;return n[0]!==s||n[1]!==r||n[2]!==l?(t=(0,a.jsx)(ir,{buttonRef:s,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:r,onSubmit:l,title:"Unmerged dependencies"}),n[0]=s,n[1]=r,n[2]=l,n[3]=t):t=n[3],t}try{il.displayName||(il.displayName="UnmergedDependenciesWarningDialog")}catch{}var io=n(35104);function ic(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function id(e){return null!=e}let iu={toolbarActions:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW"};function im(e){let t,n,s,r,l,o,c,d,u,m,p=(0,i.c)(33),{loading:h,task:f,startTask:g}=e,[y,v]=(0,_.useState)(!1),[x,b]=(0,_.useState)(!1),{convertToDraftIssue:w}=(0,io.Y)(f),j=(0,_.useRef)(null),[k,C]=(0,_.useState)(!1),S=function(e){let t,n,a=(0,i.c)(6),{items:s,versionedItems:r}=(0,N.xx)();a[0]!==s||a[1]!==e.dependencyTags||a[2]!==r?(t=e.dependencyTags?.map(e=>{let t=r.get(`planning-task:${e}`);return null==t||0===t.length?null:s.get(t.at(-1))}).filter(id)??[],a[0]=s,a[1]=e.dependencyTags,a[2]=r,a[3]=t):t=a[3];let l=t,o=(0,a0.fp)(l);return a[4]!==o?(n=o.some(ic),a[4]=o,a[5]=n):n=a[5],n}(f);p[0]!==h||p[1]!==f?(t={externalLoading:h,task:f},p[0]=h,p[1]=f,p[2]=t):t=p[2];let{selectedRepo:I,topRepos:T,isLoading:E}=function(e){let t,n,a,s,r,l,o,c,d,u,m,p,h,f,g=(0,i.c)(42),{externalLoading:y,task:v}=e;g[0]!==v.repository?(t=v.repository?.split("/")??[],g[0]=v.repository,g[1]=t):t=g[1];let[x,b]=t,[w,j]=(0,_.useState)(void 0),{updateItem:k}=(0,N.xx)(),C=(0,ea.useRelayEnvironment)();g[2]!==C?(n=JSON.stringify(C),g[2]=C,g[3]=n):n=g[3],g[4]!==n?(a=["copilot-immersive-top-repos",n],g[4]=n,g[5]=a):a=g[5],g[6]!==C?(s=async()=>await (0,Z.St)(C,{first:10}),g[6]=C,g[7]=s):s=g[7],g[8]!==a||g[9]!==s?(r={queryKey:a,queryFn:s},g[8]=a,g[9]=s,g[10]=r):r=g[10];let{data:S,isLoading:I}=(0,ed.I)(r);g[11]!==S?(l=void 0===S?[]:S,g[11]=S,g[12]=l):l=g[12];let T=l;g[13]!==C?(o=JSON.stringify(C),g[13]=C,g[14]=o):o=g[14],g[15]!==x||g[16]!==b||g[17]!==o?(c=["copilot-immersive-current-repo",o,x,b],g[15]=x,g[16]=b,g[17]=o,g[18]=c):c=g[18],g[19]!==C||g[20]!==x||g[21]!==b?(d=async()=>x&&b?await (0,Z.tZ)(C,x,b):null,g[19]=C,g[20]=x,g[21]=b,g[22]=d):d=g[22],g[23]!==c||g[24]!==d?(u={queryKey:c,queryFn:d},g[23]=c,g[24]=d,g[25]=u):u=g[25];let{data:E,isLoading:L}=(0,ed.I)(u),R=void 0!==y&&y||I||L;g[26]!==v||g[27]!==k?(m=e=>{j(e),e&&k({...v,isUserEdited:!0,repository:e.nameWithOwner})},g[26]=v,g[27]=k,g[28]=m):m=g[28];let A=m;return g[29]!==E||g[30]!==A||g[31]!==R||g[32]!==w||g[33]!==v.repository||g[34]!==T?(p=()=>{if(!R){if(v.repository){E&&E.nameWithOwner!==w?.nameWithOwner&&j(E);return}!w&&T&&T.length>0&&A(T[0])}},h=[E,A,R,w,v.repository,T],g[29]=E,g[30]=A,g[31]=R,g[32]=w,g[33]=v.repository,g[34]=T,g[35]=p,g[36]=h):(p=g[35],h=g[36]),(0,_.useEffect)(p,h),g[37]!==A||g[38]!==R||g[39]!==w||g[40]!==T?(f={handleRepoSelect:A,isLoading:R,selectedRepo:w,topRepos:T},g[37]=A,g[38]=R,g[39]=w,g[40]=T,g[41]=f):f=g[41],f}(t);p[3]!==S?(n=()=>{if(S)return void C(!0);b(!0)},p[3]=S,p[4]=n):n=p[4];let L=n;p[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{b(!1)},p[5]=s):s=p[5];let R=s;p[6]!==g?(r=(e,t,n)=>{g({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),b(!1)},p[6]=g,p[7]=r):r=p[7];let A=r;p[8]!==w?(l=()=>{w()},p[8]=w,p[9]=l):l=p[9];let D=l,P=!I,O=E?"Loading\u2026":"Starting task\u2026",B=I?.hasIssuesEnabled===!1;return p[10]!==D||p[11]!==B?(o=[{disabled:B,label:"Draft issue",onSelect:D}],p[10]=D,p[11]=B,p[12]=o):o=p[12],p[13]!==L||p[14]!==k?(c=k&&(0,a.jsx)(il,{buttonRef:j,onClose:()=>C(!1),onSubmit:L}),p[13]=L,p[14]=k,p[15]=c):c=p[15],p[16]!==L||p[17]!==E||p[18]!==y||p[19]!==c||p[20]!==P||p[21]!==O||p[22]!==o?(d=(0,a.jsx)("div",{className:iu.toolbarActions,children:(0,a.jsx)(aX,{inactive:P,isLoading:E,isMenuOpen:y,loadingAnnouncement:O,menuItems:o,onMenuOpenChange:v,onStartClick:L,ref:j,children:c})}),p[16]=L,p[17]=E,p[18]=y,p[19]=c,p[20]=P,p[21]=O,p[22]=o,p[23]=d):d=p[23],p[24]!==A||p[25]!==x||p[26]!==f||p[27]!==I||p[28]!==T?(u=x&&(0,a.jsx)(a8,{previewItem:f,initialRepo:I,topRepos:T||[],onStart:A,onCancel:R}),p[24]=A,p[25]=x,p[26]=f,p[27]=I,p[28]=T,p[29]=u):u=p[29],p[30]!==d||p[31]!==u?(m=(0,a.jsxs)(a.Fragment,{children:[d,u]}),p[30]=d,p[31]=u,p[32]=m):m=p[32],m}try{im.displayName||(im.displayName="NoPullRequestTaskToolbar")}catch{}var ip=n(26607);let ih={toolbarLeft:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",toolbarRepo:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp"};function ig(e){let t,n,s,r,l,o,c=(0,i.c)(19),{pullRequest:d}=e,u=(0,aY.u)("copilot_swe_agent_progress_commands");c[0]!==u||c[1]!==d.global_relay_id||c[2]!==d.number||c[3]!==d.repository_nwo?(t=u?(0,aQ.U)(d.global_relay_id):`/${d.repository_nwo}/pull/${d.number}`,c[0]=u,c[1]=d.global_relay_id,c[2]=d.number,c[3]=d.repository_nwo,c[4]=t):t=c[4];let m=t,p=u?"View task":"View pull request";c[5]!==d.repository_nwo?(n=(0,a.jsx)("div",{className:ih.toolbarLeft,children:(0,a.jsx)(ip.A,{variant:"accent",size:"large",className:ih.toolbarRepo,children:d.repository_nwo})}),c[5]=d.repository_nwo,c[6]=n):n=c[6];let h="merged"===d.state?"success":"accent",f="merged"===d.state?"Merged":"In progress";return c[7]!==h||c[8]!==f?(s=(0,a.jsx)(ip.A,{variant:h,size:"small",children:f}),c[7]=h,c[8]=f,c[9]=s):s=c[9],c[10]!==m||c[11]!==p?(r=(0,a.jsx)(H.Q,{as:"a",href:m,variant:"primary",size:"small",children:p}),c[10]=m,c[11]=p,c[12]=r):r=c[12],c[13]!==s||c[14]!==r?(l=(0,a.jsxs)("div",{className:ih.toolbarActions,children:[s,r]}),c[13]=s,c[14]=r,c[15]=l):l=c[15],c[16]!==n||c[17]!==l?(o=(0,a.jsxs)(a.Fragment,{children:[n,l]}),c[16]=n,c[17]=l,c[18]=o):o=c[18],o}try{ig.displayName||(ig.displayName="PullRequestTaskToolbar")}catch{}let iy={toolbar:"TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1"};function iv(e){let t,n,s,r,l,o,c,d,u=(0,i.c)(22),{className:m,task:p}=e,{pullRequest:h,isLoading:f}=(0,a0.as)(p),{start:g,error:y}=(0,a0.vQ)(p),[v,x]=(0,_.useState)(null),w=y&&y!==v;u[0]!==y?(t=()=>{x(y)},u[0]=y,u[1]=t):t=u[1];let j=t;return u[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},u[2]=n):n=u[2],u[3]!==p.id?(s=[p.id],u[3]=p.id,u[4]=s):s=u[4],(0,_.useEffect)(n,s),u[5]!==y||u[6]!==j||u[7]!==w?(r=w&&(0,a.jsx)(aG,{error:y,onDismiss:j}),u[5]=y,u[6]=j,u[7]=w,u[8]=r):r=u[8],u[9]!==m?(l=(0,b.$)(iy.toolbar,m),u[9]=m,u[10]=l):l=u[10],u[11]!==f||u[12]!==h||u[13]!==g||u[14]!==p?(o=h?(0,a.jsx)(ig,{pullRequest:h}):(0,a.jsx)(im,{loading:f,task:p,startTask:g}),u[11]=f,u[12]=h,u[13]=g,u[14]=p,u[15]=o):o=u[15],u[16]!==l||u[17]!==o?(c=(0,a.jsx)("div",{className:l,children:o}),u[16]=l,u[17]=o,u[18]=c):c=u[18],u[19]!==r||u[20]!==c?(d=(0,a.jsxs)(a.Fragment,{children:[r,c]}),u[19]=r,u[20]=c,u[21]=d):d=u[21],d}try{iv.displayName||(iv.displayName="TaskToolbar")}catch{}function ix(e){let t,n,s,r=(0,i.c)(8),{task:l}=e,o=l.description;l.name&&(o=`# ${l.name}

${o}`);let c=o;r[0]!==l?(t=(0,a.jsx)(iv,{task:l}),r[0]=l,r[1]=t):t=r[1];let d=`${l.tag}.md`;return r[2]!==c||r[3]!==d?(n=(0,a.jsx)(aE.G,{content:{value:c,name:d},fallbackToRaw:!0,hideHeadingAnchors:!0}),r[2]=c,r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,a.jsx)(aU.Fn,{children:(0,a.jsxs)("div",{className:is.container,children:[t,n]})}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s}try{ix.displayName||(ix.displayName="TaskPreview")}catch{}function ib(e){let t,n=(0,i.c)(35),{isOpening:s,onClose:r,previewItem:l}=e,o=(0,k.qw)(),c=null;switch(l.type){case"file":{let e;n[0]!==s||n[1]!==r||n[2]!==l?(e=(0,a.jsx)(aL,{isPreviewOpening:s,file:l,onClose:r}),n[0]=s,n[1]=r,n[2]=l,n[3]=e):e=n[3],c=e;break}case"file-diff":{let e;n[4]!==l?(e=(0,a.jsx)(ac,{fileDiff:l}),n[4]=l,n[5]=e):e=n[5],c=e;break}case"issue":{let e;n[6]!==s||n[7]!==r||n[8]!==l?(e=(0,a.jsx)(aF,{isPreviewOpening:s,issue:l,onClose:r}),n[6]=s,n[7]=r,n[8]=l,n[9]=e):e=n[9],c=e;break}case"new-issue":{let e;n[10]!==s||n[11]!==r||n[12]!==l?(e=(0,a.jsx)(nh,{isPreviewOpening:s,issue:l,onClose:r}),n[10]=s,n[11]=r,n[12]=l,n[13]=e):e=n[13],c=e;break}case"update-issue":{let e;n[14]!==s||n[15]!==r||n[16]!==l?(e=(0,a.jsx)(nO,{isPreviewOpening:s,issue:l,onClose:r}),n[14]=s,n[15]=r,n[16]=l,n[17]=e):e=n[17],c=e;break}case"existing-issue":{let e;n[18]!==s||n[19]!==r||n[20]!==l?(e=(0,a.jsx)(nw,{isPreviewOpening:s,issue:l,onClose:r}),n[18]=s,n[19]=r,n[20]=l,n[21]=e):e=n[21],c=e;break}case"image":{let e;n[22]!==l?(e=(0,a.jsx)(aO,{image:l}),n[22]=l,n[23]=e):e=n[23],c=e;break}case"planning-task":{let e;n[24]!==l?(e=(0,a.jsx)(ix,{task:l}),n[24]=l,n[25]=e):e=n[25],c=e;break}case"planning-spec":{let e;n[26]!==l?(e=(0,a.jsx)(ii,{spec:l}),n[26]=l,n[27]=e):e=n[27],c=e;break}case"plugin-content":if(n[28]!==o||n[29]!==l.reference){for(let e of o){let t=e.previewComponents?.[l.reference.type];if(t){c=(0,a.jsx)(t,{reference:l.reference});break}}n[28]=o,n[29]=l.reference,n[30]=c}else c=n[30];break;case"job-result":{let e;n[31]!==l?(e=(0,a.jsx)(aV,{jobResult:l}),n[31]=l,n[32]=e):e=n[32],c=e}}return n[33]!==c?(t=c?(0,a.jsx)(u.t,{fallback:(0,a.jsx)(w.x,{regionName:"This workbench item"}),children:c}):null,n[33]=c,n[34]=t):t=n[34],t}try{ib.displayName||(ib.displayName="ContentPreviewItem")}catch{}let i_={tabContainer:"ContentPreviewTab-module__tabContainer--ApaB_",tabContent:"ContentPreviewTab-module__tabContent--xe28k",isActive:"ContentPreviewTab-module__isActive--Pi2gz",mainButton:"ContentPreviewTab-module__mainButton--vLx58",icon:"ContentPreviewTab-module__icon--lefqk",title:"ContentPreviewTab-module__title--l571P",closeButton:"ContentPreviewTab-module__closeButton--SByWv",trailingComponent:"ContentPreviewTab-module__trailingComponent--lAh8u"};function iw(e){let t=(0,i.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(W.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.CodeIcon,{}),t[2]=e):e=t[2],e}}function ij(e){let t=(0,i.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,a.jsx)(iw,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,a.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}let iN=(0,_.forwardRef)(function(e,t){let n,s,r,l,c,u,m,p,f,y,v,x,w,j,N,k,C,S,I,T,E=(0,i.c)(52);E[0]!==e?({onClick:l,onClose:c,isActive:s,item:r,controlHintId:n,tabPanelId:m,...u}=e,E[0]=e,E[1]=n,E[2]=s,E[3]=r,E[4]=l,E[5]=c,E[6]=u,E[7]=m):(n=E[1],s=E[2],r=E[3],l=E[4],c=E[5],u=E[6],m=E[7]);let[L,R]=(0,_.useState)(!1),A=(0,_.useRef)(null),D=!r.disableCloseButton;E[8]!==c?(p=()=>{c&&c(),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},E[8]=c,E[9]=p):p=E[9];let P=p,O=(0,_.useRef)(null),B=r.name;E[10]!==L?(f=()=>{let e=A.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==L&&R(t)},E[10]=L,E[11]=f):f=E[11];let F=f,M=`content-preview-tab-${r.id}`;E[12]!==F||E[13]!==M||E[14]!==B?(y=(0,a.jsx)("span",{className:i_.title,"data-title":B,"data-testid":M,ref:A,onMouseEnter:F,children:B}),E[12]=F,E[13]=M,E[14]=B,E[15]=y):y=E[15];let $=y;E[16]!==s?(v=(0,b.$)(i_.tabContent,{[i_.isActive]:s}),E[16]=s,E[17]=v):v=E[17];let V=s?"true":void 0;return E[18]!==l?(x=e=>{l&&l(e),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},E[18]=l,E[19]=x):x=E[19],E[20]!==P||E[21]!==D?(w=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":D&&P();break;case"tab":if(e.shiftKey)break;D&&(e.preventDefault(),O.current?.focus())}},j=e=>{1===e.button&&D&&P()},E[20]=P,E[21]=D,E[22]=w,E[23]=j):(w=E[22],j=E[23]),E[24]!==r?(N=(0,a.jsx)("span",{className:i_.icon,children:(0,a.jsx)(ij,{item:r})}),E[24]=r,E[25]=N):N=E[25],E[26]!==L||E[27]!==B||E[28]!==$?(k=L?(0,a.jsx)(d.m,{text:B,position:"bottom",children:$}):$,E[26]=L,E[27]=B,E[28]=$,E[29]=k):k=E[29],E[30]!==r.trailingComponent?(C=r.trailingComponent?(0,a.jsx)("div",{className:i_.trailingComponent,children:r.trailingComponent}):null,E[30]=r.trailingComponent,E[31]=C):C=E[31],E[32]!==n||E[33]!==t||E[34]!==u||E[35]!==N||E[36]!==k||E[37]!==C||E[38]!==V||E[39]!==x||E[40]!==w||E[41]!==j||E[42]!==m?(S=(0,a.jsxs)("button",{className:i_.mainButton,type:"button",role:"tab","aria-selected":V,"aria-describedby":n,"aria-controls":m,onClick:x,onKeyDown:w,onAuxClick:j,ref:t,...u,children:[N,k,C]}),E[32]=n,E[33]=t,E[34]=u,E[35]=N,E[36]=k,E[37]=C,E[38]=V,E[39]=x,E[40]=w,E[41]=j,E[42]=m,E[43]=S):S=E[43],E[44]!==P||E[45]!==D||E[46]!==B?(I=D&&(0,a.jsx)("div",{className:i_.closeButton,children:(0,a.jsx)(g.K,{icon:h.XIcon,size:"small",variant:"invisible","aria-label":`Close ${B}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:P,ref:O})}),E[44]=P,E[45]=D,E[46]=B,E[47]=I):I=E[47],E[48]!==S||E[49]!==I||E[50]!==v?(T=(0,a.jsx)("div",{className:i_.tabContainer,children:(0,a.jsxs)("div",{className:v,children:[S,I]})}),E[48]=S,E[49]=I,E[50]=v,E[51]=T):T=E[51],T});try{iw.displayName||(iw.displayName="CodeTabIcon")}catch{}try{ij.displayName||(ij.displayName="TabIcon")}catch{}try{iN.displayName||(iN.displayName="ContentPreviewTab")}catch{}var ik=n(88934);function iC(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{iC.displayName||(iC.displayName="DiceIcon")}catch{}let iS={container:"EmptyState-module__container--LAYqE",icon:"EmptyState-module__icon--Ur91O",heading:"EmptyState-module__heading--fStvv",subtitle:"EmptyState-module__subtitle--tjaBc"};function iI(e){let t,n,r,l,c,d,u,m,p,f,g,y,v=(0,i.c)(23),{isOpening:x}=e,b=(0,eT.b)(),w=(0,s.Pk)(),j=(0,ik.zy)(),N=(0,_.useRef)(null);v[0]!==w?(t=(0,eL.W)(w),v[0]=w,v[1]=t):t=v[1];let k=t,C=(0,ay.X)();v[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],v[2]=n):n=v[2];let[S,I]=(0,_.useState)(n);v[3]!==C.icebreakers?(r=()=>{var e;if(Array.isArray(e=C.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=C.icebreakers.find(iT);e&&e.data.length>0&&I(e.data)}},v[3]=C.icebreakers,v[4]=r):r=v[4],v[5]!==j||v[6]!==C.icebreakers?(l=[C.icebreakers,j],v[5]=j,v[6]=C.icebreakers,v[7]=l):l=v[7],(0,_.useEffect)(r,l),v[8]!==x?(c=()=>{x&&N.current&&window.requestAnimationFrame(()=>{N.current?.focus({preventScroll:!0})})},d=[x],v[8]=x,v[9]=c,v[10]=d):(c=v[9],d=v[10]),(0,_.useEffect)(c,d),v[11]!==k||v[12]!==S||v[13]!==b||v[14]!==w?(u=()=>{if(0===S.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(S),t=0===w.messages.length?k:(0,eL.W)(w),n=w.currentUserLogin,a=e.message;b.sendChatMessage({thread:t,content:a.replaceAll("$$USERNAME$$",n),references:w.currentReferences,topic:w.currentTopic,context:w.context,customInstructions:w.customInstructions,model:w.model}),(0,o.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:w.currentTopic?.name,mode:"immersive",suggestionId:e.id})},v[11]=k,v[12]=S,v[13]=b,v[14]=w,v[15]=u):u=v[15];let T=u;return v[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(h.BrowserIcon,{size:24,className:iS.icon}),g=(0,a.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),m=(0,a.jsx)("h2",{className:iS.heading,children:"View files directly within Copilot"}),p=(0,a.jsx)("p",{className:iS.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),v[16]=m,v[17]=p,v[18]=f,v[19]=g):(m=v[16],p=v[17],f=v[18],g=v[19]),v[20]!==T||v[21]!==w.isWaitingOnCopilot?(y=(0,a.jsxs)("div",{className:iS.container,children:[f,g,m,p,(0,a.jsx)(H.Q,{ref:N,leadingVisual:iC,onClick:T,disabled:w.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),v[20]=T,v[21]=w.isWaitingOnCopilot,v[22]=y):y=v[22],y}function iT(e){return"interactional"===e.type}try{iI.displayName||(iI.displayName="EmptyState")}catch{}let iE={container:"LoadingState-module__container--dKvYJ"};function iL(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:iE.container,children:(0,a.jsx)(W.A,{size:"large"})}),t[0]=e):e=t[0],e}try{iL.displayName||(iL.displayName="LoadingState")}catch{}function iR(e,t,n={}){(0,o.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function iA(e){let t,n,c,d,u,w,k,C,S,I,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H,K,G,z,Q,Y,J,X,Z,ee,et,en=(0,i.c)(119),{returnFocusRef:ea,disableResourcePanel:ei,disableActionsMenu:es,useXCloseButton:er}=e,el=void 0!==es&&es,eo=void 0!==er&&er,ec=(0,N.tZ)(),ed=(0,N.wI)(),{selectedThreadID:eu}=(0,s.bP)("selectedThreadID"),em=(0,m.S)(eu),{items:ep,allOpenItems:eh,selectedItem:ef,openItem:eg,closeItem:ey,closeItems:ev,closePreviewPane:ex,showLoadingState:eb,openResourcePanel:e_,returnFocusElementRef:ew}=(0,N.xx)(),ej=(0,m.S)(ec),eN=ec&&!ej,ek=ej&&!ec;if(en[0]!==ep||en[1]!==eh){let e;en[3]!==ep?(e=e=>ep.get(e),en[3]=ep,en[4]=e):e=en[4],t=eh.map(e).filter(iF),en[0]=ep,en[1]=eh,en[2]=t}else t=en[2];let eC=t,eS=(0,_.useId)(),eI=(0,_.useId)(),eT=(0,_.useId)();if(en[5]!==ep||en[6]!==eh||en[7]!==ef){let e;en[10]!==ep?(e=e=>ep.get(e),en[10]=ep,en[11]=e):e=en[11],c=(n=eh.map(e).filter(iB)).find(e=>e.id===ef)??n[0],en[5]=ep,en[6]=eh,en[7]=ef,en[8]=n,en[9]=c}else n=en[8],c=en[9];let eE=c,eL=l.W.copilotResourcePanel&&!(void 0!==ei&&ei),eR=(0,_.useRef)(!0);en[12]!==ek||en[13]!==eN||en[14]!==ew||en[15]!==ea||en[16]!==eE?(d=()=>{if(ek||l.W.focusTextAreaInsteadOfWorkbench&&eR.current&&eE&&"file"===eE.type&&!eN){eR.current=!1;let e=ew.current;e?e.focus():ea.current?.focus()}},u=[ek,eN,ea,eE,ew],en[12]=ek,en[13]=eN,en[14]=ew,en[15]=ea,en[16]=eE,en[17]=d,en[18]=u):(d=en[17],u=en[18]),(0,_.useEffect)(d,u),en[19]!==ex||en[20]!==em||en[21]!==eu?(w=()=>{void 0!==em&&em!==eu&&ex()},k=[ex,em,eu],en[19]=ex,en[20]=em,en[21]=eu,en[22]=w,en[23]=k):(w=en[22],k=en[23]),(0,_.useEffect)(w,k),en[24]!==ec||en[25]!==n||en[26]!==ef?(C=()=>{if(!ef||!ec)return;let e=n.findIndex(e=>e.id===ef),t=eP.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},S=[ef,n,ec],en[24]=ec,en[25]=n,en[26]=ef,en[27]=C,en[28]=S):(C=en[27],S=en[28]),(0,_.useEffect)(C,S),en[29]!==eC?(I=async()=>{let e=eC.map(iO);ao(new File([await (0,x._6)(e).blob()],"files.zip"))},en[29]=eC,en[30]=I):I=en[30];let eA=I;en[31]!==ey||en[32]!==ex||en[33]!==n.length||en[34]!==eE?(T=e=>{if(eE){let t=void 0!==e&&e&&1===n.length;ey(eE.id),t&&(ex(),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},en[31]=ey,en[32]=ex,en[33]=n.length,en[34]=eE,en[35]=T):T=en[35];let eD=T;en[36]===Symbol.for("react.memo_cache_sentinel")?(E=[],en[36]=E):E=en[36];let eP=(0,_.useRef)(E),eO=(0,_.useRef)(null);en[37]===Symbol.for("react.memo_cache_sentinel")?(L={containerRef:eO,focusableElementFilter:iP,bindKeys:p.z0.ArrowHorizontal|p.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},en[37]=L):L=en[37],en[38]!==n?(R=[n],en[38]=n,en[39]=R):R=en[39],(0,f.G)(L,R);let eB=!(0,r.g)(eO);if(en[40]!==eS||en[41]!==ey||en[42]!==ev||en[43]!==ex||en[44]!==eT||en[45]!==ed||en[46]!==eg||en[47]!==n||en[48]!==e_||en[49]!==eL||en[50]!==ef||en[51]!==eI||en[52]!==eo){let e;en[64]!==ev||en[65]!==ex?(e=()=>{ev(),ex(),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},en[64]=ev,en[65]=ex,en[66]=e):e=en[66],A=e,U=j.toolbar,en[67]!==ed||en[68]!==e_||en[69]!==eL||en[70]!==eo?(q=(!eL||!ed)&&!eo&&(0,a.jsx)("div",{className:(0,b.$)(j.actions,j.rightDivider),children:eL?ed?null:(0,a.jsx)(g.K,{icon:h.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:e_,variant:"invisible"}):(0,a.jsx)(iM,{})}),en[67]=ed,en[68]=e_,en[69]=eL,en[70]=eo,en[71]=q):q=en[71],V=j.tabsContainer,D=j.tabs,P="tablist",O="Workbench items",B=eO,F=-1,M=iD,$=n.map((e,t)=>(0,a.jsx)(iN,{id:e.id===ef?eS:void 0,tabPanelId:e.id===ef?eI:void 0,controlHintId:eT,isActive:e.id===ef,onClick:()=>{eg(e.id),iR("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let a=eP.current[e+1]??eP.current[e-1]??eO.current;a?.focus();let i=1===n.length;ey(t.id),i&&ex(),iR("filePreviewTab.close",t)})(t),item:e,ref:e=>{eP.current[t]=e}},e.id)),en[40]=eS,en[41]=ey,en[42]=ev,en[43]=ex,en[44]=eT,en[45]=ed,en[46]=eg,en[47]=n,en[48]=e_,en[49]=eL,en[50]=ef,en[51]=eI,en[52]=eo,en[53]=A,en[54]=D,en[55]=P,en[56]=O,en[57]=B,en[58]=F,en[59]=M,en[60]=$,en[61]=V,en[62]=U,en[63]=q}else A=en[53],D=en[54],P=en[55],O=en[56],B=en[57],F=en[58],M=en[59],$=en[60],V=en[61],U=en[62],q=en[63];return en[72]!==eT?(W=(0,a.jsx)("span",{id:eT,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),en[72]=eT,en[73]=W):W=en[73],en[74]===Symbol.for("react.memo_cache_sentinel")?(H=(0,a.jsx)("span",{}),en[74]=H):H=en[74],en[75]!==D||en[76]!==P||en[77]!==O||en[78]!==B||en[79]!==F||en[80]!==M||en[81]!==$||en[82]!==W?(K=(0,a.jsxs)("div",{className:D,role:P,"aria-label":O,ref:B,tabIndex:F,onWheel:M,children:[$,W,H]}),en[75]=D,en[76]=P,en[77]=O,en[78]=B,en[79]=F,en[80]=M,en[81]=$,en[82]=W,en[83]=K):K=en[83],en[84]!==V||en[85]!==K?(G=(0,a.jsx)("div",{className:V,children:K}),en[84]=V,en[85]=K,en[86]=G):G=en[86],en[87]!==A||en[88]!==el||en[89]!==eA||en[90]!==eC.length||en[91]!==eh.length||en[92]!==eB?(z=!el&&eh.length>0&&(0,a.jsx)("div",{className:(0,b.$)(j.actions,eB&&j.leftDivider),children:(0,a.jsxs)(y.W,{children:[(0,a.jsx)(y.W.Anchor,{children:(0,a.jsx)(g.K,{icon:h.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,a.jsx)(y.W.Overlay,{children:(0,a.jsxs)(v.l,{children:[eC.length>0&&(0,a.jsxs)(v.l.Item,{onSelect:eA,children:[(0,a.jsx)(v.l.LeadingVisual,{children:(0,a.jsx)(h.FileZipIcon,{})}),"Download all files"]}),(0,a.jsxs)(v.l.Item,{onSelect:A,children:[(0,a.jsx)(v.l.LeadingVisual,{children:(0,a.jsx)(h.XIcon,{})}),"Close all tabs"]})]})})]})}),en[87]=A,en[88]=el,en[89]=eA,en[90]=eC.length,en[91]=eh.length,en[92]=eB,en[93]=z):z=en[93],en[94]!==ex||en[95]!==eL||en[96]!==eo?(Q=eL||eo?(0,a.jsx)(g.K,{variant:"invisible",icon:h.XIcon,"aria-label":"Close workbench",onClick:()=>{ex(),(0,o.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}):null,en[94]=ex,en[95]=eL,en[96]=eo,en[97]=Q):Q=en[97],en[98]!==z||en[99]!==Q?(Y=(0,a.jsxs)("div",{className:j.rightActions,children:[z,Q]}),en[98]=z,en[99]=Q,en[100]=Y):Y=en[100],en[101]!==U||en[102]!==q||en[103]!==G||en[104]!==Y?(J=(0,a.jsxs)("div",{className:U,children:[q,G,Y]}),en[101]=U,en[102]=q,en[103]=G,en[104]=Y,en[105]=J):J=en[105],en[106]===Symbol.for("react.memo_cache_sentinel")?(X=(0,b.$)(j.content,"content-preview-content"),en[106]=X):X=en[106],en[107]!==eD||en[108]!==eN||en[109]!==eE||en[110]!==eb?(Z=eb?(0,a.jsx)(iL,{}):eE?(0,a.jsx)(ib,{isOpening:eN,previewItem:eE,onClose:eD}):(0,a.jsx)(iI,{isOpening:eN}),en[107]=eD,en[108]=eN,en[109]=eE,en[110]=eb,en[111]=Z):Z=en[111],en[112]!==eS||en[113]!==eI||en[114]!==Z?(ee=(0,a.jsx)("div",{className:X,role:"tabpanel",id:eI,"aria-labelledby":eS,children:Z}),en[112]=eS,en[113]=eI,en[114]=Z,en[115]=ee):ee=en[115],en[116]!==J||en[117]!==ee?(et=(0,a.jsxs)(a.Fragment,{children:[J,ee]}),en[116]=J,en[117]=ee,en[118]=et):et=en[118],et}function iD(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function iP(e){return"tab"===e.role}function iO(e){return new File([e.value],e.name)}function iB(e){return!!e}function iF(e){return e?.type==="file"}function iM(){let e,t,n=(0,i.c)(3),{closePreviewPane:s}=(0,N.xx)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.SidebarCollapseIcon,{}),n[0]=e):e=n[0],n[1]!==s?(t=(0,a.jsx)(d.m,{text:"Close workbench",position:"bottom",relationship:"label",children:(0,a.jsx)(c.$,{variant:"invisible",iconOnly:!0,icon:e,onClick:()=>{s(),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}),n[1]=s,n[2]=t):t=n[2],t}function i$(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:j.toolbar,children:(0,a.jsx)("div",{className:(0,b.$)(j.actions,j.rightDivider),children:(0,a.jsx)(iM,{})})}),(0,a.jsx)("div",{className:(0,b.$)(j.content),children:(0,a.jsx)(w.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function iV(e){let t,n,s,r,l,o=(0,i.c)(17),{returnFocusRef:c,disableResourcePanel:d,disableActionsMenu:m,useXCloseButton:p,className:h}=e,f=void 0!==d&&d,g=void 0!==m&&m,y=void 0!==p&&p,v=(0,_.useId)(),{contentPreviewRef:x}=(0,N.xx)(),w=(0,N.tZ)(),k=(0,N.wI)()&&j.resourcePanelOpen;o[0]!==h||o[1]!==k?(t=(0,b.$)(j.container,k,h),o[0]=h,o[1]=k,o[2]=t):t=o[2];let C=w?x:void 0;return o[3]!==v?(n=(0,a.jsx)("h2",{id:v,className:"sr-only",children:"Workbench"}),o[3]=v,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(i$,{}),o[5]=s):s=o[5],o[6]!==g||o[7]!==f||o[8]!==c||o[9]!==y?(r=(0,a.jsx)(u.t,{fallback:s,children:(0,a.jsx)(iA,{returnFocusRef:c,disableResourcePanel:f,disableActionsMenu:g,useXCloseButton:y})}),o[6]=g,o[7]=f,o[8]=c,o[9]=y,o[10]=r):r=o[10],o[11]!==v||o[12]!==t||o[13]!==C||o[14]!==n||o[15]!==r?(l=(0,a.jsxs)("div",{"aria-labelledby":v,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:C,children:[n,r]}),o[11]=v,o[12]=t,o[13]=C,o[14]=n,o[15]=r,o[16]=l):l=o[16],l}try{iA.displayName||(iA.displayName="ContentPreviewInner")}catch{}try{iM.displayName||(iM.displayName="CloseContentPreviewButton")}catch{}try{i$.displayName||(i$.displayName="ContentPreviewFallback")}catch{}try{iV.displayName||(iV.displayName="ContentPreview")}catch{}},99430:(e,t,n)=>{n.d(t,{b:()=>n5});var a,i,s,r,l,o=n(74848),c=n(70719),d=n(79472),u=n(18799),m=n(71315),p=n(83494),h=n(70843),f=n(15220),g=n(87555),y=n(34164),v=n(96540),x=n(70170),b=n(56051),_=n(5524),w=n(96459),j=n(53627),N=n(82603);function k({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:a,viewerLogin:i,setFileFilterState:s}){let[r]=(0,w.o)(),{data:l}=(0,N.dG)({basePath:e}),{filterText:c,fileExtensions:d,unselectedFileExtensions:u,showOnlyOwnedFiles:m,showDeletedFiles:p,showOnlyManifestFiles:h,showVendoredFiles:f,showViewedFiles:g}={...n},{canSeeDeletedFilesFilter:y,canSeeOnlyManifestFilesFilter:k,canSeeVendorFilesFilter:C}=t,{canSeeCodeownersFilter:S}=t,I=0;l&&(S=l.isViewerOneOfMultipleCodeowners,I=Object.values(l.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let T=(0,v.useRef)((0,x.s)(e=>E({filterText:e}),250)),E=(0,v.useCallback)((e,t)=>{t&&(0,j.MM)(t),s({...e})},[s]);return(0,o.jsx)(b.kF,{filterSize:a,filterText:c,fileExtensions:d,unselectedFileExtensions:u,onFilterTextChange:e=>T.current(e),onFilterChange:(e,t)=>{let n=u;"selectFileExtension"===e?n=new Set([...u].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...u,t.extension]));let a=Object.keys(d).filter(e=>!n.has(e)),i=new URLSearchParams(r);i.delete("file-filters[]"),a.map(e=>{i.append("file-filters[]",e)}),E({unselectedFileExtensions:n},i)},additionalFilterGroups:(0,o.jsxs)(o.Fragment,{children:[S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.l.Divider,{}),(0,o.jsx)(_.l.Group,{selectionVariant:"single",children:(0,o.jsx)(_.l.Item,{selected:m,onSelect:()=>{if(!i)return;let e=new URLSearchParams(r);m?e.delete("owned-by[]",i):e.set("owned-by[]",i),E({showOnlyOwnedFiles:!m},e)},children:`Only files owned by you (${I})`})})]}),(0,o.jsx)(_.l.Divider,{}),(0,o.jsxs)(_.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[k&&(0,o.jsx)(_.l.Item,{selected:h,onSelect:()=>{let e=new URLSearchParams(r);e.set("manifests",`${!h}`),E({showOnlyManifestFiles:!h},e)},children:"Only manifest files"}),y&&(0,o.jsx)(_.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-deleted-files",`${!p}`),E({showDeletedFiles:!p},e)},children:"Deleted files"}),C&&(0,o.jsx)(_.l.Item,{selected:f,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-vendored-files",`${!f}`),E({showVendoredFiles:!f},e)},children:"Vendored files"}),(0,o.jsx)(_.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-viewed-files",`${!g}`),E({showViewedFiles:!g},e)},children:"Viewed files"})]})]})})}try{k.displayName||(k.displayName="FileFilter")}catch{}var C=n(1946),S=n(75202),I=n(59201),T=n(81960),E=n(69726),L=n(11196);let R={GroupsListContainer:"GroupsList-module__GroupsListContainer--x6dMy",GroupsListHeadingShiftLeft:"GroupsList-module__GroupsListHeadingShiftLeft--MYsIU",GroupsListItemsShiftLeft:"GroupsList-module__GroupsListItemsShiftLeft--PGMNM",GroupItem:"GroupsList-module__GroupItem--vAFCe"};var A=n(34535),D=n(30459);function P(){let{sendAnalyticsEvent:e}=(0,D.s)();return{sendPullRequestAnalyticsEvent:(0,v.useCallback)((t,n,a={})=>{e(t,n,a)},[e])}}var O=n(38621),B=n(26108),F=n(64451),M=n(86877),$=n(46720),V=n(4175),U=n(21373);let q=[{label:"Groups contain changes that do not belong together",value:"NOT_RELEVANT"},{label:"Groups are harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Groups are poorly formatted",value:"POORLY_FORMATTED"},{label:"Groups are not helpful",value:"NOT_HELPFUL"},{label:"Groups miss changes that should be included",value:"MISSED_CONTENT"},{label:"Other",value:"OTHER"}];function W({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:a=q}){let[i,s]=(0,v.useState)(!1),[r,l]=(0,v.useState)([]),[c,d]=(0,v.useState)(""),u=e=>{e.preventDefault(),s(!0),r.length&&t({type:"NEGATIVE",feedbackChoice:r,textResponse:c})};return(0,o.jsx)(f.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,o.jsxs)("form",{onSubmit:u,children:[(0,o.jsxs)(f.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(F.A,{onChange:l,required:!0,children:[(0,o.jsx)(F.A.Label,{children:"Category"}),a.map(e=>(0,o.jsxs)(M.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)($.A,{value:e.value}),(0,o.jsx)(M.A.Label,{children:e.label})]},e.value)),i&&!r.length&&(0,o.jsx)(F.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(M.A,{id:"text_response",children:[(0,o.jsx)(M.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(V.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>d(e.currentTarget.value)})]})]}),(0,o.jsx)(f.l.Footer,{children:(0,o.jsx)(U.Q,{type:"submit",disabled:i&&(!c||!r),children:"Submit"})})]})})}try{W.displayName||(W.displayName="NegativeFeedbackForm")}catch{}function H({disabled:e,onClick:t}){return(0,o.jsx)(B.K,{size:"small",variant:"invisible",disabled:e,icon:O.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})}function K({disabled:e,onClick:t,feedbackOptions:n}){let[a,i]=(0,v.useState)(!1),s=(0,v.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)(W,{onClose:()=>i(!1),onSubmit:e=>{t(e),i(!1)},returnFocusRef:s,feedbackOptions:n}),(0,o.jsx)(B.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:O.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>i(!0)})]})}try{H.displayName||(H.displayName="PositiveFeedbackButton")}catch{}try{K.displayName||(K.displayName="NegativeFeedbackButton")}catch{}var G=n(20622),z=n(53885),Q=n(94747),Y=n(48845);let J=({feedbackOptions:e})=>{let[t,n]=(0,v.useState)(),{mutate:a}=function(){let e=(0,z.e)(G.u.submitCopilotGroupsFeedback);return(0,Q.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:a})=>{let i={feedback:t};a&&(i.text_response=a),n&&n.length>0&&(i.feedback_choice=n);let s=await (0,Y.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:i}),r=await (0,Y.hp)(s);return(0,Y.R)(s,r),r}})}(),i=e=>{n(e.type),a(e)};return(0,o.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,o.jsx)(H,{disabled:!!t,onClick:i,feedbackOptions:e}),"POSITIVE"!==t&&(0,o.jsx)(K,{disabled:!!t,onClick:i,feedbackOptions:e})]})},X=()=>(0,o.jsx)(S.t,{fallback:null,children:(0,o.jsx)(J,{})});try{J.displayName||(J.displayName="Feedback")}catch{}try{X.displayName||(X.displayName="GroupsFeedback")}catch{}var Z=n(70263),ee=n(40235),et=n(97286),en=n(96379);function ea(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function ei(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}function es(e,t){let n=(0,z.e)(G.u.changeGroups),a=function({baseSha:e,headSha:t,changeGroupsURL:n}){return[G.u.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:i}=(0,I.wL)(),s=(0,I.xW)(),r=(0,v.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&ea(e))return s},[s]);return(0,et.I)({queryKey:a,queryFn:async()=>{let e=await (0,en.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return i(t),t},initialData:r(),staleTime:1/0})}function er({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:a,isLoadingState:i,isErrorState:s}){let{sendPullRequestAnalyticsEvent:r}=P(),{fullDiff:l}=(0,I.L3)(),c=(0,I.a_)(),{error:d}=es(l.headOid,l.baseOid),u=s||!!d&&!i;!function(e,t,n){let a=(0,Z.A)(),{refetch:i}=es(n,t),s=(0,v.useMemo)(()=>(0,x.n)(()=>{a()&&i()},2e3),[a,i]),r=(0,v.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,ee.x)(e,r)}(c,l.baseOid,l.headOid);let m=e.length>0;return i||u||m?(0,o.jsxs)("div",{className:R.GroupsListContainer,children:[(0,o.jsxs)(T.A,{as:"h2",className:(0,y.$)("h6 fgColor-muted d-flex flex-items-center flex-justify-between gap-2 pl-1",R.GroupsListHeadingShiftLeft),children:["Groups by Copilot",(0,o.jsx)(X,{})]}),(0,o.jsxs)(_.l,{className:R.GroupsListItemsShiftLeft,children:[(0,o.jsx)(_.l.Item,{active:void 0===t,onSelect:()=>{r("groups_list.clear_group","GROUPS_LIST_ITEM"),a()},children:"All files"},"All files"),m&&e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,o.jsx)(el,{group:e,activeGroupId:t,onSelectGroup:n},e.id))]}),!m&&(0,o.jsxs)("div",{className:(0,y.$)(R.GroupsListItemsShiftLeft,"pl-3 pb-2"),children:[i&&(0,o.jsxs)("div",{className:(0,y.$)(R.GroupItem,"d-flex flex-items-center gap-2"),children:[(0,o.jsx)(E.A,{size:"small","aria-label":"Loading Change Groups"}),(0,o.jsx)("span",{className:"fgColor-muted",children:"Grouping changes..."})]}),u&&(0,o.jsx)("div",{className:"fgColor-muted",children:"No groups created"})]})]}):null}function el({group:e,activeGroupId:t,onSelectGroup:n}){let{sendPullRequestAnalyticsEvent:a}=P(),i=(0,v.useRef)(null),s=(0,A.Z)({focusRowRef:i,mouseRowRef:i}),r=(0,o.jsx)(_.l.Item,{active:t===e.id,onSelect:()=>{a("groups_list.select_group","GROUPS_LIST_ITEM"),n(e.id)},ref:i,children:(0,o.jsx)("div",{className:(0,y.$)(R.GroupItem,"PRIVATE_TreeView-item-content-text"),children:e.name})},e.name);return s?(0,o.jsx)(L.m,{text:e.name,direction:"ne",children:r}):r}try{er.displayName||(er.displayName="GroupsList")}catch{}try{el.displayName||(el.displayName="GroupItem")}catch{}var eo=n(45270);let ec="pr-file-tree";function ed({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:a,onSetFilterState:i,allowPullRequestGroups:s=!1}){let r=(0,v.useCallback)(e=>(0,o.jsx)(eu,{...e},e.file.filePath),[]),l=(0,I.iY)(),c=(0,I.YL)(),d=(0,eo.ww)(),u=(0,I.Fl)(),m=(0,I.WA)(),p=u&&ei(u.state),h=u&&!ea(u.state);return(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s&&l&&!d&&m&&(0,o.jsx)(er,{activeGroupId:c,groups:l,onClearActiveGroup:()=>{i({activeChangeGroupId:void 0})},onSelectGroup:e=>{i({activeChangeGroupId:e})},isLoadingState:h||!1,isErrorState:p||!1}),(0,o.jsx)(S.t,{fallback:(0,o.jsx)("span",{children:"File tree failed to load."}),children:(0,o.jsxs)("div",{className:(0,y.$)("d-flex flex-column min-height-0",e),id:ec,children:[(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:t}),(0,o.jsxs)("div",{style:{overflowY:"auto"},children:[(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,o.jsx)(C.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:a,className:"pr-lg-3"})]})]})})]})}let eu=(0,v.memo)(function({file:e,...t}){let n=Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),a=(0,I.Qb)(n),i={...e,diff:{...e.diff,totalCommentsCount:a}};return(0,o.jsx)(C.ZH,{file:i,...t})});try{ed.displayName||(ed.displayName="PullRequestFileTree")}catch{}try{eu.displayName||(eu.displayName="PullRequestFile")}catch{}let em={sidebar:"PullRequestFileTree-module__sidebar--A_ZKx"};var ep=n(57352),eh=n(97949),ef=n(25407);function eg({pageLimits:e,repository:t,urls:n}){let a=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function i(){let e=new FormData;e.append("feature_name","prx_files"),await (0,en.DI)((0,ef.ZD8)({repo:t}),{body:e,method:"POST"})}let s=(0,o.jsxs)(o.Fragment,{children:[(()=>{let t=[];e.filesLimitExceeded&&t.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&t.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&t.push(`${e.annotationsLimit} alerts`);let n="";return 1===t.length?n=`${t[0]}`:2===t.length?n=`${t[0]} and ${t[1]}`:3===t.length&&(n=`${t[0]}, ${t[1]}, and ${t[2]}`),"Only the first "+n+" are currently being shown."})()," To see more,"," ",(0,o.jsx)(ep.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:i,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return a?(0,o.jsx)(eh.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:s,className:"mb-3"}):null}try{eg.displayName||(eg.displayName="PageLimitsBanner")}catch{}let ey={ProgressContainer:"ViewedFileProgress-module__ProgressContainer--ZQ1e8",FilesCountText:"ViewedFileProgress-module__FilesCountText--q4rKx",ViewedText:"ViewedFileProgress-module__ViewedText--vvFsM"},ev=({progress:e})=>(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]});function ex({totalFilesCount:e}){let t=(0,I.gi)();return 0===e?null:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,o.jsx)(ev,{progress:(t??0)/e||0}),(0,o.jsxs)("span",{className:(0,y.$)("ml-1",ey.ProgressContainer),children:[(0,o.jsx)("span",{className:ey.FilesCountText,children:t})," /"," ",(0,o.jsx)("span",{className:ey.FilesCountText,children:e})," ",(0,o.jsx)("span",{className:ey.ViewedText,children:"viewed"})]})]})}try{ev.displayName||(ev.displayName="ProgressIcon")}catch{}try{ex.displayName||(ex.displayName="ViewedFileProgress")}catch{}function eb(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var e_=n(99511),ew=n(27042),ej=n(77430);let eN={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0};function ek({authorList:e,className:t,filterState:n,onFilterStateChange:a}){return(0,o.jsxs)("div",{className:(0,y.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,o.jsx)(e_.A,{block:!0,"aria-label":"Filter comments",leadingVisual:O.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void a({...n,filterText:t})}}),(0,o.jsxs)(ew.W,{children:[(0,o.jsx)(ew.W.Anchor,{children:(0,o.jsx)(U.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:O.FilterIcon,trailingAction:O.TriangleDownIcon,children:"Filter"})}),(0,o.jsx)(ew.W.Overlay,{width:"small",children:(0,o.jsxs)(_.l,{selectionVariant:"single",children:[(0,o.jsx)(_.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void a({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,o.jsx)(_.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void a({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.l.Divider,{}),(0,o.jsxs)(_.l.Group,{children:[(0,o.jsx)(_.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,o.jsxs)(_.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return a({...n,selectedAuthor:void 0});a({...n,selectedAuthor:e})})(e.login),children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(ej.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})}try{ek.displayName||(ek.displayName="CommentsFilter")}catch{}var eC=n(61219),eS=n(98091),eI=n(58615),eT=n(72511),eE=n(82075),eL=n(26607);let eR={"file-name-overflow":"ConversationHeader-module__file-name-overflow--Ymb0e"};function eA({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:a,line:i,onToggleCollapsed:s,onNavigateToDiffComment:r,path:l,rightSideContent:c,threadId:d,headingLevel:u="h3"}){let m=(0,eE.A)("localStorage"),[p,h]=(0,v.useState)(t);return(0,v.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d}`);null!==e&&h(JSON.parse(e))},[p,d]),(0,o.jsxs)("div",{className:(0,y.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",p&&"rounded-2",p&&"border-bottom-0"),children:[(0,o.jsx)(B.K,{"aria-label":p?"Open review comment":"Close review comment",icon:p?O.ChevronRightIcon:O.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${d}`,JSON.stringify(!p)),h(e=>!e),s()}}),(0,o.jsxs)(T.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,o.jsx)(L.m,{direction:"n",text:l,type:"label",children:(0,o.jsxs)(ep.A,{className:(0,y.$)(eR["file-name-overflow"],"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",l,"\u200E"]})}),!!i&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",i]})]}),a&&(0,o.jsx)(eL.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!a&&(0,o.jsx)(eL.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,o.jsx)(B.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:O.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),c]})}try{eA.displayName||(eA.displayName="ConversationHeader")}catch{}let eD={ThreadHeaderIconButton:"ThreadHeader-module__ThreadHeaderIconButton--RGjVM"};var eP=n(97695),eO=n(39698),eB=n(36729);function eF({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:a,threadPreview:i,headingLevel:s}){let{sendPullRequestAnalyticsEvent:r}=P(),[l,c]=(0,v.useState)(void 0),d=i.thread,u=i.previewInfo,{mutate:m}=(0,eP.H)(u.path,d?.line?`R${d?.line}`:eB.zW),{mutate:p}=(0,eO.i)(u.path,d?.line?`L${d?.line}`:eB.zW),h=async()=>{i&&d?.isResolved&&(p({threadId:i.previewInfo.threadId},{onError:()=>c("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),r("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eA,{firstCommentId:e,isCollapsed:t,isOutdated:d?.isOutdated||!1,isResolved:d?.isResolved||!1,line:d?.line,path:u.path,rightSideContent:(0,o.jsx)(B.K,{"aria-label":d?.isResolved?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:d?.isResolved?O.CheckCircleFillIcon:O.CheckCircleIcon,"data-thread-resolved":d?.isResolved,className:eD.ThreadHeaderIconButton,variant:"invisible",onClick:d?.isResolved?h:()=>{d?.isResolved||m({threadId:u.threadId},{onError:()=>c("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}),onNavigateToDiffComment:a,onToggleCollapsed:n,threadId:u.threadId,headingLevel:s}),l&&(0,o.jsxs)(eT.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(O.StopIcon,{className:"mr-2"}),l]})]})}try{eF.displayName||(eF.displayName="ThreadHeader")}catch{}var eM=n(94602);function e$({commentAuthors:e}){return e.length<1?null:(0,o.jsx)(eM.A,{children:e.map(({login:e,avatarUrl:t})=>(0,o.jsx)(ej.r,{alt:e,size:18,src:t},e))})}try{e$.displayName||(e$.displayName="PreviewAuthors")}catch{}var eV=n(73017);let eU=(0,v.memo)(function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[a,i]=(0,v.useState)(!1),s=e.commentId,r=(0,v.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),l=eq(s,e.commentsData??{comments:[]}),c=e.threadPreviewComments.length,d=`${c} previous ${1===c?"comment":"comments"}`;return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(eA,{isCollapsed:a,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>i(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eS.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),c>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(U.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:O.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:d}),(0,o.jsx)(e$,{commentAuthors:l})]})})}),(0,o.jsx)(eV.vb,{className:"markdown-body",html:function(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}(e),sx:{p:3,fontSize:1}})]})]})});function eq(e,t){let n=new Set;return(t?.comments??[]).reduce((t,a)=>{if(!a||a.id===e)return t;let i=a.author?.login??"",s=a.author?.avatarUrl??"",r=a.author?.id??"",l=a.author?.url??"";return n.has(i)||(t.push({avatarUrl:s,login:i,id:r,url:l}),n.add(i)),t},[])}try{eU.displayName||(eU.displayName="PendingCommentPreview")}catch{}let eW=(0,v.memo)(function({onNavigateToDiffComment:e,pullRequestId:t,tabSize:n,threadPreview:a,headingLevel:i}){let{thread:s,previewInfo:r}=a,{threadId:l,firstComment:c}=r,d=s?.isOutdated??!1,u=c?.id,m=r.path,p=(0,I.j5)(),{navigateToSelectedComment:h}=(0,I.Lh)(),f=(0,v.useCallback)(()=>{if(d&&r.originalDiffPathUri){let e=new URL(r.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${c?.databaseId}`,p&&c?.databaseId&&h(c?.databaseId);e()},[d,r.originalDiffPathUri,e,c?.databaseId,p,h]),[g,y]=(0,eI.M)(`panel-thread-collapsed-state-${l}`,!1),x=r.threadPreviewComments.length,b=0===x?"No replies":`${x} ${1===x?"reply":"replies"}`,_={...s,id:s?.id??"",commentsData:{comments:[]}};if(!c||!_)return null;let w=s?.subjectType==="FILE"?"FILE":`R${s?.line}`,j=eq(r.commentId,s?.commentsData??{comments:[]});return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(eF,{firstCommentId:c?.databaseId,isCollapsed:g,threadPreview:a,onNavigateToDiffComment:f,onToggleCollapsed:()=>y(!g),headingLevel:i}),!g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eS.i,{diffTableClassName:"border-0",diffLines:r?.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(eC.U,{lineMarkersKey:w,hideActions:!0,isInlineComment:!1,comment:c,filePath:m,index:0,isAnchorable:!1,isOutdated:d,isThreadResolved:s?.isResolved||!1,subjectId:t,threadId:l,originalDiffPathUri:r.originalDiffPathUri,headingLevel:"h3"},u)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(U.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:O.ChevronRightIcon,variant:"invisible",onClick:f,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:b}),(0,o.jsx)(e$,{commentAuthors:j})]})})})]})]})});try{eW.displayName||(eW.displayName="ThreadPreview")}catch{}var eH=n(4559),eK=n(26382);function eG({heading:e,description:t,icon:n,headingLevel:a="h1"}){return(0,o.jsxs)(eK.E,{children:[(0,o.jsx)(eK.E.Visual,{children:(0,o.jsx)(n,{size:"medium"})}),(0,o.jsx)(eK.E.Heading,{as:a,children:e}),t&&(0,o.jsx)(eK.E.Description,{children:t})]})}try{eG.displayName||(eG.displayName="ZeroState")}catch{}var ez=n(69510);function eQ({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:a,pullRequestId:i,isOpen:s,setThreadPreviews:r,tabSize:l}){let{data:c=[]}=(0,ez._l)({pathName:a});(0,v.useEffect)(()=>{r(c)},[c,r]);let d=(0,v.useRef)(null),u=(0,v.useMemo)(()=>(0,x.s)(eH.i,300),[]),m=c.length>0,p=(0,v.useCallback)(()=>{t()},[t]),h=c.map(t=>t&&e.has(t.previewInfo.threadId)?(0,o.jsx)(eW,{tabSize:l,threadPreview:t,onNavigateToDiffComment:p,pullRequestId:i,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,v.useEffect)(()=>{s&&u(h.length>0?`${h.length} ${1===h.length?"comment":"comments"}`:"No comments found",{element:d.current})},[s,u,h]),(0,o.jsxs)(o.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,o.jsx)(eh.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h.length>0?(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(E.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(eG,{description:"Comments will show up here as soon as there are some.",heading:m?"No comments match the current filter":"No comments on changes yet",icon:O.CommentIcon,headingLevel:"h2"})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:d})]})}let eY=(0,v.memo)(function(e){let{pathName:t,toggleSidesheetRef:n,...a}=e,[i,s]=(0,v.useState)([]),[r,l]=(0,v.useState)(()=>({...eN})),c=new Set([...i.filter(e=>{let{thread:t,previewInfo:n}=e;var a={authorLogin:n.firstComment?.author?.login??"",body:n.firstComment?.body??"",id:n.threadId,isResolved:t?.isResolved??!1,isOutdated:t?.isOutdated??!1,path:n.path},i=r;let{filterText:s,showResolvedThreads:l}=i;if(!l&&a.isResolved||!i.showOutdatedThreads&&a.isOutdated)return!1;if(s){let e=s.toLowerCase();if(!a.authorLogin.toLowerCase().includes(e)&&!a.body.toLowerCase().includes(e)&&!a.path.toLowerCase().includes(e))return!1}return!i.selectedAuthor||a.authorLogin===i.selectedAuthor}).map(e=>e.previewInfo.threadId??"")]),d=(0,v.useRef)(null),u=(0,v.useMemo)(()=>{let e=[];for(let t of i){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[i]);return a.isOpen?(0,o.jsx)(f.l,{initialFocusRef:d,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:a.onClose,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(f.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(f.l.Title,{id:e,children:"Comments"}),(0,o.jsx)(B.K,{ref:d,"aria-label":"Close comments panel",icon:O.XIcon,variant:"invisible",onClick:a.onClose})]}),(0,o.jsx)(ek,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:l})]}),children:(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(E.A,{})}),children:(0,o.jsx)(eQ,{...a,filteredThreadIds:c,pathName:t,setThreadPreviews:s})})}):null});try{eQ.displayName||(eQ.displayName="CommentsSidePanelContent")}catch{}try{eY.displayName||(eY.displayName="CommentsSidePanel")}catch{}function eJ({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:a}){let[i,s]=(0,v.useState)(!1),r=(0,v.useRef)(null),l=n.id,c=(0,I.Qb)(),{sendPullRequestAnalyticsEvent:d}=P();return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(S.t,{fallback:(0,o.jsx)(U.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:O.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(U.Q,{ref:r,"aria-label":"Open comments side panel",count:c,leadingVisual:O.CommentDiscussionIcon,size:"small",onClick:()=>{d("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eb(),s(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,o.jsx)(eY,{isOpen:i,pageLimits:t,pathName:n.pathName,pullRequestId:l,tabSize:a,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})}try{eJ.displayName||(eJ.displayName="OpenCommentsSidePanelButton")}catch{}var eX=n(86909);function eZ({className:e,filteredText:t,onFilteredTextChange:n}){return(0,o.jsx)("div",{className:e,children:(0,o.jsx)(e_.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:O.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})}try{eZ.displayName||(eZ.displayName="AlertsFilter")}catch{}let e0={annotationsHeaderFileName:"AlertsSidePanel-module__annotationsHeaderFileName--JzcsF"};function e1({databaseId:e,lineNumber:t,path:n,onNavigateToAnnotation:a}){return(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,o.jsx)(L.m,{direction:"n",text:n,type:"label",children:(0,o.jsxs)(ep.A,{className:(0,y.$)("overflow-hidden text-mono text-semibold f6 no-wrap",e0.annotationsHeaderFileName),href:`#annotation_${e}`,onClick:a,muted:!0,children:["\u200E",n]})}),(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,o.jsx)(B.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:O.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:a})]})}let e2=(0,v.memo)(function({annotations:e,onClose:t,isOpen:n,pageLimits:a,returnFocusRef:i}){let[s,r]=(0,v.useState)(""),l=new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,s)).map(e=>e.id)),c=(0,v.useRef)(null),d=e.length>0,u=(0,I.j5)(),{navigateToSelectedAnnotation:m}=(0,I.Lh)(),p=(0,v.useCallback)(e=>{u&&m(e),t()},[t,u,m]),h=e.map(e=>e&&l.has(e.id)?(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,o.jsx)(e1,{databaseId:e.databaseId,lineNumber:e.endLine,path:e.path,onNavigateToAnnotation:()=>p(e.databaseId)}),(0,o.jsx)(eX.Y,{annotation:e,inSidePanel:!0})]},e.id):null).filter(Boolean),g=(0,v.useRef)(null),y=(0,v.useMemo)(()=>(0,x.s)(eH.i,300),[]);return((0,v.useEffect)(()=>{n&&y(h.length>0?`${h.length} ${1===h.length?"alert":"alerts"}`:"No alerts found",{element:g.current})},[n,y,h]),n)?(0,o.jsxs)(f.l,{initialFocusRef:c,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:i,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(f.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(T.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,o.jsx)(B.K,{ref:c,"aria-label":"Close alerts panel",icon:O.XIcon,variant:"invisible",onClick:t})]}),(0,o.jsx)(eZ,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[a.annotationsLimitExceeded&&(0,o.jsx)(eh.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${a.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(eG,{heading:d?"No alerts match the current filter":"No alerts on changes yet",icon:O.AlertIcon})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:g})]}):null});try{e1.displayName||(e1.displayName="AnnotationHeader")}catch{}try{e2.displayName||(e2.displayName="AlertsSidePanel")}catch{}function e3({isFileTreeExpanded:e,pageLimits:t}){let[n,a]=(0,v.useState)(!1),i=(0,v.useRef)(null),s=(0,v.useCallback)(()=>a(!1),[]),r=(0,I.wI)(),{sendPullRequestAnalyticsEvent:l}=P();if(!r)return null;let c=Object.values(r),d=c.length;return d>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(S.t,{fallback:(0,o.jsx)(U.Q,{"aria-label":"The alerts side panel cannot currently be opened.",icon:O.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(U.Q,{ref:i,"aria-label":"Open alerts side panel",count:d,leadingVisual:O.AlertIcon,size:"small",onClick:()=>{l("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eb(),a(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(e2,{annotations:c,isOpen:n,pageLimits:t,returnFocusRef:i,onClose:s})]})}):null}try{e3.displayName||(e3.displayName="OpenAlertsPanelButton")}catch{}var e4=n(70109),e5=n(42255),e7=n(31604),e6=n(46251),e8=n(33578);let e9={approve:"approve",comment:"comment",requestChanges:"request changes"};var te=n(46747);let{getItem:tt,removeItem:tn,setItem:ta}=(0,eE.D)("localStorage"),ti={ReviewMenuButton:"ReviewMenuButton-module__ReviewMenuButton--uK7FN",SubmitReviewButton:"ReviewMenuButton-module__SubmitReviewButton--ZSu4L",ErrorMessage:"ReviewMenuButton-module__ErrorMessage--bglZe",ExpandSection:"ReviewMenuButton-module__ExpandSection--sAB8o",AnchoredReviewBody:"ReviewMenuButton-module__AnchoredReviewBody--nirqE"};var ts=n(29255),tr=n(55461),tl=n(15837),to=n(39183),tc=n(55255);let td={Radio:"ReviewMenu-module__Radio--i3DSd",RadioGroup:"ReviewMenu-module__RadioGroup--uQwUG",RadioText:"ReviewMenu-module__RadioText--dXY49"};function tu({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:a,viewerHasViolatedPushPolicy:i,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:l,handleReviewSubmit:c}){return e?(0,o.jsx)(p.tL,{commands:{"pull-request-files-changed:submit-review":c},children:(0,o.jsx)(tm,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:a,viewerHasViolatedPushPolicy:i,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:l})}):null}let tm=(0,v.memo)(function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:a,viewerHasViolatedPushPolicy:i,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){var l,c,d,u,m;return(0,o.jsxs)(tl.A,{name:"reviewEvent",onChange:e,className:td.RadioGroup,children:[(0,o.jsx)(tl.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,o.jsx)(tp,{checked:t===e9.comment,label:(0,tr.ZH)(e9.comment),subLabel:"Submit general feedback without explicit approval.",value:e9.comment}),(0,o.jsx)(tp,{checked:t===e9.approve,disabled:!n.includes("APPROVE"),label:(0,tr.ZH)(e9.approve),subLabel:r?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes.",value:e9.approve,disabledTooltip:(l=s,c=!!i,d=n,l?"Pull request authors can't approve their own pull requests.":c?"Users that pushed changes to this pull request after it was opened can't approve":d.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests")}),(0,o.jsx)(tp,{checked:t===e9.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:(u=s,m=n,u?"Pull request authors can't request changes on their own pull requests.":m.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"),label:(0,tr.ZH)(e9.requestChanges),value:e9.requestChanges,subLabel:a?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})});function tp({checked:e,disabled:t,disabledTooltip:n,label:a,subLabel:i,value:s}){let r=(0,o.jsxs)(M.A,{disabled:t,children:[(0,o.jsx)(to.A,{checked:e,value:s,className:td.Radio}),(0,o.jsxs)(M.A.Label,{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"text-bold",children:a}),(0,o.jsx)("span",{className:td.RadioText,children:i})]})]});return t&&n?(0,o.jsx)(tc.A,{text:n,children:r}):r}try{tu.displayName||(tu.displayName="ReviewTypeSelector")}catch{}try{tm.displayName||(tm.displayName="ReviewRadioButtons")}catch{}try{tp.displayName||(tp.displayName="RadioButton")}catch{}var th=n(4908),tf=n(23398),tg=n(67955);function ty({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:a,open:i}=(0,th.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(tf.A,{...a(),children:[(0,o.jsx)(tf.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[i&&(0,o.jsx)(O.ChevronDownIcon,{className:"fgColor-muted"}),!i&&(0,o.jsx)(O.ChevronRightIcon,{className:"fgColor-muted"}),(0,o.jsxs)(T.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(tg.A,{children:e})]})]})}),(0,o.jsx)(v.Suspense,{fallback:(0,o.jsx)(E.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,o.jsx)(eU,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null}try{ty.displayName||(ty.displayName="ReviewCommentsSection")}catch{}var tv=n(56149);let tx=({portalName:e})=>{let t=(0,v.useRef)(null);return(0,v.useEffect)(()=>{t.current&&(0,tv.cw)(t.current,e)},[e]),(0,o.jsx)("div",{ref:t,className:"position-absolute"})};try{tx.displayName||(tx.displayName="OverlayPortalContainer")}catch{}let tb="review-menu-portal-root";function t_({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:a=!0}){let{author:i,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:l,viewerHasViolatedPushPolicy:c,viewerIsCopilotAttributed:d,comparison:u}=t,m=(0,I.ys)(),p=(0,I.HZ)(),{persistedReview:h,persistReviewToStorage:g,removePersistedReviewFromStorage:y}=function(e){let[t,n]=(0,v.useState)(!1),a=(0,v.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:tt(a),persistReviewToStorage:(0,te.d)((e,i)=>{if(!t)try{ta(a,{event:e,text:i})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{tn(a)}}}(s),x=function(e,t){let n=(0,I.BI)(e),a=(0,I.l0)();return(0,v.useMemo)(()=>{let i=e;if(void 0===n||void 0===a)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let l=0,{path:o,diffLines:c}=r,d=a[o];if(d){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let a=[];for(let i of n.threads){if(void 0===i.id)continue;let n=t.find(e=>Number(e.id)===i.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let l=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));a.push(...l)}return a}(d,n);e.length>0&&(s.push(...e),i=i.filter(t=>!e.some(e=>e.threadId===t.toString()))),c.map(e=>{let t=function(e,t,n,a,i,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let l=n.markersMap[r],o=[],c=[];if(l){for(let t of l.threads){let n;if(void 0===t.id)continue;let l=a.find(e=>Number(e.id)===t.id);if(!l)continue;let d=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=d-u),m>i&&(m=i+1);let p=s.slice(i+1-m,i+1);for(let e=0;e<p.length;e++)p[e]?.type==="HUNK"&&p.splice(0,e+1);let h=l.commentsData?.comments.slice(0,-1),f=[];for(let e of h??[])e.author&&f.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});o.push(t.id),l.commentsData&&(c=c.concat(l.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:l.id,commentId:(t.databaseId??0).toString(),isOutdated:l.isOutdated??!1,isResolved:!1,line:d,path:e,subject:{diffLines:p,endLine:d,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:l.commentsData,threadPreviewComments:f}))))}return{pendingCommentsReturnArray:c,markersFoundInLine:o}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,d,n,l,c);l++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),i=i.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let a of e){let e=t[a];if(!e)continue;let i=e.commentsData?.comments.slice(0,-1),s=[];for(let e of i??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(i,n)]},[e,n,a,t])}(m?.pendingReviewIDs??[],p),b=x?.length??0,_=i?.login===e,w=r!==e8.Q.Closed&&r!==e8.Q.Merged,j="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,N=u.headOid,[k,C]=(0,e5.A)("none"),[S,E]=(0,e5.A)("idle"),[L,R]=(0,e5.A)(),[A,D]=(0,e5.A)(h?.event??e9.comment),F=(m?.pendingReviewIDs??[]).length>0,M=(0,v.useRef)(null),$=h?.text??"",V=(0,v.useRef)($),[q,W]=(0,e5.A)(!!h?.text),H="submitting"===S||!q&&A===e9.comment&&!b,{sendPullRequestAnalyticsEvent:K}=P(),Y=(0,v.useCallback)(e=>{V.current=e,W(!!e.trim()),g(A,e)},[g,A,W]),J=(0,v.useCallback)(e=>{Object.values(e9).includes(e)&&(D(e),g(e,V.current))},[g,D]),{mutate:X}=function({onSuccess:e,onError:t}){let n=(0,z.e)(G.u.submitReview);return(0,Q.n)({mutationFn:async({body:e,event:t,headSha:a})=>(0,en.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:a}}),onSuccess:async t=>{let n=await t.json(),a=n.error||"Unknown error occurred";if(!t.ok)throw Error(a);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{y(),a&&(window.location.href=e)},onError:e=>{E("idle"),R(e.message)}}),{mutate:Z}=function({onSuccess:e,onError:t}){let n=(0,z.e)(G.u.abandonReview);return(0,Q.n)({mutationFn:async()=>(0,en.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),a=n.error||"Unknown error occurred";if(!t.ok)throw Error(a);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{y(),a&&(window.location.href=e)},onError:e=>{E("idle"),R(e.message)}}),ee=(0,v.useCallback)(()=>{H||(L&&R(void 0),E("submitting"),K("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),X({body:V.current,event:A,headSha:N}))},[L,N,A,K,R,E,H,X]),et=(0,v.useCallback)(()=>{0!==(m?.pendingReviewIDs??[]).length&&confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(L&&R(void 0),E("canceling"),K("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Z())},[Z,L,m?.pendingReviewIDs,K,R,E]),ea=(0,v.useMemo)(()=>(function({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let a=t.includes("APPROVE"),i=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case a:case i:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}})({isPROpen:w,viewerAllowedNonCommentReviewTypes:l,viewerIsAuthor:_}),[l,_,w]),ei=(0,v.useCallback)(()=>{window.innerWidth<768?C("dialog"):C("anchored"),K("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[K,C]),es=(0,v.useCallback)(()=>{C("none")},[C]),er=(0,v.useCallback)(()=>{C("none")},[C]),el=(0,v.useCallback)(()=>{"none"===k?ei():es()},[es,ei,k]),eo=(0,v.useMemo)(()=>(0,o.jsx)(tN,{initialReviewBody:$,isPROpen:w,onReviewBodyChange:Y,reviewEvent:A,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:j,viewerHasViolatedPushPolicy:c,viewerIsAuthor:_,viewerIsCopilotAttributed:d,commentsList:x,totalPendingComments:b,handleNavigateToDiffComment:er,handleReviewSubmit:ee,handleReviewEventChange:J}),[x,er,J,ee,$,w,Y,A,b,l,j,c,_,d]);if(ea.isHidden)return null;let ec=()=>(0,o.jsx)(tj,{errorMessage:L,hasPendingReviews:F,reviewSubmissionState:S,handleReviewCancel:et,handleCloseReviewDialog:es,handleReviewSubmit:ee,submitDisabled:H,reviewMenuButtonDisplayState:ea});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(U.Q,{count:b||void 0,className:ti.ReviewMenuButton,trailingAction:O.TriangleDownIcon,variant:"primary",onClick:el,size:"small",ref:M,children:["Submit ",ea.text]}),(0,o.jsx)(tx,{portalName:tb}),(0,o.jsxs)(e7.T,{open:"anchored"===k,anchorRef:M,width:"xlarge",onClose:es,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:tb},children:[(0,o.jsxs)(e6.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,o.jsxs)(T.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",ea.text]}),(0,o.jsxs)(e6.B,{direction:"horizontal",align:"center",gap:"none",children:[F&&(0,o.jsx)(B.K,{icon:O.MaximizeIcon,className:ti.ExpandSection,variant:"invisible","aria-label":"Expand this section",onClick:()=>C("dialog")}),(0,o.jsx)(B.K,{icon:O.XIcon,variant:"invisible","aria-label":"Close",onClick:es})]})]}),(0,o.jsx)("div",{className:ti.AnchoredReviewBody,children:eo}),(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(ec,{})})]}),"dialog"===k&&(0,o.jsx)(f.l,{onClose:es,returnFocusRef:M,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${ea.text}`,renderFooter:()=>(0,o.jsx)(f.l.Footer,{children:(0,o.jsx)(ec,{})}),children:eo})]})}let tw=(0,v.forwardRef)(({initialValue:e,onChange:t,...n},a)=>{let[i,s]=(0,e5.A)(e),r=(0,v.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,o.jsx)(e4.S,{...n,value:i,onChange:r,ref:a})});function tj({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:a,hasPendingReviews:i,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:l}){let c="canceling"===l,d="submitting"===l;return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsxs)(eT.A,{className:ti.ErrorMessage,variant:"danger",children:[(0,o.jsx)(O.StopIcon,{className:"mr-2"}),e]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[i?(0,o.jsx)(U.Q,{disabled:c||d,loading:c,onClick:t,tabIndex:0,variant:"danger",children:(0,o.jsxs)(e6.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,o.jsx)(U.Q,{onClick:n,disabled:c||d,children:"Cancel"}),(0,o.jsx)(U.Q,{disabled:s||d,variant:"primary",onClick:a,loading:d,className:ti.SubmitReviewButton,trailingVisual:(0,o.jsx)(ts.U,{keys:"Mod+enter",variant:"onPrimary"}),children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})}function tN({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:a,viewerAllowedNonCommentReviewTypes:i,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:c,commentsList:d,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:p,handleReviewEventChange:h}){let f=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=window.setTimeout(()=>f.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tw,{ref:f,label:"Add review comment",placeholder:"Leave a comment",sx:{flexGrow:"1",width:"100%"},initialValue:e,onChange:n,onPrimaryAction:p}),(0,o.jsx)(tu,{isPROpen:t,reviewEvent:a,viewerAllowedNonCommentReviewTypes:i,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:c,handleReviewEventChange:h,handleReviewSubmit:p}),(0,o.jsx)(ty,{totalPendingComments:u,commentsList:d,handleNavigateToDiffComment:m})]})}tw.displayName="ControlledCommentBox";try{t_.displayName||(t_.displayName="ReviewMenuButton")}catch{}try{(a=ReviewMenuBody).displayName||(a.displayName="ReviewMenuBody")}catch{}try{(i=ReviewMenuFooter).displayName||(i.displayName="ReviewMenuFooter")}catch{}try{tj.displayName||(tj.displayName="ReviewMenuFooterComponent")}catch{}try{tN.displayName||(tN.displayName="ReviewMenuBodyComponent")}catch{}var tk=n(27028),tC=n(39029);let tS={refresh:"RefreshButton-module__refresh--gOrN1"};function tI({aliveChannel:e,pathName:t}){let[n,a]=(0,v.useState)(!1);return((0,tC.Zi)(e,()=>{a(!0)},{git_updated:!0}),n)?(0,o.jsx)(U.Q,{as:ep.A,variant:"invisible",href:`${t}/files`,className:tS.refresh,leadingVisual:O.SyncIcon,size:"small",onClick:e=>{e.preventDefault(),window.location.href=`${t}/files`},children:"Refresh"}):null}try{tI.displayName||(tI.displayName="RefreshButton")}catch{}var tT=n(62935),tE=n(18096);let tL=(0,v.memo)(function({baseRefOid:e,commitOids:t,commits:n,endOid:a,onClose:i,onRangeUpdated:s,startOid:r}){let[l,c]=(0,v.useState)(()=>{if(!r||!a)return;let e=r?t.indexOf(r)+1:-1,n=a?t.indexOf(a):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),d=l?t.slice(l.start,l.end+1):[];return(0,o.jsxs)(tE.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:i,onClearSelection:()=>{c(void 0)},onSubmit:()=>{let n,o;if(l&&(l.start>0||l.end<t.length-1)&&(n=l.start>0?t[l.start-1]:e,o=t[l.end]),n===r&&o===a)return void i();n&&o?l&&l.start===l.end?s({type:"single",oid:o}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:o}):s({type:"unfiltered"})},children:[(0,o.jsx)(_.l,{children:n.map(e=>{let n=d.includes(e.oid);return(0,o.jsxs)(_.l.Item,{selected:n,onSelect:()=>((e,n)=>{let a,i=t.indexOf(e);if(l){if(l.start!==l.end||"removed"!==n){var s,r;let e,t,{newStartIndex:o,newEndIndex:c}=(s=l.start,r=l.end,"added"===n?(e=Math.min(i,s),t=Math.max(i,r)):i===s?(e=s+1,t=r):(e=s,t=i-1),{newStartIndex:e,newEndIndex:t});a={start:o,end:c}}}else a="added"===n?{start:i,end:i}:void 0;c(a)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,o.jsxs)(_.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,o.jsx)(tT.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,o.jsx)(tE.X.Footer,{})]})});try{tL.displayName||(tL.displayName="CommitsSelector")}catch{}let tR="All commits",tA={default:{variant:"default",leadingVisual:O.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}};function tD({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:a="default"}){let{endOid:i,startOid:s,baseRefOid:r}=(0,eo.Xv)(),l=(0,eo.ww)(),c=(0,v.useMemo)(()=>t.map(e=>e.oid),[t]),d=c[c.length-1],u=!!n&&s===n&&i===d,[m,p]=(0,v.useState)(!1),[h,f]=(0,v.useState)(!1),g=(0,v.useMemo)(()=>{if(!s)return;if(s===r)return c[0];let e=c.findIndex(e=>e===s);if(!(e<0))return c[e+1]},[r,c,s]),y=function({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:tR}({endOid:i,startOid:s,firstCommitInRange:g}),x=function({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let a=e.indexOf(n),i=e.indexOf(t);if(a>-1&&i>-1)return`${i-a+1} commits...`}return"Specific commit\u2026"}({endOid:i,firstCommitInRange:g,commitOids:c}),{sendPullRequestAnalyticsEvent:b}=P(),w=t=>{f(!1),e(t)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ew.W,{open:m,onOpenChange:e=>{p(e),e&&b("commits_menu.open","COMMITS_MENU")},children:[(0,o.jsx)(ew.W.Anchor,{children:(0,o.jsx)(U.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:tA[a].leadingVisual,size:"small",variant:tA[a].variant,trailingAction:O.TriangleDownIcon,children:y})}),(0,o.jsx)(ew.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(_.l,{selectionVariant:"single",children:[(0,o.jsx)(_.l.Item,{selected:!l,onSelect:()=>{e({type:"unfiltered"})},children:tR}),n&&d&&n!==d&&(0,o.jsx)(_.l.Item,{selected:u,onSelect:()=>w({type:"range",fromPRBase:n===r,baseOid:n,endOid:d}),children:"Changes since your last review"}),(0,o.jsx)(_.l.Divider,{}),(0,o.jsx)(_.l.Item,{selected:l&&!u,onSelect:()=>{b("commits_menu.select_commit","COMMITS_MENU_ITEM"),p(!1),f(!0)},children:x})]})})]}),h&&(0,o.jsx)(tL,{baseRefOid:r||"",commitOids:c,commits:t,endOid:i,startOid:s,onClose:()=>f(!1),onRangeUpdated:w})]})}try{tD.displayName||(tD.displayName="CommitsDropdown")}catch{}function tP({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:a,lastReviewOid:i,variant:s}){return(0,o.jsx)(tD,{commits:a,lastReviewOid:i,onRangeUpdated:a=>{let i;if("unfiltered"===a.type)i=(0,ef.jrm)({owner:e,repo:t,number:n});else if("range"===a.type){let s=a.fromPRBase?void 0:a.baseOid;i=(0,ef.nSV)({owner:e,repo:t,number:n,base:s,head:a.endOid})}else i=(0,ef.yIb)({owner:e,repo:t,number:n,commit:a.oid});window.location.href=i},variant:s})}try{tP.displayName||(tP.displayName="ChangesSelector")}catch{}var tO=n(33644),tB=n(2694),tF=n(81070),tM=n(33195);let t$={"is-stuck":"PullRequestFilesToolbar-module__is-stuck--pCXhL","show-when-stuck":"PullRequestFilesToolbar-module__show-when-stuck--ONyyF","hide-when-stuck":"PullRequestFilesToolbar-module__hide-when-stuck--WUhjy","pr-sticky-title":"PullRequestFilesToolbar-module__pr-sticky-title--Fu24T","file-controls":"PullRequestFilesToolbar-module__file-controls--XN2fA","file-controls-navigation":"PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo","file-controls-divider":"PullRequestFilesToolbar-module__file-controls-divider--oWuSw",toolbar:"PullRequestFilesToolbar-module__toolbar--bXrnB","simple-toolbar":"PullRequestFilesToolbar-module__simple-toolbar--q_1hU"};var tV=n(21968),tU=n(34261),tq=n(89155),tW=n(73783),tH=n(81355),tK=n(61583);function tG(){let e=(0,I.mU)(),t=(0,I.$W)(e),{selectedPathDigest:n}=(0,tH.U)(),a=(0,v.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),i=(0,v.useCallback)(e=>{(0,tK.pk)(`diff-${e}`),(0,j.kd)(window.location.href)},[]);return{navigateToPrevious:(0,v.useCallback)(()=>{if(t.length>0){let e;e=a<=0?t.length-1:a-1;let n=t[e];n&&i(n.pathDigest)}},[a,t,i]),navigateToNext:(0,v.useCallback)(()=>{if(t.length>0){let e;e=a>=t.length-1||a<0?0:a+1;let n=t[e];n&&i(n.pathDigest)}},[a,t,i]),currentPathDigest:n,currentIndex:a>=0?a:void 0}}var tz=n(29295);let tQ={PopoverContainer:"SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",PopoverContent:"SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",Heading:"SingleFileModeOnboardingPopover-module__Heading--BRcrc"};var tY=n(21067),tJ=n(76648);function tX(e){return 0===(function(){let e=(0,tJ.B)();return e?(e.userNotices??[]).filter(e=>!e.dismissed):[]})().filter(t=>t.name===e).length}let tZ="single_file_mode";function t0(){let e=tX(tZ),t=(0,I.j5)(),[n,a]=(0,v.useState)(!0),{dismissNotice:i}=function(e){let t=tX(e);return{dismissNotice:(0,v.useCallback)(()=>{(0,tY.M3)()&&!t&&(0,en.DI)((0,ef.VB1)({noticeName:e}),{method:"POST"})},[t,e])}}(tZ);return!t||e?null:(0,o.jsx)(tz.A,{className:tQ.PopoverContainer,open:n,children:(0,o.jsxs)(tz.A.Content,{className:(0,y.$)("d-flex flex-column gap-2",tQ.PopoverContent),children:[(0,o.jsx)(T.A,{as:"h3",variant:"small",className:tQ.Heading,children:"You're in single-file mode"}),(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,o.jsxs)("p",{children:["Use the ",(0,o.jsx)("strong",{children:"Previous"})," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(U.Q,{onClick:()=>{i(),a(!1)},children:"OK, got it"})})]})})}try{t0.displayName||(t0.displayName="SingleFileModeOnboardingPopover")}catch{}var t1=n(44569);function t2(){let e=(0,t1.zw)(),{navigateToPrevious:t,navigateToNext:n}=tG();return(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsxs)(tW.A,{children:[(0,o.jsx)(B.K,{icon:O.ChevronUpIcon,"aria-label":e?"Previous file (K)":"Previous file",size:"small",onClick:t,"data-hotkey":"k"}),(0,o.jsx)(B.K,{icon:O.ChevronDownIcon,"aria-label":e?"Next file (J)":"Next file",size:"small",onClick:n,"data-hotkey":"j"})]}),(0,o.jsx)(t0,{})]})}try{t2.displayName||(t2.displayName="ReviewNavigationButtonGroup")}catch{}var t3=n(91747),t4=n(3585);function t5(e){let t=new Map;if(!e)return t;for(let[n,a]of Object.entries(e))for(let e of Object.values(a))for(let a of e?.threads??[])for(let e of a.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}var t7=n(3252),t6=n(88008);function t8({aliveChannel:e,repository:t,pullRequest:n,bannersData:a,urls:i,user:s,...r}){let{data:{pullRequest:l}}=(0,tU.W)();(0,tU.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:a,urls:i,user:s}),(0,tq.F)(e);let c={...n,...l};return(0,o.jsx)(t9,{repository:t,pullRequest:c,...r})}function t9({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:a,isFileTreeExpanded:i,lastReviewOid:s,pageLimits:r,pullRequest:l,repository:c,shouldShowViewedFilesCount:d,totalFilesCount:u,treeToggleElement:p}){let h=(0,t3.u)("batch_suggested_changes"),{mutate:f}=function(){let e=(0,I.Kp)(),{updateWhitespace:t}=(0,I.yo)();return(0,Q.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${G.u.updateWhitespacePreference}`,a=await (0,Y.q$)(n,{method:"POST",body:{w:+!!t}}),i=await (0,Y.hp)(a);return(0,Y.R)(a,i),i},onSuccess:e=>{t(e.ignoreWhitespace)}})}(),{clearSuggestionBatch:g,removeSuggestionFromBatch:x}=(0,I.xJ)(),{mutate:b}=function(e,t){let n=(0,z.e)(G.u.submitSuggestedChanges),a=(0,I.WK)(),i=(0,I.qL)(),{clearSuggestionBatch:s}=(0,I.xJ)();return(0,Q.n)({mutationFn:async({currentOid:e,message:t})=>{let s=function(e,t){if(!e||0===t.length)return[];let n=t5(e),a=[];for(let e of t){let t=n.get(e);if(!t)continue;let{comment:i,path:s}=t,r=(0,t7.T)(i.body);r&&a.push({threadId:String(e),path:s,suggestion:r})}return a}(i,a.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,en.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),l=await (0,Y.hp)(r);return(0,Y.R)(r,l),l},onSuccess:()=>{s(),(0,t6.hW)(e,t),m.cg?.location.reload()}})}(l.pathName,l.comparison.headOid),{mutate:w}=function(){let e=(0,I.Kp)(),{updateChangeGroupPreference:t}=(0,I.wL)(),{updateDiffFilter:n}=(0,I.or)();return(0,Q.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${G.u.updateShowChangeGroupsPreference}`,a=await (0,Y.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),i=await (0,Y.hp)(a);return(0,Y.R)(a,i),i},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})}(),j=(0,I.WA)(),N=l.pathName,{hideWhitespace:k,fullDiff:C}=(0,I.L3)(),[S,T]=(0,v.useState)(!1),E=d||!i,R=(0,I.j5)(),A=(0,I.RH)(),D=(0,I.WK)(),P=(0,I.qL)(),[O,B]=(0,v.useState)(!1),F=(0,I.Kp)(),M=(0,I.L3)(),$=function(e,t){if(!e||0===t.length)return[];let n=t5(e),a=[];for(let e of t){let t=n.get(e);t&&a.push({commentDatabaseId:e,path:t.path})}return a}(P,D.activeBatch),V=$.length,[q,W]=(0,tB.B)(e=>{e[0]&&T(!e[0].isIntersecting)}),H=(0,v.useCallback)(e=>{x(e),(0,t6.CE)(F,M.fullDiff.headOid,D.activeBatch.filter(t=>t!==e))},[x,D,F,M]),K=(0,v.useCallback)(()=>{B(!0)},[]),J=(0,v.useCallback)(()=>{B(!1)},[]),X=(0,v.useCallback)(()=>{g(),(0,t6.hW)(F,M.fullDiff.headOid),J()},[g,F,M,J]),Z=(0,v.useCallback)((e,t,n)=>{b({message:e,currentOid:C.headOid},{onSuccess:()=>{J(),n()},onError:e=>{t(e)}})},[C,b,J]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tF.X,{sx:{visibility:"hidden",height:"1px"},onObserve:q,onUnobserve:W}),(0,o.jsxs)(e6.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,y.$)(tO.A.stickyHeader,t$.toolbar,S&&t$["is-stuck"]),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,o.jsxs)(e6.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,o.jsx)("div",{children:p}),(0,o.jsx)("div",{className:t$["show-when-stuck"],children:(0,o.jsx)(tM.u,{state:l.state})}),(0,o.jsx)("div",{className:t$["hide-when-stuck"],children:(0,o.jsx)(tP,{commits:t,lastReviewOid:s,ownerLogin:c.ownerLogin,pullRequestNumber:l.number,repositoryName:c.name})}),(0,o.jsxs)(e6.B,{direction:"vertical",gap:"none",className:(0,y.$)(t$["show-when-stuck"],"min-width-0"),children:[(0,o.jsxs)("div",{className:"d-flex mb-n1",children:[(0,o.jsx)(L.m,{type:"label",direction:"s",text:l.title,children:(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:(0,y.$)("f5 text-bold overflow-hidden no-wrap",t$["pr-sticky-title"]),children:l.title})})}),(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",l.number]})]}),(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,o.jsx)(tP,{commits:t,lastReviewOid:s,ownerLogin:c.ownerLogin,pullRequestNumber:l.number,repositoryName:c.name,variant:"condensed"}),(0,o.jsxs)("div",{className:"d-none d-lg-flex flex-items-center min-width-0",children:[(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,o.jsx)(tV.O,{author:l.author.login,baseBranch:l.baseBranch,baseRepositoryOwnerLogin:c.ownerLogin,baseRepositoryName:c.name,commitsCount:l.commitsCount,headBranch:l.headBranch,headRepositoryOwnerLogin:l.headRepositoryOwnerLogin,headRepositoryName:l.headRepositoryName,isInAdvisoryRepo:l.isInAdvisoryRepo,mergedBy:l.mergedBy,state:l.state,pullRequestId:l.id,pullRequestNumber:l.number,repositoryId:c.id})]})]})]})]}),(0,o.jsxs)(e6.B,{direction:"horizontal",align:"center",children:[(0,o.jsx)(tI,{aliveChannel:l.aliveChannel,pathName:N}),(0,o.jsxs)("div",{className:t$["file-controls"],children:[d&&(0,o.jsx)(ex,{totalFilesCount:u}),!i&&a,R&&u>1&&(0,o.jsx)("div",{className:t$["file-controls-navigation"],children:(0,o.jsx)(t2,{})})]}),E&&(0,o.jsx)("div",{className:t$["file-controls-divider"],"data-testid":"file-controls-divider"}),A&&h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.Q,{variant:"danger",size:"small",onClick:X,children:"Discard batch"}),(0,o.jsxs)(U.Q,{variant:"primary",size:"small",onClick:K,children:["Commit suggestions ",(0,o.jsx)(tg.A,{className:"ml-1 color-fg-inherit",children:V})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eJ,{pageLimits:r,pullRequest:l,isFileTreeExpanded:i}),(0,o.jsx)(e3,{pageLimits:r,isFileTreeExpanded:i}),n&&(0,o.jsx)(t_,{currentUserLogin:n,pullRequest:l,repository:c}),(0,o.jsx)(tk.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:e=>{f({hideWhitespace:e})},defaultHideWhitespace:k,small:!0,additionalPreferences:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.l.Divider,{}),(0,o.jsx)(_.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(_.l.Item,{selected:j,onSelect:()=>{w({showChangeGroups:!j})},children:["Show changes by group",(0,o.jsx)(_.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]}):void 0})]})]})]}),O&&(0,o.jsx)(t4.$,{authorLogins:[],batchSize:D.activeBatch.length,onClose:J,onCommit:Z,defaultCommitMessage:"Apply suggestions from code review",dialogTitle:`Commit ${1===D.activeBatch.length?"suggestion":"suggestions"}`,suggestions:$.map(e=>({commentDatabaseId:e.commentDatabaseId,path:e.path})),onRemoveSuggestion:H,onDiscardBatch:X})]})}try{t8.displayName||(t8.displayName="LivePullRequestFilesToolbar")}catch{}try{t9.displayName||(t9.displayName="PullRequestFilesToolbar")}catch{}let ne={L:"LEFT",R:"RIGHT"};function nt(e){return"L"===e||"R"===e}let nn={Container:"DiffComparisonViewer-module__Container--nndHZ",HiddenPane:"DiffComparisonViewer-module__HiddenPane--pMKU7",PaneContain:"DiffComparisonViewer-module__PaneContain--PQMad",PaneOverflowVisible:"DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",Pane:"DiffComparisonViewer-module__Pane--FbQgQ",MobileExpanded:"DiffComparisonViewer-module__MobileExpanded--w1t6O",TreeExpanded:"DiffComparisonViewer-module__TreeExpanded--sy49K",MainContentHidden:"DiffComparisonViewer-module__MainContentHidden--rHQNo",Content:"DiffComparisonViewer-module__Content--Cv2ab",SkeletonWrapper:"DiffComparisonViewer-module__SkeletonWrapper--eZhhq",SkeletonIconWrapper:"DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ"};var na=n(5981),ni=n(24798),ns=n(50129);function nr({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:a,treeToggleElement:i}){let[s,r]=(0,v.useState)(!1),l=(0,I.j5)(),c=n||!t,[d,u]=(0,tB.B)(e=>{e[0]&&r(!e[0].isIntersecting)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tF.X,{sx:{visibility:"hidden",height:"1px"},onObserve:d,onUnobserve:u}),(0,o.jsxs)(e6.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,y.$)(tO.A.stickyHeader,t$["simple-toolbar"],s&&t$["is-stuck"]),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,o.jsx)(e6.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:i})}),(0,o.jsxs)(e6.B,{direction:"horizontal",align:"center",children:[(0,o.jsxs)("div",{className:t$["file-controls"],children:[n&&(0,o.jsx)(ex,{totalFilesCount:a}),!t&&e,l&&a>1&&(0,o.jsx)("div",{className:t$["file-controls-navigation"],children:(0,o.jsx)(t2,{})})]}),c&&(0,o.jsx)("div",{className:t$["file-controls-divider"],"data-testid":"file-controls-divider"}),(0,o.jsx)(tk.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"]})]})]})]})}try{nr.displayName||(nr.displayName="BasicDiffComparisonViewToolbar")}catch{}var nl=n(8624),no=n(94195),nc=n(54571),nd=n(71833),nu=n(19976);function nm(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(eK.E,{border:!1,spacious:!0,children:(0,o.jsx)(eK.E.Heading,{children:"No files matched your search"})})})}try{nm.displayName||(nm.displayName="FilesChangedFilterBlankSlate")}catch{}var np=n(59523),nh=n(87459),nf=n(66358);function ng({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:a}){let i=(0,v.useId)(),s=(0,N.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:l,ruleLineNumber:c,ruleUrl:d}=s.data;if(!(r||l.length>0))return null;let u=ny(r,l,c,a);return(0,o.jsx)(L.m,{id:i,"aria-label":u,text:u,children:d?(0,o.jsx)(ep.A,{"aria-labelledby":i,href:d,className:t,muted:!r,children:(0,o.jsx)(O.ShieldLockIcon,{})}):(0,o.jsx)(O.ShieldLockIcon,{className:t})})}function ny(e,t,n,a){let i="Owned by ",s=t;return e&&(i+="you",a&&(s=t.filter(e=>e!==`@${a}`)),s.length>0&&(i+=" along with ")),i+=s.join(", "),n&&(i+=` (from CODEOWNERS line ${n})`),i}try{ng.displayName||(ng.displayName="CodeownersBadge")}catch{}var nv=n(78252),nx=n(31675);let nb={hiddenIcon:"BlobActionsMenu-module__hiddenIcon--EJrTU"};function n_({oid:e,path:t,repo:n,branchName:a,isViewable:i=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:l=!0,copilotDiffChatProps:c,returnToPullRequestPath:d,onCommentOnFile:u,onCopyPath:m,onExpandLines:p,areLinesExpanded:h,richDiffToggle:f,codeownersText:g,codeownersUrl:y}){return(0,o.jsxs)(ew.W,{children:[(0,o.jsx)(ew.W.Anchor,{children:(0,o.jsx)(B.K,{icon:O.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,o.jsx)(ew.W.Overlay,{children:(0,o.jsxs)(_.l,{children:[f?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_.l.Item,{className:nx.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)("span",{className:f.isRichDiff?nb.hiddenIcon:void 0,children:(0,o.jsx)(O.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(_.l.Item,{className:nx.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)("span",{className:f.isRichDiff?void 0:nb.hiddenIcon,children:(0,o.jsx)(O.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(_.l.Divider,{className:nx.A["hide-on-medium-up"]})]}),c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nv.$,{...c}),(0,o.jsx)(_.l.Divider,{})]}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_.l.Item,{className:nx.A["hide-on-desktop"],onSelect:u,children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(_.l.Divider,{className:nx.A["hide-on-desktop"]})]}),m&&(0,o.jsxs)(_.l.Item,{className:nx.A["hide-on-desktop"],onSelect:m,children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.CopyIcon,{})}),"Copy file name"]}),p&&(0,o.jsxs)(_.l.Item,{className:nx.A["hide-on-desktop"],onSelect:p,children:[(0,o.jsx)(_.l.LeadingVisual,{children:h?(0,o.jsx)(O.FoldIcon,{}):(0,o.jsx)(O.UnfoldIcon,{})}),(0,o.jsx)("span",{children:h?"Collapse non-diff lines":"Expand all lines"})]}),(m||p)&&(0,o.jsx)(_.l.Divider,{className:nx.A["hide-on-desktop"]}),(0,o.jsxs)(_.l.LinkItem,{href:(0,ef.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.EyeIcon,{})}),"View file"]}),a&&l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_.l.LinkItem,{href:(0,ef.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:a,returnToPrPath:d}),inactiveText:r?void 0:"Action unavailable",children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(_.l.LinkItem,{variant:"danger",href:(0,ef.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:a}),inactiveText:s?void 0:"Action unavailable",children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.l.Divider,{className:nx.A["hide-on-desktop"]}),(0,o.jsxs)(_.l.LinkItem,{className:nx.A["hide-on-desktop"],href:y,children:[(0,o.jsx)(_.l.LeadingVisual,{children:(0,o.jsx)(O.ShieldLockIcon,{})}),g]})]})]})})]})}try{n_.displayName||(n_.displayName="BlobActionsMenu")}catch{}let nw={viewed:"MarkAsViewedButton-module__viewed--czELS",iconOnly:"MarkAsViewedButton-module__iconOnly--tQ1ah"};function nj({basePath:e,inactive:t=!1,inactiveTooltip:n,path:a,setIsCollapsed:i}){let s=(0,I.Mv)(a),{mutate:r}=function(e,{onSuccess:t,onError:n}){let a=`${e}/file_review`;return(0,Q.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,en.Sr)(`${a}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),i=await n.json();if(n.ok)return i;throw Error(i.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})}(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:l}=(0,I.Ud)(),c=(0,I.j5)(),{navigateToNext:d}=tG(),u=(0,v.useCallback)(()=>{t||(r({viewedStatus:!s,path:a}),l(a,!s),c?d():i(!s))},[r,t,s,a,l,c,d,i]),m=(0,v.useMemo)(()=>s?(0,o.jsx)(O.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),p=(0,o.jsx)(U.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,y.$)(s&&nw.viewed,nw.iconOnly),onClick:u,children:(0,o.jsx)("span",{className:nx.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,o.jsx)(L.m,{text:n,children:p}):p}try{nj.displayName||(nj.displayName="MarkAsViewedButton")}catch{}var nN=n(79634);async function nk({basePath:e,fullDiff:t,selectedRange:n,path:a,signal:i}){let s=new URLSearchParams;s.append("path",a),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${G.u.richDiff}?${s.toString()}`;try{let e=await (0,en.Sr)(r,{signal:i});if(i?.aborted)return;let t=await (0,Y.hp)(e);return(0,Y.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var nC=n(15697);function nS(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,a="DELETION"===e.type;return n&&e.right===t.line||a&&e.left===t.line}function nI({basePath:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:a,headRepoOwner:i,diffLines:s,path:r,isSelected:l=!1,reviewed:c,...d}){let u=(0,I.JA)(),{fetchContextLines:p}=(0,I.QV)(),h=(0,I.L3)().hideWhitespace?"1":"0",f=function({basePath:e,path:t}){let n=(0,I.L3)(),a=function({basePath:e,selectedRange:t,path:n}){return[G.u.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}({basePath:e,path:t,...n});return{fetcher:nk,key:a,args:{path:t,basePath:e,...n,signal:void 0}}}({basePath:e,path:r}),g=(0,v.useRef)(null),x=(0,v.useRef)(null),{helpUrl:b}=(0,nN.X)(),_=(0,I.kN)(r),{updateAllFilesCollapsedStatus:w,updateFileCollapsedStatus:k}=(0,I.JR)(),C=(0,I.GR)(),[S,T]=(0,v.useState)(!1),[E,L]=(0,v.useState)(d.richDiff?.defaultToRichDiff??!1),R=(0,I.Fm)(r),A=(0,I.ne)(r),D=(0,N.dG)({basePath:e}),P=(0,N.hG)({diffPath:r,codeownersData:D?.data}),F=(0,v.useMemo)(()=>A?A[eB.zW]?.threads??[]:[],[A]),M=(0,v.useMemo)(()=>u?function(e,t,n){let a=[],i=t.hunkPositions[n];if(!i)return a;let s=0,r=i[0];if(!r)return a;let l=!1;for(let t of e)if(l){if(a.push(t),nS(t,r.endLine)&&(l=!1,!(r=i[++s])))break}else nS(t,r.startLine)&&(l=!0,a.push(r.headerLine),a.push(t));return a}(s,u,r):s,[u,r,s]),$=(0,v.useCallback)(()=>{k(r,!1)},[r,k]),V=(0,v.useCallback)(()=>{C()&&_&&$()},[_,$,C]),U=(0,v.useCallback)(()=>{(0,j.K3)(),V()},[V]),q=(0,v.useCallback)(()=>{(0,tK.o9)()===d.pathDigest&&_&&$()},[d.pathDigest,$,_]),W=(0,v.useCallback)(()=>{V(),q()},[V,q]);(0,v.useEffect)(()=>{W()},[]),(0,v.useEffect)(()=>(m.cg?.addEventListener("hashchange",W),()=>{m.cg?.removeEventListener("hashchange",W)}),[W]);let H=(0,v.useCallback)((e,t,n)=>{if(n&&n.altKey)w(e);else{if(k(t,e),!e)return;m.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();e&&e.top<62&&m.cg?.scrollTo({top:e.top+m.cg.scrollY-62})})}},[w,k]),K=(0,v.useRef)((0,nC.B)({diffSummary:R})),[z,Q]=(0,v.useState)(!1),Y=(0,v.useCallback)(async e=>{U(),K.current.push(e),p({contextLineRanges:K.current,path:r,w:h})},[U,p,r,h]),J=(0,v.useCallback)(async()=>{await p({contextLineRanges:[],path:r})},[p,r]),X=(0,v.useMemo)(()=>{if(d.isBinary||d.isSubmodule||d.isTooBig||(0,np.dK)({linesChanged:d.linesChanged,newTreeEntry:d.newTreeEntry,oldTreeEntry:d.oldTreeEntry,status:d.status,truncatedReason:d.truncatedReason}))return!1;if(z)return!0;if(0===M.length)return!1;if((M[1]?.blobLineNumber||0)>1)return!0;let e=M.length,t=M[e-1]?.blobLineNumber||0,n=d.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[d.isBinary,d.isSubmodule,d.isTooBig,d.linesChanged,d.newTreeEntry,d.oldTreeEntry,d.status,d.truncatedReason,M,z]),Z=(0,v.useCallback)(async()=>{let e,t;K.current=[],z||K.current.push({start:1,end:Math.max(d.oldTreeEntry?.lineCount??0,d.newTreeEntry?.lineCount??0)});let n=document.activeElement;await p({contextLineRanges:K.current,path:r,w:h}),Q(!z),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[z,d.oldTreeEntry?.lineCount,d.newTreeEntry?.lineCount,p,r,h]),ee=(0,v.useCallback)(()=>L(!E),[E]),et=(0,v.useMemo)(()=>d.richDiff?.canToggleRichDiff?{richDiff:d.richDiff,isRichDiff:E,onToggle:ee}:void 0,[d.richDiff,E,ee]),en=(0,v.useMemo)(()=>P&&(P.isOwnedByViewer||P.owners.length>0)?ny(P.isOwnedByViewer,P.owners,void 0,d.currentUser.login):void 0,[P,d.currentUser.login]),ea=(0,v.useMemo)(()=>P?.ruleUrl,[P]),ei=(0,v.useMemo)(()=>d.currentUser.canComment?()=>T(!0):void 0,[d.currentUser.canComment]),es=(0,v.useCallback)(()=>navigator.clipboard?.writeText(r),[r]),er=(0,v.useMemo)(()=>X?Z:void 0,[X,Z]),el=(0,v.useMemo)(()=>({richDiff:d.richDiff,showRichDiff:E,onToggleRichDiff:L,queryConfig:f}),[d.richDiff,E,f]),eo=(0,v.useMemo)(()=>{let e=new Set([]);return u&&e.add(nf.YR.diffStats).add(nf.YR.expandLines),e},[u]),{disabledFeatures:ec,disabledReasons:ed}=(0,v.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(nf.YR.markAsViewed),t.set(nf.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,o.jsx)(nh.oO,{loadDiff:J,...d,addFileCommentButtonRef:x,basePath:e,diffManuallyExpanded:t,fileComments:F,hiddenFeatures:eo,isAddingFileComment:S,isSelected:l,leftSideContent:(0,o.jsx)(v.Suspense,{children:(0,o.jsx)(ng,{className:(0,y.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",nx.A["hide-on-mobile"]),diffPath:r,pullRequestBasePath:e,viewerLogin:d.currentUser.login})}),rightSideContent:(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!eo.has(nf.YR.markAsViewed)&&(0,o.jsx)(nj,{path:r,basePath:e,inactive:ec.has(nf.YR.markAsViewed)||!!u,inactiveTooltip:ed.get(nf.YR.markAsViewed),setIsCollapsed:e=>H(e,r)}),d.currentUser.canComment&&(0,o.jsx)(B.K,{ref:x,icon:O.CommentIcon,"aria-label":"Comment on this file","aria-expanded":S,variant:"invisible",size:"small",onClick:()=>T(!0),className:nx.A["hide-on-mobile"]}),(0,o.jsx)(n_,{oid:"REMOVED"===d.status&&d.oldCommitOid?d.oldCommitOid:d.newCommitOid||"",path:r,repo:{name:a||d.repository.name,ownerLogin:i||d.repository.ownerLogin},isViewable:!d.isSubmodule,isDeleteable:!d.isSubmodule,isEditable:!d.isSubmodule,shouldShowEditOptions:d.currentUser.shouldDisplayEditOptions,branchName:n,returnToPullRequestPath:e,onCommentOnFile:ei,onCopyPath:es,onExpandLines:er,areLinesExpanded:z,richDiffToggle:et,codeownersText:en,codeownersUrl:ea})]}),canExpandOrCollapseLines:X,expandAllContextLines:Z,hasExpandedAllRanges:z,addInjectedContextLines:Y,onToggleCollapse:(e,t)=>H(t,r,e),path:r,ref:g,setIsAddingFileComment:T,collapsed:_,helpUrl:b,linesAdded:R?.linesAdded||d.linesAdded||0,linesChanged:R?.linesChanged||d.linesChanged||0,linesDeleted:R?.linesDeleted||d.linesDeleted||0,diffLines:M,richDiffState:el})}try{nI.displayName||(nI.displayName="PullRequestDiff")}catch{}var nT=n(81945),nE=n(29731),nL=n(8431);let nR=(0,v.memo)(function({ariaLabel:e,testId:t,id:n,approximateLineCount:a=5}){let{data:i}=(0,d.ID)(),s=i?.lineSpacing==="compact"?20:25;return(0,o.jsx)("div",{className:nL.A.diffTargetable,role:"region","aria-label":e,...(0,nE.G)(t),id:n,children:(0,o.jsx)("div",{className:"border borderColor-muted rounded-top-2",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:s*a},children:[(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{nR.displayName||(nR.displayName="DiffEntryLoadingSkeleton")}catch{}let nA=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),a=(0,t3.u)("pulls-files-skip-prefer-any-solo-entry"),[i,s]=(0,v.useState)(!1),[r,l]=(0,tB.B)(t=>{t[0]?.isIntersecting&&!i&&(s(!0),n(e,{preferAnySoloEntry:!a}))},{rootMargin:"-72px"});return(0,o.jsx)(tF.X,{onObserve:r,onUnobserve:l,children:(0,o.jsx)(nR,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{nA.displayName||(nA.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let nD=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,I.pV)(),a=(0,t3.u)("pulls-files-skip-prefer-any-solo-entry");return(0,v.useEffect)(()=>{n(e,{preferAnySoloEntry:!a})},[n,e,a]),(0,o.jsx)(nR,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nD.displayName||(nD.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let nP=(0,v.memo)(function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:a,oldTreeEntry:i,path:s,pathDigest:r,status:l}){return(0,o.jsx)(nh.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:a,oldTreeEntry:i,path:s,pathDigest:r,status:l})});try{nP.displayName||(nP.displayName="PullRequestDiffEntryErrorFallback")}catch{}var nO=n(50683),nB=n(73189);let nF=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,o.jsx)(nR,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nF.displayName||(nF.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let nM=(0,v.memo)(n$,(e,t)=>e.basePath===t.basePath&&e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing);function n$({basePath:e,currentUser:t,diffManuallyExpanded:n,headBranchName:a,headRepoName:i,headRepoOwner:s,isSelected:r,isSelectingLineOrRange:l=!1,onScrollToAndFocusEntry:c,progressiveDiffEntry:d,pullRequestGlobalRelayId:u,repository:p,testRenderFn:h}){let f=(0,I.jT)(d.path),g=(0,I.Fm)(d.path),x=(0,I.j5)();h&&h();let b=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!b.current){if(!b.current&&void 0===r){let e=m.fV.hash??"",t=(0,tK.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==d.pathDigest&&(b.current=!0)}if(r&&"HIDE"!==d.renderMode&&(!l||"RENDER"===d.renderMode)){let e=m.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;b.current=!0,c(d.pathDigest)}}},[r,l,c,d.pathDigest,d.renderMode]),"HIDE"===d.renderMode||"LAZY_AUTO_LOAD"===d.renderMode||"EAGER_AUTO_LOAD"===d.renderMode){let e=(0,o.jsx)(o.Fragment,{}),t=g?.linesChanged??5;return(g?.changeType==="REMOVED"||g?.changeType==="DELETED")&&(t=5),"HIDE"===d.renderMode?e=(0,o.jsx)(nF,{progressiveDiffEntry:d,approximateLineCount:t}):"LAZY_AUTO_LOAD"===d.renderMode?e=(0,o.jsx)(nA,{progressiveDiffEntry:d,approximateLineCount:t}):"EAGER_AUTO_LOAD"===d.renderMode&&(e=(0,o.jsx)(nD,{progressiveDiffEntry:d,approximateLineCount:t})),(0,o.jsxs)("div",{role:"region",id:`diff-${d.pathDigest}`,className:(0,y.$)(nL.A.diffTargetable,nL.A.diff),"data-targeted":r??!1,children:[(0,o.jsx)("div",{className:nL.A.diffHeaderWrapper,children:(0,o.jsx)(nO.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${d.pathDigest}`,canToggleRichDiff:!1,linesAdded:g?.linesAdded??0,linesChanged:g?.linesChanged??0,linesDeleted:g?.linesDeleted??0,newPath:d.path,patchStatus:"",path:d.path,onToggleExpandAllLines:nB.l,onToggleFileCollapsed:nB.l,onToggleDiffDisplay:nB.l,isInSingleFileMode:x})}),e]},`${d.pathDigest}_${d.path}`)}return f?(0,o.jsx)(S.t,{fallback:(0,o.jsx)(nP,{...f}),children:(0,o.jsx)(nI,{basePath:e,changeType:f.status,currentUser:t,diffLines:f.diffLines,diffManuallyExpanded:n,diffSize:f.diffSize,headBranchName:a,headRepoName:i,headRepoOwner:s,helpUrl:f.helpUrl,isBinary:f.isBinary,isSelected:r??!1,isSubmodule:f.isSubmodule,isTooBig:f.isTooBig,linesAdded:f.linesAdded,linesChanged:f.linesChanged,linesDeleted:f.linesDeleted,newCommitOid:f.newCommitOid,newTreeEntry:f.newTreeEntry,objectId:f.objectId,oldCommitOid:f.oldCommitOid,oldTreeEntry:f.oldTreeEntry,path:f.path,pathDigest:f.pathDigest,pullRequestGlobalRelayId:u,repository:p,reviewed:f.reviewed??!1,richDiff:f.richDiff,status:f.status,submodule:f.submodule,truncatedReason:f.truncatedReason})}):(0,o.jsx)(nP,{linesAdded:0,linesChanged:0,linesDeleted:0,path:d.path,pathDigest:d.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}try{nM.displayName||(nM.displayName="ProgressivePullRequestDiffEntry")}catch{}try{n$.displayName||(n$.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}function nV(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(eK.E,{border:!1,spacious:!0,children:[(0,o.jsx)(eK.E.Heading,{children:"No changes to show"}),(0,o.jsx)(eK.E.Description,{children:"This commit does not include any file changes"})]})})}try{nV.displayName||(nV.displayName="EmptyPullRequestBlankSlate")}catch{}let nU={wrapper:"PullRequestDiffsAnimation-module__wrapper--j5QjR",imageContainer:"PullRequestDiffsAnimation-module__imageContainer--ISOgX",image:"PullRequestDiffsAnimation-module__image--MMHno",firstFrameImage:"PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",animatedImage:"PullRequestDiffsAnimation-module__animatedImage--yjDlC",reducedMotionImage:"PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y"};var nq=n(69895);let nW=n.p+"mona-hifive-first-frame-0d428028d4d7.png",nH=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",nK=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",nG=()=>{let e=(0,nq.j)(),t=(0,v.useRef)(null),n=(0,v.useRef)(null);return(0,o.jsxs)("div",{className:nU.wrapper,children:[(0,o.jsxs)("div",{className:nU.imageContainer,children:[(0,o.jsx)("img",{src:nK,alt:"GIF of two octocats high fiving each other",className:(0,y.$)(nU.image,nU.animatedImage),ref:t}),(0,o.jsx)("img",{src:nW,alt:"Two octocats",className:(0,y.$)(nU.image,nU.firstFrameImage),ref:a=>{a?(a=>{let i;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let a of e)a.isIntersecting&&(i=setTimeout(()=>{a.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(a.target)},1e3))},{threshold:1});return n.current=s,s.observe(a),()=>{s.disconnect(),i&&clearTimeout(i)}})(a):n.current&&(n.current.disconnect(),n.current=null)}}),(0,o.jsx)("img",{src:nH,alt:"Two octocats high fiving each other",className:(0,y.$)(nU.image,nU.reducedMotionImage)})]}),(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},nz=(0,v.memo)(nG);try{nG.displayName||(nG.displayName="PullRequestDiffsAnimationComponent")}catch{}try{nz.displayName||(nz.displayName="PullRequestDiffsAnimation")}catch{}function nQ(){let e=(0,v.useRef)(!0),{selectedFullDiffHash:t}=(0,tH.U)(),n=(0,tK.jU)(t)??void 0,a=(0,tK.yI)(t),i=(0,v.useRef)(new Map),s=(0,v.useCallback)(()=>i.current,[]);return{onScrollToAndFocusEntry:(0,v.useCallback)((n,{focusPathName:i}={})=>{let r=s().get(n);if(!r)return;let l=r,o=r.querySelector("button");if(i&&(o=r.querySelector("a")),a){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(o=l=n)}else e.current||(l=null);if(l){let e=m.cg?.scrollY??0,t=l.getBoundingClientRect().top+e-57-60;m.cg?.scrollTo({top:t,left:0})}o&&o.focus(),e.current=!1},[s,a,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:a,getTargetableEntriesMap:s}}let nY=(0,v.memo)(nJ);function nJ({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:a,headRepoName:i,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:c,showPullRequestGroups:d}){let[u,m]=(0,v.useState)(!1),p=(0,v.useRef)(null),h=(0,I.$W)(n),f=(0,I.JA)(),{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:b}=nQ(),_=(0,I.qg)(),w=h.length;return 0===_?(0,o.jsx)(nV,{}):0===n.length?(0,o.jsx)(nm,{}):(0,o.jsxs)("div",{ref:p,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[d&&f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(ep.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",f.name]}),f.description?.trim()?(0,o.jsx)("p",{children:f.description}):null]}):null,h.map(n=>(0,o.jsx)("div",{ref:e=>{let t=y();e?t.set(n.pathDigest,e):t.delete(n.pathDigest)},children:(0,o.jsx)(nM,{basePath:e,currentUser:t,diffManuallyExpanded:u,headBranchName:a,headRepoName:i,headRepoOwner:s,pullRequestGlobalRelayId:l,isSelected:void 0===x?void 0:n.pathDigest===x,isSelectingLineOrRange:b,onScrollToAndFocusEntry:g,progressiveDiffEntry:n,repository:c})},n.pathDigest)),w>=15&&(0,o.jsx)(nz,{}),(0,o.jsx)(nu.nq,{})]})}try{nY.displayName||(nY.displayName="PullRequestDiffsList")}catch{}try{nJ.displayName||(nJ.displayName="PullRequestDiffsListUnmemoized")}catch{}var nX=n(21132);let nZ=(0,v.memo)(function({diffEntryPathDigest:e,basePath:t,currentUser:n,diffManuallyExpanded:a,filteredDiffSummaries:i,headBranchName:s,headRepoName:r,headRepoOwner:l,isSelectingLineOrRange:c,pullRequestGlobalRelayId:d,repository:u,onScrollToAndFocusEntry:m}){let p=(0,I.m9)()||e,h=(0,I.mY)().find(e=>e.pathDigest===p),f=(0,I.Fm)(h?.path||""),g=h?.path||"",x=(0,I.jT)(g),b=(0,I.j5)(),_=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{_.current||h?.loadingStatus===nX.s.Loaded&&(m(p,{focusPathName:!0}),_.current=!0)},[c,m,h?.loadingStatus,p]),!i.some(e=>e.path===g))return(0,o.jsx)(nm,{});if(h&&h.loadingStatus!==nX.s.Loaded){let e=(0,o.jsx)(nR,{ariaLabel:`Loading ${g}`,testId:`eager-load-${g}`,approximateLineCount:5,id:`diff-${g}`});return(0,o.jsxs)("div",{role:"region",id:`diff-${g}`,className:(0,y.$)(nL.A.diffTargetable,nL.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,o.jsx)("div",{className:nL.A.diffHeaderWrapper,children:(0,o.jsx)(nO.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${p}`,canToggleRichDiff:!1,linesAdded:f?.linesAdded??0,linesChanged:f?.linesChanged??0,linesDeleted:f?.linesDeleted??0,newPath:g,patchStatus:"",path:g,onToggleExpandAllLines:nB.l,onToggleFileCollapsed:nB.l,onToggleDiffDisplay:nB.l,isInSingleFileMode:b})}),e]},`${p}_${g}`)}return x?(0,o.jsxs)(S.t,{fallback:(0,o.jsx)(nP,{...x}),children:[(0,o.jsx)(nI,{basePath:t,changeType:x.status,currentUser:n,diffLines:x.diffLines,diffManuallyExpanded:a,diffSize:x.diffSize,headBranchName:s,headRepoName:r,headRepoOwner:l,helpUrl:x.helpUrl,isBinary:x.isBinary,isSelected:!1,isTooBig:x.isTooBig,linesAdded:x.linesAdded,linesChanged:x.linesChanged,linesDeleted:x.linesDeleted,newCommitOid:x.newCommitOid,newTreeEntry:x.newTreeEntry,objectId:x.objectId,oldCommitOid:x.oldCommitOid,oldTreeEntry:x.oldTreeEntry,path:x.path,pathDigest:x.pathDigest,pullRequestGlobalRelayId:d,repository:u,reviewed:x.reviewed??!1,richDiff:x.richDiff,status:x.status,submodule:x.submodule,truncatedReason:x.truncatedReason}),(0,o.jsx)(nu.nq,{})]}):(0,o.jsx)(nP,{linesAdded:0,linesChanged:0,linesDeleted:0,path:g,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{nZ.displayName||(nZ.displayName="SingleFileModePullRequestDiffEntry")}catch{}let n0=(0,v.memo)(function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:a,headRepoName:i,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l}){let c=(0,I.HZ)(),d=(0,v.useMemo)(()=>Object.values(c??{}).filter(e=>null!==e),[c])[0],u=(0,I.m9)(),{onScrollToAndFocusEntry:m,getTargetableEntriesMap:p,isSelectingLineOrRange:h}=nQ(),f=(0,I.qg)(),g=(0,I.uh)()[0],y=(0,I.zK)(),x=(0,I.mF)(),{navigateToSelectedComment:b,navigateToSelectedAnnotation:_,handleHashUpdate:w}=(0,I.Lh)(),{setSelectedHash:N}=(0,tH.U)(),k=(0,v.useRef)(!0),C=(0,I.mY)().find(e=>e.pathDigest===u),{loadMore:S}=(0,I.pV)(),T=(0,v.useCallback)(()=>{y?b(y):x&&!isNaN(Number(x))?_(Number(x)):u&&C?S(C):!u&&g?.pathDigest&&(N(g.pathDigest),(0,j.Zu)(`diff-${g.pathDigest}`))},[g?.pathDigest,S,_,b,x,y,u,C,N]);if((0,v.useEffect)(()=>{k.current&&(T(),k.current=!1)},[]),(0,v.useEffect)(()=>{let e=()=>{w()};return w(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[w]),0===f)return(0,o.jsx)(nV,{});if(0===n.length)return(0,o.jsx)(nm,{});let E=u||d?.pathDigest||g?.pathDigest;return E?(0,o.jsx)("div",{ref:e=>{let t=p();e?t.set(E,e):t.delete(E)},children:(0,o.jsx)(nZ,{diffEntryPathDigest:E,basePath:e,currentUser:t,diffManuallyExpanded:!1,filteredDiffSummaries:n,headBranchName:a,headRepoName:i,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l,onScrollToAndFocusEntry:m,isSelectingLineOrRange:h})}):null});try{n0.displayName||(n0.displayName="SingleFileModeDiffEntryNavigator")}catch{}function n1({lines:e}){return(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,o.jsx)(nT.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})}try{n1.displayName||(n1.displayName="EntireDiffLoadingSkeleton")}catch{}function n2({basePath:e,baseSha:t,forceUnifiedView:n,headSha:a,initialData:i,treeCollapsedByDefault:s,useChangeGroups:r,useInlineComments:l,useEditOptions:c,useFileTree:d,useAdvancedToolbar:u,useBasicToolbar:p}){let h=(0,v.useMemo)(()=>({useChangeGroups:r??!1,useInlineComments:l??!1,useEditOptions:c??!1,useFileTree:d??!1,useAdvancedToolbar:u??!1,useBasicToolbar:p??!1,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1}),[r,l,c,d,u,p,n,s]),f=i?i.pullRequest.comparison.headOid:a,g=i?i.pullRequest.comparison.baseOid:t;if(!f)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:y,isLoading:x}=function({basePath:e,headSha:t,baseSha:n,shouldFetch:a}){let i=new URLSearchParams;n===t?i.append("range",t??""):n&&t?i.append("range",`${n}..${t}`):t&&i.append("range",t);let s=`${e}/page_data/${G.u.baseComparisonInfo}?${i.toString()}`,r=function({basePath:e,selectedRange:t}){return[G.u.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,et.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,en.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:a})}({basePath:e,headSha:f,baseSha:g,shouldFetch:!i}),b=i??y;return(0,o.jsx)(o.Fragment,{children:b&&!x?(0,o.jsx)(ns.Kg,{basePageDataUrl:b.pullRequest.pathName,children:(0,o.jsx)(eo.Dp,{baseRefOid:b.pullRequest.comparison.baseOid,path:m.fV.pathname??"",children:(0,o.jsx)(na.v,{initData:b,children:(0,o.jsx)(n3,{...b,configOpts:h})})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:nn.SkeletonWrapper,children:(0,o.jsx)("div",{className:nn.SkeletonIconWrapper,children:(0,o.jsx)(nT.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(n1,{lines:4}),(0,o.jsx)(n1,{lines:8}),(0,o.jsx)(n1,{lines:5})]})]})})}function n3({codeowners:e,commits:t,configOpts:n,diffSummaries:a,fileFilter:i,pullRequest:s,repository:r,markers:l,pageLimits:m,urls:x,user:b,isSingleFileMode:_}){(0,v.useMemo)(()=>{if(l&&a){for(let e of a)if(e.markersMap)for(let t in e.markersMap){let n=e.markersMap[t];if(n?.threads)for(let e of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!nt(n))throw Error(`Invalid diff side character: ${n}`);let a=Number(e.slice(1)),i=-1,s="R";if(t.start){i=parseInt(t.start.slice(1));let e=t.start[0];nt(e)&&(s=e)}else i=a,s=n;return{endLine:a,endDiffSide:ne[n],startLine:i,startDiffSide:ne[s],isOutdated:!!t.outdatedReason}}(t,e),a=l.threads[Number(e.id)];if(a&&n){let{isOutdated:e,...t}=n;a.positioning=n,a.subject=t}}}}},[a,l]),(0,h.L)(!0);let w=function(e){let t=(0,d.C0)(e.viewSettings.splitPreference),n=(0,d.Qn)(e.viewSettings.hideWhitespace);return(0,v.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])}(b),{mutate:j}=(0,c.U)({onSuccess:()=>{},onError:()=>{}}),{data:C}=(0,d.ID)(w),S=(0,v.useCallback)(()=>{j({commentsPreference:C?.commentsPreference===u.sI.Visible?u.sI.Collapsed:u.sI.Visible})},[C?.commentsPreference,j]),T=(0,v.useMemo)(()=>({avatarURL:b.currentUserAvatarUrl||"",login:b.currentUserLogin||"",tabSize:b.tabSize,splitPreference:n.forceUnifiedView?"unified":C?.splitPreference??"unified",shouldDisplayComments:n.useInlineComments??!1,shouldDisplayEditOptions:n.useEditOptions??!1,lineSpacing:C?.lineSpacing??"relaxed",canComment:b.canComment,canApplySuggestion:b.canApplySuggestion,commentsPreference:C?.commentsPreference??"visible",hasCopilotAccess:b.hasCopilotAccess}),[n.forceUnifiedView,n.useEditOptions,n.useInlineComments,C?.commentsPreference,C?.lineSpacing,C?.splitPreference,b.canApplySuggestion,b.canComment,b.currentUserAvatarUrl,b.currentUserLogin,b.hasCopilotAccess,b.tabSize]),{splitPagePaneHidden:E,splitPageContentHidden:L,isTreeExpanded:R,isMobileTreeExpanded:A,treeToggleElement:D,treeContainerElement:P,collapseTree:O}=function(e,t,n){let[a]=(0,nc.I)(()=>!1,!0,[]),i=(0,v.useRef)(null),s=(0,v.useRef)(null),r=(0,v.useRef)(null),l=no.Gy.large,[c,d]=(0,v.useState)(t),[u,m]=(0,v.useState)(!1),[p,h]=(0,v.useState)(!1),f=(0,v.useCallback)(()=>{let e=(0,no.nn)(window.innerWidth);if(i.current&&e>l){let e=i.current?.getBoundingClientRect().width??0;(0,no.nn)(e)<l&&h(!0)}e<=l?(m(!0),requestAnimationFrame(()=>r.current?.focus())):(d(!0),(0,nd.B)(!0,n),requestAnimationFrame(()=>s.current?.focus()))},[l,n]),g=(0,v.useCallback)(()=>{let e=(0,no.nn)(window.innerWidth);h(!1),m(!1),e<=l?requestAnimationFrame(()=>r.current?.focus()):(d(!1),(0,nd.B)(!1,n),requestAnimationFrame(()=>s.current?.focus()))},[l,n]),y=(0,v.useMemo)(()=>(0,o.jsx)(nl.L,{expanded:c,alignment:"left",ariaLabel:c?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{c?g():f()},className:"d-none d-lg-flex position-relative",size:"small"}),[c,e,g,f]),x=(0,v.useMemo)(()=>(0,o.jsx)(nl.L,{expanded:u,alignment:"left",ariaLabel:u?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,onToggleExpanded:()=>{u?g():f()},className:"d-lg-none position-relative",size:"small"}),[u,e,g,f]),b=(0,v.useMemo)(()=>(0,o.jsx)("div",{ref:i,style:{width:"100%"}}),[]);return{splitPagePaneHidden:a&&!t,splitPageContentHidden:p,isTreeExpanded:c,isMobileTreeExpanded:u,expandTree:f,collapseTree:g,treeToggleElement:(0,v.useMemo)(()=>(0,o.jsxs)(o.Fragment,{children:[x,y]}),[x,y]),treeContainerElement:b}}(ec,b.isFileTreeExpanded&&!n.treeCollapsedByDefault,T),B={basePath:s.pathName};e&&(B.initialData=e);let{data:F}=(0,N.dG)(B),{setCodeowners:M}=(0,I.wh)();(0,v.useEffect)(()=>{M(F)},[F,M]);let $=(0,I.qg)(),V=(0,I.I8)(),{updateDiffFilter:U}=(0,I.or)();(0,v.useEffect)(()=>{U({...i.initialState,unselectedFileExtensions:new Set(i.initialState.unselectedFileExtensions)})},[U,i.initialState]);let q=(0,I.mU)(),W=(0,v.useCallback)(e=>{U(e,!0)},[U]),H=(0,v.useCallback)(()=>{(A||L)&&O()},[O,A,L]),K=(0,v.useMemo)(()=>(0,o.jsx)(k,{basePath:s.pathName,fileFilterMenuOptions:i.menuOptions,fileFilterState:V,setFileFilterState:W,viewerLogin:T.login,filterSize:R?"medium":"small"}),[T.login,i.menuOptions,V,R,s.pathName,W]),{aliveChannel:J,bannersData:X}=(0,ni.o)(),{showPullRequestGroups:Z}=function({useChangeGroups:e}){let t=(0,I.gt)(),n=e&&t,a=(0,I.iY)(),i=!!(a&&a.length>0),s=(0,t3.u)("generate_groups_on_files_view"),{mutate:r}=function(){let e=(0,z.e)(G.u.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,I.wL)();return(0,Q.n)({mutationFn:async()=>{let t=await (0,Y.q$)(e,{method:"POST"}),n=await (0,Y.hp)(t);return(0,Y.R)(t,n),n},onSuccess:e=>{t(e)}})}(),l=(0,I.Fl)(),o=l&&(ei(l.state)||!ea(l.state)),c=(0,eo.ww)(),d=(0,v.useRef)(!1);return(0,v.useEffect)(()=>{d.current||!s||!n||i||c||o||(r(),d.current=!0)},[t,e,s,r,n,i,o,c]),{showPullRequestGroups:n,hasChangeGroups:i}}({useChangeGroups:n.useChangeGroups});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.ak,{commands:{"commit-diff-view:collapse-expand-comments":S}}),P,n.useAdvancedToolbar||n.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[n.useAdvancedToolbar&&(0,o.jsx)(t8,{changeGroupsPreferenceAvailable:Z,commits:t,currentUserLogin:b.currentUserLogin,fileFilter:K,isFileTreeExpanded:R,lastReviewOid:b.lastReviewOid,pageLimits:m,pullRequest:s,repository:r,shouldShowViewedFilesCount:b.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:D,bannersData:X,urls:x,user:b,aliveChannel:J}),n.useBasicToolbar&&(0,o.jsx)(nr,{fileFilter:K,isFileTreeExpanded:R,shouldShowViewedFilesCount:b.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:D}),A&&(0,o.jsx)(f.l,{onClose:()=>O(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(ed,{fileFilter:K,filteredDiffs:q,onFileSelected:H,onSetFilterState:W,allowPullRequestGroups:Z})})]}):null,n.useFileTree?(0,o.jsx)(g.O7.Pane,{position:"start",sticky:!0,offsetHeader:n.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,y.$)(nn.PaneOverflowVisible,E?nn.HiddenPane:nn.Pane,A&&nn.MobileExpanded,R&&nn.TreeExpanded,L&&nn.MainContentHidden),divider:{regular:L?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!L,children:(0,o.jsx)(ed,{className:(0,y.$)(em.sidebar,nn.PaneContain),fileFilter:K,filteredDiffs:q,onFileSelected:H,onSetFilterState:W,allowPullRequestGroups:Z})}):null,(0,o.jsxs)(g.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:L},padding:"none",className:(0,y.$)(nn.Content,R&&nn.TreeExpanded),children:[(0,o.jsx)(eg,{pageLimits:m,repository:r,urls:x}),_?(0,o.jsx)(n0,{basePath:s.pathName,currentUser:T,filteredDiffSummaries:q,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,pullRequestGlobalRelayId:s.globalRelayId,repository:r}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(nY,{basePath:s.pathName,currentUser:T,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,onSetFilterState:W,pullRequestGlobalRelayId:s.globalRelayId,filteredDiffSummaries:q,repository:r,showPullRequestGroups:!0})})]})]})}function n4(e){return(0,o.jsx)("div",{className:(0,y.$)(nn.Container,e.className),children:(0,o.jsx)(g.O7,{children:e.children})})}let n5=Object.assign({},{Container:n4,Header:g.O7.Header,Viewer:n2});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{n2.displayName||(n2.displayName="BaseDiffComparisonViewer")}catch{}try{n3.displayName||(n3.displayName="InternalDiffComparisonViewer")}catch{}try{(l=FilterFilterComponent).displayName||(l.displayName="FilterFilterComponent")}catch{}try{n4.displayName||(n4.displayName="Container")}catch{}try{n5.displayName||(n5.displayName="DiffComparisonViewer")}catch{}},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var a=n(96540);let i=(0,a.createContext)(null),s=i.Provider;function r(){let e=(0,a.useContext)(i);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{i.displayName||(i.displayName="LoopsServiceContext")}catch{}},99896:(e,t,n)=>{n.d(t,{xC:()=>N,B6:()=>I,ym:()=>L});var a=n(74848),i=n(21728),s=n(38621),r=n(87448),l=n(55255),o=n(10436),c=n(96540),d=n(34164),u=n(69726),m=n(15220),p=n(77430),h=n(57352),f=n(11196);let g={Box:"CheckRunItem-module__Box--LZ7kH",Box_1:"CheckRunItem-module__Box_1--uqwhY",Link:"CheckRunItem-module__Link--sKVjI",Text:"CheckRunItem-module__Text--yCiXY",Text_1:"CheckRunItem-module__Text_1--byPUg",Text_2:"CheckRunItem-module__Text_2--JMqoY",Link_1:"CheckRunItem-module__Link_1--i579_",Box_2:"CheckRunItem-module__Box_2--Ht42S"};function y(e){let t,n,r,l,o,c,d,u,m,y,v,x,b,_=(0,i.c)(37),{checkRun:w}=e;_[0]!==w.icon?(t=function(e){switch(e){case"check":return(0,a.jsx)(s.CheckIcon,{className:"fgColor-success my-0 mx-2 flex-self-center"});case"dot-fill":return(0,a.jsx)(s.DotFillIcon,{className:"fgColor-attention my-0 mx-2 flex-self-center"});case"stop":return(0,a.jsx)(s.StopIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"issue-reopened":return(0,a.jsx)(s.IssueReopenedIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"clock":return(0,a.jsx)(s.ClockIcon,{className:"fgColor-attention my-0 mx-2 flex-self-center"});case"square-fill":return(0,a.jsx)(s.SquareFillIcon,{className:"fgColor-default my-0 mx-2 flex-self-center"});case"skip":return(0,a.jsx)(s.SkipIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"alert":return(0,a.jsx)(s.AlertIcon,{className:"fgColor-danger my-0 mx-2 flex-self-center"});default:return(0,a.jsx)(s.XIcon,{className:"fgColor-danger my-0 mx-2 flex-self-center"})}}(w.icon),_[0]=w.icon,_[1]=t):t=_[1];let j=t,N="in_progress"===w.state;return _[2]!==j||_[3]!==N?(n=N?(0,a.jsx)("div",{className:g.Box_2,children:(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 16 16",className:"anim-rotate","aria-hidden":"true",role:"img",children:[(0,a.jsx)("path",{opacity:".5",d:"M8 15A7 7 0 108 1a7 7 0 000 14v0z",stroke:"#dbab0a",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M15 8a7 7 0 01-7 7",stroke:"#dbab0a",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 12a4 4 0 100-8 4 4 0 000 8z",fill:"#dbab0a"})]})}):(0,a.jsx)(a.Fragment,{children:j}),_[2]=j,_[3]=N,_[4]=n):n=_[4],_[5]!==w.avatarBackgroundColor?(r={backgroundColor:w.avatarBackgroundColor},_[5]=w.avatarBackgroundColor,_[6]=r):r=_[6],_[7]!==w.avatarLogo||_[8]!==r?(l=(0,a.jsx)(p.r,{square:!0,src:w.avatarLogo,sx:r}),_[7]=w.avatarLogo,_[8]=r,_[9]=l):l=_[9],_[10]!==w.avatarUrl||_[11]!==l?(o=(0,a.jsx)(h.A,{href:w.avatarUrl,"aria-label":"Avatar",className:g.Link,children:l}),_[10]=w.avatarUrl,_[11]=l,_[12]=o):o=_[12],_[13]!==w.avatarDescription||_[14]!==o?(c=(0,a.jsx)(f.m,{text:w.avatarDescription,direction:"e",children:o}),_[13]=w.avatarDescription,_[14]=o,_[15]=c):c=_[15],_[16]!==n||_[17]!==c?(d=(0,a.jsxs)("div",{className:g.Box_1,children:[n,c]}),_[16]=n,_[17]=c,_[18]=d):d=_[18],_[19]!==w.name?(u=(0,a.jsxs)("span",{className:g.Text_1,children:[w.name," "]}),_[19]=w.name,_[20]=u):u=_[20],_[21]!==w.additionalContext||_[22]!==w.pending?(m=w.pending?(0,a.jsx)("span",{className:g.Text_2,children:w.additionalContext}):w.additionalContext,_[21]=w.additionalContext,_[22]=w.pending,_[23]=m):m=_[23],_[24]!==w.description||_[25]!==w.pending?(y=w.description&&(0,a.jsxs)("span",{children:[" ","- ",w.pending?(0,a.jsx)("span",{className:g.Text_2,children:w.description}):w.description]}),_[24]=w.description,_[25]=w.pending,_[26]=y):y=_[26],_[27]!==y||_[28]!==u||_[29]!==m?(v=(0,a.jsxs)("span",{className:g.Text,children:[u,m,y]}),_[27]=y,_[28]=u,_[29]=m,_[30]=v):v=_[30],_[31]!==w.targetUrl?(x=(0,a.jsx)(h.A,{href:w.targetUrl,className:g.Link_1,children:"Details"}),_[31]=w.targetUrl,_[32]=x):x=_[32],_[33]!==v||_[34]!==x||_[35]!==d?(b=(0,a.jsxs)("li",{"data-testid":"check-run-item",className:g.Box,children:[d,v,x]}),_[33]=v,_[34]=x,_[35]=d,_[36]=b):b=_[36],b}try{y.displayName||(y.displayName="CheckRunItem")}catch{}let v={Box:"ChecksStatusBadgeFooter-module__Box--A9a95"};function x(e){let t,n,s=(0,i.c)(4),{checkRuns:r}=e;return s[0]!==r?(t=r.map(b),s[0]=r,s[1]=t):t=s[1],s[2]!==t?(n=(0,a.jsx)("ul",{className:v.Box,children:t}),s[2]=t,s[3]=n):n=s[3],n}function b(e,t){return(0,a.jsx)(y,{checkRun:e},t)}try{x.displayName||(x.displayName="ChecksStatusBadgeFooter")}catch{}let _={Text:"ChecksStatusBadgeHeader-module__Text--mNbul",Text_1:"ChecksStatusBadgeHeader-module__Text_1--Ccfb0",Text_2:"ChecksStatusBadgeHeader-module__Text_2--d8Yn7"};function w(e){let t=(0,i.c)(4),{checksHeaderState:n}=e;switch(n){case"SUCCEEDED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{className:_.Text,children:"All checks have passed"}),t[0]=e):e=t[0],e}case"FAILED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{className:_.Text_1,children:"All checks have failed"}),t[1]=e):e=t[1],e}case"PENDING":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{className:_.Text_2,children:"Some checks haven\u2019t completed yet"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{className:_.Text_1,children:"Some checks were not successful"}),t[3]=e):e=t[3],e}}}try{w.displayName||(w.displayName="HeaderState")}catch{}let j={Dialog:"CheckStatusDialog-module__Dialog--k1EnR",Dialog_Body:"CheckStatusDialog-module__Dialog_Body--sRD_i",Box:"CheckStatusDialog-module__Box--uYuTX"};function N(e){let t,n,s=(0,i.c)(7),{combinedStatus:r,isOpen:l,onDismiss:o}=e;s[0]!==r?(t=r?(0,a.jsx)(w,{checksHeaderState:r.checksHeaderState}):"Loading...",s[0]=r,s[1]=t):t=s[1];let c=t;return s[2]!==r||s[3]!==l||s[4]!==o||s[5]!==c?(n=l?(0,a.jsx)(m.l,{onClose:o,title:c,subtitle:r?r.checksStatusSummary:void 0,width:"xlarge",renderBody:()=>(0,a.jsx)(m.l.Body,{className:j.Dialog_Body,children:r?(0,a.jsx)(x,{checkRuns:r.checkRuns}):(0,a.jsx)("div",{className:j.Box,children:(0,a.jsx)(u.A,{size:"medium"})})}),className:j.Dialog}):null,s[2]=r,s[3]=l,s[4]=o,s[5]=c,s[6]=n):n=s[6],n}try{N.displayName||(N.displayName="CheckStatusDialog")}catch{}let k={ChecksStatusBadgeButton:"ChecksStatusBadge-module__ChecksStatusBadgeButton--rZYKL",ChecksStatusBadgeIconButton:"ChecksStatusBadge-module__ChecksStatusBadgeIconButton--rpD4z"},C={success:{circled:s.CheckCircleIcon,filled:s.CheckCircleFillIcon,default:s.CheckIcon,color:"var(--bgColor-success-emphasis, var(--color-success-emphasis))"},pending:{circled:s.CircleIcon,filled:s.DotFillIcon,default:s.DotFillIcon,color:"var(--bgColor-attention-emphasis, var(--color-scale-yellow-4))"},failure:{circled:s.XCircleIcon,filled:s.XCircleFillIcon,default:s.XIcon,color:"var(--bgColor-danger-emphasis, var(--color-scale-red-4))"},error:{circled:s.QuestionIcon,filled:s.QuestionIcon,default:s.QuestionIcon,color:"var(--fgColor-muted, var(--color-canvas-subtle))"}};function S(e){let t,n,s,r,u,m=(0,i.c)(19),{className:p,descriptionText:h,icon:f,iconColor:g,tooltipText:y}=e,v=(0,c.useId)(),x=y?v:void 0,b=y?void 0:h||"See all checks";m[0]!==g?(t={color:g},m[0]=g,m[1]=t):t=m[1],m[2]!==f||m[3]!==x||m[4]!==b||m[5]!==t?(n=(0,a.jsx)(o.m4,{"aria-labelledby":x,icon:f,"aria-label":b,sx:t}),m[2]=f,m[3]=x,m[4]=b,m[5]=t,m[6]=n):n=m[6];let _=n;if(y){let e;m[7]!==_||m[8]!==v||m[9]!==y?(e=(0,a.jsx)(l.A,{id:v,"aria-label":y,direction:"e",children:_}),m[7]=_,m[8]=v,m[9]=y,m[10]=e):e=m[10],_=e}return m[11]!==p?(s=(0,d.$)(p,"d-flex flex-items-center gap-1"),m[11]=p,m[12]=s):s=m[12],m[13]!==h?(r=h&&(0,a.jsxs)("span",{children:[" ",h]}),m[13]=h,m[14]=r):r=m[14],m[15]!==_||m[16]!==s||m[17]!==r?(u=(0,a.jsxs)("span",{className:s,"data-testid":"checks-status-badge-icon-only",children:[_,r]}),m[15]=_,m[16]=s,m[17]=r,m[18]=u):u=m[18],u}function I(e){let t,n,s,l,o=(0,i.c)(27),{statusRollup:u,combinedStatus:m,variant:p,disablePopover:h,buttonClassName:f,buttonSx:g,size:y,descriptionText:v,onWillOpenPopup:x}=e,b=void 0===p?"default":p,_=void 0===y?"medium":y,w=void 0===v?"":v,[j,I]=(0,c.useState)(!1),T=(0,c.useRef)(null),E=C[u],L=E?.[b]||C.error[b],R=E?.color||C.error.color;o[0]!==L||o[1]!==R?(t={icon:L,iconColor:R},o[0]=L,o[1]=R,o[2]=t):t=o[2];let{icon:A,iconColor:D}=t;if("error"===u){let e,t=h?void 0:"p-1";return o[3]!==A||o[4]!==D||o[5]!==t?(e=(0,a.jsx)(S,{className:t,descriptionText:"?/?",icon:A,iconColor:D,tooltipText:"There was an error retrieving checks status"}),o[3]=A,o[4]=D,o[5]=t,o[6]=e):e=o[6],e}if(h){let e;return o[7]!==w||o[8]!==A||o[9]!==D?(e=(0,a.jsx)(S,{descriptionText:w,icon:A,iconColor:D}),o[7]=w,o[8]=A,o[9]=D,o[10]=e):e=o[10],e}return o[11]!==f||o[12]!==g||o[13]!==m?.checksStatusSummary||o[14]!==w||o[15]!==x||o[16]!==A||o[17]!==D||o[18]!==_||o[19]!==u?(n=w?(0,a.jsx)(r.$n,{"data-testid":"checks-status-badge-button",leadingVisual:A,variant:"invisible",size:_,"aria-label":m?.checksStatusSummary??`Status checks: ${u}`,sx:{svg:{color:D},...g},ref:T,onClick:()=>{x?.(),I(!0)},className:(0,d.$)(k.ChecksStatusBadgeButton,f),children:w}):(0,a.jsx)(r.K0,{"data-testid":"checks-status-badge-icon",tooltipDirection:"s",icon:A,variant:"invisible",size:_,"aria-label":m?.checksStatusSummary??u,sx:{svg:{color:D},...g},className:(0,d.$)(k.ChecksStatusBadgeIconButton,f),ref:T,onClick:()=>{x?.(),I(!0)}}),o[11]=f,o[12]=g,o[13]=m?.checksStatusSummary,o[14]=w,o[15]=x,o[16]=A,o[17]=D,o[18]=_,o[19]=u,o[20]=n):n=o[20],o[21]!==m||o[22]!==j?(s=j&&(0,a.jsx)(N,{combinedStatus:m,isOpen:j,onDismiss:()=>{I(!1),setTimeout(()=>{T.current?.focus()},0)}}),o[21]=m,o[22]=j,o[23]=s):s=o[23],o[24]!==n||o[25]!==s?(l=(0,a.jsxs)(a.Fragment,{children:[n,s]}),o[24]=n,o[25]=s,o[26]=l):l=o[26],l}try{S.displayName||(S.displayName="IconOnlyStatus")}catch{}try{I.displayName||(I.displayName="ChecksStatusBadge")}catch{}var T=n(25407),E=n(96379);function L(e,t){let n,a,s=(0,i.c)(7),[r,l]=(0,c.useState)(),[o,d]=(0,c.useState)();s[0]!==e||s[1]!==o||s[2]!==t?(n=async()=>{if(o!==e&&(d(e),l(void 0),e)){let n=(0,T.vki)(t,e),a=await (0,E.lS)(n);l(await a.json())}},s[0]=e,s[1]=o,s[2]=t,s[3]=n):n=s[3];let u=n;return s[4]!==r||s[5]!==u?(a=[r,u],s[4]=r,s[5]=u,s[6]=a):a=s[6],a}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>h,c_:()=>p});var a=n(21728),i=n(97665),s=n(97286),r=n(88934),l=n(99519),o=n(78456),c=n(33026),d=n(50050),u=n(90756);let m="loop";function p(e,t){return[m,e,t]}function h(e,t){let n,h,y,v,x=(0,a.c)(15),{loopID:b}=(0,r.g)(),_=(0,l.EY)(),w=(0,i.jE)(),j=(0,d.Ud)(g),N=t||j||c.kj;x[0]!==b||x[1]!==N?(n=[m,b,N],x[0]=b,x[1]=N,x[2]=n):n=x[2];let k=n;x[3]!==b||x[4]!==w||x[5]!==_||x[6]!==N?(h=async()=>{if(!b)return null;let e=o.Io.find(e=>e.id===b)??null;if(e)return e;let t=await _.getLoop(b,N);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==N&&w.setQueryData(p(t.data.id,t.data.version),t.data),t.data},x[3]=b,x[4]=w,x[5]=_,x[6]=N,x[7]=h):h=x[7];let C=!!b;return x[8]!==e?(y=e&&{select:e},x[8]=e,x[9]=y):y=x[9],x[10]!==k||x[11]!==h||x[12]!==C||x[13]!==y?(v={placeholderData:f,queryKey:k,queryFn:h,enabled:C,...y,staleTime:3e5},x[10]=k,x[11]=h,x[12]=C,x[13]=y,x[14]=v):v=x[14],(0,s.I)(v)}function f(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=packages_agent-sessions_agents-plugin_ts-packages_agent-sessions_tasks-plugin_ts-packages_cod-3f1b00-e0016f6b8974.js.map